/*! jQuery v1.7.2 jquery.com | jquery.org/license */

/**
 * jQuery Validation Plugin 1.9.0
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright (c) 2006 - 2011 JÃ¶rn Zaefferer
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */

function isIdCardNo(e){var t,i=e.length;if(15==i)t=new RegExp(/^(\d{6})()?(\d{2})(\d{2})(\d{2})(\d{2})(\w)$/);else{if(18!=i)return!1;t=new RegExp(/^(\d{6})()?(\d{4})(\d{2})(\d{2})(\d{3})(\w)$/)}var r=e.match(t);if(null!=r){if(15==i)var n=new Date("19"+r[3]+"/"+r[4]+"/"+r[5]),a=n.getYear()==r[3]&&n.getMonth()+1==r[4]&&n.getDate()==r[5];else var n=new Date(r[3]+"/"+r[4]+"/"+r[5]),a=n.getFullYear()==r[3]&&n.getMonth()+1==r[4]&&n.getDate()==r[5];if(!a)return!1}return t.test(e)?!0:!1}!function(e,t){function i(e){return P.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}function r(e){if(!bt[e]){var t=R.body,i=P("<"+e+">").appendTo(t),r=i.css("display");i.remove(),("none"===r||""===r)&&(pt||(pt=R.createElement("iframe"),pt.frameBorder=pt.width=pt.height=0),t.appendChild(pt),ft&&pt.createElement||(ft=(pt.contentWindow||pt.contentDocument).document,ft.write((P.support.boxModel?"<!doctype html>":"")+"<html><body>"),ft.close()),i=ft.createElement(e),ft.body.appendChild(i),r=P.css(i,"display"),t.removeChild(pt)),bt[e]=r}return bt[e]}function n(e,t){var i={};return P.each(wt.concat.apply([],wt.slice(0,t)),function(){i[this]=e}),i}function a(){mt=t}function o(){return setTimeout(a,0),mt=P.now()}function l(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function s(){try{return new e.XMLHttpRequest}catch(t){}}function d(e,i){e.dataFilter&&(i=e.dataFilter(i,e.dataType));var r,n,a,o,l,s,d,c,u=e.dataTypes,h={},g=u.length,p=u[0];for(r=1;g>r;r++){if(1===r)for(n in e.converters)"string"==typeof n&&(h[n.toLowerCase()]=e.converters[n]);if(o=p,p=u[r],"*"===p)p=o;else if("*"!==o&&o!==p){if(l=o+" "+p,s=h[l]||h["* "+p],!s){c=t;for(d in h)if(a=d.split(" "),(a[0]===o||"*"===a[0])&&(c=h[a[1]+" "+p])){d=h[d],d===!0?s=c:c===!0&&(s=d);break}}!s&&!c&&P.error("No conversion from "+l.replace(" "," to ")),s!==!0&&(i=s?s(i):c(d(i)))}}return i}function c(e,i,r){var n,a,o,l,s=e.contents,d=e.dataTypes,c=e.responseFields;for(a in c)a in r&&(i[c[a]]=r[a]);for(;"*"===d[0];)d.shift(),n===t&&(n=e.mimeType||i.getResponseHeader("content-type"));if(n)for(a in s)if(s[a]&&s[a].test(n)){d.unshift(a);break}if(d[0]in r)o=d[0];else{for(a in r){if(!d[0]||e.converters[a+" "+d[0]]){o=a;break}l||(l=a)}o=o||l}return o?(o!==d[0]&&d.unshift(o),r[o]):void 0}function u(e,t,i,r){if(P.isArray(t))P.each(t,function(t,n){i||Ve.test(e)?r(e,n):u(e+"["+("object"==typeof n?t:"")+"]",n,i,r)});else if(i||"object"!==P.type(t))r(e,t);else for(var n in t)u(e+"["+n+"]",t[n],i,r)}function h(e,i){var r,n,a=P.ajaxSettings.flatOptions||{};for(r in i)i[r]!==t&&((a[r]?e:n||(n={}))[r]=i[r]);n&&P.extend(!0,e,n)}function g(e,i,r,n,a,o){a=a||i.dataTypes[0],o=o||{},o[a]=!0;for(var l,s=e[a],d=0,c=s?s.length:0,u=e===at;c>d&&(u||!l);d++)l=s[d](i,r,n),"string"==typeof l&&(!u||o[l]?l=t:(i.dataTypes.unshift(l),l=g(e,i,r,n,l,o)));return(u||!l)&&!o["*"]&&(l=g(e,i,r,n,"*",o)),l}function p(e){return function(t,i){if("string"!=typeof t&&(i=t,t="*"),P.isFunction(i))for(var r,n,a,o=t.toLowerCase().split(tt),l=0,s=o.length;s>l;l++)r=o[l],a=/^\+/.test(r),a&&(r=r.substr(1)||"*"),n=e[r]=e[r]||[],n[a?"unshift":"push"](i)}}function f(e,t,i){var r="width"===t?e.offsetWidth:e.offsetHeight,n="width"===t?1:0,a=4;if(r>0){if("border"!==i)for(;a>n;n+=2)i||(r-=parseFloat(P.css(e,"padding"+Ae[n]))||0),"margin"===i?r+=parseFloat(P.css(e,i+Ae[n]))||0:r-=parseFloat(P.css(e,"border"+Ae[n]+"Width"))||0;return r+"px"}if(r=$e(e,t),(0>r||null==r)&&(r=e.style[t]),Me.test(r))return r;if(r=parseFloat(r)||0,i)for(;a>n;n+=2)r+=parseFloat(P.css(e,"padding"+Ae[n]))||0,"padding"!==i&&(r+=parseFloat(P.css(e,"border"+Ae[n]+"Width"))||0),"margin"===i&&(r+=parseFloat(P.css(e,i+Ae[n]))||0);return r+"px"}function v(e){var t=R.createElement("div");return Fe.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function m(e){var t=(e.nodeName||"").toLowerCase();"input"===t?b(e):"script"!==t&&"undefined"!=typeof e.getElementsByTagName&&P.grep(e.getElementsByTagName("input"),b)}function b(e){("checkbox"===e.type||"radio"===e.type)&&(e.defaultChecked=e.checked)}function x(e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll("*"):[]}function y(e,t){var i;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),i=t.nodeName.toLowerCase(),"object"===i?t.outerHTML=e.outerHTML:"input"!==i||"checkbox"!==e.type&&"radio"!==e.type?"option"===i?t.selected=e.defaultSelected:"input"===i||"textarea"===i?t.defaultValue=e.defaultValue:"script"===i&&t.text!==e.text&&(t.text=e.text):(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value)),t.removeAttribute(P.expando),t.removeAttribute("_submit_attached"),t.removeAttribute("_change_attached"))}function w(e,t){if(1===t.nodeType&&P.hasData(e)){var i,r,n,a=P._data(e),o=P._data(t,a),l=a.events;if(l){delete o.handle,o.events={};for(i in l)for(r=0,n=l[i].length;n>r;r++)P.event.add(t,i,l[i][r])}o.data&&(o.data=P.extend({},o.data))}}function C(e,t){return P.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function _(e){var t=pe.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function D(e,t,i){if(t=t||0,P.isFunction(t))return P.grep(e,function(e,r){var n=!!t.call(e,r,e);return n===i});if(t.nodeType)return P.grep(e,function(e,r){return e===t===i});if("string"==typeof t){var r=P.grep(e,function(e){return 1===e.nodeType});if(ce.test(t))return P.filter(t,r,!i);t=P.filter(t,r)}return P.grep(e,function(e,r){return P.inArray(e,t)>=0===i})}function k(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function T(){return!0}function B(){return!1}function F(e,t,i){var r=t+"defer",n=t+"queue",a=t+"mark",o=P._data(e,r);o&&("queue"===i||!P._data(e,n))&&("mark"===i||!P._data(e,a))&&setTimeout(function(){!P._data(e,n)&&!P._data(e,a)&&(P.removeData(e,r,!0),o.fire())},0)}function $(e){for(var t in e)if(("data"!==t||!P.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function S(e,i,r){if(r===t&&1===e.nodeType){var n="data-"+i.replace(z,"-$1").toLowerCase();if(r=e.getAttribute(n),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:P.isNumeric(r)?+r:L.test(r)?P.parseJSON(r):r}catch(a){}P.data(e,i,r)}else r=t}return r}function I(e){var t,i,r=M[e]={};for(e=e.split(/\s+/),t=0,i=e.length;i>t;t++)r[e[t]]=!0;return r}var R=e.document,N=e.navigator,E=e.location,P=function(){function i(){if(!l.isReady){try{R.documentElement.doScroll("left")}catch(e){return void setTimeout(i,1)}l.ready()}}var r,n,a,o,l=function(e,t){return new l.fn.init(e,t,r)},s=e.jQuery,d=e.$,c=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,u=/\S/,h=/^\s+/,g=/\s+$/,p=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,f=/^[\],:{}\s]*$/,v=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,m=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,b=/(?:^|:|,)(?:\s*\[)+/g,x=/(webkit)[ \/]([\w.]+)/,y=/(opera)(?:.*version)?[ \/]([\w.]+)/,w=/(msie) ([\w.]+)/,C=/(mozilla)(?:.*? rv:([\w.]+))?/,_=/-([a-z]|[0-9])/gi,D=/^-ms-/,k=function(e,t){return(t+"").toUpperCase()},T=N.userAgent,B=Object.prototype.toString,F=Object.prototype.hasOwnProperty,$=Array.prototype.push,S=Array.prototype.slice,I=String.prototype.trim,E=Array.prototype.indexOf,P={};return l.fn=l.prototype={constructor:l,init:function(e,i,r){var n,a,o,s;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("body"===e&&!i&&R.body)return this.context=R,this[0]=R.body,this.selector=e,this.length=1,this;if("string"==typeof e){if(n="<"!==e.charAt(0)||">"!==e.charAt(e.length-1)||e.length<3?c.exec(e):[null,e,null],n&&(n[1]||!i)){if(n[1])return i=i instanceof l?i[0]:i,s=i?i.ownerDocument||i:R,o=p.exec(e),o?l.isPlainObject(i)?(e=[R.createElement(o[1])],l.fn.attr.call(e,i,!0)):e=[s.createElement(o[1])]:(o=l.buildFragment([n[1]],[s]),e=(o.cacheable?l.clone(o.fragment):o.fragment).childNodes),l.merge(this,e);if(a=R.getElementById(n[2]),a&&a.parentNode){if(a.id!==n[2])return r.find(e);this.length=1,this[0]=a}return this.context=R,this.selector=e,this}return!i||i.jquery?(i||r).find(e):this.constructor(i).find(e)}return l.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),l.makeArray(e,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return S.call(this,0)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,i){var r=this.constructor();return l.isArray(e)?$.apply(r,e):l.merge(r,e),r.prevObject=this,r.context=this.context,"find"===t?r.selector=this.selector+(this.selector?" ":"")+i:t&&(r.selector=this.selector+"."+t+"("+i+")"),r},each:function(e,t){return l.each(this,e,t)},ready:function(e){return l.bindReady(),a.add(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(S.apply(this,arguments),"slice",S.call(arguments).join(","))},map:function(e){return this.pushStack(l.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:$,sort:[].sort,splice:[].splice},l.fn.init.prototype=l.fn,l.extend=l.fn.extend=function(){var e,i,r,n,a,o,s=arguments[0]||{},d=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},d=2),"object"!=typeof s&&!l.isFunction(s)&&(s={}),c===d&&(s=this,--d);c>d;d++)if(null!=(e=arguments[d]))for(i in e)r=s[i],n=e[i],s!==n&&(u&&n&&(l.isPlainObject(n)||(a=l.isArray(n)))?(a?(a=!1,o=r&&l.isArray(r)?r:[]):o=r&&l.isPlainObject(r)?r:{},s[i]=l.extend(u,o,n)):n!==t&&(s[i]=n));return s},l.extend({noConflict:function(t){return e.$===l&&(e.$=d),t&&e.jQuery===l&&(e.jQuery=s),l},isReady:!1,readyWait:1,holdReady:function(e){e?l.readyWait++:l.ready(!0)},ready:function(e){if(e===!0&&!--l.readyWait||e!==!0&&!l.isReady){if(!R.body)return setTimeout(l.ready,1);if(l.isReady=!0,e!==!0&&--l.readyWait>0)return;a.fireWith(R,[l]),l.fn.trigger&&l(R).trigger("ready").off("ready")}},bindReady:function(){if(!a){if(a=l.Callbacks("once memory"),"complete"===R.readyState)return setTimeout(l.ready,1);if(R.addEventListener)R.addEventListener("DOMContentLoaded",o,!1),e.addEventListener("load",l.ready,!1);else if(R.attachEvent){R.attachEvent("onreadystatechange",o),e.attachEvent("onload",l.ready);var t=!1;try{t=null==e.frameElement}catch(r){}R.documentElement.doScroll&&t&&i()}}},isFunction:function(e){return"function"===l.type(e)},isArray:Array.isArray||function(e){return"array"===l.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):P[B.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==l.type(e)||e.nodeType||l.isWindow(e))return!1;try{if(e.constructor&&!F.call(e,"constructor")&&!F.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var r;for(r in e);return r===t||F.call(e,r)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){return"string"==typeof t&&t?(t=l.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):f.test(t.replace(v,"@").replace(m,"]").replace(b,""))?new Function("return "+t)():void l.error("Invalid JSON: "+t)):null},parseXML:function(i){if("string"!=typeof i||!i)return null;var r,n;try{e.DOMParser?(n=new DOMParser,r=n.parseFromString(i,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(i))}catch(a){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&l.error("Invalid XML: "+i),r},noop:function(){},globalEval:function(t){t&&u.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(D,"ms-").replace(_,k)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,i,r){var n,a=0,o=e.length,s=o===t||l.isFunction(e);if(r)if(s){for(n in e)if(i.apply(e[n],r)===!1)break}else for(;o>a&&i.apply(e[a++],r)!==!1;);else if(s){for(n in e)if(i.call(e[n],n,e[n])===!1)break}else for(;o>a&&i.call(e[a],a,e[a++])!==!1;);return e},trim:I?function(e){return null==e?"":I.call(e)}:function(e){return null==e?"":(e+"").replace(h,"").replace(g,"")},makeArray:function(e,t){var i=t||[];if(null!=e){var r=l.type(e);null==e.length||"string"===r||"function"===r||"regexp"===r||l.isWindow(e)?$.call(i,e):l.merge(i,e)}return i},inArray:function(e,t,i){var r;if(t){if(E)return E.call(t,e,i);for(r=t.length,i=i?0>i?Math.max(0,r+i):i:0;r>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var r=e.length,n=0;if("number"==typeof i.length)for(var a=i.length;a>n;n++)e[r++]=i[n];else for(;i[n]!==t;)e[r++]=i[n++];return e.length=r,e},grep:function(e,t,i){var r,n=[];i=!!i;for(var a=0,o=e.length;o>a;a++)r=!!t(e[a],a),i!==r&&n.push(e[a]);return n},map:function(e,i,r){var n,a,o=[],s=0,d=e.length,c=e instanceof l||d!==t&&"number"==typeof d&&(d>0&&e[0]&&e[d-1]||0===d||l.isArray(e));if(c)for(;d>s;s++)n=i(e[s],s,r),null!=n&&(o[o.length]=n);else for(a in e)n=i(e[a],a,r),null!=n&&(o[o.length]=n);return o.concat.apply([],o)},guid:1,proxy:function(e,i){if("string"==typeof i){var r=e[i];i=e,e=r}if(!l.isFunction(e))return t;var n=S.call(arguments,2),a=function(){return e.apply(i,n.concat(S.call(arguments)))};return a.guid=e.guid=e.guid||a.guid||l.guid++,a},access:function(e,i,r,n,a,o,s){var d,c=null==r,u=0,h=e.length;if(r&&"object"==typeof r){for(u in r)l.access(e,i,u,r[u],1,o,n);a=1}else if(n!==t){if(d=s===t&&l.isFunction(n),c&&(d?(d=i,i=function(e,t,i){return d.call(l(e),i)}):(i.call(e,n),i=null)),i)for(;h>u;u++)i(e[u],r,d?n.call(e[u],u,i(e[u],r)):n,s);a=1}return a?e:c?i.call(e):h?i(e[0],r):o},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=x.exec(e)||y.exec(e)||w.exec(e)||e.indexOf("compatible")<0&&C.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,i){return new e.fn.init(t,i)}l.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(i,r){return r&&r instanceof l&&!(r instanceof e)&&(r=e(r)),l.fn.init.call(this,i,r,t)},e.fn.init.prototype=e.fn;var t=e(R);return e},browser:{}}),l.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){P["[object "+t+"]"]=t.toLowerCase()}),n=l.uaMatch(T),n.browser&&(l.browser[n.browser]=!0,l.browser.version=n.version),l.browser.webkit&&(l.browser.safari=!0),u.test(" ")&&(h=/^[\s\xA0]+/,g=/[\s\xA0]+$/),r=l(R),R.addEventListener?o=function(){R.removeEventListener("DOMContentLoaded",o,!1),l.ready()}:R.attachEvent&&(o=function(){"complete"===R.readyState&&(R.detachEvent("onreadystatechange",o),l.ready())}),l}(),M={};P.Callbacks=function(e){e=e?M[e]||I(e):{};var i,r,n,a,o,l,s=[],d=[],c=function(t){var i,r,n,a;for(i=0,r=t.length;r>i;i++)n=t[i],a=P.type(n),"array"===a?c(n):"function"===a&&(!e.unique||!h.has(n))&&s.push(n)},u=function(t,c){for(c=c||[],i=!e.memory||[t,c],r=!0,n=!0,l=a||0,a=0,o=s.length;s&&o>l;l++)if(s[l].apply(t,c)===!1&&e.stopOnFalse){i=!0;break}n=!1,s&&(e.once?i===!0?h.disable():s=[]:d&&d.length&&(i=d.shift(),h.fireWith(i[0],i[1])))},h={add:function(){if(s){var e=s.length;c(arguments),n?o=s.length:i&&i!==!0&&(a=e,u(i[0],i[1]))}return this},remove:function(){if(s)for(var t=arguments,i=0,r=t.length;r>i;i++)for(var a=0;a<s.length&&(t[i]!==s[a]||(n&&o>=a&&(o--,l>=a&&l--),s.splice(a--,1),!e.unique));a++);return this},has:function(e){if(s)for(var t=0,i=s.length;i>t;t++)if(e===s[t])return!0;return!1},empty:function(){return s=[],this},disable:function(){return s=d=i=t,this},disabled:function(){return!s},lock:function(){return d=t,(!i||i===!0)&&h.disable(),this},locked:function(){return!d},fireWith:function(t,r){return d&&(n?e.once||d.push([t,r]):(!e.once||!i)&&u(t,r)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!r}};return h};var j=[].slice;P.extend({Deferred:function(e){var t,i=P.Callbacks("once memory"),r=P.Callbacks("once memory"),n=P.Callbacks("memory"),a="pending",o={resolve:i,reject:r,notify:n},l={done:i.add,fail:r.add,progress:n.add,state:function(){return a},isResolved:i.fired,isRejected:r.fired,then:function(e,t,i){return s.done(e).fail(t).progress(i),this},always:function(){return s.done.apply(s,arguments).fail.apply(s,arguments),this},pipe:function(e,t,i){return P.Deferred(function(r){P.each({done:[e,"resolve"],fail:[t,"reject"],progress:[i,"notify"]},function(e,t){var i,n=t[0],a=t[1];P.isFunction(n)?s[e](function(){i=n.apply(this,arguments),i&&P.isFunction(i.promise)?i.promise().then(r.resolve,r.reject,r.notify):r[a+"With"](this===s?r:this,[i])}):s[e](r[a])})}).promise()},promise:function(e){if(null==e)e=l;else for(var t in l)e[t]=l[t];return e}},s=l.promise({});for(t in o)s[t]=o[t].fire,s[t+"With"]=o[t].fireWith;return s.done(function(){a="resolved"},r.disable,n.lock).fail(function(){a="rejected"},i.disable,n.lock),e&&e.call(s,s),s},when:function(e){function t(e){return function(t){o[e]=arguments.length>1?j.call(arguments,0):t,s.notifyWith(d,o)}}function i(e){return function(t){r[e]=arguments.length>1?j.call(arguments,0):t,--l||s.resolveWith(s,r)}}var r=j.call(arguments,0),n=0,a=r.length,o=Array(a),l=a,s=1>=a&&e&&P.isFunction(e.promise)?e:P.Deferred(),d=s.promise();if(a>1){for(;a>n;n++)r[n]&&r[n].promise&&P.isFunction(r[n].promise)?r[n].promise().then(i(n),s.reject,t(n)):--l;l||s.resolveWith(s,r)}else s!==e&&s.resolveWith(s,a?[e]:[]);return d}}),P.support=function(){var t,i,r,n,a,o,l,s,d,c,u,h=R.createElement("div");R.documentElement;if(h.setAttribute("className","t"),h.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",i=h.getElementsByTagName("*"),r=h.getElementsByTagName("a")[0],!i||!i.length||!r)return{};n=R.createElement("select"),a=n.appendChild(R.createElement("option")),o=h.getElementsByTagName("input")[0],t={leadingWhitespace:3===h.firstChild.nodeType,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.55/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:"on"===o.value,optSelected:a.selected,getSetAttribute:"t"!==h.className,enctype:!!R.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==R.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},P.boxModel=t.boxModel="CSS1Compat"===R.compatMode,o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,n.disabled=!0,t.optDisabled=!a.disabled;try{delete h.test}catch(g){t.deleteExpando=!1}if(!h.addEventListener&&h.attachEvent&&h.fireEvent&&(h.attachEvent("onclick",function(){t.noCloneEvent=!1}),h.cloneNode(!0).fireEvent("onclick")),o=R.createElement("input"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","checked"),o.setAttribute("name","t"),h.appendChild(o),l=R.createDocumentFragment(),l.appendChild(h.lastChild),t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=o.checked,l.removeChild(o),l.appendChild(h),h.attachEvent)for(c in{submit:1,change:1,focusin:1})d="on"+c,u=d in h,u||(h.setAttribute(d,"return;"),u="function"==typeof h[d]),t[c+"Bubbles"]=u;return l.removeChild(h),l=n=a=h=o=null,P(function(){var i,r,n,a,o,l,d,c,g,p,f,v,m=R.getElementsByTagName("body")[0];!m||(d=1,v="padding:0;margin:0;border:",p="position:absolute;top:0;left:0;width:1px;height:1px;",f=v+"0;visibility:hidden;",c="style='"+p+v+"5px solid #000;",g="<div "+c+"display:block;'><div style='"+v+"0;display:block;overflow:hidden;'></div></div><table "+c+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",i=R.createElement("div"),i.style.cssText=f+"width:0;height:0;position:static;top:0;margin-top:"+d+"px",m.insertBefore(i,m.firstChild),h=R.createElement("div"),i.appendChild(h),h.innerHTML="<table><tr><td style='"+v+"0;display:none'></td><td>t</td></tr></table>",s=h.getElementsByTagName("td"),u=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=u&&0===s[0].offsetHeight,e.getComputedStyle&&(h.innerHTML="",l=R.createElement("div"),l.style.width="0",l.style.marginRight="0",h.style.width="2px",h.appendChild(l),t.reliableMarginRight=0===(parseInt((e.getComputedStyle(l,null)||{marginRight:0}).marginRight,10)||0)),"undefined"!=typeof h.style.zoom&&(h.innerHTML="",h.style.width=h.style.padding="1px",h.style.border=0,h.style.overflow="hidden",h.style.display="inline",h.style.zoom=1,t.inlineBlockNeedsLayout=3===h.offsetWidth,h.style.display="block",h.style.overflow="visible",h.innerHTML="<div style='width:5px;'></div>",t.shrinkWrapBlocks=3!==h.offsetWidth),h.style.cssText=p+f,h.innerHTML=g,r=h.firstChild,n=r.firstChild,a=r.nextSibling.firstChild.firstChild,o={doesNotAddBorder:5!==n.offsetTop,doesAddBorderForTableAndCells:5===a.offsetTop},n.style.position="fixed",n.style.top="20px",o.fixedPosition=20===n.offsetTop||15===n.offsetTop,n.style.position=n.style.top="",r.style.overflow="hidden",r.style.position="relative",o.subtractsBorderForOverflowNotVisible=-5===n.offsetTop,o.doesNotIncludeMarginInBodyOffset=m.offsetTop!==d,e.getComputedStyle&&(h.style.marginTop="1%",t.pixelMargin="1%"!==(e.getComputedStyle(h,null)||{marginTop:0}).marginTop),"undefined"!=typeof i.style.zoom&&(i.style.zoom=1),m.removeChild(i),l=h=i=null,P.extend(t,o))}),t}();var L=/^(?:\{.*\}|\[.*\])$/,z=/([A-Z])/g;P.extend({cache:{},uuid:0,expando:"jQuery"+(P.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?P.cache[e[P.expando]]:e[P.expando],!!e&&!$(e)},data:function(e,i,r,n){if(P.acceptData(e)){var a,o,l,s=P.expando,d="string"==typeof i,c=e.nodeType,u=c?P.cache:e,h=c?e[s]:e[s]&&s,g="events"===i;if((!h||!u[h]||!g&&!n&&!u[h].data)&&d&&r===t)return;return h||(c?e[s]=h=++P.uuid:h=s),u[h]||(u[h]={},c||(u[h].toJSON=P.noop)),("object"==typeof i||"function"==typeof i)&&(n?u[h]=P.extend(u[h],i):u[h].data=P.extend(u[h].data,i)),a=o=u[h],n||(o.data||(o.data={}),o=o.data),r!==t&&(o[P.camelCase(i)]=r),g&&!o[i]?a.events:(d?(l=o[i],null==l&&(l=o[P.camelCase(i)])):l=o,l)}},removeData:function(e,t,i){if(P.acceptData(e)){var r,n,a,o=P.expando,l=e.nodeType,s=l?P.cache:e,d=l?e[o]:o;if(!s[d])return;if(t&&(r=i?s[d]:s[d].data)){P.isArray(t)||(t in r?t=[t]:(t=P.camelCase(t),t=t in r?[t]:t.split(" ")));for(n=0,a=t.length;a>n;n++)delete r[t[n]];if(!(i?$:P.isEmptyObject)(r))return}if(!i&&(delete s[d].data,!$(s[d])))return;P.support.deleteExpando||!s.setInterval?delete s[d]:s[d]=null,l&&(P.support.deleteExpando?delete e[o]:e.removeAttribute?e.removeAttribute(o):e[o]=null)}},_data:function(e,t,i){return P.data(e,t,i,!0)},acceptData:function(e){if(e.nodeName){var t=P.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),P.fn.extend({data:function(e,i){var r,n,a,o,l,s=this[0],d=0,c=null;if(e===t){if(this.length&&(c=P.data(s),1===s.nodeType&&!P._data(s,"parsedAttrs"))){for(a=s.attributes,l=a.length;l>d;d++)o=a[d].name,0===o.indexOf("data-")&&(o=P.camelCase(o.substring(5)),S(s,o,c[o]));P._data(s,"parsedAttrs",!0)}return c}return"object"==typeof e?this.each(function(){P.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",n=r[1]+"!",P.access(this,function(i){return i===t?(c=this.triggerHandler("getData"+n,[r[0]]),c===t&&s&&(c=P.data(s,e),c=S(s,e,c)),c===t&&r[1]?this.data(r[0]):c):(r[1]=i,void this.each(function(){var t=P(this);t.triggerHandler("setData"+n,r),P.data(this,e,i),t.triggerHandler("changeData"+n,r)}))},null,i,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){P.removeData(this,e)})}}),P.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",P._data(e,t,(P._data(e,t)||0)+1))},_unmark:function(e,t,i){if(e!==!0&&(i=t,t=e,e=!1),t){i=i||"fx";var r=i+"mark",n=e?0:(P._data(t,r)||1)-1;n?P._data(t,r,n):(P.removeData(t,r,!0),F(t,i,"mark"))}},queue:function(e,t,i){var r;return e?(t=(t||"fx")+"queue",r=P._data(e,t),i&&(!r||P.isArray(i)?r=P._data(e,t,P.makeArray(i)):r.push(i)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=P.queue(e,t),r=i.shift(),n={};"inprogress"===r&&(r=i.shift()),r&&("fx"===t&&i.unshift("inprogress"),P._data(e,t+".run",n),r.call(e,function(){P.dequeue(e,t)},n)),i.length||(P.removeData(e,t+"queue "+t+".run",!0),F(e,t,"queue"))}}),P.fn.extend({queue:function(e,i){var r=2;return"string"!=typeof e&&(i=e,e="fx",r--),arguments.length<r?P.queue(this[0],e):i===t?this:this.each(function(){var t=P.queue(this,e,i);"fx"===e&&"inprogress"!==t[0]&&P.dequeue(this,e)})},dequeue:function(e){return this.each(function(){P.dequeue(this,e)})},delay:function(e,t){return e=P.fx?P.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var r=setTimeout(t,e);i.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){function r(){--s||a.resolveWith(o,[o])}"string"!=typeof e&&(i=e,e=t),e=e||"fx";for(var n,a=P.Deferred(),o=this,l=o.length,s=1,d=e+"defer",c=e+"queue",u=e+"mark";l--;)(n=P.data(o[l],d,t,!0)||(P.data(o[l],c,t,!0)||P.data(o[l],u,t,!0))&&P.data(o[l],d,P.Callbacks("once memory"),!0))&&(s++,n.add(r));return r(),a.promise(i)}});var A,H,O,W=/[\n\t\r]/g,V=/\s+/,G=/\r/g,q=/^(?:button|input)$/i,U=/^(?:button|input|object|select|textarea)$/i,X=/^a(?:rea)?$/i,Y=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Q=P.support.getSetAttribute;P.fn.extend({attr:function(e,t){return P.access(this,P.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){P.removeAttr(this,e)})},prop:function(e,t){return P.access(this,P.prop,e,t,arguments.length>1)},removeProp:function(e){return e=P.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(i){}})},addClass:function(e){var t,i,r,n,a,o,l;if(P.isFunction(e))return this.each(function(t){P(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(V),i=0,r=this.length;r>i;i++)if(n=this[i],1===n.nodeType)if(n.className||1!==t.length){for(a=" "+n.className+" ",o=0,l=t.length;l>o;o++)~a.indexOf(" "+t[o]+" ")||(a+=t[o]+" ");n.className=P.trim(a)}else n.className=e;return this},removeClass:function(e){var i,r,n,a,o,l,s;if(P.isFunction(e))return this.each(function(t){P(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(i=(e||"").split(V),r=0,n=this.length;n>r;r++)if(a=this[r],1===a.nodeType&&a.className)if(e){for(o=(" "+a.className+" ").replace(W," "),l=0,s=i.length;s>l;l++)o=o.replace(" "+i[l]+" "," ");a.className=P.trim(o)}else a.className="";return this},toggleClass:function(e,t){var i=typeof e,r="boolean"==typeof t;return P.isFunction(e)?this.each(function(i){P(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var n,a=0,o=P(this),l=t,s=e.split(V);n=s[a++];)l=r?l:!o.hasClass(n),o[l?"addClass":"removeClass"](n);else("undefined"===i||"boolean"===i)&&(this.className&&P._data(this,"__className__",this.className),this.className=this.className||e===!1?"":P._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,r=this.length;r>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(W," ").indexOf(t)>-1)return!0;return!1},val:function(e){var i,r,n,a=this[0];return arguments.length?(n=P.isFunction(e),this.each(function(r){var a,o=P(this);1===this.nodeType&&(a=n?e.call(this,r,o.val()):e,null==a?a="":"number"==typeof a?a+="":P.isArray(a)&&(a=P.map(a,function(e){return null==e?"":e+""})),i=P.valHooks[this.type]||P.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,a,"value")!==t||(this.value=a))})):a?(i=P.valHooks[a.type]||P.valHooks[a.nodeName.toLowerCase()],i&&"get"in i&&(r=i.get(a,"value"))!==t?r:(r=a.value,"string"==typeof r?r.replace(G,""):null==r?"":r)):void 0}}),P.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,i,r,n,a=e.selectedIndex,o=[],l=e.options,s="select-one"===e.type;if(0>a)return null;for(i=s?a:0,r=s?a+1:l.length;r>i;i++)if(n=l[i],n.selected&&(P.support.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!P.nodeName(n.parentNode,"optgroup"))){if(t=P(n).val(),s)return t;o.push(t)}return s&&!o.length&&l.length?P(l[a]).val():o},set:function(e,t){var i=P.makeArray(t);return P(e).find("option").each(function(){this.selected=P.inArray(P(this).val(),i)>=0}),i.length||(e.selectedIndex=-1),i}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,i,r,n){var a,o,l,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?n&&i in P.attrFn?P(e)[i](r):"undefined"==typeof e.getAttribute?P.prop(e,i,r):(l=1!==s||!P.isXMLDoc(e),l&&(i=i.toLowerCase(),o=P.attrHooks[i]||(Y.test(i)?H:A)),r!==t?null===r?void P.removeAttr(e,i):o&&"set"in o&&l&&(a=o.set(e,r,i))!==t?a:(e.setAttribute(i,""+r),r):o&&"get"in o&&l&&null!==(a=o.get(e,i))?a:(a=e.getAttribute(i),null===a?t:a)):void 0},removeAttr:function(e,t){var i,r,n,a,o,l=0;if(t&&1===e.nodeType)for(r=t.toLowerCase().split(V),a=r.length;a>l;l++)n=r[l],n&&(i=P.propFix[n]||n,o=Y.test(n),o||P.attr(e,n,""),e.removeAttribute(Q?n:i),o&&i in e&&(e[i]=!1))},attrHooks:{type:{set:function(e,t){if(q.test(e.nodeName)&&e.parentNode)P.error("type property can't be changed");else if(!P.support.radioValue&&"radio"===t&&P.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}},value:{get:function(e,t){return A&&P.nodeName(e,"button")?A.get(e,t):t in e?e.value:null},set:function(e,t,i){return A&&P.nodeName(e,"button")?A.set(e,t,i):void(e.value=t)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,r){var n,a,o,l=e.nodeType;return e&&3!==l&&8!==l&&2!==l?(o=1!==l||!P.isXMLDoc(e),o&&(i=P.propFix[i]||i,a=P.propHooks[i]),r!==t?a&&"set"in a&&(n=a.set(e,r,i))!==t?n:e[i]=r:a&&"get"in a&&null!==(n=a.get(e,i))?n:e[i]):void 0},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):U.test(e.nodeName)||X.test(e.nodeName)&&e.href?0:t}}}}),P.attrHooks.tabindex=P.propHooks.tabIndex,H={get:function(e,i){var r,n=P.prop(e,i);return n===!0||"boolean"!=typeof n&&(r=e.getAttributeNode(i))&&r.nodeValue!==!1?i.toLowerCase():t},set:function(e,t,i){var r;return t===!1?P.removeAttr(e,i):(r=P.propFix[i]||i,r in e&&(e[r]=!0),e.setAttribute(i,i.toLowerCase())),i}},Q||(O={name:!0,id:!0,coords:!0},A=P.valHooks.button={get:function(e,i){var r;return r=e.getAttributeNode(i),r&&(O[i]?""!==r.nodeValue:r.specified)?r.nodeValue:t},set:function(e,t,i){var r=e.getAttributeNode(i);return r||(r=R.createAttribute(i),e.setAttributeNode(r)),r.nodeValue=t+""}},P.attrHooks.tabindex.set=A.set,P.each(["width","height"],function(e,t){P.attrHooks[t]=P.extend(P.attrHooks[t],{set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}})}),P.attrHooks.contenteditable={get:A.get,set:function(e,t,i){""===t&&(t="false"),A.set(e,t,i)}}),P.support.hrefNormalized||P.each(["href","src","width","height"],function(e,i){P.attrHooks[i]=P.extend(P.attrHooks[i],{get:function(e){var r=e.getAttribute(i,2);return null===r?t:r}})}),P.support.style||(P.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),P.support.optSelected||(P.propHooks.selected=P.extend(P.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),
null}})),P.support.enctype||(P.propFix.enctype="encoding"),P.support.checkOn||P.each(["radio","checkbox"],function(){P.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),P.each(["radio","checkbox"],function(){P.valHooks[this]=P.extend(P.valHooks[this],{set:function(e,t){return P.isArray(t)?e.checked=P.inArray(P(e).val(),t)>=0:void 0}})});var J=/^(?:textarea|input|select)$/i,K=/^([^\.]*)?(?:\.(.+))?$/,Z=/(?:^|\s)hover(\.\S+)?\b/,ee=/^key/,te=/^(?:mouse|contextmenu)|click/,ie=/^(?:focusinfocus|focusoutblur)$/,re=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,ne=function(e){var t=re.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},ae=function(e,t){var i=e.attributes||{};return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||(i.id||{}).value===t[2])&&(!t[3]||t[3].test((i["class"]||{}).value))},oe=function(e){return P.event.special.hover?e:e.replace(Z,"mouseenter$1 mouseleave$1")};P.event={add:function(e,i,r,n,a){var o,l,s,d,c,u,h,g,p,f,v;if(3!==e.nodeType&&8!==e.nodeType&&i&&r&&(o=P._data(e))){for(r.handler&&(p=r,r=p.handler,a=p.selector),r.guid||(r.guid=P.guid++),s=o.events,s||(o.events=s={}),l=o.handle,l||(o.handle=l=function(e){return"undefined"==typeof P||e&&P.event.triggered===e.type?t:P.event.dispatch.apply(l.elem,arguments)},l.elem=e),i=P.trim(oe(i)).split(" "),d=0;d<i.length;d++)c=K.exec(i[d])||[],u=c[1],h=(c[2]||"").split(".").sort(),v=P.event.special[u]||{},u=(a?v.delegateType:v.bindType)||u,v=P.event.special[u]||{},g=P.extend({type:u,origType:c[1],data:n,handler:r,guid:r.guid,selector:a,quick:a&&ne(a),namespace:h.join(".")},p),f=s[u],f||(f=s[u]=[],f.delegateCount=0,v.setup&&v.setup.call(e,n,h,l)!==!1||(e.addEventListener?e.addEventListener(u,l,!1):e.attachEvent&&e.attachEvent("on"+u,l))),v.add&&(v.add.call(e,g),g.handler.guid||(g.handler.guid=r.guid)),a?f.splice(f.delegateCount++,0,g):f.push(g),P.event.global[u]=!0;e=null}},global:{},remove:function(e,t,i,r,n){var a,o,l,s,d,c,u,h,g,p,f,v,m=P.hasData(e)&&P._data(e);if(m&&(h=m.events)){for(t=P.trim(oe(t||"")).split(" "),a=0;a<t.length;a++)if(o=K.exec(t[a])||[],l=s=o[1],d=o[2],l){for(g=P.event.special[l]||{},l=(r?g.delegateType:g.bindType)||l,f=h[l]||[],c=f.length,d=d?new RegExp("(^|\\.)"+d.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,u=0;u<f.length;u++)v=f[u],(n||s===v.origType)&&(!i||i.guid===v.guid)&&(!d||d.test(v.namespace))&&(!r||r===v.selector||"**"===r&&v.selector)&&(f.splice(u--,1),v.selector&&f.delegateCount--,g.remove&&g.remove.call(e,v));0===f.length&&c!==f.length&&((!g.teardown||g.teardown.call(e,d)===!1)&&P.removeEvent(e,l,m.handle),delete h[l])}else for(l in h)P.event.remove(e,l+t[a],i,r,!0);P.isEmptyObject(h)&&(p=m.handle,p&&(p.elem=null),P.removeData(e,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,r,n,a){if(!n||3!==n.nodeType&&8!==n.nodeType){var o,l,s,d,c,u,h,g,p,f,v=i.type||i,m=[];if(ie.test(v+P.event.triggered))return;if(v.indexOf("!")>=0&&(v=v.slice(0,-1),l=!0),v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),(!n||P.event.customEvent[v])&&!P.event.global[v])return;if(i="object"==typeof i?i[P.expando]?i:new P.Event(v,i):new P.Event(v),i.type=v,i.isTrigger=!0,i.exclusive=l,i.namespace=m.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,u=v.indexOf(":")<0?"on"+v:"",!n){o=P.cache;for(s in o)o[s].events&&o[s].events[v]&&P.event.trigger(i,r,o[s].handle.elem,!0);return}if(i.result=t,i.target||(i.target=n),r=null!=r?P.makeArray(r):[],r.unshift(i),h=P.event.special[v]||{},h.trigger&&h.trigger.apply(n,r)===!1)return;if(p=[[n,h.bindType||v]],!a&&!h.noBubble&&!P.isWindow(n)){for(f=h.delegateType||v,d=ie.test(f+v)?n:n.parentNode,c=null;d;d=d.parentNode)p.push([d,f]),c=d;c&&c===n.ownerDocument&&p.push([c.defaultView||c.parentWindow||e,f])}for(s=0;s<p.length&&!i.isPropagationStopped();s++)d=p[s][0],i.type=p[s][1],g=(P._data(d,"events")||{})[i.type]&&P._data(d,"handle"),g&&g.apply(d,r),g=u&&d[u],g&&P.acceptData(d)&&g.apply(d,r)===!1&&i.preventDefault();return i.type=v,!a&&!i.isDefaultPrevented()&&(!h._default||h._default.apply(n.ownerDocument,r)===!1)&&("click"!==v||!P.nodeName(n,"a"))&&P.acceptData(n)&&u&&n[v]&&("focus"!==v&&"blur"!==v||0!==i.target.offsetWidth)&&!P.isWindow(n)&&(c=n[u],c&&(n[u]=null),P.event.triggered=v,n[v](),P.event.triggered=t,c&&(n[u]=c)),i.result}},dispatch:function(i){i=P.event.fix(i||e.event);var r,n,a,o,l,s,d,c,u,h,g=(P._data(this,"events")||{})[i.type]||[],p=g.delegateCount,f=[].slice.call(arguments,0),v=!i.exclusive&&!i.namespace,m=P.event.special[i.type]||{},b=[];if(f[0]=i,i.delegateTarget=this,!m.preDispatch||m.preDispatch.call(this,i)!==!1){if(p&&(!i.button||"click"!==i.type))for(o=P(this),o.context=this.ownerDocument||this,a=i.target;a!=this;a=a.parentNode||this)if(a.disabled!==!0){for(s={},c=[],o[0]=a,r=0;p>r;r++)u=g[r],h=u.selector,s[h]===t&&(s[h]=u.quick?ae(a,u.quick):o.is(h)),s[h]&&c.push(u);c.length&&b.push({elem:a,matches:c})}for(g.length>p&&b.push({elem:this,matches:g.slice(p)}),r=0;r<b.length&&!i.isPropagationStopped();r++)for(d=b[r],i.currentTarget=d.elem,n=0;n<d.matches.length&&!i.isImmediatePropagationStopped();n++)u=d.matches[n],(v||!i.namespace&&!u.namespace||i.namespace_re&&i.namespace_re.test(u.namespace))&&(i.data=u.data,i.handleObj=u,l=((P.event.special[u.origType]||{}).handle||u.handler).apply(d.elem,f),l!==t&&(i.result=l,l===!1&&(i.preventDefault(),i.stopPropagation())));return m.postDispatch&&m.postDispatch.call(this,i),i.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var r,n,a,o=i.button,l=i.fromElement;return null==e.pageX&&null!=i.clientX&&(r=e.target.ownerDocument||R,n=r.documentElement,a=r.body,e.pageX=i.clientX+(n&&n.scrollLeft||a&&a.scrollLeft||0)-(n&&n.clientLeft||a&&a.clientLeft||0),e.pageY=i.clientY+(n&&n.scrollTop||a&&a.scrollTop||0)-(n&&n.clientTop||a&&a.clientTop||0)),!e.relatedTarget&&l&&(e.relatedTarget=l===e.target?i.toElement:l),!e.which&&o!==t&&(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[P.expando])return e;var i,r,n=e,a=P.event.fixHooks[e.type]||{},o=a.props?this.props.concat(a.props):this.props;for(e=P.Event(n),i=o.length;i;)r=o[--i],e[r]=n[r];return e.target||(e.target=n.srcElement||R),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),a.filter?a.filter(e,n):e},special:{ready:{setup:P.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,i){P.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,i,r){var n=P.extend(new P.Event,i,{type:e,isSimulated:!0,originalEvent:{}});r?P.event.trigger(n,null,t):P.event.dispatch.call(t,n),n.isDefaultPrevented()&&i.preventDefault()}},P.event.handle=P.event.dispatch,P.removeEvent=R.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){e.detachEvent&&e.detachEvent("on"+t,i)},P.Event=function(e,t){return this instanceof P.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?T:B):this.type=e,t&&P.extend(this,t),this.timeStamp=e&&e.timeStamp||P.now(),this[P.expando]=!0,void 0):new P.Event(e,t)},P.Event.prototype={preventDefault:function(){this.isDefaultPrevented=T;var e=this.originalEvent;!e||(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=T;var e=this.originalEvent;!e||(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=T,this.stopPropagation()},isDefaultPrevented:B,isPropagationStopped:B,isImmediatePropagationStopped:B},P.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){P.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,r=this,n=e.relatedTarget,a=e.handleObj;a.selector;return(!n||n!==r&&!P.contains(r,n))&&(e.type=a.origType,i=a.handler.apply(this,arguments),e.type=t),i}}}),P.support.submitBubbles||(P.event.special.submit={setup:function(){return P.nodeName(this,"form")?!1:void P.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,r=P.nodeName(i,"input")||P.nodeName(i,"button")?i.form:t;r&&!r._submit_attached&&(P.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),r._submit_attached=!0)})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&P.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return P.nodeName(this,"form")?!1:void P.event.remove(this,"._submit")}}),P.support.changeBubbles||(P.event.special.change={setup:function(){return J.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(P.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),P.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,P.event.simulate("change",this,e,!0))})),!1):void P.event.add(this,"beforeactivate._change",function(e){var t=e.target;J.test(t.nodeName)&&!t._change_attached&&(P.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&P.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return P.event.remove(this,"._change"),J.test(this.nodeName)}}),P.support.focusinBubbles||P.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,r=function(e){P.event.simulate(t,e.target,P.event.fix(e),!0)};P.event.special[t]={setup:function(){0===i++&&R.addEventListener(e,r,!0)},teardown:function(){0===--i&&R.removeEventListener(e,r,!0)}}}),P.fn.extend({on:function(e,i,r,n,a){var o,l;if("object"==typeof e){"string"!=typeof i&&(r=r||i,i=t);for(l in e)this.on(l,i,r,e[l],a);return this}if(null==r&&null==n?(n=i,r=i=t):null==n&&("string"==typeof i?(n=r,r=t):(n=r,r=i,i=t)),n===!1)n=B;else if(!n)return this;return 1===a&&(o=n,n=function(e){return P().off(e),o.apply(this,arguments)},n.guid=o.guid||(o.guid=P.guid++)),this.each(function(){P.event.add(this,e,n,r,i)})},one:function(e,t,i,r){return this.on(e,t,i,r,1)},off:function(e,i,r){if(e&&e.preventDefault&&e.handleObj){var n=e.handleObj;return P(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this}if("object"==typeof e){for(var a in e)this.off(a,i,e[a]);return this}return(i===!1||"function"==typeof i)&&(r=i,i=t),r===!1&&(r=B),this.each(function(){P.event.remove(this,e,r,i)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,i){return P(this.context).on(e,this.selector,t,i),this},die:function(e,t){return P(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,i,r){return this.on(t,e,i,r)},undelegate:function(e,t,i){return 1==arguments.length?this.off(e,"**"):this.off(t,e,i)},trigger:function(e,t){return this.each(function(){P.event.trigger(e,t,this)})},triggerHandler:function(e,t){return this[0]?P.event.trigger(e,t,this[0],!0):void 0},toggle:function(e){var t=arguments,i=e.guid||P.guid++,r=0,n=function(i){var n=(P._data(this,"lastToggle"+e.guid)||0)%r;return P._data(this,"lastToggle"+e.guid,n+1),i.preventDefault(),t[n].apply(this,arguments)||!1};for(n.guid=i;r<t.length;)t[r++].guid=i;return this.click(n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),P.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){P.fn[t]=function(e,i){return null==i&&(i=e,e=null),arguments.length>0?this.on(t,null,e,i):this.trigger(t)},P.attrFn&&(P.attrFn[t]=!0),ee.test(t)&&(P.event.fixHooks[t]=P.event.keyHooks),te.test(t)&&(P.event.fixHooks[t]=P.event.mouseHooks)}),function(){function e(e,t,i,r,a,o){for(var l=0,s=r.length;s>l;l++){var d=r[l];if(d){var c=!1;for(d=d[e];d;){if(d[n]===i){c=r[d.sizset];break}if(1===d.nodeType)if(o||(d[n]=i,d.sizset=l),"string"!=typeof t){if(d===t){c=!0;break}}else if(h.filter(t,[d]).length>0){c=d;break}d=d[e]}r[l]=c}}}function i(e,t,i,r,a,o){for(var l=0,s=r.length;s>l;l++){var d=r[l];if(d){var c=!1;for(d=d[e];d;){if(d[n]===i){c=r[d.sizset];break}if(1===d.nodeType&&!o&&(d[n]=i,d.sizset=l),d.nodeName.toLowerCase()===t){c=d;break}d=d[e]}r[l]=c}}}var r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,n="sizcache"+(Math.random()+"").replace(".",""),a=0,o=Object.prototype.toString,l=!1,s=!0,d=/\\/g,c=/\r\n/g,u=/\W/;[0,0].sort(function(){return s=!1,0});var h=function(e,t,i,n){i=i||[],t=t||R;var a=t;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return i;var l,s,d,c,u,g,v,m,x=!0,y=h.isXML(t),w=[],_=e;do if(r.exec(""),l=r.exec(_),l&&(_=l[3],w.push(l[1]),l[2])){c=l[3];break}while(l);if(w.length>1&&f.exec(e))if(2===w.length&&p.relative[w[0]])s=C(w[0]+w[1],t,n);else for(s=p.relative[w[0]]?[t]:h(w.shift(),t);w.length;)e=w.shift(),p.relative[e]&&(e+=w.shift()),s=C(e,s,n);else if(!n&&w.length>1&&9===t.nodeType&&!y&&p.match.ID.test(w[0])&&!p.match.ID.test(w[w.length-1])&&(u=h.find(w.shift(),t,y),t=u.expr?h.filter(u.expr,u.set)[0]:u.set[0]),t)for(u=n?{expr:w.pop(),set:b(n)}:h.find(w.pop(),1!==w.length||"~"!==w[0]&&"+"!==w[0]||!t.parentNode?t:t.parentNode,y),s=u.expr?h.filter(u.expr,u.set):u.set,w.length>0?d=b(s):x=!1;w.length;)g=w.pop(),v=g,p.relative[g]?v=w.pop():g="",null==v&&(v=t),p.relative[g](d,v,y);else d=w=[];if(d||(d=s),d||h.error(g||e),"[object Array]"===o.call(d))if(x)if(t&&1===t.nodeType)for(m=0;null!=d[m];m++)d[m]&&(d[m]===!0||1===d[m].nodeType&&h.contains(t,d[m]))&&i.push(s[m]);else for(m=0;null!=d[m];m++)d[m]&&1===d[m].nodeType&&i.push(s[m]);else i.push.apply(i,d);else b(d,i);return c&&(h(c,a,i,n),h.uniqueSort(i)),i};h.uniqueSort=function(e){if(y&&(l=s,e.sort(y),l))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,i){var r,n,a,o,l,s;if(!e)return[];for(n=0,a=p.order.length;a>n;n++)if(l=p.order[n],(o=p.leftMatch[l].exec(e))&&(s=o[1],o.splice(1,1),"\\"!==s.substr(s.length-1)&&(o[1]=(o[1]||"").replace(d,""),r=p.find[l](o,t,i),null!=r))){e=e.replace(p.match[l],"");break}return r||(r="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):[]),{set:r,expr:e}},h.filter=function(e,i,r,n){for(var a,o,l,s,d,c,u,g,f,v=e,m=[],b=i,x=i&&i[0]&&h.isXML(i[0]);e&&i.length;){for(l in p.filter)if(null!=(a=p.leftMatch[l].exec(e))&&a[2]){if(c=p.filter[l],u=a[1],o=!1,a.splice(1,1),"\\"===u.substr(u.length-1))continue;if(b===m&&(m=[]),p.preFilter[l])if(a=p.preFilter[l](a,b,r,m,n,x)){if(a===!0)continue}else o=s=!0;if(a)for(g=0;null!=(d=b[g]);g++)d&&(s=c(d,a,g,b),f=n^s,r&&null!=s?f?o=!0:b[g]=!1:f&&(m.push(d),o=!0));if(s!==t){if(r||(b=m),e=e.replace(p.match[l],""),!o)return[];break}}if(e===v){if(null!=o)break;h.error(e)}v=e}return b},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var g=h.getText=function(e){var t,i,r=e.nodeType,n="";if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;if("string"==typeof e.innerText)return e.innerText.replace(c,"");for(e=e.firstChild;e;e=e.nextSibling)n+=g(e)}else if(3===r||4===r)return e.nodeValue}else for(t=0;i=e[t];t++)8!==i.nodeType&&(n+=g(i));return n},p=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var i="string"==typeof t,r=i&&!u.test(t),n=i&&!r;r&&(t=t.toLowerCase());for(var a,o=0,l=e.length;l>o;o++)if(a=e[o]){for(;(a=a.previousSibling)&&1!==a.nodeType;);e[o]=n||a&&a.nodeName.toLowerCase()===t?a||!1:a===t}n&&h.filter(t,e,!0)},">":function(e,t){var i,r="string"==typeof t,n=0,a=e.length;if(r&&!u.test(t)){for(t=t.toLowerCase();a>n;n++)if(i=e[n]){var o=i.parentNode;e[n]=o.nodeName.toLowerCase()===t?o:!1}}else{for(;a>n;n++)i=e[n],i&&(e[n]=r?i.parentNode:i.parentNode===t);r&&h.filter(t,e,!0)}},"":function(t,r,n){var o,l=a++,s=e;"string"==typeof r&&!u.test(r)&&(r=r.toLowerCase(),o=r,s=i),s("parentNode",r,l,t,o,n)},"~":function(t,r,n){var o,l=a++,s=e;"string"==typeof r&&!u.test(r)&&(r=r.toLowerCase(),o=r,s=i),s("previousSibling",r,l,t,o,n)}},find:{ID:function(e,t,i){if("undefined"!=typeof t.getElementById&&!i){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if("undefined"!=typeof t.getElementsByName){for(var i=[],r=t.getElementsByName(e[1]),n=0,a=r.length;a>n;n++)r[n].getAttribute("name")===e[1]&&i.push(r[n]);return 0===i.length?null:i}},TAG:function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e[1]):void 0}},preFilter:{CLASS:function(e,t,i,r,n,a){if(e=" "+e[1].replace(d,"")+" ",a)return e;for(var o,l=0;null!=(o=t[l]);l++)o&&(n^(o.className&&(" "+o.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?i||r.push(o):i&&(t[l]=!1));return!1},ID:function(e){return e[1].replace(d,"")},TAG:function(e,t){return e[1].replace(d,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===e[2]&&"2n"||"odd"===e[2]&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=a++,e},ATTR:function(e,t,i,r,n,a){var o=e[1]=e[1].replace(d,"");return!a&&p.attrMap[o]&&(e[1]=p.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(d,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,i,n,a){if("not"===e[1]){if(!((r.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var o=h.filter(e[3],t,i,!0^a);return i||n.push.apply(n,o),!1}e[3]=h(e[3],null,null,t)}else if(p.match.POS.test(e[0])||p.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&"hidden"!==e.type},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,i){return!!h(i[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),i=e.type;return"input"===e.nodeName.toLowerCase()&&"text"===i&&(t===i||null===t)},radio:function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},checkbox:function(e){return"input"===e.nodeName.toLowerCase()&&"checkbox"===e.type},file:function(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type},password:function(e){return"input"===e.nodeName.toLowerCase()&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"submit"===e.type},image:function(e){return"input"===e.nodeName.toLowerCase()&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,i,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,i){return t<i[3]-0},gt:function(e,t,i){return t>i[3]-0},nth:function(e,t,i){return i[3]-0===t},eq:function(e,t,i){return i[3]-0===t}},filter:{PSEUDO:function(e,t,i,r){var n=t[1],a=p.filters[n];if(a)return a(e,i,t,r);if("contains"===n)return(e.textContent||e.innerText||g([e])||"").indexOf(t[3])>=0;if("not"===n){for(var o=t[3],l=0,s=o.length;s>l;l++)if(o[l]===e)return!1;return!0}h.error(n)},CHILD:function(e,t){var i,r,a,o,l,s,d=t[1],c=e;switch(d){case"only":case"first":for(;c=c.previousSibling;)if(1===c.nodeType)return!1;if("first"===d)return!0;c=e;case"last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0;case"nth":if(i=t[2],r=t[3],1===i&&0===r)return!0;if(a=t[0],o=e.parentNode,o&&(o[n]!==a||!e.nodeIndex)){for(l=0,c=o.firstChild;c;c=c.nextSibling)1===c.nodeType&&(c.nodeIndex=++l);o[n]=a}return s=e.nodeIndex-r,0===i?0===s:s%i===0&&s/i>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var i=t[1],r=h.attr?h.attr(e,i):p.attrHandle[i]?p.attrHandle[i](e):null!=e[i]?e[i]:e.getAttribute(i),n=r+"",a=t[2],o=t[4];return null==r?"!="===a:!a&&h.attr?null!=r:"="===a?n===o:"*="===a?n.indexOf(o)>=0:"~="===a?(" "+n+" ").indexOf(o)>=0:o?"!="===a?n!==o:"^="===a?0===n.indexOf(o):"$="===a?n.substr(n.length-o.length)===o:"|="===a?n===o||n.substr(0,o.length+1)===o+"-":!1:n&&r!==!1},POS:function(e,t,i,r){var n=t[2],a=p.setFilters[n];return a?a(e,i,t,r):void 0}}},f=p.match.POS,v=function(e,t){return"\\"+(t-0+1)};for(var m in p.match)p.match[m]=new RegExp(p.match[m].source+/(?![^\[]*\])(?![^\(]*\))/.source),p.leftMatch[m]=new RegExp(/(^(?:.|\r|\n)*?)/.source+p.match[m].source.replace(/\\(\d+)/g,v));p.match.globalPOS=f;var b=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(R.documentElement.childNodes,0)[0].nodeType}catch(x){b=function(e,t){var i=0,r=t||[];if("[object Array]"===o.call(e))Array.prototype.push.apply(r,e);else if("number"==typeof e.length)for(var n=e.length;n>i;i++)r.push(e[i]);else for(;e[i];i++)r.push(e[i]);return r}}var y,w;R.documentElement.compareDocumentPosition?y=function(e,t){return e===t?(l=!0,0):e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1}:(y=function(e,t){if(e===t)return l=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var i,r,n=[],a=[],o=e.parentNode,s=t.parentNode,d=o;if(o===s)return w(e,t);if(!o)return-1;if(!s)return 1;for(;d;)n.unshift(d),d=d.parentNode;for(d=s;d;)a.unshift(d),d=d.parentNode;i=n.length,r=a.length;for(var c=0;i>c&&r>c;c++)if(n[c]!==a[c])return w(n[c],a[c]);return c===i?w(e,a[c],-1):w(n[c],t,1)},w=function(e,t,i){if(e===t)return i;for(var r=e.nextSibling;r;){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var e=R.createElement("div"),i="script"+(new Date).getTime(),r=R.documentElement;e.innerHTML="<a name='"+i+"'/>",r.insertBefore(e,r.firstChild),R.getElementById(i)&&(p.find.ID=function(e,i,r){if("undefined"!=typeof i.getElementById&&!r){var n=i.getElementById(e[1]);return n?n.id===e[1]||"undefined"!=typeof n.getAttributeNode&&n.getAttributeNode("id").nodeValue===e[1]?[n]:t:[]}},p.filter.ID=function(e,t){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&i&&i.nodeValue===t}),r.removeChild(e),r=e=null}(),function(){var e=R.createElement("div");e.appendChild(R.createComment("")),e.getElementsByTagName("*").length>0&&(p.find.TAG=function(e,t){var i=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var r=[],n=0;i[n];n++)1===i[n].nodeType&&r.push(i[n]);i=r}return i}),e.innerHTML="<a href='#'></a>",e.firstChild&&"undefined"!=typeof e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(p.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),R.querySelectorAll&&function(){var e=h,t=R.createElement("div"),i="__sizzle__";if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){h=function(t,r,n,a){if(r=r||R,!a&&!h.isXML(r)){var o=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(o&&(1===r.nodeType||9===r.nodeType)){if(o[1])return b(r.getElementsByTagName(t),n);if(o[2]&&p.find.CLASS&&r.getElementsByClassName)return b(r.getElementsByClassName(o[2]),n)}if(9===r.nodeType){if("body"===t&&r.body)return b([r.body],n);if(o&&o[3]){var l=r.getElementById(o[3]);if(!l||!l.parentNode)return b([],n);if(l.id===o[3])return b([l],n)}try{return b(r.querySelectorAll(t),n)}catch(s){}}else if(1===r.nodeType&&"object"!==r.nodeName.toLowerCase()){var d=r,c=r.getAttribute("id"),u=c||i,g=r.parentNode,f=/^\s*[+~]/.test(t);c?u=u.replace(/'/g,"\\$&"):r.setAttribute("id",u),f&&g&&(r=r.parentNode);try{if(!f||g)return b(r.querySelectorAll("[id='"+u+"'] "+t),n)}catch(v){}finally{c||d.removeAttribute("id")}}}return e(t,r,n,a)};for(var r in e)h[r]=e[r];t=null}}(),function(){var e=R.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var i=!t.call(R.createElement("div"),"div"),r=!1;try{t.call(R.documentElement,"[test!='']:sizzle")}catch(n){r=!0}h.matchesSelector=function(e,n){if(n=n.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!h.isXML(e))try{if(r||!p.match.PSEUDO.test(n)&&!/!=/.test(n)){var a=t.call(e,n);if(a||!i||e.document&&11!==e.document.nodeType)return a}}catch(o){}return h(n,null,null,[e]).length>0}}}(),function(){var e=R.createElement("div");if(e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length){if(e.lastChild.className="e",1===e.getElementsByClassName("e").length)return;p.order.splice(1,0,"CLASS"),p.find.CLASS=function(e,t,i){return"undefined"==typeof t.getElementsByClassName||i?void 0:t.getElementsByClassName(e[1])},e=null}}(),R.documentElement.contains?h.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:R.documentElement.compareDocumentPosition?h.contains=function(e,t){return!!(16&e.compareDocumentPosition(t))}:h.contains=function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?"HTML"!==t.nodeName:!1};var C=function(e,t,i){for(var r,n=[],a="",o=t.nodeType?[t]:t;r=p.match.PSEUDO.exec(e);)a+=r[0],e=e.replace(p.match.PSEUDO,"");e=p.relative[e]?e+"*":e;for(var l=0,s=o.length;s>l;l++)h(e,o[l],n,i);return h.filter(a,n)};h.attr=P.attr,h.selectors.attrMap={},P.find=h,P.expr=h.selectors,P.expr[":"]=P.expr.filters,P.unique=h.uniqueSort,P.text=h.getText,P.isXMLDoc=h.isXML,P.contains=h.contains}();var le=/Until$/,se=/^(?:parents|prevUntil|prevAll)/,de=/,/,ce=/^.[^:#\[\.,]*$/,ue=Array.prototype.slice,he=P.expr.match.globalPOS,ge={children:!0,contents:!0,next:!0,prev:!0};P.fn.extend({find:function(e){var t,i,r=this;if("string"!=typeof e)return P(e).filter(function(){for(t=0,i=r.length;i>t;t++)if(P.contains(r[t],this))return!0});var n,a,o,l=this.pushStack("","find",e);for(t=0,i=this.length;i>t;t++)if(n=l.length,P.find(e,this[t],l),t>0)for(a=n;a<l.length;a++)for(o=0;n>o;o++)if(l[o]===l[a]){l.splice(a--,1);break}return l},has:function(e){var t=P(e);return this.filter(function(){for(var e=0,i=t.length;i>e;e++)if(P.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(D(this,e,!1),"not",e)},filter:function(e){return this.pushStack(D(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?he.test(e)?P(e,this.context).index(this[0])>=0:P.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var i,r,n=[],a=this[0];if(P.isArray(e)){for(var o=1;a&&a.ownerDocument&&a!==t;){for(i=0;i<e.length;i++)P(a).is(e[i])&&n.push({selector:e[i],elem:a,level:o});a=a.parentNode,o++}return n}var l=he.test(e)||"string"!=typeof e?P(e,t||this.context):0;for(i=0,r=this.length;r>i;i++)for(a=this[i];a;){if(l?l.index(a)>-1:P.find.matchesSelector(a,e)){n.push(a);break}if(a=a.parentNode,!a||!a.ownerDocument||a===t||11===a.nodeType)break}return n=n.length>1?P.unique(n):n,this.pushStack(n,"closest",e)},index:function(e){return e?"string"==typeof e?P.inArray(this[0],P(e)):P.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var i="string"==typeof e?P(e,t):P.makeArray(e&&e.nodeType?[e]:e),r=P.merge(this.get(),i);return this.pushStack(k(i[0])||k(r[0])?r:P.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),P.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return P.dir(e,"parentNode")},parentsUntil:function(e,t,i){return P.dir(e,"parentNode",i)},next:function(e){return P.nth(e,2,"nextSibling")},prev:function(e){return P.nth(e,2,"previousSibling")},nextAll:function(e){return P.dir(e,"nextSibling")},prevAll:function(e){return P.dir(e,"previousSibling")},nextUntil:function(e,t,i){return P.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return P.dir(e,"previousSibling",i)},siblings:function(e){return P.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return P.sibling(e.firstChild)},contents:function(e){return P.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:P.makeArray(e.childNodes)}},function(e,t){P.fn[e]=function(i,r){var n=P.map(this,t,i);return le.test(e)||(r=i),r&&"string"==typeof r&&(n=P.filter(r,n)),n=this.length>1&&!ge[e]?P.unique(n):n,(this.length>1||de.test(r))&&se.test(e)&&(n=n.reverse()),this.pushStack(n,e,ue.call(arguments).join(","))}}),P.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?P.find.matchesSelector(t[0],e)?[t[0]]:[]:P.find.matches(e,t)},dir:function(e,i,r){for(var n=[],a=e[i];a&&9!==a.nodeType&&(r===t||1!==a.nodeType||!P(a).is(r));)1===a.nodeType&&n.push(a),a=a[i];return n},nth:function(e,t,i,r){t=t||1;for(var n=0;e&&(1!==e.nodeType||++n!==t);e=e[i]);return e},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var pe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fe=/ jQuery\d+="(?:\d+|null)"/g,ve=/^\s+/,me=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,be=/<([\w:]+)/,xe=/<tbody/i,ye=/<|&#?\w+;/,we=/<(?:script|style)/i,Ce=/<(?:script|object|embed|option|style)/i,_e=new RegExp("<(?:"+pe+")[\\s/>]","i"),De=/checked\s*(?:[^=]|=\s*.checked.)/i,ke=/\/(java|ecma)script/i,Te=/^\s*<!(?:\[CDATA\[|\-\-)/,Be={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Fe=_(R);Be.optgroup=Be.option,Be.tbody=Be.tfoot=Be.colgroup=Be.caption=Be.thead,Be.th=Be.td,P.support.htmlSerialize||(Be._default=[1,"div<div>","</div>"]),P.fn.extend({text:function(e){return P.access(this,function(e){return e===t?P.text(this):this.empty().append((this[0]&&this[0].ownerDocument||R).createTextNode(e));
},null,e,arguments.length)},wrapAll:function(e){if(P.isFunction(e))return this.each(function(t){P(this).wrapAll(e.call(this,t))});if(this[0]){var t=P(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return P.isFunction(e)?this.each(function(t){P(this).wrapInner(e.call(this,t))}):this.each(function(){var t=P(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=P.isFunction(e);return this.each(function(i){P(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){P.nodeName(this,"body")||P(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=P.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,P.clean(arguments)),e}},remove:function(e,t){for(var i,r=0;null!=(i=this[r]);r++)(!e||P.filter(e,[i]).length)&&(!t&&1===i.nodeType&&(P.cleanData(i.getElementsByTagName("*")),P.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&P.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return P.clone(this,e,t)})},html:function(e){return P.access(this,function(e){var i=this[0]||{},r=0,n=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(fe,""):null;if("string"==typeof e&&!we.test(e)&&(P.support.leadingWhitespace||!ve.test(e))&&!Be[(be.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(me,"<$1></$2>");try{for(;n>r;r++)i=this[r]||{},1===i.nodeType&&(P.cleanData(i.getElementsByTagName("*")),i.innerHTML=e);i=0}catch(a){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return this[0]&&this[0].parentNode?P.isFunction(e)?this.each(function(t){var i=P(this),r=i.html();i.replaceWith(e.call(this,t,r))}):("string"!=typeof e&&(e=P(e).detach()),this.each(function(){var t=this.nextSibling,i=this.parentNode;P(this).remove(),t?P(t).before(e):P(i).append(e)})):this.length?this.pushStack(P(P.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,r){var n,a,o,l,s=e[0],d=[];if(!P.support.checkClone&&3===arguments.length&&"string"==typeof s&&De.test(s))return this.each(function(){P(this).domManip(e,i,r,!0)});if(P.isFunction(s))return this.each(function(n){var a=P(this);e[0]=s.call(this,n,i?a.html():t),a.domManip(e,i,r)});if(this[0]){if(l=s&&s.parentNode,n=P.support.parentNode&&l&&11===l.nodeType&&l.childNodes.length===this.length?{fragment:l}:P.buildFragment(e,this,d),o=n.fragment,a=1===o.childNodes.length?o=o.firstChild:o.firstChild,a){i=i&&P.nodeName(a,"tr");for(var c=0,u=this.length,h=u-1;u>c;c++)r.call(i?C(this[c],a):this[c],n.cacheable||u>1&&h>c?P.clone(o,!0,!0):o)}d.length&&P.each(d,function(e,t){t.src?P.ajax({type:"GET",global:!1,url:t.src,async:!1,dataType:"script"}):P.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Te,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),P.buildFragment=function(e,t,i){var r,n,a,o,l=e[0];return t&&t[0]&&(o=t[0].ownerDocument||t[0]),o.createDocumentFragment||(o=R),1===e.length&&"string"==typeof l&&l.length<512&&o===R&&"<"===l.charAt(0)&&!Ce.test(l)&&(P.support.checkClone||!De.test(l))&&(P.support.html5Clone||!_e.test(l))&&(n=!0,a=P.fragments[l],a&&1!==a&&(r=a)),r||(r=o.createDocumentFragment(),P.clean(e,o,r,i)),n&&(P.fragments[l]=a?r:1),{fragment:r,cacheable:n}},P.fragments={},P.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){P.fn[e]=function(i){var r=[],n=P(i),a=1===this.length&&this[0].parentNode;if(a&&11===a.nodeType&&1===a.childNodes.length&&1===n.length)return n[t](this[0]),this;for(var o=0,l=n.length;l>o;o++){var s=(o>0?this.clone(!0):this).get();P(n[o])[t](s),r=r.concat(s)}return this.pushStack(r,e,n.selector)}}),P.extend({clone:function(e,t,i){var r,n,a,o=P.support.html5Clone||P.isXMLDoc(e)||!_e.test("<"+e.nodeName+">")?e.cloneNode(!0):v(e);if(!(P.support.noCloneEvent&&P.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||P.isXMLDoc(e)))for(y(e,o),r=x(e),n=x(o),a=0;r[a];++a)n[a]&&y(r[a],n[a]);if(t&&(w(e,o),i))for(r=x(e),n=x(o),a=0;r[a];++a)w(r[a],n[a]);return r=n=null,o},clean:function(e,t,i,r){var n,a,o,l=[];t=t||R,"undefined"==typeof t.createElement&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||R);for(var s,d=0;null!=(s=e[d]);d++)if("number"==typeof s&&(s+=""),s){if("string"==typeof s)if(ye.test(s)){s=s.replace(me,"<$1></$2>");var c,u=(be.exec(s)||["",""])[1].toLowerCase(),h=Be[u]||Be._default,g=h[0],p=t.createElement("div"),f=Fe.childNodes;for(t===R?Fe.appendChild(p):_(t).appendChild(p),p.innerHTML=h[1]+s+h[2];g--;)p=p.lastChild;if(!P.support.tbody){var v=xe.test(s),b="table"!==u||v?"<table>"!==h[1]||v?[]:p.childNodes:p.firstChild&&p.firstChild.childNodes;for(o=b.length-1;o>=0;--o)P.nodeName(b[o],"tbody")&&!b[o].childNodes.length&&b[o].parentNode.removeChild(b[o])}!P.support.leadingWhitespace&&ve.test(s)&&p.insertBefore(t.createTextNode(ve.exec(s)[0]),p.firstChild),s=p.childNodes,p&&(p.parentNode.removeChild(p),f.length>0&&(c=f[f.length-1],c&&c.parentNode&&c.parentNode.removeChild(c)))}else s=t.createTextNode(s);var x;if(!P.support.appendChecked)if(s[0]&&"number"==typeof(x=s.length))for(o=0;x>o;o++)m(s[o]);else m(s);s.nodeType?l.push(s):l=P.merge(l,s)}if(i)for(n=function(e){return!e.type||ke.test(e.type)},d=0;l[d];d++)if(a=l[d],r&&P.nodeName(a,"script")&&(!a.type||ke.test(a.type)))r.push(a.parentNode?a.parentNode.removeChild(a):a);else{if(1===a.nodeType){var y=P.grep(a.getElementsByTagName("script"),n);l.splice.apply(l,[d+1,0].concat(y))}i.appendChild(a)}return l},cleanData:function(e){for(var t,i,r,n=P.cache,a=P.event.special,o=P.support.deleteExpando,l=0;null!=(r=e[l]);l++)if((!r.nodeName||!P.noData[r.nodeName.toLowerCase()])&&(i=r[P.expando])){if(t=n[i],t&&t.events){for(var s in t.events)a[s]?P.event.remove(r,s):P.removeEvent(r,s,t.handle);t.handle&&(t.handle.elem=null)}o?delete r[P.expando]:r.removeAttribute&&r.removeAttribute(P.expando),delete n[i]}}});var $e,Se,Ie,Re=/alpha\([^)]*\)/i,Ne=/opacity=([^)]*)/,Ee=/([A-Z]|^ms)/g,Pe=/^[\-+]?(?:\d*\.)?\d+$/i,Me=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,je=/^([\-+])=([\-+.\de]+)/,Le=/^margin/,ze={position:"absolute",visibility:"hidden",display:"block"},Ae=["Top","Right","Bottom","Left"];P.fn.css=function(e,i){return P.access(this,function(e,i,r){return r!==t?P.style(e,i,r):P.css(e,i)},e,i,arguments.length>1)},P.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=$e(e,"opacity");return""===i?"1":i}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":P.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,o,l=P.camelCase(i),s=e.style,d=P.cssHooks[l];if(i=P.cssProps[l]||l,r===t)return d&&"get"in d&&(a=d.get(e,!1,n))!==t?a:s[i];if(o=typeof r,"string"===o&&(a=je.exec(r))&&(r=+(a[1]+1)*+a[2]+parseFloat(P.css(e,i)),o="number"),null==r||"number"===o&&isNaN(r))return;if("number"===o&&!P.cssNumber[l]&&(r+="px"),!(d&&"set"in d&&(r=d.set(e,r))===t))try{s[i]=r}catch(c){}}},css:function(e,i,r){var n,a;return i=P.camelCase(i),a=P.cssHooks[i],i=P.cssProps[i]||i,"cssFloat"===i&&(i="float"),a&&"get"in a&&(n=a.get(e,!0,r))!==t?n:$e?$e(e,i):void 0},swap:function(e,t,i){var r,n,a={};for(n in t)a[n]=e.style[n],e.style[n]=t[n];r=i.call(e);for(n in t)e.style[n]=a[n];return r}}),P.curCSS=P.css,R.defaultView&&R.defaultView.getComputedStyle&&(Se=function(e,t){var i,r,n,a,o=e.style;return t=t.replace(Ee,"-$1").toLowerCase(),(r=e.ownerDocument.defaultView)&&(n=r.getComputedStyle(e,null))&&(i=n.getPropertyValue(t),""===i&&!P.contains(e.ownerDocument.documentElement,e)&&(i=P.style(e,t))),!P.support.pixelMargin&&n&&Le.test(t)&&Me.test(i)&&(a=o.width,o.width=i,i=n.width,o.width=a),i}),R.documentElement.currentStyle&&(Ie=function(e,t){var i,r,n,a=e.currentStyle&&e.currentStyle[t],o=e.style;return null==a&&o&&(n=o[t])&&(a=n),Me.test(a)&&(i=o.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),o.left="fontSize"===t?"1em":a,a=o.pixelLeft+"px",o.left=i,r&&(e.runtimeStyle.left=r)),""===a?"auto":a}),$e=Se||Ie,P.each(["height","width"],function(e,t){P.cssHooks[t]={get:function(e,i,r){return i?0!==e.offsetWidth?f(e,t,r):P.swap(e,ze,function(){return f(e,t,r)}):void 0},set:function(e,t){return Pe.test(t)?t+"px":t}}}),P.support.opacity||(P.cssHooks.opacity={get:function(e,t){return Ne.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var i=e.style,r=e.currentStyle,n=P.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=r&&r.filter||i.filter||"";i.zoom=1,t>=1&&""===P.trim(a.replace(Re,""))&&(i.removeAttribute("filter"),r&&!r.filter)||(i.filter=Re.test(a)?a.replace(Re,n):a+" "+n)}}),P(function(){P.support.reliableMarginRight||(P.cssHooks.marginRight={get:function(e,t){return P.swap(e,{display:"inline-block"},function(){return t?$e(e,"margin-right"):e.style.marginRight})}})}),P.expr&&P.expr.filters&&(P.expr.filters.hidden=function(e){var t=e.offsetWidth,i=e.offsetHeight;return 0===t&&0===i||!P.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||P.css(e,"display"))},P.expr.filters.visible=function(e){return!P.expr.filters.hidden(e)}),P.each({margin:"",padding:"",border:"Width"},function(e,t){P.cssHooks[e+t]={expand:function(i){var r,n="string"==typeof i?i.split(" "):[i],a={};for(r=0;4>r;r++)a[e+Ae[r]+t]=n[r]||n[r-2]||n[0];return a}}});var He,Oe,We=/%20/g,Ve=/\[\]$/,Ge=/\r?\n/g,qe=/#.*$/,Ue=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Xe=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ye=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Qe=/^(?:GET|HEAD)$/,Je=/^\/\//,Ke=/\?/,Ze=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,et=/^(?:select|textarea)/i,tt=/\s+/,it=/([?&])_=[^&]*/,rt=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,nt=P.fn.load,at={},ot={},lt=["*/"]+["*"];try{He=E.href}catch(st){He=R.createElement("a"),He.href="",He=He.href}Oe=rt.exec(He.toLowerCase())||[],P.fn.extend({load:function(e,i,r){if("string"!=typeof e&&nt)return nt.apply(this,arguments);if(!this.length)return this;var n=e.indexOf(" ");if(n>=0){var a=e.slice(n,e.length);e=e.slice(0,n)}var o="GET";i&&(P.isFunction(i)?(r=i,i=t):"object"==typeof i&&(i=P.param(i,P.ajaxSettings.traditional),o="POST"));var l=this;return P.ajax({url:e,type:o,dataType:"html",data:i,complete:function(e,t,i){i=e.responseText,e.isResolved()&&(e.done(function(e){i=e}),l.html(a?P("<div>").append(i.replace(Ze,"")).find(a):i)),r&&l.each(r,[i,t,e])}}),this},serialize:function(){return P.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?P.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||et.test(this.nodeName)||Xe.test(this.type))}).map(function(e,t){var i=P(this).val();return null==i?null:P.isArray(i)?P.map(i,function(e,i){return{name:t.name,value:e.replace(Ge,"\r\n")}}):{name:t.name,value:i.replace(Ge,"\r\n")}}).get()}}),P.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){P.fn[t]=function(e){return this.on(t,e)}}),P.each(["get","post"],function(e,i){P[i]=function(e,r,n,a){return P.isFunction(r)&&(a=a||n,n=r,r=t),P.ajax({type:i,url:e,data:r,success:n,dataType:a})}}),P.extend({getScript:function(e,i){return P.get(e,t,i,"script")},getJSON:function(e,t,i){return P.get(e,t,i,"json")},ajaxSetup:function(e,t){return t?h(e,P.ajaxSettings):(t=e,e=P.ajaxSettings),h(e,t),e},ajaxSettings:{url:He,isLocal:Ye.test(Oe[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":lt},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":P.parseJSON,"text xml":P.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:p(at),ajaxTransport:p(ot),ajax:function(e,i){function r(e,i,r,o){if(2!==_){_=2,s&&clearTimeout(s),l=t,a=o||"",D.readyState=e>0?4:0;var u,g,p,w,C,k=i,T=r?c(f,D,r):t;if(e>=200&&300>e||304===e)if(f.ifModified&&((w=D.getResponseHeader("Last-Modified"))&&(P.lastModified[n]=w),(C=D.getResponseHeader("Etag"))&&(P.etag[n]=C)),304===e)k="notmodified",u=!0;else try{g=d(f,T),k="success",u=!0}catch(B){k="parsererror",p=B}else p=k,(!k||e)&&(k="error",0>e&&(e=0));D.status=e,D.statusText=""+(i||k),u?b.resolveWith(v,[g,k,D]):b.rejectWith(v,[D,k,p]),D.statusCode(y),y=t,h&&m.trigger("ajax"+(u?"Success":"Error"),[D,f,u?g:p]),x.fireWith(v,[D,k]),h&&(m.trigger("ajaxComplete",[D,f]),--P.active||P.event.trigger("ajaxStop"))}}"object"==typeof e&&(i=e,e=t),i=i||{};var n,a,o,l,s,u,h,p,f=P.ajaxSetup({},i),v=f.context||f,m=v!==f&&(v.nodeType||v instanceof P)?P(v):P.event,b=P.Deferred(),x=P.Callbacks("once memory"),y=f.statusCode||{},w={},C={},_=0,D={readyState:0,setRequestHeader:function(e,t){if(!_){var i=e.toLowerCase();e=C[i]=C[i]||e,w[e]=t}return this},getAllResponseHeaders:function(){return 2===_?a:null},getResponseHeader:function(e){var i;if(2===_){if(!o)for(o={};i=Ue.exec(a);)o[i[1].toLowerCase()]=i[2];i=o[e.toLowerCase()]}return i===t?null:i},overrideMimeType:function(e){return _||(f.mimeType=e),this},abort:function(e){return e=e||"abort",l&&l.abort(e),r(0,e),this}};if(b.promise(D),D.success=D.done,D.error=D.fail,D.complete=x.add,D.statusCode=function(e){if(e){var t;if(2>_)for(t in e)y[t]=[y[t],e[t]];else t=e[D.status],D.then(t,t)}return this},f.url=((e||f.url)+"").replace(qe,"").replace(Je,Oe[1]+"//"),f.dataTypes=P.trim(f.dataType||"*").toLowerCase().split(tt),null==f.crossDomain&&(u=rt.exec(f.url.toLowerCase()),f.crossDomain=!(!u||u[1]==Oe[1]&&u[2]==Oe[2]&&(u[3]||("http:"===u[1]?80:443))==(Oe[3]||("http:"===Oe[1]?80:443)))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=P.param(f.data,f.traditional)),g(at,f,i,D),2===_)return!1;if(h=f.global,f.type=f.type.toUpperCase(),f.hasContent=!Qe.test(f.type),h&&0===P.active++&&P.event.trigger("ajaxStart"),!f.hasContent&&(f.data&&(f.url+=(Ke.test(f.url)?"&":"?")+f.data,delete f.data),n=f.url,f.cache===!1)){var k=P.now(),T=f.url.replace(it,"$1_="+k);f.url=T+(T===f.url?(Ke.test(f.url)?"&":"?")+"_="+k:"")}(f.data&&f.hasContent&&f.contentType!==!1||i.contentType)&&D.setRequestHeader("Content-Type",f.contentType),f.ifModified&&(n=n||f.url,P.lastModified[n]&&D.setRequestHeader("If-Modified-Since",P.lastModified[n]),P.etag[n]&&D.setRequestHeader("If-None-Match",P.etag[n])),D.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+lt+"; q=0.01":""):f.accepts["*"]);for(p in f.headers)D.setRequestHeader(p,f.headers[p]);if(f.beforeSend&&(f.beforeSend.call(v,D,f)===!1||2===_))return D.abort(),!1;for(p in{success:1,error:1,complete:1})D[p](f[p]);if(l=g(ot,f,i,D)){D.readyState=1,h&&m.trigger("ajaxSend",[D,f]),f.async&&f.timeout>0&&(s=setTimeout(function(){D.abort("timeout")},f.timeout));try{_=1,l.send(w,r)}catch(B){if(!(2>_))throw B;r(-1,B)}}else r(-1,"No Transport");return D},param:function(e,i){var r=[],n=function(e,t){t=P.isFunction(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=P.ajaxSettings.traditional),P.isArray(e)||e.jquery&&!P.isPlainObject(e))P.each(e,function(){n(this.name,this.value)});else for(var a in e)u(a,e[a],i,n);return r.join("&").replace(We,"+")}}),P.extend({active:0,lastModified:{},etag:{}});var dt=P.now(),ct=/(\=)\?(&|$)|\?\?/i;P.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return P.expando+"_"+dt++}}),P.ajaxPrefilter("json jsonp",function(t,i,r){var n="string"==typeof t.data&&/^application\/x\-www\-form\-urlencoded/.test(t.contentType);if("jsonp"===t.dataTypes[0]||t.jsonp!==!1&&(ct.test(t.url)||n&&ct.test(t.data))){var a,o=t.jsonpCallback=P.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,l=e[o],s=t.url,d=t.data,c="$1"+o+"$2";return t.jsonp!==!1&&(s=s.replace(ct,c),t.url===s&&(n&&(d=d.replace(ct,c)),t.data===d&&(s+=(/\?/.test(s)?"&":"?")+t.jsonp+"="+o))),t.url=s,t.data=d,e[o]=function(e){a=[e]},r.always(function(){e[o]=l,a&&P.isFunction(l)&&e[o](a[0])}),t.converters["script json"]=function(){return a||P.error(o+" was not called"),a[0]},t.dataTypes[0]="json","script"}}),P.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return P.globalEval(e),e}}}),P.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),P.ajaxTransport("script",function(e){if(e.crossDomain){var i,r=R.head||R.getElementsByTagName("head")[0]||R.documentElement;return{send:function(n,a){i=R.createElement("script"),i.async="async",e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,n){(n||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,r&&i.parentNode&&r.removeChild(i),i=t,n||a(200,"success"))},r.insertBefore(i,r.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var ut,ht=e.ActiveXObject?function(){for(var e in ut)ut[e](0,1)}:!1,gt=0;P.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&s()||l()}:s,function(e){P.extend(P.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(P.ajaxSettings.xhr()),P.support.ajax&&P.ajaxTransport(function(i){if(!i.crossDomain||P.support.cors){var r;return{send:function(n,a){var o,l,s=i.xhr();if(i.username?s.open(i.type,i.url,i.async,i.username,i.password):s.open(i.type,i.url,i.async),i.xhrFields)for(l in i.xhrFields)s[l]=i.xhrFields[l];i.mimeType&&s.overrideMimeType&&s.overrideMimeType(i.mimeType),!i.crossDomain&&!n["X-Requested-With"]&&(n["X-Requested-With"]="XMLHttpRequest");try{for(l in n)s.setRequestHeader(l,n[l])}catch(d){}s.send(i.hasContent&&i.data||null),r=function(e,n){var l,d,c,u,h;try{if(r&&(n||4===s.readyState))if(r=t,o&&(s.onreadystatechange=P.noop,ht&&delete ut[o]),n)4!==s.readyState&&s.abort();else{l=s.status,c=s.getAllResponseHeaders(),u={},h=s.responseXML,h&&h.documentElement&&(u.xml=h);try{u.text=s.responseText}catch(e){}try{d=s.statusText}catch(g){d=""}l||!i.isLocal||i.crossDomain?1223===l&&(l=204):l=u.text?200:404}}catch(p){n||a(-1,p)}u&&a(l,d,u,c)},i.async&&4!==s.readyState?(o=++gt,ht&&(ut||(ut={},P(e).unload(ht)),ut[o]=r),s.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var pt,ft,vt,mt,bt={},xt=/^(?:toggle|show|hide)$/,yt=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,wt=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];P.fn.extend({show:function(e,t,i){var a,o;if(e||0===e)return this.animate(n("show",3),e,t,i);for(var l=0,s=this.length;s>l;l++)a=this[l],a.style&&(o=a.style.display,!P._data(a,"olddisplay")&&"none"===o&&(o=a.style.display=""),(""===o&&"none"===P.css(a,"display")||!P.contains(a.ownerDocument.documentElement,a))&&P._data(a,"olddisplay",r(a.nodeName)));for(l=0;s>l;l++)a=this[l],a.style&&(o=a.style.display,(""===o||"none"===o)&&(a.style.display=P._data(a,"olddisplay")||""));return this},hide:function(e,t,i){if(e||0===e)return this.animate(n("hide",3),e,t,i);for(var r,a,o=0,l=this.length;l>o;o++)r=this[o],r.style&&(a=P.css(r,"display"),"none"!==a&&!P._data(r,"olddisplay")&&P._data(r,"olddisplay",a));for(o=0;l>o;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:P.fn.toggle,toggle:function(e,t,i){var r="boolean"==typeof e;return P.isFunction(e)&&P.isFunction(t)?this._toggle.apply(this,arguments):null==e||r?this.each(function(){var t=r?e:P(this).is(":hidden");P(this)[t?"show":"hide"]()}):this.animate(n("toggle",3),e,t,i),this},fadeTo:function(e,t,i,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,i,r)},animate:function(e,t,i,n){function a(){o.queue===!1&&P._mark(this);var t,i,n,a,l,s,d,c,u,h,g,p=P.extend({},o),f=1===this.nodeType,v=f&&P(this).is(":hidden");p.animatedProperties={};for(n in e)if(t=P.camelCase(n),n!==t&&(e[t]=e[n],delete e[n]),(l=P.cssHooks[t])&&"expand"in l){s=l.expand(e[t]),delete e[t];for(n in s)n in e||(e[n]=s[n])}for(t in e){if(i=e[t],P.isArray(i)?(p.animatedProperties[t]=i[1],i=e[t]=i[0]):p.animatedProperties[t]=p.specialEasing&&p.specialEasing[t]||p.easing||"swing","hide"===i&&v||"show"===i&&!v)return p.complete.call(this);f&&("height"===t||"width"===t)&&(p.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===P.css(this,"display")&&"none"===P.css(this,"float")&&(P.support.inlineBlockNeedsLayout&&"inline"!==r(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=p.overflow&&(this.style.overflow="hidden");for(n in e)a=new P.fx(this,p,n),i=e[n],xt.test(i)?(g=P._data(this,"toggle"+n)||("toggle"===i?v?"show":"hide":0),g?(P._data(this,"toggle"+n,"show"===g?"hide":"show"),a[g]()):a[i]()):(d=yt.exec(i),c=a.cur(),d?(u=parseFloat(d[2]),h=d[3]||(P.cssNumber[n]?"":"px"),"px"!==h&&(P.style(this,n,(u||1)+h),c=(u||1)/a.cur()*c,P.style(this,n,c+h)),d[1]&&(u=("-="===d[1]?-1:1)*u+c),a.custom(c,u,h)):a.custom(c,i,""));return!0}var o=P.speed(t,i,n);return P.isEmptyObject(e)?this.each(o.complete,[!1]):(e=P.extend({},e),o.queue===!1?this.each(a):this.queue(o.queue,a))},stop:function(e,i,r){return"string"!=typeof e&&(r=i,i=e,e=t),i&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function t(e,t,i){var n=t[i];P.removeData(e,i,!0),n.stop(r)}var i,n=!1,a=P.timers,o=P._data(this);if(r||P._unmark(!0,this),null==e)for(i in o)o[i]&&o[i].stop&&i.indexOf(".run")===i.length-4&&t(this,o,i);else o[i=e+".run"]&&o[i].stop&&t(this,o,i);for(i=a.length;i--;)a[i].elem===this&&(null==e||a[i].queue===e)&&(r?a[i](!0):a[i].saveState(),n=!0,a.splice(i,1));(!r||!n)&&P.dequeue(this,e)})}}),P.each({slideDown:n("show",1),slideUp:n("hide",1),slideToggle:n("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){P.fn[e]=function(e,i,r){return this.animate(t,e,i,r)}}),P.extend({speed:function(e,t,i){var r=e&&"object"==typeof e?P.extend({},e):{complete:i||!i&&t||P.isFunction(e)&&e,duration:e,easing:i&&t||t&&!P.isFunction(t)&&t};return r.duration=P.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in P.fx.speeds?P.fx.speeds[r.duration]:P.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(e){P.isFunction(r.old)&&r.old.call(this),r.queue?P.dequeue(this,r.queue):e!==!1&&P._unmark(this)},r},easing:{linear:function(e){return e},swing:function(e){return-Math.cos(e*Math.PI)/2+.5}},timers:[],fx:function(e,t,i){this.options=t,this.elem=e,this.prop=i,t.orig=t.orig||{}}}),P.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(P.fx.step[this.prop]||P.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var e,t=P.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?t&&"auto"!==t?t:0:e},custom:function(e,i,r){function n(e){return a.step(e)}var a=this,l=P.fx;this.startTime=mt||o(),this.end=i,this.now=this.start=e,this.pos=this.state=0,this.unit=r||this.unit||(P.cssNumber[this.prop]?"":"px"),n.queue=this.options.queue,n.elem=this.elem,n.saveState=function(){P._data(a.elem,"fxshow"+a.prop)===t&&(a.options.hide?P._data(a.elem,"fxshow"+a.prop,a.start):a.options.show&&P._data(a.elem,"fxshow"+a.prop,a.end))},n()&&P.timers.push(n)&&!vt&&(vt=setInterval(l.tick,l.interval))},show:function(){var e=P._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||P.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),P(this.elem).show()},hide:function(){this.options.orig[this.prop]=P._data(this.elem,"fxshow"+this.prop)||P.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,i,r,n=mt||o(),a=!0,l=this.elem,s=this.options;if(e||n>=s.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),s.animatedProperties[this.prop]=!0;for(t in s.animatedProperties)s.animatedProperties[t]!==!0&&(a=!1);if(a){if(null!=s.overflow&&!P.support.shrinkWrapBlocks&&P.each(["","X","Y"],function(e,t){l.style["overflow"+t]=s.overflow[e]}),s.hide&&P(l).hide(),s.hide||s.show)for(t in s.animatedProperties)P.style(l,t,s.orig[t]),P.removeData(l,"fxshow"+t,!0),P.removeData(l,"toggle"+t,!0);r=s.complete,r&&(s.complete=!1,r.call(l))}return!1}return s.duration==1/0?this.now=n:(i=n-this.startTime,this.state=i/s.duration,this.pos=P.easing[s.animatedProperties[this.prop]](this.state,i,0,1,s.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},P.extend(P.fx,{tick:function(){for(var e,t=P.timers,i=0;i<t.length;i++)e=t[i],!e()&&t[i]===e&&t.splice(i--,1);t.length||P.fx.stop()},interval:13,stop:function(){clearInterval(vt),vt=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){P.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&null!=e.elem.style[e.prop]?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),P.each(wt.concat.apply([],wt),function(e,t){t.indexOf("margin")&&(P.fx.step[t]=function(e){P.style(e.elem,t,Math.max(0,e.now)+e.unit)})}),P.expr&&P.expr.filters&&(P.expr.filters.animated=function(e){return P.grep(P.timers,function(t){return e===t.elem}).length});var Ct,_t=/^t(?:able|d|h)$/i,Dt=/^(?:body|html)$/i;Ct="getBoundingClientRect"in R.documentElement?function(e,t,r,n){try{n=e.getBoundingClientRect()}catch(a){}if(!n||!P.contains(r,e))return n?{top:n.top,left:n.left}:{top:0,left:0};var o=t.body,l=i(t),s=r.clientTop||o.clientTop||0,d=r.clientLeft||o.clientLeft||0,c=l.pageYOffset||P.support.boxModel&&r.scrollTop||o.scrollTop,u=l.pageXOffset||P.support.boxModel&&r.scrollLeft||o.scrollLeft,h=n.top+c-s,g=n.left+u-d;return{top:h,left:g}}:function(e,t,i){for(var r,n=e.offsetParent,a=e,o=t.body,l=t.defaultView,s=l?l.getComputedStyle(e,null):e.currentStyle,d=e.offsetTop,c=e.offsetLeft;(e=e.parentNode)&&e!==o&&e!==i&&(!P.support.fixedPosition||"fixed"!==s.position);)r=l?l.getComputedStyle(e,null):e.currentStyle,d-=e.scrollTop,c-=e.scrollLeft,e===n&&(d+=e.offsetTop,c+=e.offsetLeft,P.support.doesNotAddBorder&&(!P.support.doesAddBorderForTableAndCells||!_t.test(e.nodeName))&&(d+=parseFloat(r.borderTopWidth)||0,c+=parseFloat(r.borderLeftWidth)||0),a=n,n=e.offsetParent),P.support.subtractsBorderForOverflowNotVisible&&"visible"!==r.overflow&&(d+=parseFloat(r.borderTopWidth)||0,c+=parseFloat(r.borderLeftWidth)||0),s=r;return("relative"===s.position||"static"===s.position)&&(d+=o.offsetTop,c+=o.offsetLeft),P.support.fixedPosition&&"fixed"===s.position&&(d+=Math.max(i.scrollTop,o.scrollTop),c+=Math.max(i.scrollLeft,o.scrollLeft)),{top:d,left:c}},P.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){P.offset.setOffset(this,e,t)});var i=this[0],r=i&&i.ownerDocument;return r?i===r.body?P.offset.bodyOffset(i):Ct(i,r,r.documentElement):null},P.offset={bodyOffset:function(e){var t=e.offsetTop,i=e.offsetLeft;return P.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(P.css(e,"marginTop"))||0,i+=parseFloat(P.css(e,"marginLeft"))||0),{top:t,left:i}},setOffset:function(e,t,i){var r=P.css(e,"position");"static"===r&&(e.style.position="relative");var n,a,o=P(e),l=o.offset(),s=P.css(e,"top"),d=P.css(e,"left"),c=("absolute"===r||"fixed"===r)&&P.inArray("auto",[s,d])>-1,u={},h={};c?(h=o.position(),n=h.top,a=h.left):(n=parseFloat(s)||0,a=parseFloat(d)||0),P.isFunction(t)&&(t=t.call(e,i,l)),null!=t.top&&(u.top=t.top-l.top+n),null!=t.left&&(u.left=t.left-l.left+a),"using"in t?t.using.call(e,u):o.css(u)}},P.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),i=this.offset(),r=Dt.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(P.css(e,"marginTop"))||0,i.left-=parseFloat(P.css(e,"marginLeft"))||0,r.top+=parseFloat(P.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(P.css(t[0],"borderLeftWidth"))||0,{top:i.top-r.top,left:i.left-r.left}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||R.body;e&&!Dt.test(e.nodeName)&&"static"===P.css(e,"position");)e=e.offsetParent;return e})}}),P.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var n=/Y/.test(r);P.fn[e]=function(a){return P.access(this,function(e,a,o){var l=i(e);return o===t?l?r in l?l[r]:P.support.boxModel&&l.document.documentElement[a]||l.document.body[a]:e[a]:void(l?l.scrollTo(n?P(l).scrollLeft():o,n?o:P(l).scrollTop()):e[a]=o)},e,a,arguments.length,null)}}),P.each({Height:"height",Width:"width"},function(e,i){var r="client"+e,n="scroll"+e,a="offset"+e;P.fn["inner"+e]=function(){var e=this[0];return e?e.style?parseFloat(P.css(e,i,"padding")):this[i]():null},P.fn["outer"+e]=function(e){var t=this[0];return t?t.style?parseFloat(P.css(t,i,e?"margin":"border")):this[i]():null},P.fn[i]=function(e){return P.access(this,function(e,i,o){var l,s,d,c;return P.isWindow(e)?(l=e.document,s=l.documentElement[r],P.support.boxModel&&s||l.body&&l.body[r]||s):9===e.nodeType?(l=e.documentElement,l[r]>=l[n]?l[r]:Math.max(e.body[n],l[n],e.body[a],l[a])):o===t?(d=P.css(e,i),c=parseFloat(d),P.isNumeric(c)?c:d):void P(e).css(i,o)},i,e,arguments.length,null)}}),e.jQuery=e.$=P,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return P})}(window),function($){if(Function.prototype.ligerExtend=function(e,t){if("function"!=typeof e)return this;this.base=e.prototype,this.base.constructor=e;var i=function(){};i.prototype=e.prototype,this.prototype=new i,this.prototype.constructor=this,t&&$.extend(this.prototype,t)},Function.prototype.ligerDefer=function(e,t,i){var r=this;return setTimeout(function(){r.apply(e,i||[])},t)},window.liger=$.ligerui={version:"V1.3.2",managerCount:0,managers:{},managerIdPrev:"ligerui",autoNewId:!0,error:{managerIsExist:"ç®¡çå¨idå·²ç»å­å¨"},pluginPrev:"liger",attrPrev:"data",getId:function(e){e=e||this.managerIdPrev;var t=e+(1e3+this.managerCount);return this.managerCount++,t},add:function(e){if(2==arguments.length){var t=arguments[1];return t.id=t.id||t.options.id||arguments[0].id,void this.addManager(t)}e.id||(e.id=this.getId(e.__idPrev())),this.managers[e.id]=e},remove:function(e){if("string"==typeof e||"number"==typeof e)delete liger.managers[e];else if("object"==typeof e)if(e instanceof liger.core.Component)delete liger.managers[e.id];else{if(!$(e).attr(this.idAttrName))return!1;delete liger.managers[$(e).attr(this.idAttrName)]}},get:function(e,t){if(t=t||"ligeruiid","string"==typeof e||"number"==typeof e)return liger.managers[e];if("object"==typeof e){var i=e.length?e[0]:e,r=i[t]||$(i).attr(t);return r?liger.managers[r]:null}return null},find:function(e){var t=[];for(var i in this.managers){var r=this.managers[i];e instanceof Function?r instanceof e&&t.push(r):e instanceof Array?-1!=$.inArray(r.__getType(),e)&&t.push(r):r.__getType()==e&&t.push(r);
}return t},run:function(e,t,i){if(e){if(i=$.extend({defaultsNamespace:"ligerDefaults",methodsNamespace:"ligerMethods",controlNamespace:"controls",idAttrName:"ligeruiid",isStatic:!1,hasElement:!0,propertyToElemnt:null},i||{}),e=e.replace(/^ligerGet/,""),e=e.replace(/^liger/,""),null==this||this==window||i.isStatic)return liger.plugins[e]||(liger.plugins[e]={fn:$[liger.pluginPrev+e],isStatic:!0}),new $.ligerui[i.controlNamespace][e]($.extend({},$[i.defaultsNamespace][e]||{},$[i.defaultsNamespace][e+"String"]||{},t.length>0?t[0]:{}));if(liger.plugins[e]||(liger.plugins[e]={fn:$.fn[liger.pluginPrev+e],isStatic:!1}),/Manager$/.test(e))return liger.get(this,i.idAttrName);if(this.each(function(){if(this[i.idAttrName]||$(this).attr(i.idAttrName)){var r=liger.get(this[i.idAttrName]||$(this).attr(i.idAttrName));return void(r&&t.length>0&&r.set(t[0]))}if(!(t.length>=1&&"string"==typeof t[0])){var n=t.length>0?t[0]:null,a=$.extend({},$[i.defaultsNamespace][e],$[i.defaultsNamespace][e+"String"],n);i.propertyToElemnt&&(a[i.propertyToElemnt]=this),i.hasElement?new $.ligerui[i.controlNamespace][e](this,a):new $.ligerui[i.controlNamespace][e](a)}}),0==this.length)return null;if(0==t.length)return liger.get(this,i.idAttrName);if("object"==typeof t[0])return liger.get(this,i.idAttrName);if("string"==typeof t[0]){var r=liger.get(this,i.idAttrName);if(null==r)return;if("option"!=t[0]){var n=t[0];if(!r[n])return;var a=Array.apply(null,t);return a.shift(),r[n].apply(r,a)}if(2==t.length)return r.get(t[1]);if(t.length>=3)return r.set(t[1],t[2])}return null}},defaults:{},methods:{},core:{},controls:{},plugins:{}},$.ligerDefaults={},$.ligerMethos={},liger.defaults=$.ligerDefaults,liger.methods=$.ligerMethos,$.fn.liger=function(e){return e?liger.run.call(this,e,arguments):liger.get(this)},liger.core.Component=function(e){this.events=this.events||{},this.options=e||{},this.children={}},$.extend(liger.core.Component.prototype,{__getType:function(){return"liger.core.Component"},__idPrev:function(){return"ligerui"},set:function(e,t,i){if(e)if("object"!=typeof e){var r=e;if(0==r.indexOf("on"))return void("function"==typeof t&&this.bind(r.substr(2),t));if(this.options||(this.options={}),0!=this.trigger("propertychange",[e,t])){this.options[r]=t;var n="_set"+r.substr(0,1).toUpperCase()+r.substr(1);this[n]&&this[n].call(this,t,i),this.trigger("propertychanged",[e,t])}}else{var a;if(this.options!=e?($.extend(this.options,e),a=e):a=$.extend({},e),void 0==t||1==t)for(var o in a)0==o.indexOf("on")&&this.set(o,a[o]);if(void 0==t||0==t)for(var o in a)0!=o.indexOf("on")&&this.set(o,a[o],i)}},get:function(e){var t="_get"+e.substr(0,1).toUpperCase()+e.substr(1);return this[t]?this[t].call(this,e):this.options[e]},hasBind:function(e){var t=e.toLowerCase(),i=this.events[t];return i&&i.length?!0:!1},trigger:function(e,t){if(e){var i=e.toLowerCase(),r=this.events[i];if(r){t=t||[],t instanceof Array==0&&(t=[t]);for(var n=0;n<r.length;n++){var a=r[n];if(0==a.handler.apply(a.context,t))return!1}}}},bind:function(e,t,i){if("object"!=typeof e){if("function"!=typeof t)return!1;var r=e.toLowerCase(),n=this.events[r]||[];i=i||this,n.push({handler:t,context:i}),this.events[r]=n}else for(var a in e)this.bind(a,e[a])},unbind:function(e,t){if(!e)return void(this.events={});var i=e.toLowerCase(),r=this.events[i];if(r&&r.length)if(t){for(var n=0,a=r.length;a>n;n++)if(r[n].handler==t){r.splice(n,1);break}}else delete this.events[i]},destroy:function(){liger.remove(this)}}),liger.core.UIComponent=function(e,t){liger.core.UIComponent.base.constructor.call(this,t);var i=this._extendMethods();i&&$.extend(this,i),this.element=e,this._init(),this._preRender(),this.trigger("render"),this._render(),this.trigger("rendered"),this._rendered()},liger.core.UIComponent.ligerExtend(liger.core.Component,{__getType:function(){return"liger.core.UIComponent"},_extendMethods:function(){},_init:function(){function loadDataOp(e,t){var i={};if(!e||-1!=e.indexOf("."))return i;var r=liger.defaults[e];if(!r)return i;for(var n in r)if(t.attr(liger.attrPrev+"-"+n)){var a=t.attr(liger.attrPrev+"-"+n);"boolean"==typeof r[n]?i[n]="true"==a||"1"==a:i[n]=a}return i}if(this.type=this.__getType(),this.element?this.id=this.options.id||this.element.id||liger.getId(this.__idPrev()):this.id=this.options.id||liger.getId(this.__idPrev()),liger.add(this),this.element){var attributes=this.attr();if(attributes&&attributes instanceof Array)for(var i=0;i<attributes.length;i++){var name=attributes[i];$(this.element).attr(name)&&(this.options[name]=$(this.element).attr(name))}var p=this.options;if($(this.element).attr("ligerui"))try{var attroptions=$(this.element).attr("ligerui");0!=attroptions.indexOf("{")&&(attroptions="{"+attroptions+"}"),eval("attroptions = "+attroptions+";"),attroptions&&$.extend(p,attroptions)}catch(e){}$.extend(p,loadDataOp(this.__getType(),$(this.element)))}},_preRender:function(){},_render:function(){},_rendered:function(){this.element&&$(this.element).attr("ligeruiid",this.id)},_setCls:function(e){this.element&&e&&$(this.element).addClass(e)},attr:function(){return[]},destroy:function(){this.element&&$(this.element).remove(),this.options=null,liger.remove(this)}}),liger.controls.Input=function(e,t){liger.controls.Input.base.constructor.call(this,e,t)},liger.controls.Input.ligerExtend(liger.core.UIComponent,{__getType:function(){return"liger.controls.Input"},attr:function(){return["nullText"]},setValue:function(e){return this.set("value",e)},getValue:function(){return this.get("value")},_setReadonly:function(e){var t=this.wrapper||this.text;if(t&&t.hasClass("l-text")){var i=this.inputText;e?(i&&i.attr("readonly","readonly"),t.addClass("l-text-readonly")):(i&&i.removeAttr("readonly"),t.removeClass("l-text-readonly"))}},setReadonly:function(e){return this.set("readonly",e)},setEnabled:function(){return this.set("disabled",!1)},setDisabled:function(){return this.set("disabled",!0)},updateStyle:function(){},resize:function(e,t){this.set({width:e,height:t+2})}}),liger.win={top:!1,mask:function(e){function t(){if(liger.win.windowMask){var e=$(window).height()+$(window).scrollTop();liger.win.windowMask.height(e)}}this.windowMask||(this.windowMask=$("<div class='l-window-mask' style='display: block;'></div>").appendTo("body"),$(window).bind("resize.ligeruiwin",t),$(window).bind("scroll",t)),this.windowMask.show(),t(),this.masking=!0},unmask:function(e){for(var t=$("body > .l-dialog:visible,body > .l-window:visible"),i=0,r=t.length;r>i;i++){var n=t.eq(i).attr("ligeruiid");if(!e||e.id!=n){var a=liger.get(n);if(a){var o=a.get("modal");if(o)return}}}this.windowMask&&this.windowMask.hide(),this.masking=!1},createTaskbar:function(){return this.taskbar||(this.taskbar=$('<div class="l-taskbar"><div class="l-taskbar-tasks"></div><div class="l-clear"></div></div>').appendTo("body"),this.top&&this.taskbar.addClass("l-taskbar-top"),this.taskbar.tasks=$(".l-taskbar-tasks:first",this.taskbar),this.tasks={}),this.taskbar.show(),this.taskbar.animate({bottom:0}),this.taskbar},removeTaskbar:function(){var e=this;e.taskbar.animate({bottom:-32},function(){e.taskbar.remove(),e.taskbar=null})},activeTask:function(e){for(var t in this.tasks){var i=this.tasks[t];t==e.id?i.addClass("l-taskbar-task-active"):i.removeClass("l-taskbar-task-active")}},getTask:function(e){var t=this;if(t.taskbar)return t.tasks[e.id]?t.tasks[e.id]:null},addTask:function(e){var t=this;if(t.taskbar||t.createTaskbar(),t.tasks[e.id])return t.tasks[e.id];var i=e.get("title"),r=t.tasks[e.id]=$('<div class="l-taskbar-task"><div class="l-taskbar-task-icon"></div><div class="l-taskbar-task-content">'+i+"</div></div>");return t.taskbar.tasks.append(r),t.activeTask(e),r.bind("click",function(){t.activeTask(e),e.actived?e.min():e.active()}).hover(function(){$(this).addClass("l-taskbar-task-over")},function(){$(this).removeClass("l-taskbar-task-over")}),r},hasTask:function(){for(var e in this.tasks)if(this.tasks[e])return!0;return!1},removeTask:function(e){var t=this;t.taskbar&&(t.tasks[e.id]&&(t.tasks[e.id].unbind(),t.tasks[e.id].remove(),delete t.tasks[e.id]),t.hasTask()||t.removeTaskbar())},setFront:function(e){var t=liger.find(liger.core.Win);for(var i in t){var r=t[i];r==e?($(r.element).css("z-index","9200"),this.activeTask(r)):$(r.element).css("z-index","9100")}}},liger.core.Win=function(e,t){liger.core.Win.base.constructor.call(this,e,t)},liger.core.Win.ligerExtend(liger.core.UIComponent,{__getType:function(){return"liger.controls.Win"},mask:function(){this.options.modal&&liger.win.mask(this)},unmask:function(){this.options.modal&&liger.win.unmask(this)},min:function(){},max:function(){},active:function(){}}),liger.draggable={dragging:!1},liger.resizable={reszing:!1},liger.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(e){var t=function(e){return 10>e?"0"+e:e},i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=function(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'};if(null===e)return"null";var n=typeof e;if("undefined"!==n){if("string"===n)return r(e);if("number"===n||"boolean"===n)return""+e;if("object"===n){if("function"==typeof e.toJSON)return liger.toJSON(e.toJSON());if(e.constructor===Date)return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null;var a=[];if(e.constructor===Array){for(var o=0,l=e.length;l>o;o++)a.push(liger.toJSON(e[o])||"null");return"["+a.join(",")+"]"}var s,d;for(var c in e){if(n=typeof c,"number"===n)s='"'+c+'"';else{if("string"!==n)continue;s=r(c)}n=typeof e[c],"function"!==n&&"undefined"!==n&&(d=liger.toJSON(e[c]),a.push(s+":"+d))}return"{"+a.join(",")+"}"}}},liger.getEditor=function(e){var t=e.type,i=e.control,r=e.master;if(!t)return null;var n=0;i&&(i=i.substr(0,1).toUpperCase()+i.substr(1));var a={create:function(a,o,l){var s=o.field||o.column,d=l||{},c=o.column?!0:!1,u=$.extend({},e.options),h="text";-1!=$.inArray(t,["password","file","checkbox","radio"])&&(h=t),e.password&&(h="password");var g=$("<input type='"+h+"'/>");if(e.body&&(g=e.body.clone()),g.appendTo(a),o.field){var p=s.name,f=$.isFunction(d.prefixID)?d.prefixID(r):d.prefixID||"";if(u.id=s.id||f+s.name,-1!=$.inArray(t,["select","combobox","autocomplete","popup"])&&(p=s.textField||s.comboboxName,s.comboboxName&&!s.id&&(u.id=(d.prefixID||"")+s.comboboxName)),-1!=$.inArray(t,["select","combobox","autocomplete","popup","radiolist","checkboxlist","listbox"])&&(u.valueFieldID=f+s.name),!e.body){var v=f+p,m=(new Date).getTime()+"_"+ ++n+"_"+s.name;g.attr($.extend({id:m,name:v},s.attr)),s.cssClass&&g.addClass(s.cssClass),s.validate&&!r.options.unSetValidateAttr&&g.attr("validate",liger.toJSON(s.validate))}$.extend(u,s.options)}if(s.dictionary&&(s.editor=s.editor||{},!s.editor.data)){var b=[],x=s.dictionary.split("|");$(x).each(function(e,t){var i=t.split(","),r=i[0],n=i.length>=2?i[1]:i[0];b.push({id:r,value:r,text:n})}),s.editor.data=b}if(s.editor){s.editor.options&&($.extend(u,s.editor.options),delete s.editor.options),s.editor.valueColumnName&&(u.valueField=s.editor.valueColumnName,delete s.editor.valueColumnName),s.editor.displayColumnName&&(u.textField=s.editor.displayColumnName,delete s.editor.displayColumnName);var y=s.editor.p||s.editor.ext;y&&(y="function"==typeof y?y(o):y,$.extend(u,y),delete s.editor.p,delete s.editor.ext),$.extend(u,s.editor)}c?(u.host_grid=this,u.host_grid_row=o.record,u.host_grid_column=o.column):(u.host_form=this,(s.readonly||u.host_form.get("readonly"))&&(u.readonly=!0));var w=g["liger"+i](u);return c&&setTimeout(function(){g.focus()},100),w},getValue:function(e,t){var i=t.field||t.column;if(e.getValue){var r=e.getValue(),n=t.column?t.column.editor.type:t.field.type;if(i&&i.editor&&i.editor.isArrayValue&&r&&(r=r.split(";")),i&&i.editor&&i.editor.isRef&&e.getText&&(r=[r,e.getText()]),i&&i.editor&&i.editor.isRefMul&&e.getText){var a=r.split(";"),o=e.getText().split(";");r=[];for(var l=0;l<a.length;l++)r.push([a[l],o[l]])}return"int"==n||"digits"==n?r=r?parseInt(r,10):0:("float"==n||"number"==n)&&(r=r?parseFloat(r):0),r}},setValue:function(e,t,i){var r=i.field||i.column;if(e.setValue){if(r&&r.editor&&r.editor.isArrayValue&&t&&(t=t.join(";")),r&&r.editor&&r.editor.isRef&&$.isArray(t)&&(t=t[0]),r&&r.editor&&r.editor.isRefMul&&$.isArray(t)){for(var n=[],a=0;a<t.length;a++)n.push(t[a].length>1?t[a][1]:t[a][0]);t=n.join(";")}e.setValue(t)}},getText:function(e,t){t.field||t.column;if(e.getText){var i=e.getText();if(i)return i}},setText:function(e,t,i){if(t&&e.setText)e.setText(t);else{var r=i.field||i.column;if(t=e.setValue()||i.value||"",r&&r.editor&&r.editor.isRef&&$.isArray(t)&&t.length>1&&(t=t[1]),r&&r.editor&&r.editor.isRefMul&&$.isArray(t)&&t.length>1){for(var n=[],a=0;a<t.length;a++)n.push(t[1]);t=n.join(";")}e.setText&&e.setText(t)}},getSelected:function(e,t){return e.getSelected?e.getSelected():void 0},resize:function(e,t,i,r){r.field&&(t-=2),e.resize&&e.resize(t,i)},setEnabled:function(e,t){t?e.setEnabled&&e.setEnabled():e.setDisabled&&e.setDisabled()},destroy:function(e,t){e.destroy&&e.destroy()}};return $.extend({},a,liger.editorCreatorDefaults||{},e)},liger.editors={text:{control:"TextBox"},date:{control:"DateEditor",setValue:function(editor,value,editParm){"string"==typeof value&&/^\/Date/.test(value)&&(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)),editor.setValue(value)}},combobox:{control:"ComboBox"},spinner:{control:"Spinner"},checkbox:{control:"CheckBox"},checkboxlist:{control:"CheckBoxList",body:$("<div></div>"),resize:function(e,t,i,r){e.set("width",t-2)}},radiolist:{control:"RadioList",body:$("<div></div>"),resize:function(e,t,i,r){e.set("width",t-2)}},listbox:{control:"ListBox",body:$("<div></div>"),resize:function(e,t,i,r){e.set("width",t-2)}},popup:{control:"PopupEdit"},number:{control:"TextBox",options:{number:!0}},currency:{control:"TextBox",options:{currency:!0}},digits:{control:"TextBox",options:{digits:!0}},password:{control:"TextBox",password:!0}},liger.editors.string=liger.editors.text,liger.editors.select=liger.editors.combobox,liger.editors["int"]=liger.editors.digits,liger.editors["float"]=liger.editors.number,liger.editors.chk=liger.editors.checkbox,liger.editors.popupedit=liger.editors.popup,$.fn.live=$.fn.on?$.fn.on:$.fn.live,!$.browser){var userAgent=navigator.userAgent.toLowerCase();$.browser={version:(userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:/webkit/.test(userAgent),opera:/opera/.test(userAgent),msie:/msie/.test(userAgent)&&!/opera/.test(userAgent),mozilla:/mozilla/.test(userAgent)&&!/(compatible|webkit)/.test(userAgent)}}}(jQuery),function(e){liger.inject={prev:"liger-",defaults:{Grid_detail:{height:null,onShowDetail:null},Grid_editor:"ComboBox,DateEditor,Spinner,TextBox,PopupEdit,CheckBoxList,RadioList,Grid_editor",Grid_popup:"PopupEdit",Grid_grid:"Grid",Grid_condition:"Form",Grid_toolbar:"Toolbar",Grid_fields:"Form_fields",Form_editor:"ComboBox,DateEditor,Spinner,TextBox,PopupEdit,CheckBoxList,RadioList,Form_editor",Form_grid:"Grid",Form_columns:"Grid_columns",Form_condition:"Form",Form_popup:"PopupEdit",Form_buttons:"Button",Portal_panel:"Panel"},config:{Grid:{dynamics:"data,isChecked,detail,rowDraggingRender,toolbar,columns",arrays:"columns",columns:{dynamics:"render,totalSummary,headerRender,columns,editor,columns",arrays:"columns",textProperty:"display",columns:"liger.inject.config.Grid.columns",editor:{dynamics:"data,columns,render,renderItem,grid,condition,ext",grid:"liger.inject.config.Grid",condition:"liger.inject.config.Form"}},toolbar:{arrays:"items"}},Form:{dynamics:"validate,fields,buttons",arrays:"fields,buttons",fields:{textProperty:"label",dynamics:"validate,editor",editor:{dynamics:"data,columns,render,renderItem,grid,condition,attr",grid:"liger.inject.config.Grid",condition:"liger.inject.config.Form"}},buttons:"liger.inject.config.Button"},PopupEdit:{dynamics:"grid,condition"},Button:{textProperty:"text",dynamics:"click"},ComboBox:{dynamics:"columns,data,tree,grid,condition,render,parms,renderItem"},ListBox:{dynamics:"columns,data,render,parms"},RadioList:{dynamics:"data,parms"},CheckBoxList:{dynamics:"data,parms"},Panel:{},Portal:{dynamics:"rows,columns",arrays:"rows,columns",columns:{dynamics:"panels",arrays:"panels"},rows:{dynamics:"panels",arrays:"panels"},toolbar:{arrays:"items"}}},parse:function(e){try{return null==e?null:new Function("return "+e+";")()}catch(t){return null}},parseDefault:function(t){var i=this;if(!t)return t;var r={};return e(t.split(",")).each(function(t,n){n&&(n=n.substr(0,1).toUpperCase()+n.substr(1),e.extend(r,i.parse("liger.defaults."+n)))}),r},fotmatValue:function(e,t){return"boolean"==t?"true"==e||"1"==e:"number"==t&&e?parseFloat(e.toString()):e},getOptions:function(t){var i=t.jelement,r=t.defaults,n=t.config;n=e.extend({ignores:"",dynamics:"",arrays:""},n);var a,o=this,l={};n.textProperty&&(l[n.textProperty]=i.text());for(var s in r){var d=s.toLowerCase(),c=e("> ."+d,i);if(-1==e.inArray(s,n.ignores.split(",")))if(c.length){var u=t.controlName+"_"+s,h=o.defaults[u]||liger.defaults[u],g=n[s];"string"==typeof h?h=o.parseDefault(h):"funcion"==typeof h&&(h=h()),"string"==typeof g?g=o.parse(g):"funcion"==typeof g&&(g=g()),h&&(-1!=e.inArray(s,n.arrays.split(","))?(a=[],e(">div,>li,>input",c).each(function(){a.push(o.getOptions({defaults:h,controlName:t.controlName,config:g,jelement:e(this)}))}),l[s]=a):l[s]=o.getOptions({defaults:h,controlName:t.controlName,config:g,jelement:c})),c.remove()}else-1!=e.inArray(s,n.dynamics.split(","))||0==s.indexOf("on")?(a=o.parse(i.attr("data-"+s)||i.attr(s)),a&&(l[s]=o.fotmatValue(a,typeof r[s]))):(a=i.attr("data-"+s)||i.attr(s),a&&(l[s]=o.fotmatValue(a,typeof r[s])))}var p=i.attr("data-options")||i.attr("data-property");return p&&(p=o.parse("{"+p+"}")),p&&e.extend(l,p),l},init:function(){var t=this,i=this.config;for(var r in t.defaults)"string"==typeof t.defaults[r]&&(t.defaults[r]=t.parseDefault(t.defaults[r]));for(var n in liger.controls){var a=i[n]||{},o=t.prev+n.toLowerCase();e("."+o).each(function(){var i=e(this),r=e.extend({onrender:null,onrendered:null},liger.defaults[n]),o=t.getOptions({defaults:r,controlName:n,config:a,jelement:i});i[liger.pluginPrev+n](o)})}}},e(function(){liger.inject.init()})}(jQuery),function(e){e.fn.ligerAccordion=function(t){return e.ligerui.run.call(this,"ligerAccordion",arguments)},e.fn.ligerGetAccordionManager=function(){return e.ligerui.get(this)},e.ligerDefaults.Accordion={height:null,speed:"normal",changeHeightOnResize:!1,heightDiff:0},e.ligerMethos.Accordion={},e.ligerui.controls.Accordion=function(t,i){e.ligerui.controls.Accordion.base.constructor.call(this,t,i)},e.ligerui.controls.Accordion.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Accordion"},__idPrev:function(){return"Accordion"},_extendMethods:function(){return e.ligerMethos.Accordion},_render:function(){var t=this,i=this.options;t.accordion=e(t.element),t.accordion.hasClass("l-accordion-panel")||t.accordion.addClass("l-accordion-panel");var r=0;e("> div[lselected=true]",t.accordion).length>0&&(r=e("> div",t.accordion).index(e("> div[lselected=true]",t.accordion))),e("> div",t.accordion).each(function(t,i){var n=e('<div class="l-accordion-header"><div class="l-accordion-toggle"></div><div class="l-accordion-header-inner"></div></div>');t==r&&e(".l-accordion-toggle",n).addClass("l-accordion-toggle-open"),e(i).attr("title")&&(e(".l-accordion-header-inner",n).html(e(i).attr("title")),e(i).attr("title","")),e(i).before(n),e(i).hasClass("l-accordion-content")||e(i).addClass("l-accordion-content"),e(i).attr("data-icon")&&(n.addClass("l-accordion-header-hasicon"),n.append('<i><img src="'+e(i).attr("data-icon")+'" /></i>'))}),e(".l-accordion-header",t.accordion).removeClass("l-accordion-header-downfirst"),e(".l-accordion-content:visible",t.accordion).next(".l-accordion-header:first").addClass("l-accordion-header-downfirst"),e(".l-accordion-toggle",t.accordion).each(function(){e(this).hasClass("l-accordion-toggle-open")||e(this).hasClass("l-accordion-toggle-close")||e(this).addClass("l-accordion-toggle-close"),e(this).hasClass("l-accordion-toggle-close")&&e(this).parent().next(".l-accordion-content:visible").hide()}),e(".l-accordion-header",t.accordion).hover(function(){e(this).addClass("l-accordion-header-over")},function(){e(this).removeClass("l-accordion-header-over")}),e(".l-accordion-toggle",t.accordion).hover(function(){e(this).hasClass("l-accordion-toggle-open")?e(this).addClass("l-accordion-toggle-open-over"):e(this).hasClass("l-accordion-toggle-close")&&e(this).addClass("l-accordion-toggle-close-over")},function(){e(this).hasClass("l-accordion-toggle-open")?e(this).removeClass("l-accordion-toggle-open-over"):e(this).hasClass("l-accordion-toggle-close")&&e(this).removeClass("l-accordion-toggle-close-over")}),e(">.l-accordion-header",t.accordion).click(function(){var r=e(".l-accordion-toggle:first",this);r.hasClass("l-accordion-toggle-close")?(r.removeClass("l-accordion-toggle-close").removeClass("l-accordion-toggle-close-over l-accordion-toggle-open-over"),r.addClass("l-accordion-toggle-open"),e(this).next(".l-accordion-content").show(i.speed).siblings(".l-accordion-content:visible").hide(i.speed),e(this).siblings(".l-accordion-header").find(".l-accordion-toggle").removeClass("l-accordion-toggle-open").addClass("l-accordion-toggle-close")):(r.removeClass("l-accordion-toggle-open").removeClass("l-accordion-toggle-close-over l-accordion-toggle-open-over").addClass("l-accordion-toggle-close"),e(this).next(".l-accordion-content").hide(i.speed)),e(".l-accordion-header",t.accordion).removeClass("l-accordion-header-downfirst"),e(".l-accordion-content:visible",t.accordion).next(".l-accordion-header:first").addClass("l-accordion-header-downfirst")}),t.headerHoldHeight=0,e("> .l-accordion-header",t.accordion).each(function(){t.headerHoldHeight+=e(this).height()}),i.height&&"string"==typeof i.height&&i.height.indexOf("%")>0?(t.onResize(),i.changeHeightOnResize&&e(window).resize(function(){t.onResize()})):i.height?(t.height=i.heightDiff+i.height,t.accordion.height(t.height),t.setHeight(i.height)):t.header=t.accordion.height(),t.set(i)},onResize:function(){var t=this,i=this.options;if(!i.height||"string"!=typeof i.height||-1==i.height.indexOf("%"))return!1;if("body"==t.accordion.parent()[0].tagName.toLowerCase()){var r=e(window).height();r-=parseInt(t.layout.parent().css("paddingTop")),r-=parseInt(t.layout.parent().css("paddingBottom")),t.height=i.heightDiff+r*parseFloat(t.height)*.01}else t.height=i.heightDiff+t.accordion.parent().height()*parseFloat(i.height)*.01;t.accordion.height(t.height),t.setContentHeight(t.height-t.headerHoldHeight)},setHeight:function(t){var i=this;this.options;i.accordion.height(t),t-=i.headerHoldHeight,e("> .l-accordion-content",i.accordion).height(t)}})}(jQuery),function(e){e.fn.ligerButton=function(t){return e.ligerui.run.call(this,"ligerButton",arguments)},e.fn.ligerGetButtonManager=function(){return e.ligerui.run.call(this,"ligerGetButtonManager",arguments)},e.ligerDefaults.Button={width:60,text:"Button",disabled:!1,click:null,icon:null},e.ligerMethos.Button={},e.ligerui.controls.Button=function(t,i){e.ligerui.controls.Button.base.constructor.call(this,t,i)},e.ligerui.controls.Button.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"Button"},__idPrev:function(){return"Button"},_extendMethods:function(){return e.ligerMethos.Button},_render:function(){var t=this,i=this.options;t.button=e(t.element),t.button.addClass("l-button"),t.button.append('<div class="l-button-l"></div><div class="l-button-r"></div><span></span>'),t.button.hover(function(){i.disabled||t.button.addClass("l-button-over")},function(){i.disabled||t.button.removeClass("l-button-over")}),i.click&&t.button.click(function(){i.disabled||i.click()}),t.set(i)},_setIcon:function(e){var t=this;e?(t.button.addClass("l-button-hasicon"),t.button.append('<img src="'+e+'" />')):(t.button.removeClass("l-button-hasicon"),t.button.find("img").remove())},_setEnabled:function(e){e&&this.button.removeClass("l-button-disabled")},_setDisabled:function(e){e?(this.button.addClass("l-button-disabled"),this.options.disabled=!0):(this.button.removeClass("l-button-disabled"),this.options.disabled=!1)},_setWidth:function(e){this.button.width(e)},_setText:function(t){e("span",this.button).html(t)},setValue:function(e){this.set("text",e)},getValue:function(){return this.options.text},setEnabled:function(){this.set("disabled",!1)},setDisabled:function(){this.set("disabled",!0)}})}(jQuery),function(e){e.fn.ligerCheckBox=function(t){return e.ligerui.run.call(this,"ligerCheckBox",arguments)},e.fn.ligerGetCheckBoxManager=function(){return e.ligerui.run.call(this,"ligerGetCheckBoxManager",arguments)},e.ligerDefaults.CheckBox={disabled:!1,readonly:!1},e.ligerMethos.CheckBox={},e.ligerui.controls.CheckBox=function(t,i){e.ligerui.controls.CheckBox.base.constructor.call(this,t,i)},e.ligerui.controls.CheckBox.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"CheckBox"},__idPrev:function(){return"CheckBox"},_extendMethods:function(){return e.ligerMethos.CheckBox},_render:function(){var t=this,i=this.options;t.input=e(t.element),t.link=e('<a class="l-checkbox"></a>'),t.wrapper=t.input.addClass("l-hidden").wrap('<div class="l-checkbox-wrapper"></div>').parent(),t.wrapper.prepend(t.link),t.link.click(function(){return t.input.attr("disabled")||t.input.attr("readonly")?!1:i.disabled||i.readonly?!1:0==t.trigger("beforeClick",[t.element])?!1:(e(this).hasClass("l-checkbox-checked")?t._setValue(!1):t._setValue(!0),void t.input.trigger("change"))}),t.wrapper.hover(function(){i.disabled||e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),this.set(i),this.updateStyle()},_setCss:function(e){this.wrapper.css(e)},_setValue:function(e){var t=this;this.options;e?(t.input[0].checked=!0,t.link.addClass("l-checkbox-checked")):(t.input[0].checked=!1,t.link.removeClass("l-checkbox-checked"))},_setDisabled:function(e){e?(this.input.attr("disabled",!0),this.wrapper.addClass("l-disabled")):(this.input.attr("disabled",!1),this.wrapper.removeClass("l-disabled"))},_getValue:function(){return this.element.checked},updateStyle:function(){this.input.attr("disabled")&&(this.wrapper.addClass("l-disabled"),this.options.disabled=!0),this.input[0].checked?this.link.addClass("l-checkbox-checked"):this.link.removeClass("l-checkbox-checked")}})}(jQuery),function(e){e.fn.ligerCheckBoxList=function(t){return e.ligerui.run.call(this,"ligerCheckBoxList",arguments)},e.ligerDefaults.CheckBoxList={rowSize:3,valueField:"id",textField:"text",valueFieldID:null,name:null,split:";",data:null,parms:null,url:null,urlParms:null,ajaxContentType:null,ajaxType:"post",onSuccess:null,onError:null,css:null,value:null,valueFieldCssClass:null},e.ligerMethos.CheckBoxList=e.ligerMethos.CheckBoxList||{},e.ligerui.controls.CheckBoxList=function(t,i){e.ligerui.controls.CheckBoxList.base.constructor.call(this,t,i)},e.ligerui.controls.CheckBoxList.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"CheckBoxList"},_extendMethods:function(){return e.ligerMethos.CheckBoxList},_init:function(){e.ligerui.controls.CheckBoxList.base._init.call(this)},_render:function(){var t=this,i=this.options;t.data=i.data,t.valueField=null,e(this.element).is(":hidden")||e(this.element).is(":text")?(t.valueField=e(this.element),e(this.element).is(":text")&&t.valueField.hide()):i.valueFieldID?(t.valueField=e("#"+i.valueFieldID+":input,[name="+i.valueFieldID+"]:input"),0==t.valueField.length&&(t.valueField=e('<input type="hidden"/>')),t.valueField[0].id=t.valueField[0].name=i.valueFieldID):(t.valueField=e('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.id+"_val"),null==t.valueField[0].name&&(t.valueField[0].name=t.valueField[0].id),i.valueFieldCssClass&&t.valueField.addClass(i.valueFieldCssClass),t.valueField.attr("data-ligerid",t.id),e(this.element).is(":hidden")||e(this.element).is(":text")?t.checkboxList=e("<div></div>").insertBefore(this.element):t.checkboxList=e(this.element),t.checkboxList.html('<div class="l-checkboxlist-inner"><table cellpadding="0" cellspacing="0" border="0" class="l-checkboxlist-table"></table></div>').addClass("l-checkboxlist").append(t.valueField),t.checkboxList.table=e("table:first",t.checkboxList),t.set(i),t._addClickEven()},destroy:function(){this.checkboxList&&this.checkboxList.remove(),this.options=null,e.ligerui.remove(this)},clear:function(){this._changeValue(""),this.trigger("clear")},_setCss:function(e){e&&this.checkboxList.addClass(e)},_setDisabled:function(t){t?(this.checkboxList.addClass("l-checkboxlist-disabled"),e("input:checkbox",this.radioList).attr("disabled",!0)):(this.checkboxList.removeClass("l-checkboxlist-disabled"),e("input:checkbox",this.radioList).removeAttr("disabled"))},_setWidth:function(e){this.checkboxList.width(e)},_setHeight:function(e){this.checkboxList.height(e)},indexOf:function(e){var t=this,i=this.options;if(!t.data)return-1;for(var r=0,n=t.data.length;n>r;r++)if("object"==typeof e){if(t.data[r]==e)return r}else if(t.data[r][i.valueField].toString()==e.toString())return r;return-1},removeItems:function(t){var i=this;i.data&&(e(t).each(function(e,t){var r=i.indexOf(t);-1!=r&&i.data.splice(r,1)}),i.refresh())},removeItem:function(e){if(this.data){var t=this.indexOf(e);-1!=t&&(this.data.splice(t,1),this.refresh())}},insertItem:function(e,t){var i=this;i.data||(i.data=[]),i.data.splice(t,0,e),i.refresh()},addItems:function(t){var i=this;i.data||(i.data=[]),e(t).each(function(e,t){i.data.push(t)}),i.refresh()},addItem:function(e){var t=this;t.data||(t.data=[]),t.data.push(e),t.refresh()},_setValue:function(e){var t=this,i=this.options;i.value=e,t.valueField.val(i.value),this._dataInit()},setValue:function(e){this._setValue(e)},_setUrl:function(t){if(t){var i=this,r=this.options,n=e.isFunction(r.urlParms)?r.urlParms.call(i):r.urlParms;if(n)for(name in n)t+=-1==t.indexOf("?")?"?":"&",t+=name+"="+n[name];var a=e.isFunction(r.parms)?r.parms():r.parms;"application/json"==r.ajaxContentType&&"string"!=typeof a&&(a=liger.toJSON(a)),e.ajax({type:r.ajaxType||"post",url:t,data:a,cache:!1,dataType:"json",contentType:r.ajaxContentType,success:function(e){i.setData(e),i.trigger("success",[e])},error:function(e,t){i.trigger("error",[e,t])}})}},setUrl:function(e){return this._setUrl(e)},setParm:function(e,t){if(e){var i=this,r=i.get("parms");r||(r={}),r[e]=t,i.set("parms",r)}},clearContent:function(){var t=this;this.options;e("table",t.checkboxList).html("")},_setData:function(e){this.setData(e)},setData:function(e){var t=this;this.options;e&&e.length&&(t.data=e,t.refresh(),t.updateStyle())},refresh:function(){var e=this,t=this.options,i=this.data;if(this.clearContent(),i){for(var r=[],n=t.rowSize,a=!1,o=t.name||e.id,l=0;l<i.length;l++){var s=i[l][t.valueField],d=i[l][t.textField],c=e.id+"-"+l,u=l%n==0;u&&(a&&r.push("</tr>"),r.push("<tr>"),a=!0),r.push("<td><input type='checkbox' name='"+o+"' value='"+s+"' id='"+c+"'/><label for='"+c+"'>"+d+"</label></td>")}a&&r.push("</tr>"),e.checkboxList.table.append(r.join(""))}},_getValue:function(){var t=this,i=this.options,r=i.name||t.id,n=[];return e('input:checkbox[name="'+r+'"]:checked').each(function(){n.push(this.value)}),n.length?n.join(i.split):null},getValue:function(){return this._getValue()},getText:function(){var t=this,i=this.options,r=i.name||t.id,n=[];return e('input:checkbox[name="'+r+'"]:checked').each(function(){n.push(e(this).next("label").text())}),n.length?n.join(i.split):null},updateStyle:function(){this._dataInit()},_dataInit:function(){var e=this,t=(this.options,e.valueField.val());e._changeValue(t)},_changeValue:function(t){var i=this,r=this.options,n=r.name||i.id,a=t?t.split(r.split):[];e("input:checkbox[name='"+n+"']",i.checkboxList).each(function(){
this.checked=e.inArray(this.value,a)>-1}),i.valueField.val(t),i.selectedValue=t},_addClickEven:function(){var e=this;this.options;e.checkboxList.click(function(t){var i=e.getValue();i&&e.valueField.val(i)})}})}(jQuery),function(e){e.fn.ligerComboBox=function(t){return e.ligerui.run.call(this,"ligerComboBox",arguments)},e.fn.ligerGetComboBoxManager=function(){return e.ligerui.run.call(this,"ligerGetComboBoxManager",arguments)},e.ligerDefaults.ComboBox={resize:!0,isMultiSelect:!1,isShowCheckBox:!1,columns:null,width:null,selectBoxWidth:null,selectBoxHeight:120,selectBoxPosYDiff:-3,onBeforeSelect:!1,onAfterShowData:null,onSelected:null,initValue:null,value:null,initText:null,valueField:"id",textField:"text",dataParmName:null,valueFieldID:null,ajaxComplete:null,ajaxBeforeSend:null,ajaxContentType:null,slide:!1,split:";",data:null,dataGetter:null,tree:null,treeLeafOnly:!0,condition:null,grid:null,onStartResize:null,onEndResize:null,hideOnLoseFocus:!0,hideGridOnLoseFocus:!1,url:null,urlParms:null,selectBoxRender:null,selectBoxRenderUpdate:null,detailEnabled:!0,detailUrl:null,detailPostIdField:null,detailDataParmName:null,detailParms:null,detailDataGetter:null,delayLoad:!1,triggerToLoad:!1,emptyText:null,addRowButton:"æ°å¢",addRowButtonClick:null,triggerIcon:null,onSuccess:null,onBeforeSetData:null,onError:null,onBeforeOpen:null,onButtonClick:null,onTextBoxKeyDown:null,onTextBoxKeyEnter:null,render:null,absolute:!0,cancelable:!0,css:null,parms:null,renderItem:null,autocomplete:!1,autocompleteAllowEmpty:!0,isTextBoxMode:!1,highLight:!1,readonly:!1,ajaxType:"post",alwayShowInTop:!1,alwayShowInDown:!1,valueFieldCssClass:null,isRowReadOnly:null,rowClsRender:null,keySupport:!1,initIsTriggerEvent:!1,conditionSearchClick:null,onChangeValue:null,delayLoadGrid:!0,setTextBySource:!0},e.ligerDefaults.ComboBoxString={Search:"æç´¢"},e.ligerMethos.ComboBox=e.ligerMethos.ComboBox||{},e.ligerui.controls.ComboBox=function(t,i){e.ligerui.controls.ComboBox.base.constructor.call(this,t,i)},e.ligerui.controls.ComboBox.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"ComboBox"},_extendMethods:function(){return e.ligerMethos.ComboBox},_init:function(){e.ligerui.controls.ComboBox.base._init.call(this);var t=this.options;t.columns&&(t.isShowCheckBox=!0),t.isMultiSelect&&(t.isShowCheckBox=!0),t.triggerToLoad&&(t.delayLoad=!0)},_render:function(){var t=this,i=this.options;t.data=i.data,t.inputText=null,t.select=null,t.textFieldID="",t.valueFieldID="",t.valueField=null,e(this.element).is(":hidden")?(t.valueField=e(this.element),t.textFieldID=i.textFieldID||this.element.id+"_txt",t.inputText=e('<input type="text" readonly="true"/>'),t.inputText.attr("id",t.textFieldID).insertAfter(e(this.element)),t.valueField.attr("validate")&&(t.inputText.attr("validate",t.valueField.attr("validate")),t.valueField.removeAttr("validate")),t.valueField.attr("validateMessage")&&(t.inputText.attr("validateMessage",t.valueField.attr("validateMessage")),t.valueField.removeAttr("validateMessage"))):"input"==this.element.tagName.toLowerCase()?(this.element.readOnly=!0,t.inputText=e(this.element),t.textFieldID=this.element.id):"select"==this.element.tagName.toLowerCase()&&(e(this.element).hide(),t.select=e(this.element),i.isMultiSelect=!1,i.isShowCheckBox=!1,i.cancelable=!1,t.textFieldID=i.textFieldID||this.element.id+"_txt",t.inputText=e('<input type="text" readonly="true"/>'),t.inputText.attr("id",t.textFieldID).insertAfter(e(this.element)),t.select.attr("validate")&&(t.inputText.attr("validate",t.select.attr("validate")),t.select.removeAttr("validate")),t.select.attr("validateMessage")&&(t.inputText.attr("validateMessage",t.select.attr("validateMessage")),t.select.removeAttr("validateMessage")),!i.value&&this.element.value&&(i.value=this.element.value)),void 0==t.inputText[0].name&&(t.inputText[0].name=t.textFieldID),t.inputText.attr("data-comboboxid",t.id),null==t.valueField&&(i.valueFieldID?(t.valueField=e("#"+i.valueFieldID+":input,[name="+i.valueFieldID+"]:input").filter("input:hidden"),0==t.valueField.length&&(t.valueField=e('<input type="hidden"/>')),t.valueField[0].id=t.valueField[0].name=i.valueFieldID):(t.valueField=e('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.textFieldID+"_val")),i.valueFieldCssClass&&t.valueField.addClass(i.valueFieldCssClass),void 0==t.valueField[0].name&&(t.valueField[0].name=t.valueField[0].id),null!=i.initValue&&(t.valueField[0].value=i.initValue),t.valueField.attr("data-ligerid",t.id),t.link=e('<div class="l-trigger"><div class="l-trigger-icon"></div></div>'),i.triggerIcon&&t.link.find("div:first").addClass(i.triggerIcon),t.selectBox=e('<div class="l-box-select" style="display:none"><div class="l-box-select-inner"><table cellpadding="0" cellspacing="0" border="0" class="l-box-select-table"></table></div></div>'),t.selectBox.table=e("table:first",t.selectBox),t.selectBoxInner=t.selectBox.find(".l-box-select-inner:first"),t.wrapper=t.inputText.wrap('<div class="l-text l-text-combobox"></div>').parent(),t.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),t.wrapper.append(t.link),t.textwrapper=t.wrapper.wrap('<div class="l-text-wrapper"></div>').parent(),i.absolute?t.selectBox.appendTo("body").addClass("l-box-select-absolute"):t.textwrapper.append(t.selectBox),t.textwrapper.append(t.valueField),t.inputText.addClass("l-text-field"),i.isShowCheckBox&&!t.select?e("table",t.selectBox).addClass("l-table-checkbox"):(i.isShowCheckBox=!1,e("table",t.selectBox).addClass("l-table-nocheckbox")),t.link.hover(function(){i.disabled||i.readonly||(this.className="l-trigger-hover")},function(){i.disabled||i.readonly||(this.className="l-trigger")}).mousedown(function(){i.disabled||i.readonly||(this.className="l-trigger-pressed")}).mouseup(function(){i.disabled||i.readonly||(this.className="l-trigger-hover")}).click(function(){return i.disabled||i.readonly?void 0:0==t.trigger("buttonClick")?!1:0==t.trigger("beforeOpen")?!1:void(i.triggerToLoad&&!t.triggerLoaded?(t.triggerLoaded=!0,t._setUrl(i.url,function(){t._toggleSelectBox(t.selectBox.is(":visible"))})):t._toggleSelectBox(t.selectBox.is(":visible")))}),t.inputText.click(function(){return i.disabled||i.readonly?void 0:0==t.trigger("beforeOpen")?!1:void(i.autocomplete?t.updateSelectBoxPosition():i.triggerToLoad&&!t.triggerLoaded?(t.triggerLoaded=!0,t._setUrl(i.url,function(){t._toggleSelectBox(t.selectBox.is(":visible"))})):t._toggleSelectBox(t.selectBox.is(":visible")))}).blur(function(){i.disabled||t.wrapper.removeClass("l-text-focus")}).focus(function(){i.disabled||i.readonly||t.wrapper.addClass("l-text-focus")}).change(function(){t.trigger("changeValue",[this.value])}),t.wrapper.hover(function(){i.disabled||i.readonly||t.wrapper.addClass("l-text-over")},function(){i.disabled||i.readonly||t.wrapper.removeClass("l-text-over")}),t.resizing=!1,t.selectBox.hover(null,function(e){i.hideOnLoseFocus&&t.selectBox.is(":visible")&&!t.boxToggling&&!t.resizing&&t._toggleSelectBox(!0)}),t.bulidContent(),t.set(i,null,"init"),i.selectBoxWidth?t.selectBox.width(i.selectBoxWidth):t.selectBox.css("width",t.wrapper.css("width")),i.grid&&(i.delayLoadGrid?t.bind("show",function(){t.grid||(t.setGrid(i.grid),t.set("SelectBoxHeight",i.selectBoxHeight))}):t.grid||(t.setGrid(i.grid),t.set("SelectBoxHeight",i.selectBoxHeight))),t.updateSelectBoxPosition(),e(document).bind("click.combobox",function(i){t.selectBox.is(":visible")&&0==e(i.target||i.srcElement).closest(".l-box-select, .l-text-combobox").length&&t._toggleSelectBox(!0)})},destroy:function(){this.wrapper&&this.wrapper.remove(),this.selectBox&&this.selectBox.remove(),this.options=null,e.ligerui.remove(this)},clear:function(){this._changeValue("",""),e("a.l-checkbox-checked",this.selectBox).removeClass("l-checkbox-checked"),e("td.l-selected",this.selectBox).removeClass("l-selected"),e(":checkbox",this.selectBox).each(function(){this.checked=!1}),this.trigger("clear")},_setSelectBoxHeight:function(t){if(t){var i=this,r=this.options;if(r.grid)i.grid&&i.grid.set("height",i.getGridHeight(t));else if(r.tree)i.selectBoxInner.height(r.selectBoxHeight);else{var n=e("tr",i.selectBox.table).length;!r.selectBoxHeight&&8>n&&(r.selectBoxHeight=30*n),r.selectBoxHeight&&(8>n?i.selectBoxInner.height("auto"):i.selectBoxInner.height(r.selectBoxHeight))}}},_setCss:function(e){e&&this.wrapper.addClass(e)},_setCancelable:function(t){var i=this,r=this.options;!t&&i.unselect&&(i.unselect.remove(),i.unselect=null),(t||i.unselect)&&(i.unselect=e('<div class="l-trigger l-trigger-cancel"><div class="l-trigger-icon"></div></div>').hide(),i.wrapper.hover(function(){i.unselect.show()},function(){i.unselect.hide()}),r.disabled||r.readonly||!r.cancelable||i.wrapper.append(i.unselect),i.unselect.hover(function(){this.className="l-trigger-hover l-trigger-cancel"},function(){this.className="l-trigger l-trigger-cancel"}).click(function(){i.clear()}))},_setDisabled:function(e){e?this.wrapper.addClass("l-text-disabled"):this.wrapper.removeClass("l-text-disabled")},_setReadonly:function(e){e?this.wrapper.addClass("l-text-readonly"):this.wrapper.removeClass("l-text-readonly")},_setLable:function(t){var i=this,r=this.options;t&&(i.labelwrapper?i.labelwrapper.find(".l-text-label:first").html(t+":&nbsp"):(i.labelwrapper=i.textwrapper.wrap('<div class="l-labeltext"></div>').parent(),i.labelwrapper.prepend('<div class="l-text-label" style="float:left;display:inline;">'+t+":&nbsp</div>"),i.textwrapper.css("float","left")),r.labelWidth?e(".l-text-label",i.labelwrapper).outerWidth(r.labelWidth):r.labelWidth=e(".l-text-label",i.labelwrapper).outerWidth(),e(".l-text-label",i.labelwrapper).width(r.labelWidth),e(".l-text-label",i.labelwrapper).height(i.wrapper.height()),i.labelwrapper.append('<br style="clear:both;" />'),r.labelAlign&&e(".l-text-label",i.labelwrapper).css("text-align",r.labelAlign),i.textwrapper.css({display:"inline"}),i.labelwrapper.width(i.wrapper.outerWidth()+r.labelWidth+2))},_setWidth:function(e){var t=this,i=this.options;e>20&&(t.wrapper.css({width:e}),t.inputText.css({width:e-20}),i.selectBoxWidth||t.selectBox.css({width:e}))},_setHeight:function(e){var t=this;e>10&&(t.wrapper.height(e),t.inputText.height(e-2))},_setResize:function(t){var i=this,r=this.options;if(!r.columns&&t&&e.fn.ligerResizable){var n=r.selectBoxHeight?"e":"se,s,e";i.selectBox.ligerResizable({handles:n,onStartResize:function(){i.resizing=!0,i.trigger("startResize")},onEndResize:function(){return i.resizing=!1,0==i.trigger("endResize")?!1:void 0},onStopResize:function(e,t){return i.grid?(e.newWidth&&i.selectBox.width(e.newWidth),e.newHeight&&i.set({selectBoxHeight:e.newHeight}),i.grid.refreshSize(),i.trigger("endResize"),!1):!0}}),i.selectBox.append("<div class='l-btn-nw-drop'></div>")}},findTextByValue:function(t){var i=this,r=this.options;if(null==t)return"";var n,a="",o=function(e){for(var i=t.toString().split(r.split),n=0;n<i.length;n++)if(i[n]==e&&""!=i[n])return!0;return!1};return n=i.options.grid&&i.options.grid.data?i.options.grid.data.Rows:i.data,e(n).each(function(e,t){var i=t[r.valueField],n=t[r.textField];o(i)&&(a+=n+r.split)}),a.length>0&&(a=a.substr(0,a.length-1)),a},findValueByText:function(t){var i=this,r=this.options;if(!t&&""==t)return"";var n=function(e){for(var i=t.toString().split(r.split),n=0;n<i.length;n++)if(i[n]==e)return!0;return!1},a="";return e(i.data).each(function(e,t){var i=t[r.valueField],o=t[r.textField];n(o)&&(a+=i+r.split)}),a.length>0&&(a=a.substr(0,a.length-1)),a},insertItem:function(e,t){var i=this;this.options;i.data=i.data||[],i.data.splice(t,0,e),i.setData(i.data)},addItem:function(e){var t=this;this.options;t.insertItem(e,(t.data||[]).length)},_setIsTextBoxMode:function(e){var t=this;this.options;e&&t.inputText.removeAttr("readonly")},_setValue:function(t,i){var r=this,n=this.options,a=!1,o=!0;if("init"==i&&(i=null,a=!0,o=n.initIsTriggerEvent?!0:!1),i=n.isTextBoxMode?t:i||r.findTextByValue(t),n.tree)setTimeout(function(){n.setTextBySource?r.selectValueByTree(t):r.treeSelectInit(t)},100);else if(n.isMultiSelect){if(r._changeValue(t,i,o),null!=t){var l=t.toString().split(n.split);e("table.l-table-checkbox :checkbox",r.selectBox).each(function(){this.checked=!1});for(var s=0;s<l.length;s++)e("table.l-table-checkbox tr[value="+l[s]+"] :checkbox",r.selectBox).each(function(){this.checked=!0})}}else r._changeValue(t,i,o),e("tr[value='"+t+"'] td",r.selectBox).addClass("l-selected"),e("tr[value!='"+t+"'] td",r.selectBox).removeClass("l-selected");n.selectBoxRenderUpdate&&n.selectBoxRenderUpdate.call(r,{selectBox:r.selectBox,value:t,text:i})},selectValue:function(e){this._setValue(e)},bulidContent:function(){var e=this,t=this.options;this.clearContent(),e.select?e.setSelect():t.tree&&e.setTree(t.tree)},reload:function(){var e=this,t=this.options;t.url?e.set("url",t.url):e.grid&&e.grid.reload()},_setUrl:function(t,i){if(t){var r=this,n=this.options;if(!n.readonly){if(n.delayLoad&&!r.isAccessDelay&&!r.triggerLoaded)return void(r.isAccessDelay=!0);t=e.isFunction(t)?t.call(r):t;var a=e.isFunction(n.urlParms)?n.urlParms.call(r):n.urlParms;if(a)for(name in a)t+=-1==t.indexOf("?")?"?":"&",t+=name+"="+a[name];var o=e.isFunction(n.parms)?n.parms.call(r):n.parms;"application/json"==n.ajaxContentType&&"string"!=typeof o&&(o=liger.toJSON(o));var l={type:n.ajaxType,url:t,data:o,cache:!1,dataType:"json",beforeSend:n.ajaxBeforeSend,complete:n.ajaxComplete,success:function(t){var a=e.isFunction(n.dataGetter)?a=n.dataGetter.call(r,t):t;a=n.dataParmName&&a?a[n.dataParmName]:a,0!=r.trigger("beforeSetData",[a])&&(r.setData(a),r.trigger("success",[a]),e.isFunction(i)&&i(a))},error:function(e,t){r.trigger("error",[e,t])}};n.ajaxContentType&&(l.contentType=n.ajaxContentType),e.ajax(l)}}},setUrl:function(e,t){return this._setUrl(e,t)},setParm:function(e,t){if(e){var i=this,r=i.get("parms");r||(r={}),r[e]=t,i.set("parms",r)}},clearContent:function(){var t=this,i=this.options;t&&(e("table",t.selectBox).html(""),t&&t._setSelectBoxHeight(i.selectBoxHeight))},setSelect:function(){var t=this,i=this.options;this.clearContent(),t.data=[],e("option",t.select).each(function(i){var r=e(this).val(),n=e(this).html();t.data.push({text:n,id:r});var a=e("<tr><td index='"+i+"' value='"+r+"' text='"+n+"'>"+n+"</td>");e("table.l-table-nocheckbox",t.selectBox).append(a),e("td",a).hover(function(){e(this).addClass("l-over").siblings("td").removeClass("l-over")},function(){e(this).removeClass("l-over")})}),e("td:eq("+t.select[0].selectedIndex+")",t.selectBox).each(function(){if(e(this).hasClass("l-selected"))return void t.selectBox.hide();e(".l-selected",t.selectBox).removeClass("l-selected"),e(this).addClass("l-selected"),t.select[0].selectedIndex!=e(this).attr("index")&&t.select[0].onchange&&(t.select[0].selectedIndex=e(this).attr("index"),t.select[0].onchange());var r=parseInt(e(this).attr("index"));t.select[0].selectedIndex=r,t.select.trigger("change"),t.selectBox.hide();var n=e(this).attr("value"),a=e(this).html();i.render?t.inputText.val(i.render(n,a)):t.inputText.val(a)}),t._addClickEven()},_setData:function(e){this.setData(e)},getRowIndex:function(e){var t=this,i=this.options;if(!e)return-1;if(!t.data||!t.data.length)return-1;for(var r=0;r<t.data.length;r++)if(null!=t.data[r]){var n=t.data[r][i.valueField];if(n==e)return r}return-1},getRow:function(e){var t=this,i=this.options;if(!e)return null;if(!t.data||!t.data.length)return null;for(var r=0;r<t.data.length;r++)if(null!=t.data[r]){var n=t.data[r][i.valueField];if(n==e)return t.data[r]}return null},setData:function(t){var i=this,r=this.options;if(!i.select){if(r.selectBoxRender)return void r.selectBoxRender.call(i,{selectBox:i.selectBox,data:t});if(t&&t.length||(t=[]),i.data!=t&&(i.data=t),i.data=e.isFunction(i.data)?i.data():i.data,this.clearContent(),r.columns){i.selectBox.table.headrow=e("<tr class='l-table-headerow'><td width='18px'></td></tr>"),i.selectBox.table.append(i.selectBox.table.headrow),i.selectBox.table.addClass("l-box-select-grid");for(var n=0;n<r.columns.length;n++){var a=e("<td columnindex='"+n+"' columnname='"+r.columns[n].name+"'>"+r.columns[n].header+"</td>");r.columns[n].width&&a.width(r.columns[n].width),i.selectBox.table.headrow.append(a)}}var o=[];r.emptyText&&(i.emptyRow={},i.emptyRow[r.textField]=r.emptyText,i.emptyRow[r.valueField]=void 0!=r.emptyValue?r.emptyValue:"",t.splice(0,0,i.emptyRow));for(var l=0;l<t.length;l++){var s=t[l][r.valueField],d=t[l][r.textField],c=e.isFunction(r.isRowReadOnly)?r.isRowReadOnly(t[l]):!1;if(r.columns){o.push("<tr value='"+s+"'"),c&&o.push(" class='rowreadonly'"),o.push(">"),o.push("<td style='width:18px;'  index='"+l+"' value='"+s+"' text='"+d+"' ><input type='checkbox' /></td>");for(var n=0;n<r.columns.length;n++){var u=r.columns[n].name;o.push("<td>"+t[l][u]+"</td>")}o.push("</tr>")}else{o.push("<tr value='"+s+"'");var h=[];c&&h.push(" rowreadonly "),e.isFunction(r.rowClsRender)&&h.push(r.rowClsRender(t[l])),h.length&&(o.push(" class='"),o.push(h.join("")),o.push("'")),o.push(">"),r.isShowCheckBox&&o.push("<td style='width:18px;'  index='"+l+"' value='"+s+"' text='"+d+"' ><input type='checkbox' /></td>");var g=d;g=r.renderItem?r.renderItem.call(i,{data:t[l],value:s,text:d,key:i.inputText.val()}):r.autocomplete&&r.highLight?i._highLight(d,i.inputText.val()):"<span>"+g+"</span>",o.push("<td index='"+l+"' value='"+s+"' text='"+d+"' align='left'>"+g+"</td></tr>")}}r.columns?i.selectBox.table.append(o.join("")):r.isShowCheckBox?e("table.l-table-checkbox",i.selectBox).append(o.join("")):e("table.l-table-nocheckbox",i.selectBox).append(o.join("")),r.addRowButton&&r.addRowButtonClick&&!i.addRowButton&&(i.addRowButton=e('<div class="l-box-select-add"><a href="javascript:void(0)" class="link"><div class="icon"></div></a></div>'),i.addRowButton.find(".link").append(r.addRowButton).click(r.addRowButtonClick),i.selectBoxInner.after(i.addRowButton)),i.set("selectBoxHeight",r.selectBoxHeight),r.isShowCheckBox&&e.fn.ligerCheckBox&&e("table input:checkbox",i.selectBox).ligerCheckBox(),e(".l-table-checkbox input:checkbox",i.selectBox).change(function(){if(this.checked&&i.hasBind("beforeSelect")){var t=null;if(t="div"==e(this).parent().get(0).tagName.toLowerCase()?e(this).parent().parent():e(this).parent(),null!=t&&0==i.trigger("beforeSelect",[t.attr("value"),t.attr("text")]))return i.selectBox.slideToggle("fast"),!1}r.isMultiSelect||this.checked&&(e("input:checked",i.selectBox).not(this).each(function(){this.checked=!1,e(".l-checkbox-checked",e(this).parent()).removeClass("l-checkbox-checked")}),i.selectBox.slideToggle("fast")),i._checkboxUpdateValue()}),e("table.l-table-nocheckbox td",i.selectBox).hover(function(){e(this).parent().hasClass("rowreadonly")||e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),i._addClickEven(),r.autocomplete||i.updateStyle(),i.trigger("afterShowData",[t])}},setTree:function(t){var i=this,r=this.options;this.clearContent(),i.selectBox.table.remove(),0!=t.checkbox?t.onCheck=function(){var t=i.treeManager.getChecked(),n=[],a=[];e(t).each(function(e,t){r.treeLeafOnly&&t.data.children||(n.push(t.data[r.valueField]),a.push(t.data[r.textField]))}),i._changeValue(n.join(r.split),a.join(r.split),!0)}:(t.onSelect=function(e){if(!(0==i.trigger("BeforeSelect",[e])||r.treeLeafOnly&&e.data.children)){var t=e.data[r.valueField],n=e.data[r.textField];i._changeValue(t,n,!0),i.selectBox.hide()}},t.onCancelSelect=function(e){i._changeValue("","",!0)}),t.onAfterAppend=function(e,t){if(i.treeManager){var n=null;r.initValue?n=r.initValue:""!=i.valueField.val()&&(n=i.valueField.val()),i.selectValueByTree(n)}},i.tree=e("<ul></ul>"),e("div:first",i.selectBox).append(i.tree),i.innerTree=i.tree.ligerTree(t),i.treeManager=i.tree.ligerGetTreeManager()},getTree:function(){return this.innerTree},selectValueByTree:function(e){var t=this,i=this.options;if(null!=e){var r=t.treeSelectInit(e);t._changeValue(e,r,i.initIsTriggerEvent)}},treeSelectInit:function(t){var i=this,r=this.options;if(null!=t){var n="",a=t.toString().split(r.split);return e(a).each(function(e,t){i.treeManager.selectNode(t.toString(),!1),n+=i.treeManager.getTextByID(t),e<a.length-1&&(n+=r.split)}),n}},setGrid:function(t){var i=this,r=this.options;if(!i.grid){r.hideOnLoseFocus=r.hideGridOnLoseFocus?!0:!1,this.clearContent(),i.selectBox.addClass("l-box-select-lookup"),i.selectBox.table.remove();var n=e("div:first",i.selectBox),a=e("<div></div>").appendTo(n),o=e("<div></div>").appendTo(n);if(i.conditionPanel=a,r.condition){var l=e.extend({labelWidth:60,space:20,width:r.selectBoxWidth},r.condition);i.condition=a.ligerForm(l)}else a.remove();t=e.extend({columnWidth:120,alternatingRow:!1,frozen:!0,rownumbers:!0,allowUnSelectRow:!0},t,{width:"100%",height:i.getGridHeight(),inWindow:!1,parms:r.parms,isChecked:function(t){var n=i.getValue();return n&&r.valueField&&t[r.valueField]?-1!=e.inArray(t[r.valueField].toString(),n.split(r.split)):!1}}),i.grid=i.gridManager=o.ligerGrid(t),i.grid.bind("afterShowData",function(){i.updateSelectBoxPosition()});var s=[],d=function(){var n=[],a=[];e(s).each(function(e,t){n.push(t[r.valueField]),a.push(t[r.textField])}),t.checkbox?i.selected=s:s.length?i.selected=s[0]:i.selected=null,i._changeValue(n.join(r.split),a.join(r.split),!0),i.trigger("gridSelect",{value:n.join(r.split),text:a.join(r.split),data:s})},c=function(e){for(var t=s.length-1;t>=0;t--)s[t][r.valueField]==e[r.valueField]&&s.splice(t,1)},u=function(e){for(var t=s.length-1;t>=0;t--)if(s[t][r.valueField]==e[r.valueField])return;s.push(e)};if(t.checkbox){var h=function(e,t){e&&u(t),!e&&c(t)};i.grid.bind("CheckAllRow",function(t){e(i.grid.rows).each(function(e,i){h(t,i)}),d()}),i.grid.bind("CheckRow",function(e,t){h(e,t),d()})}else i.grid.bind("SelectRow",function(e){s=[e],d(),i._toggleSelectBox(!0)}),i.grid.bind("UnSelectRow",function(){s=[],d()});if(i.bind("show",function(){i.grid.refreshSize()}),i.bind("clear",function(){s=[],i.grid.selecteds=[],i.grid._showData()}),r.condition){var g=e('<li style="margin-right:9px"><div></div></li>'),p=e('<li style="margin-right:9px;float:right"><div></div></li>');e("ul:first",a).append(g).append(p).after('<div class="l-clear"></div>'),e("div",g).ligerButton({text:r.Search,width:40,click:function(){var n=i.condition.toConditions();r.conditionSearchClick?r.conditionSearchClick({grid:i.grid,rules:n}):i.grid.get("url")?(i.grid.setParm(t.conditionParmName||"condition",e.ligerui.toJSON(n)),i.grid.reload()):i.grid.loadData(e.ligerFilter.getFilterFunction(n))}}),e("div",p).ligerButton({text:"å³é­",width:40,click:function(){i.selectBox.hide()}})}i.grid.refreshSize()}},getGridHeight:function(e){var t=this;this.options;return e=e||t.selectBox.height(),e-=t.conditionPanel.height()},_getValue:function(){var t=this,i=this.options;return i.isTextBoxMode?t.inputText.val():e(this.valueField).val()},getValue:function(){return this._getValue()},getSelected:function(){return this.selected},upFocus:function(){var t=this;this.options;if(t.grid){if(!t.grid.rows||!t.grid.rows.length)return;var i=t.grid.getSelected();if(i){var r=e.inArray(i,t.grid.rows);r-1<t.grid.rows.length&&(t.grid.unselect(i),t.grid.select(t.grid.rows[r-1]))}else t.grid.select(t.grid.rows[0])}else{var n=t.selectBox.table.find("td.l-over").attr("index");if(void 0==n||"0"==n)return;n=parseInt(n)-1,t.selectBox.table.find("td.l-over").removeClass("l-over"),t.selectBox.table.find("td[index="+n+"]").addClass("l-over"),t._scrollAdjust(n)}},downFocus:function(){var t=this;this.options;if(t.grid){if(!t.grid.rows||!t.grid.rows.length)return;var i=t.grid.getSelected();if(i){var r=e.inArray(i,t.grid.rows);r+1<t.grid.rows.length&&(t.grid.unselect(i),t.grid.select(t.grid.rows[r+1]))}else t.grid.select(t.grid.rows[0])}else{var n=t.selectBox.table.find("td.l-over").attr("index");if(n==t.data.length-1)return;n=void 0==n?0:parseInt(n)+1,t.selectBox.table.find("td.l-over").removeClass("l-over"),t.selectBox.table.find("td[index="+n+"]").addClass("l-over"),t._scrollAdjust(n)}},_scrollAdjust:function(t){var i=this,r=(this.options,e(".l-box-select-inner",i.selectBox).height()),n=e(".l-box-select-inner table",i.selectBox).height();if(!(r>=n)){var a=(parseInt(n/r)+(n%r?1:0),n/i.data.length),o=parseInt((t+1)*a/r)+((t+1)*a%r?1:0);e(".l-box-select-inner",i.selectBox).scrollTop((o-1)*r)}},getText:function(){return this.inputText.val()},setText:function(e){var t=this,i=this.options;i.isTextBoxMode||t.inputText.val(e)},updateStyle:function(){var e=this,t=this.options;t.initValue=e._getValue(),e._dataInit()},_dataInit:function(){var t=this,i=this.options,r=null;if(null!=i.initValue&&null!=i.initText&&t._changeValue(i.initValue,i.initText),null!=i.initValue){if(r=i.initValue,i.tree)r&&t.selectValueByTree(r);else if(t.data){var n=t.findTextByValue(r);t._changeValue(r,n)}}else if(""!=t.valueField.val())if(r=t.valueField.val(),i.tree)r&&t.selectValueByTree(r);else if(t.data){var n=t.findTextByValue(r);t._changeValue(r,n)}i.isShowCheckBox?e(":checkbox",t.selectBox).each(function(){var t=null,n=e(this);if(t="div"==n.parent().get(0).tagName.toLowerCase()?n.parent().parent():n.parent(),null!=t){e(".l-checkbox",t).removeClass("l-checkbox-checked"),n[0].checked=!1;var a=(r||"").toString().split(i.split);e(a).each(function(i,a){null!=r&&a==t.attr("value")&&(e(".l-checkbox",t).addClass("l-checkbox-checked"),n[0].checked=!0)})}}):e("table tr",t.selectBox).find("td:first").each(function(){null!=r&&r==e(this).attr("value")?e(this).addClass("l-selected"):e(this).removeClass("l-selected")})},_changeValue:function(t,i,r){var n=this,a=this.options;n.valueField.val(t),a&&a.render?n.inputText.val(a.render(t,i)):n.inputText.val(i),n.select&&e("option",n.select).each(function(){e(this).attr("selected",e(this).attr("value")==t)}),n.selectedValue=t,n.selectedText=i,n.inputText.trigger("change"),r&&i&&n.inputText.focus();var o=null;if(t&&"string"==typeof t&&t.indexOf(a.split)>-1){o=[];var l=t.split(a.split);e(l).each(function(e,t){o.push(n.getRow(t))})}else t&&(o=n.getRow(t));r&&n.trigger("selected",[t,i,o])},_checkboxUpdateValue:function(){var t=this,i=this.options,r="",n="";e("input:checked",t.selectBox).each(function(){var t=null;t="div"==e(this).parent().get(0).tagName.toLowerCase()?e(this).parent().parent():e(this).parent(),t&&(r+=t.attr("value")+i.split,n+=t.attr("text")+i.split)}),r.length>0&&(r=r.substr(0,r.length-1)),n.length>0&&(n=n.substr(0,n.length-1)),t._changeValue(r,n)},loadDetail:function(t,i){var r=this,n=this.options,a=e.isFunction(n.detailParms)?n.detailParms.call(r):n.detailParms;a[n.detailPostIdField||"id"]=t,"application/json"==n.ajaxContentType&&(a=liger.toJSON(a));var o={type:n.ajaxType,url:n.detailUrl,data:a,cache:!0,dataType:"json",beforeSend:n.ajaxBeforeSend,complete:n.ajaxComplete,success:function(t){var r=e.isFunction(n.detailDataGetter)?n.detailDataGetter(t):t;r=n.detailDataParmName?r[n.detailDataParmName]:r,i&&i(r)}};n.ajaxContentType&&(o.contentType=n.ajaxContentType),e.ajax(o)},enabledLoadDetail:function(){var e=this.options;return e.detailUrl&&e.detailEnabled?!0:!1},_addClickEven:function(){var t=this,i=this.options;e(".l-table-nocheckbox td",t.selectBox).click(function(){function r(){return t.hasBind("beforeSelect")&&0==t.trigger("beforeSelect",[a,s,l])?(i.slide?t.selectBox.slideToggle("fast"):t.selectBox.hide(),!1):(t.selected=l,e(this).hasClass("l-selected")?void(i.slide?t.selectBox.slideToggle("fast"):t.selectBox.hide()):(e(".l-selected",t.selectBox).removeClass("l-selected"),n.addClass("l-selected"),t.select&&t.select[0].selectedIndex!=o&&(t.select[0].selectedIndex=o,t.select.trigger("change")),i.slide?(t.boxToggling=!0,t.selectBox.hide("fast",function(){t.boxToggling=!1})):t.selectBox.hide(),t.lastInputText=s,void t._changeValue(a,s,!0)))}var n=e(this),a=n.attr("value"),o=parseInt(e(this).attr("index")),l=t.data[o],s=n.attr("text"),d=n.parent().hasClass("rowreadonly");d||(t.enabledLoadDetail()?t.loadDetail(a,function(e){t.data[o]=l=e,r()}):r())})},updateSelectBoxPosition:function(){var t=this,i=this.options;if(i&&i.absolute){var r=e(document).height();i.alwayShowInTop||Number(t.wrapper.offset().top+1+t.wrapper.outerHeight()+t.selectBox.height())>r&&r>Number(t.selectBox.height()+1)?t.selectBox.css({left:t.wrapper.offset().left,top:t.wrapper.offset().top-1-t.selectBox.height()+(i.selectBoxPosYDiff||0)}):t.selectBox.css({left:t.wrapper.offset().left,top:t.wrapper.offset().top+1+t.wrapper.outerHeight()+(i.selectBoxPosYDiff||0)}),i.alwayShowInDown&&t.selectBox.css({left:t.wrapper.offset().left,top:t.wrapper.offset().top+1+t.wrapper.outerHeight()})}else{var n=t.wrapper.offset().top-e(window).scrollTop(),a=t.selectBox.height()+textHeight+4;n+a>e(window).height()&&n>a&&t.selectBox.css("marginTop",-1*(t.selectBox.height()+textHeight+5)+(i.selectBoxPosYDiff||0))}},_toggleSelectBox:function(t){var i=this,r=this.options;if(i&&r){for(var n=e.ligerui.find(e.ligerui.controls.ComboBox),a=0,o=n.length;o>a;a++){var l=n[a];l.id!=i.id&&null!=l.selectBox.is(":visible")&&l.selectBox.is(":visible")&&l.selectBox.hide()}n=e.ligerui.find(e.ligerui.controls.DateEditor);for(var a=0,o=n.length;o>a;a++){var l=n[a];l.id!=i.id&&null!=l.dateeditor.is(":visible")&&l.dateeditor.is(":visible")&&l.dateeditor.hide()}i.wrapper.height();if(i.boxToggling=!0,t)r.slide?i.selectBox.slideToggle("fast",function(){i.boxToggling=!1}):(i.selectBox.hide(),i.boxToggling=!1);else if(i.updateSelectBoxPosition(),r.slide)i.selectBox.slideToggle("fast",function(){if(i.boxToggling=!1,!r.isShowCheckBox&&e("td.l-selected",i.selectBox).length>0){var t=e("td.l-selected",i.selectBox).offset().top-i.selectBox.offset().top;e(".l-box-select-inner",i.selectBox).animate({scrollTop:t})}});else if(i._selectBoxShow(),i.boxToggling=!1,!i.tree&&!i.grid&&!r.isShowCheckBox&&e("td.l-selected",i.selectBox).length>0){var s=e("td.l-selected",i.selectBox).offset().top-i.selectBox.offset().top;e(".l-box-select-inner",i.selectBox).animate({scrollTop:s})}i.isShowed=i.selectBox.is(":visible"),i.trigger("toggle",[t]),i.trigger(t?"hide":"show")}},_selectBoxShow:function(){var e=this,t=this.options;if(!t.readonly)return t.grid||t.tree?void e.selectBox.show():void(e.selectBox.table.find("tr").length||t.selectBoxRender&&e.selectBoxInner.html()?e.selectBox.show():e.selectBox.hide())},_highLight:function(e,t){if(!e)return e;var i=e.indexOf(t);return-1==i?e:e.substring(0,i)+"<span class='l-highLight'>"+t+"</span>"+e.substring(t.length+i)},_setAutocomplete:function(t){var i=this,r=this.options;t&&(r.readonly||(i.inputText.removeAttr("readonly"),i.lastInputText=i.inputText.val(),i.inputText.keyup(function(n){38!=n.keyCode&&40!=n.keyCode&&13!=n.keyCode&&(this._acto&&clearTimeout(this._acto),this._acto=setTimeout(function(){if(i.lastInputText!=i.inputText.val()){var n=i.inputText.val();if(n?n=n.replace(/(^\s*)|(\s*$)/g,""):(r.initValue="",i.valueField.val("")),i.lastInputText=i.inputText.val(),e.isFunction(t))return void t.call(i,{key:n,show:function(){i._selectBoxShow()}});if(!r.autocompleteAllowEmpty&&!n)return i.clear(),void i.selectBox.hide();r.url?(i.setParm("key",n),i.setUrl(r.url,function(){i._selectBoxShow()})):r.grid&&(i.grid.setParm("key",n),i.grid.reload()),this._acto=null}},300))})))}}),e.ligerui.controls.ComboBox.prototype.setValue=e.ligerui.controls.ComboBox.prototype.selectValue,e.ligerui.controls.ComboBox.prototype.setInputValue=e.ligerui.controls.ComboBox.prototype._changeValue,function(){e(document).unbind("keydown.ligercombobox"),e(document).bind("keydown.ligercombobox",function(t){function i(){a.selectBox.is(":visible")||a.selectBox.show(),a.downFocus()}function r(){l?(a._changeValue(l[o.valueField],l[o.textField],!0),a.selectBox.hide(),a.trigger("textBoxKeyEnter",[{rowdata:l}])):(a._changeValue(d,s.attr("text"),!0),a.selectBox.hide(),a.trigger("textBoxKeyEnter",[{element:s.get(0)}]))}var n=e("input:focus");if(n.length&&n.attr("data-comboboxid")){var a=liger.get(n.attr("data-comboboxid"));if(!a)return;var o=a.options;if(!a.get("keySupport"))return;if(38==t.keyCode)a.upFocus();else if(40==t.keyCode)a.hasBind("textBoxKeyDown")?a.trigger("textBoxKeyDown",[{callback:function(){i()}}]):i();else if(13==t.keyCode){
if(!a.selectBox.is(":visible"))return;var l=null;a.grid&&(l=a.grid.getSelected());var s=a.selectBox.table.find("td.l-over");if(l||s.length){var d=s.attr("value");l&&l.ID&&(d=l.ID),a.enabledLoadDetail()?a.loadDetail(d,function(e){if(!l){var t=a.getRowIndex(d);if(-1==t)return;a.data=a.data||[],a.data[t]=a.selected=e}r()}):r()}}}})}()}(jQuery),function($){$.fn.ligerDateEditor=function(){return $.ligerui.run.call(this,"ligerDateEditor",arguments)},$.fn.ligerGetDateEditorManager=function(){return $.ligerui.run.call(this,"ligerGetDateEditorManager",arguments)},$.ligerDefaults.DateEditor={format:"yyyy-MM-dd hh:mm",width:null,showTime:!1,onChangeDate:!1,absolute:!0,cancelable:!0,readonly:!1},$.ligerDefaults.DateEditorString={dayMessage:["æ¥","ä¸","äº","ä¸","å","äº","å­"],monthMessage:["ä¸æ","äºæ","ä¸æ","åæ","äºæ","å­æ","ä¸æ","å«æ","ä¹æ","åæ","åä¸æ","åäºæ"],todayMessage:"ä»å¤©",closeMessage:"å³é­"},$.ligerMethos.DateEditor={},$.ligerui.controls.DateEditor=function(e,t){$.ligerui.controls.DateEditor.base.constructor.call(this,e,t)},$.ligerui.controls.DateEditor.ligerExtend($.ligerui.controls.Input,{__getType:function(){return"DateEditor"},__idPrev:function(){return"DateEditor"},_extendMethods:function(){return $.ligerMethos.DateEditor},_render:function(){var e=this,t=this.options;if(!t.showTime&&t.format.indexOf(" hh:mm")>-1&&(t.format=t.format.replace(" hh:mm","")),"input"==this.element.tagName.toLowerCase()&&"text"==this.element.type){e.inputText=$(this.element),e.inputText.hasClass("l-text-field")||e.inputText.addClass("l-text-field"),e.link=$('<div class="l-trigger"><div class="l-trigger-icon"></div></div>'),e.text=e.inputText.wrap('<div class="l-text l-text-date"></div>').parent(),e.text.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),e.text.append(e.link),e.textwrapper=e.text.wrap('<div class="l-text-wrapper"></div>').parent();var i="";i+="<div class='l-box-dateeditor' style='display:none'>",i+="    <div class='l-box-dateeditor-header'>",i+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-prevyear'><span></span></div>",i+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-prevmonth'><span></span></div>",i+="        <div class='l-box-dateeditor-header-text'><a class='l-box-dateeditor-header-month'></a> , <a  class='l-box-dateeditor-header-year'></a></div>",i+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-nextmonth'><span></span></div>",i+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-nextyear'><span></span></div>",i+="    </div>",i+="    <div class='l-box-dateeditor-body'>",i+="        <table cellpadding='0' cellspacing='0' border='0' class='l-box-dateeditor-calendar'>",i+="            <thead>",i+="                <tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>",i+="            </thead>",i+="            <tbody>",i+="                <tr class='l-first'><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>",i+="            </tbody>",i+="        </table>",i+="        <ul class='l-box-dateeditor-monthselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",i+="        <ul class='l-box-dateeditor-yearselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",i+="        <ul class='l-box-dateeditor-hourselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",i+="        <ul class='l-box-dateeditor-minuteselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",i+="    </div>",i+="    <div class='l-box-dateeditor-toolbar'>",i+="        <div class='l-box-dateeditor-time'></div>",i+="        <div class='l-button l-button-today'></div>",i+="        <div class='l-button l-button-close'></div>",i+="        <div class='l-clear'></div>",i+="    </div>",i+="</div>",e.dateeditor=$(i),t.absolute?e.dateeditor.appendTo("body").addClass("l-box-dateeditor-absolute"):e.textwrapper.append(e.dateeditor),e.header=$(".l-box-dateeditor-header",e.dateeditor),e.body=$(".l-box-dateeditor-body",e.dateeditor),e.toolbar=$(".l-box-dateeditor-toolbar",e.dateeditor),e.body.thead=$("thead",e.body),e.body.tbody=$("tbody",e.body),e.body.monthselector=$(".l-box-dateeditor-monthselector",e.body),e.body.yearselector=$(".l-box-dateeditor-yearselector",e.body),e.body.hourselector=$(".l-box-dateeditor-hourselector",e.body),e.body.minuteselector=$(".l-box-dateeditor-minuteselector",e.body),e.toolbar.time=$(".l-box-dateeditor-time",e.toolbar),e.toolbar.time.hour=$("<a></a>"),e.toolbar.time.minute=$("<a></a>"),e.buttons={btnPrevYear:$(".l-box-dateeditor-header-prevyear",e.header),btnNextYear:$(".l-box-dateeditor-header-nextyear",e.header),btnPrevMonth:$(".l-box-dateeditor-header-prevmonth",e.header),btnNextMonth:$(".l-box-dateeditor-header-nextmonth",e.header),btnYear:$(".l-box-dateeditor-header-year",e.header),btnMonth:$(".l-box-dateeditor-header-month",e.header),btnToday:$(".l-button-today",e.toolbar),btnClose:$(".l-button-close",e.toolbar)};var r=new Date;e.now={year:r.getFullYear(),month:r.getMonth()+1,day:r.getDay(),date:r.getDate(),hour:r.getHours(),minute:r.getMinutes()},e.currentDate={year:r.getFullYear(),month:r.getMonth()+1,day:r.getDay(),date:r.getDate(),hour:r.getHours(),minute:r.getMinutes()},e.selectedDate=null,e.usedDate=null,$("td",e.body.thead).each(function(e,i){$(i).html(t.dayMessage[e])}),$("li",e.body.monthselector).each(function(e,i){$(i).html(t.monthMessage[e])}),e.buttons.btnToday.html(t.todayMessage),e.buttons.btnClose.html(t.closeMessage),t.showTime&&(e.toolbar.time.show(),e.toolbar.time.append(e.toolbar.time.hour).append(":").append(e.toolbar.time.minute),$("li",e.body.hourselector).each(function(e,t){var i=e;10>e&&(i="0"+e.toString()),$(this).html(i)}),$("li",e.body.minuteselector).each(function(e,t){var i=e;10>e&&(i="0"+e.toString()),$(this).html(i)})),e.bulidContent(),t.initValue&&e.inputText.val(t.initValue),""!=e.inputText.val()&&e.onTextChange(),e.dateeditor.hover(null,function(t){e.dateeditor.is(":visible")&&!e.editorToggling&&e.toggleDateEditor(!0)}),e.link.hover(function(){t.disabled||(this.className="l-trigger-hover")},function(){t.disabled||(this.className="l-trigger")}).mousedown(function(){t.disabled||(this.className="l-trigger-pressed")}).mouseup(function(){t.disabled||(this.className="l-trigger-hover")}).click(function(){t.disabled||(e.bulidContent(),e.toggleDateEditor(e.dateeditor.is(":visible")))}),t.disabled&&(e.inputText.attr("readonly","readonly"),e.text.addClass("l-text-disabled")),e.buttons.btnClose.click(function(){e.toggleDateEditor(!0)}),$("td",e.body.tbody).hover(function(){$(this).hasClass("l-box-dateeditor-today")||$(this).addClass("l-box-dateeditor-over")},function(){$(this).removeClass("l-box-dateeditor-over")}).click(function(){$(".l-box-dateeditor-selected",e.body.tbody).removeClass("l-box-dateeditor-selected"),$(this).hasClass("l-box-dateeditor-today")||$(this).addClass("l-box-dateeditor-selected"),e.currentDate.date=parseInt($(this).html()),e.currentDate.day=new Date(e.currentDate.year,e.currentDate.month-1,1).getDay(),$(this).hasClass("l-box-dateeditor-out")&&(0==$("tr",e.body.tbody).index($(this).parent())?0==--e.currentDate.month&&(e.currentDate.month=12,e.currentDate.year--):13==++e.currentDate.month&&(e.currentDate.month=1,e.currentDate.year++)),e.selectedDate={year:e.currentDate.year,month:e.currentDate.month,date:e.currentDate.date},e.showDate(),e.editorToggling=!0,e.dateeditor.slideToggle("fast",function(){e.editorToggling=!1})}),$(".l-box-dateeditor-header-btn",e.header).hover(function(){$(this).addClass("l-box-dateeditor-header-btn-over")},function(){$(this).removeClass("l-box-dateeditor-header-btn-over")}),e.buttons.btnYear.click(function(){e.body.yearselector.is(":visible")||$("li",e.body.yearselector).each(function(t,i){var r=e.currentDate.year+(t-4);r==e.currentDate.year?$(this).addClass("l-selected"):$(this).removeClass("l-selected"),$(this).html(r)}),e.body.yearselector.slideToggle()}),e.body.yearselector.hover(function(){},function(){$(this).slideUp()}),$("li",e.body.yearselector).click(function(){e.currentDate.year=parseInt($(this).html()),e.body.yearselector.slideToggle(),e.bulidContent()}),e.buttons.btnMonth.click(function(){$("li",e.body.monthselector).each(function(t,i){e.currentDate.month==t+1?$(this).addClass("l-selected"):$(this).removeClass("l-selected")}),e.body.monthselector.slideToggle()}),e.body.monthselector.hover(function(){},function(){$(this).slideUp("fast")}),$("li",e.body.monthselector).click(function(){var t=$("li",e.body.monthselector).index(this);e.currentDate.month=t+1,e.body.monthselector.slideToggle(),e.bulidContent()}),e.toolbar.time.hour.click(function(){$("li",e.body.hourselector).each(function(t,i){e.currentDate.hour==t?$(this).addClass("l-selected"):$(this).removeClass("l-selected")}),e.body.hourselector.slideToggle()}),e.body.hourselector.hover(function(){},function(){$(this).slideUp("fast")}),$("li",e.body.hourselector).click(function(){var t=$("li",e.body.hourselector).index(this);e.currentDate.hour=t,e.body.hourselector.slideToggle(),e.bulidContent(),e.showDate()}),e.toolbar.time.minute.click(function(){$("li",e.body.minuteselector).each(function(t,i){e.currentDate.minute==t?$(this).addClass("l-selected"):$(this).removeClass("l-selected")}),e.body.minuteselector.slideToggle("fast",function(){var e=$("li",this).index($("li.l-selected",this));if(e>29){var t=$("li.l-selected",this).offset().top-$(this).offset().top;$(this).animate({scrollTop:t})}})}),e.body.minuteselector.hover(function(){},function(){$(this).slideUp("fast")}),$("li",e.body.minuteselector).click(function(){var t=$("li",e.body.minuteselector).index(this);e.currentDate.minute=t,e.body.minuteselector.slideToggle("fast"),e.bulidContent(),e.showDate()}),e.buttons.btnPrevMonth.click(function(){0==--e.currentDate.month&&(e.currentDate.month=12,e.currentDate.year--),e.bulidContent()}),e.buttons.btnNextMonth.click(function(){13==++e.currentDate.month&&(e.currentDate.month=1,e.currentDate.year++),e.bulidContent()}),e.buttons.btnPrevYear.click(function(){e.currentDate.year--,e.bulidContent()}),e.buttons.btnNextYear.click(function(){e.currentDate.year++,e.bulidContent()}),e.buttons.btnToday.click(function(){e.currentDate={year:e.now.year,month:e.now.month,day:e.now.day,date:e.now.date},e.selectedDate={year:e.now.year,month:e.now.month,day:e.now.day,date:e.now.date},e.showDate(),e.dateeditor.slideToggle("fast")}),e.inputText.change(function(){e.onTextChange()}).blur(function(){e.text.removeClass("l-text-focus")}).focus(function(){e.text.addClass("l-text-focus")}),e.text.hover(function(){e.text.addClass("l-text-over")},function(){e.text.removeClass("l-text-over")}),t.label&&(e.labelwrapper=e.textwrapper.wrap('<div class="l-labeltext"></div>').parent(),e.labelwrapper.prepend('<div class="l-text-label" style="float:left;display:inline;">'+t.label+":&nbsp</div>"),e.textwrapper.css("float","left"),t.labelWidth?$(".l-text-label",e.labelwrapper).outerWidth(t.labelWidth):t.labelWidth=$(".l-text-label",e.labelwrapper).outerWidth(),$(".l-text-label",e.labelwrapper).width(t.labelWidth),$(".l-text-label",e.labelwrapper).height(e.text.height()),e.labelwrapper.append('<br style="clear:both;" />'),t.labelAlign&&$(".l-text-label",e.labelwrapper).css("text-align",t.labelAlign),e.textwrapper.css({display:"inline"}),e.labelwrapper.width(e.text.outerWidth()+t.labelWidth+2)),e.set(t),$(document).bind("click.dateeditor",function(t){e.dateeditor.is(":visible")&&0==$(t.target||t.srcElement).closest(".l-box-dateeditor, .l-text-date").length&&e.toggleDateEditor(!0)})}},destroy:function(){this.textwrapper&&this.textwrapper.remove(),this.dateeditor&&this.dateeditor.remove(),this.options=null,$.ligerui.remove(this)},bulidContent:function(){var e=this,t=this.options,i=new Date(e.currentDate.year,e.currentDate.month-1,1).getDay(),r=e.currentDate.month,n=e.currentDate.year;13==++r&&(r=1,n++);var a=new Date(n,r-1,0).getDate(),o=new Date(e.currentDate.year,e.currentDate.month-1,0).getDate();e.buttons.btnMonth.html(t.monthMessage[e.currentDate.month-1]),e.buttons.btnYear.html(e.currentDate.year),e.toolbar.time.hour.html(e.currentDate.hour),e.toolbar.time.minute.html(e.currentDate.minute),1==e.toolbar.time.hour.html().length&&e.toolbar.time.hour.html("0"+e.toolbar.time.hour.html()),1==e.toolbar.time.minute.html().length&&e.toolbar.time.minute.html("0"+e.toolbar.time.minute.html()),$("td",this.body.tbody).each(function(){this.className=""}),$("tr",this.body.tbody).each(function(t,r){$("td",r).each(function(r,n){var l=7*t+(r-i),s=l+1;e.selectedDate&&e.currentDate.year==e.selectedDate.year&&e.currentDate.month==e.selectedDate.month&&l+1==e.selectedDate.date?((0==r||6==r)&&$(n).addClass("l-box-dateeditor-holiday"),$(n).addClass("l-box-dateeditor-selected"),$(n).siblings().removeClass("l-box-dateeditor-selected")):e.currentDate.year==e.now.year&&e.currentDate.month==e.now.month&&l+1==e.now.date?((0==r||6==r)&&$(n).addClass("l-box-dateeditor-holiday"),$(n).addClass("l-box-dateeditor-today")):0>l?(s=o+s,$(n).addClass("l-box-dateeditor-out").removeClass("l-box-dateeditor-selected")):l>a-1?(s-=a,$(n).addClass("l-box-dateeditor-out").removeClass("l-box-dateeditor-selected")):0==r||6==r?$(n).addClass("l-box-dateeditor-holiday").removeClass("l-box-dateeditor-selected"):n.className="",$(n).html(s)})})},updateSelectBoxPosition:function(){var e=this,t=this.options;if(t.absolute){var i=$(document).height();Number(e.text.offset().top+1+e.text.outerHeight()+e.dateeditor.height())>i&&i>Number(e.dateeditor.height()+1)?e.dateeditor.css({left:e.text.offset().left,top:e.text.offset().top-1-e.dateeditor.height()}):e.dateeditor.css({left:e.text.offset().left,top:e.text.offset().top+1+e.text.outerHeight()})}else e.text.offset().top+4>e.dateeditor.height()&&e.text.offset().top+e.dateeditor.height()+textHeight+4-$(window).scrollTop()>$(window).height()?(e.dateeditor.css("marginTop",-1*(e.dateeditor.height()+textHeight+5)),e.showOnTop=!0):e.showOnTop=!1},toggleDateEditor:function(e){for(var t=this,i=(this.options,$.ligerui.find($.ligerui.controls.ComboBox)),r=0,n=i.length;n>r;r++){var a=i[r];a.id!=t.id&&null!=a.selectBox.is(":visible")&&a.selectBox.is(":visible")&&a.selectBox.hide()}i=$.ligerui.find($.ligerui.controls.DateEditor);for(var r=0,n=i.length;n>r;r++){var a=i[r];a.id!=t.id&&null!=a.dateeditor.is(":visible")&&a.dateeditor.is(":visible")&&a.dateeditor.hide()}t.text.height();t.editorToggling=!0,e?t.dateeditor.hide("fast",function(){t.editorToggling=!1}):(t.updateSelectBoxPosition(),t.dateeditor.slideDown("fast",function(){t.editorToggling=!1}))},showDate:function(){var e=this;this.options;if(this.currentDate){this.currentDate.hour=parseInt(e.toolbar.time.hour.html(),10),this.currentDate.minute=parseInt(e.toolbar.time.minute.html(),10);var t=this.currentDate.year+"/"+this.currentDate.month+"/"+this.currentDate.date+" "+this.currentDate.hour+":"+this.currentDate.minute,i=new Date(t);t=e.getFormatDate(i),this.inputText.val(t),this.onTextChange()}},isDateTime:function(e){var t=(this.options,e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/));if(null==t)return!1;var i=new Date(t[1],t[3]-1,t[4]);return"NaN"==i?!1:i.getFullYear()==t[1]&&i.getMonth()+1==t[3]&&i.getDate()==t[4]},isLongDateTime:function(e){var t=(this.options,/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/),i=e.match(t);if(null==i)return!1;var r=new Date(i[1],i[3]-1,i[4],i[5],i[6]);return"NaN"==r?!1:r.getFullYear()==i[1]&&r.getMonth()+1==i[3]&&r.getDate()==i[4]&&r.getHours()==i[5]&&r.getMinutes()==i[6]},getFormatDate:function(e){if(null===e||"NaN"==e)return null;var t=this.options,i=t.format,r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in r)new RegExp("("+n+")").test(i)&&(i=i.replace(RegExp.$1,1==RegExp.$1.length?r[n]:("00"+r[n]).substr((""+r[n]).length)));return i},clear:function(){this.set("value",""),this.usedDate=null},_setCancelable:function(e){var t=this,i=this.options;!e&&t.unselect&&(t.unselect.remove(),t.unselect=null),(e||t.unselect)&&(t.unselect=$('<div class="l-trigger l-trigger-cancel"><div class="l-trigger-icon"></div></div>').hide(),t.text.hover(function(){t.unselect.show()},function(){t.unselect.hide()}),!i.disabled&&i.cancelable&&t.text.append(t.unselect),t.unselect.hover(function(){this.className="l-trigger-hover l-trigger-cancel"},function(){this.className="l-trigger l-trigger-cancel"}).click(function(){i.readonly||t.clear()}))},_rever:function(){var e=this;this.options;e.usedDate?e.inputText.val(e.getFormatDate(e.usedDate)):e.inputText.val("")},_getMatch:function(e){for(var t=[-1,-1,-1,-1,-1,-1],i=0,r="^",n=e||this.options.format;;){var a=n.match(/^yyyy|MM|dd|mm|hh|HH|ss|-|\/|:|\s/);if(!a)return null;var o=a[0].charAt(0),l=a[0].length,s="yMdhms".indexOf(o);if(-1!=s)t[s]=i+1,r+="(\\d{1,"+l+"})";else{var d=" "==o?"\\s":o;r+="("+d+")"}if(i++,l==n.length){r+="$";break}n=n.substring(l)}return{reg:new RegExp(r),position:t}},_bulidDate:function(e){var t=this.options,i=this._getMatch();if(!i)return null;var r=e.match(i.reg);if(!r)return null;var n={y:-1==i.position[0]?1900:r[i.position[0]],M:-1==i.position[1]?0:parseInt(r[i.position[1]],10)-1,d:-1==i.position[2]?1:parseInt(r[i.position[2]],10),h:-1==i.position[3]?0:parseInt(r[i.position[3]],10),m:-1==i.position[4]?0:parseInt(r[i.position[4]],10),s:-1==i.position[5]?0:parseInt(r[i.position[5]],10)};if(n.M<0||n.M>11||n.d<0||n.d>31)return null;var a=new Date(n.y,n.M,n.d);if(t.showTime){if(n.m<0||n.m>59||n.h<0||n.h>23||n.s<0||n.s>59)return null;a.setHours(n.h),a.setMinutes(n.m),a.setSeconds(n.s)}return a},updateStyle:function(){this.onTextChange()},onTextChange:function(){var e=this,t=(this.options,e.inputText.val());if(!t)return e.selectedDate=null,!0;var i=e._bulidDate(t);if(!i)return void e._rever();e.usedDate=i,e.selectedDate={year:e.usedDate.getFullYear(),month:e.usedDate.getMonth()+1,day:e.usedDate.getDay(),date:e.usedDate.getDate(),hour:e.usedDate.getHours(),minute:e.usedDate.getMinutes()},e.currentDate={year:e.usedDate.getFullYear(),month:e.usedDate.getMonth()+1,day:e.usedDate.getDay(),date:e.usedDate.getDate(),hour:e.usedDate.getHours(),minute:e.usedDate.getMinutes()};var r=e.getFormatDate(i);e.inputText.val(r),e.trigger("changeDate",[r]),$(e.dateeditor).is(":visible")&&e.bulidContent()},_setHeight:function(e){var t=this;e>4&&(t.text.css({height:e}),t.inputText.css({height:e}),t.textwrapper.css({height:e}))},_setWidth:function(e){var t=this;e>20&&(t.text.css({width:e}),t.inputText.css({width:e-20}),t.textwrapper.css({width:e}))},_setValue:function(value){var g=this;value||g.inputText.val(""),"string"==typeof value&&(/^\/Date/.test(value)&&(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)),g.inputText.val(value),g.usedDate=value),"object"==typeof value&&value instanceof Date&&(g.inputText.val(g.getFormatDate(value)),g.onTextChange())},_getValue:function(){return this.usedDate},setEnabled:function(){var e=this.options;this.inputText.removeAttr("readonly"),this.text.removeClass("l-text-disabled"),e.disabled=!1},setDisabled:function(){var e=this.options;this.inputText.attr("readonly","readonly"),this.text.addClass("l-text-disabled"),e.disabled=!0}})}(jQuery),function(e){var t=e.ligerui;e(".l-dialog-btn").live("mouseover",function(){e(this).addClass("l-dialog-btn-over")}).live("mouseout",function(){e(this).removeClass("l-dialog-btn-over")}),e(".l-dialog-tc .l-dialog-close").live("mouseover",function(){e(this).addClass("l-dialog-close-over")}).live("mouseout",function(){e(this).removeClass("l-dialog-close-over")}),e.ligerDialog=function(){return t.run.call(null,"ligerDialog",arguments,{isStatic:!0})},e.ligerui.DialogImagePath="../../lib/ligerUI/skins/Aqua/images/win/",e.ligerDefaults.Dialog={cls:null,contentCls:null,id:null,buttons:null,isDrag:!0,width:280,height:null,content:"",target:null,url:null,urlParms:null,load:!1,type:"none",left:null,top:null,modal:!0,data:null,name:null,isResize:!1,allowClose:!0,opener:null,timeParmName:null,closeWhenEnter:null,isHidden:!0,show:!0,title:"æç¤º",showMax:!1,showToggle:!1,showMin:!1,slide:e.browser.msie?!1:!0,fixedType:null,showType:null,layoutMode:1,onLoaded:null,onExtend:null,onExtended:null,onCollapse:null,onCollapseed:null,onContentHeightChange:null,onClose:null,onClosed:null,onStopResize:null,minIsHide:!1},e.ligerDefaults.DialogString={titleMessage:"æç¤º",ok:"ç¡®å®",yes:"æ¯",no:"å¦",cancel:"åæ¶",waittingMessage:"æ­£å¨ç­å¾ä¸­,è¯·ç¨å..."},e.ligerMethos.Dialog=e.ligerMethos.Dialog||{},t.controls.Dialog=function(e){t.controls.Dialog.base.constructor.call(this,null,e)},t.controls.Dialog.ligerExtend(t.core.Win,{__getType:function(){return"Dialog"},__idPrev:function(){return"Dialog"},_extendMethods:function(){return e.ligerMethos.Dialog},_render:function(){function i(){var t=0,i=0,a=n.width||r.dialog.width();1==n.slide&&(n.slide="fast"),null!=n.left?t=n.left:n.left=t=.5*(e(window).width()-a),null!=n.top?i=n.top:n.top=i=.5*(e(window).height()-r.dialog.height())+e(window).scrollTop()-10,0>t&&(n.left=t=0),0>i&&(n.top=i=0),r.dialog.css({left:t,top:i})}var r=this,n=this.options,a="";r.set(n,!0);var o=e('<div class="l-dialog"><table class="l-dialog-table" cellpadding="0" cellspacing="0" border="0"><tbody><tr><td class="l-dialog-tl"></td><td class="l-dialog-tc"><div class="l-dialog-tc-inner"><div class="l-dialog-icon"></div><div class="l-dialog-title"></div><div class="l-dialog-winbtns"><div class="l-dialog-winbtn l-dialog-close"></div></div></div></td><td class="l-dialog-tr"></td></tr><tr><td class="l-dialog-cl"></td><td class="l-dialog-cc"><div class="l-dialog-body"><div class="l-dialog-image"></div> <div class="l-dialog-content"></div><div class="l-dialog-buttons"><div class="l-dialog-buttons-inner"></div></td><td class="l-dialog-cr"></td></tr><tr><td class="l-dialog-bl"></td><td class="l-dialog-bc"></td><td class="l-dialog-br"></td></tr></tbody></table></div>');if(e("body").append(o),r.dialog=o,2==n.layoutMode&&o.find("td.l-dialog-tl,td.l-dialog-cl,td.l-dialog-bl,td.l-dialog-tr,td.l-dialog-cr,td.l-dialog-br").remove(),r.element=o[0],r.dialog.body=e(".l-dialog-body:first",r.dialog),r.dialog.header=e(".l-dialog-tc-inner:first",r.dialog),r.dialog.winbtns=e(".l-dialog-winbtns:first",r.dialog.header),r.dialog.buttons=e(".l-dialog-buttons:first",r.dialog),r.dialog.content=e(".l-dialog-content:first",r.dialog),r.set(n,!1),0==n.allowClose&&e(".l-dialog-close",r.dialog).remove(),(n.target||n.url||"none"==n.type)&&(n.type=null,r.dialog.addClass("l-dialog-win")),n.cls&&r.dialog.addClass(n.cls),n.id&&r.dialog.attr("id",n.id),r.mask(),n.isDrag&&r._applyDrag(),n.isResize&&r._applyResize(),n.type?r._setImage():(e(".l-dialog-image",r.dialog).remove(),r.dialog.content.addClass("l-dialog-content-noimage")),n.contentCls&&r.dialog.content.addClass(n.contentCls),n.show||(r.unmask(),r.dialog.hide()),n.target)r.dialog.content.prepend(n.target),e(n.target).show();else if(n.url){var l=e.isFunction(n.url)?n.url.call(r):n.url,s=e.isFunction(n.urlParms)?n.urlParms.call(r):n.urlParms;if(n.timeParmName&&(s=s||{},s[n.timeParmName]=(new Date).getTime()),s)for(var d in s)l+=-1==l.indexOf("?")?"?":"&",l+=d+"="+s[d];if(n.load)r.dialog.body.load(l,function(){r._saveStatus(),r.trigger("loaded")});else{r.jiframe=e("<iframe frameborder='0'></iframe>");var c=n.name?n.name:"ligerwindow"+(new Date).getTime();r.jiframe.attr("name",c),r.jiframe.attr("id",c),r.dialog.content.prepend(r.jiframe),r.dialog.content.addClass("l-dialog-content-nopadding l-dialog-content-frame"),setTimeout(function(){0==r.dialog.body.find(".l-dialog-loading:first").length&&r.dialog.body.append("<div class='l-dialog-loading' style='display:block;'></div>");var t=e(".l-dialog-loading:first",r.dialog.body);r.jiframe[0].dialog=r,r.jiframe.attr("src",l).bind("load.dialog",function(){t.hide(),r.trigger("loaded")}),r.frame=window.frames[r.jiframe.attr("name")]},0),a="jquery_ligerui_"+(new Date).getTime(),r.tmpInput=e("<input></input>"),r.tmpInput.attr("id",a),r.dialog.content.prepend(r.tmpInput)}}n.opener&&(r.dialog.opener=n.opener),n.buttons?e(n.buttons).each(function(t,i){var n=e('<div class="l-dialog-btn"><div class="l-dialog-btn-l"></div><div class="l-dialog-btn-r"></div><div class="l-dialog-btn-inner"></div></div>');e(".l-dialog-btn-inner",n).html(i.text),e(".l-dialog-buttons-inner",r.dialog.buttons).prepend(n),i.width&&n.width(i.width),i.onclick&&n.click(function(){i.onclick(i,r,t)}),i.cls&&n.addClass(i.cls)}):r.dialog.buttons.remove(),e(".l-dialog-buttons-inner",r.dialog.buttons).append("<div class='l-clear'></div>"),e(".l-dialog-title",r.dialog).bind("selectstart",function(){return!1}),r.dialog.click(function(){t.win.setFront(r)}),e(".l-dialog-tc .l-dialog-close",r.dialog).click(function(){n.isHidden?r.hide():r.close()}),n.fixedType||("auto"==n.width?setTimeout(function(){i()},100):i()),r.show(),e("body").bind("keydown.dialog",function(e){var t=e.which;13==t?r.enter():27==t&&r.esc()}),r._updateBtnsWidth(),r._saveStatus(),r._onReisze(),""!=a&&(e("#"+a).focus(),e("#"+a).remove())},_borderX:12,_borderY:32,doMax:function(i){var r=this,n=this.options,a=e(window).width(),o=e(window).height(),l=0,s=0;t.win.taskbar&&(o-=t.win.taskbar.outerHeight(),t.win.top&&(s+=t.win.taskbar.outerHeight())),i?(r.dialog.body.animate({width:a-r._borderX},n.slide),r.dialog.animate({left:l,top:s},n.slide),r.dialog.content.animate({height:o-r._borderY-r.dialog.buttons.outerHeight()},n.slide,function(){r._onReisze()})):(r.set({width:a,height:o,left:l,top:s}),r._onReisze())},max:function(){var t=this,i=this.options;t.winmax&&(t.winmax.addClass("l-dialog-recover"),t.doMax(i.slide),t.wintoggle&&(t.wintoggle.hasClass("l-dialog-extend")?t.wintoggle.addClass("l-dialog-toggle-disabled l-dialog-extend-disabled"):t.wintoggle.addClass("l-dialog-toggle-disabled l-dialog-collapse-disabled")),t.resizable&&t.resizable.set({disabled:!0}),t.draggable&&t.draggable.set({disabled:!0}),t.maximum=!0,e(window).bind("resize.dialogmax",function(){t.doMax(!1)}))},recover:function(){var t=this,i=this.options;t.winmax&&(t.winmax.removeClass("l-dialog-recover"),i.slide?(t.dialog.body.animate({width:t._width-t._borderX},i.slide),t.dialog.animate({left:t._left,top:t._top},i.slide),t.dialog.content.animate({height:t._height-t._borderY-t.dialog.buttons.outerHeight()},i.slide,function(){t._onReisze()})):(t.set({width:t._width,height:t._height,left:t._left,top:t._top}),t._onReisze()),t.wintoggle&&t.wintoggle.removeClass("l-dialog-toggle-disabled l-dialog-extend-disabled l-dialog-collapse-disabled"),e(window).unbind("resize.dialogmax")),this.resizable&&this.resizable.set({disabled:!1}),t.draggable&&t.draggable.set({disabled:!1}),t.maximum=!1},min:function(){var e=this,i=this.options;if(i.minIsHide)e.dialog.hide();else{var r=t.win.getTask(this);i.slide?(e.dialog.body.animate({width:1},i.slide),r.y=r.offset().top+r.height(),r.x=r.offset().left+r.width()/2,e.dialog.animate({left:r.x,top:r.y},i.slide,function(){e.dialog.hide()})):e.dialog.hide()}e.unmask(),e.minimize=!0,e.actived=!1},active:function(){var i=this,r=this.options;if(i.minimize){var n=i._width,a=i._height,o=i._left,l=i._top;i.maximum&&(n=e(window).width(),a=e(window).height(),o=l=0,t.win.taskbar&&(a-=t.win.taskbar.outerHeight(),t.win.top&&(l+=t.win.taskbar.outerHeight()))),r.slide?(i.dialog.body.animate({width:n-i._borderX},r.slide),i.dialog.animate({left:o,top:l},r.slide)):i.set({width:n,height:a,left:o,top:l})}i.actived=!0,i.minimize=!1,t.win.setFront(i),i.show()},toggle:function(){var e=this;this.options;e.wintoggle&&(e.wintoggle.hasClass("l-dialog-extend")?e.extend():e.collapse())},collapse:function(e){var t=this,i=this.options;t.wintoggle&&(i.slide&&0!=e?t.dialog.content.animate({height:1},i.slide):t.dialog.content.height(1),this.resizable&&this.resizable.set({disabled:!0}),t.wintoggle.addClass("l-dialog-extend"))},extend:function(){var e=this,t=this.options;if(e.wintoggle){var i=e._height-e._borderY-e.dialog.buttons.outerHeight();t.slide?e.dialog.content.animate({height:i},t.slide):e.dialog.content.height(i),this.resizable&&this.resizable.set({disabled:!1}),e.wintoggle.removeClass("l-dialog-extend")}},_updateBtnsWidth:function(){var t=this,i=e(">div",t.dialog.winbtns).length;t.dialog.winbtns.width(22*i)},_setLeft:function(e){this.dialog&&null!=e&&this.dialog.css({left:e})},_setTop:function(e){this.dialog&&null!=e&&this.dialog.css({top:e})},_setWidth:function(e){this.dialog&&e>=this._borderX&&this.dialog.body.width(e-this._borderX)},_setHeight:function(e){var t=this,i=this.options;if(this.dialog)if("auto"==e)t.dialog.content.height("auto");else if(e>=this._borderY){var r=e-this._borderY-t.dialog.buttons.outerHeight();if(0==t.trigger("ContentHeightChange",[r]))return;i.load?t.dialog.body.height(r):t.dialog.content.height(r),t.trigger("ContentHeightChanged",[r])}},_setShowMax:function(t){var i=this;this.options;t?i.winmax||(i.winmax=e('<div class="l-dialog-winbtn l-dialog-max"></div>').appendTo(i.dialog.winbtns).hover(function(){e(this).hasClass("l-dialog-recover")?e(this).addClass("l-dialog-recover-over"):e(this).addClass("l-dialog-max-over")},function(){e(this).removeClass("l-dialog-max-over l-dialog-recover-over")}).click(function(){e(this).hasClass("l-dialog-recover")?i.recover():i.max()})):i.winmax&&(i.winmax.remove(),i.winmax=null),i._updateBtnsWidth()},_setShowMin:function(i){var r=this,n=this.options;i?r.winmin||(r.winmin=e('<div class="l-dialog-winbtn l-dialog-min"></div>').appendTo(r.dialog.winbtns).hover(function(){e(this).addClass("l-dialog-min-over")},function(){e(this).removeClass("l-dialog-min-over")}).click(function(){r.min()}),n.minIsHide||t.win.addTask(r)):r.winmin&&(r.winmin.remove(),r.winmin=null),r._updateBtnsWidth()},_setShowToggle:function(t){var i=this;this.options;t?i.wintoggle||(i.wintoggle=e('<div class="l-dialog-winbtn l-dialog-collapse"></div>').appendTo(i.dialog.winbtns).hover(function(){e(this).hasClass("l-dialog-toggle-disabled")||(e(this).hasClass("l-dialog-extend")?e(this).addClass("l-dialog-extend-over"):e(this).addClass("l-dialog-collapse-over"))},function(){e(this).removeClass("l-dialog-extend-over l-dialog-collapse-over");
}).click(function(){if(!e(this).hasClass("l-dialog-toggle-disabled"))if(i.wintoggle.hasClass("l-dialog-extend")){if(0==i.trigger("extend"))return;i.wintoggle.removeClass("l-dialog-extend"),i.extend(),i.trigger("extended")}else{if(0==i.trigger("collapse"))return;i.wintoggle.addClass("l-dialog-extend"),i.collapse(),i.trigger("collapseed")}})):i.wintoggle&&(i.wintoggle.remove(),i.wintoggle=null)},enter:function(){var e,t=this,i=this.options;void 0!=i.closeWhenEnter?e=i.closeWhenEnter:("warn"==i.type||"error"==i.type||"success"==i.type||"question"==i.type)&&(e=!0),e&&t.close()},esc:function(){},_removeDialog:function(){function t(){var t=e("iframe",i.dialog);if(t.length){var r=t[0];if(r.src="about:blank",r.contentWindow&&r.contentWindow.document)try{r.contentWindow.document.write("")}catch(n){}e.browser.msie&&CollectGarbage(),t.remove()}i.dialog.remove()}var i=this,r=this.options;r.showType&&r.fixedType?i.dialog.animate({bottom:-1*r.height},function(){t()}):t()},close:function(){var e=this;this.options;0!=e.trigger("Close")&&(e.doClose(),0==e.trigger("Closed"))},doClose:function(){var i=this;t.win.removeTask(this),e.ligerui.remove(this),i.unmask(),i._removeDialog(),e("body").unbind("keydown.dialog")},_getVisible:function(){return this.dialog.is(":visible")},_setUrl:function(e){var t=this,i=this.options;i.url=e,i.load?t.dialog.body.html("").load(i.url,function(){t.trigger("loaded")}):t.jiframe&&t.jiframe.attr("src",i.url)},_setContent:function(e){this.dialog.content.html(e)},_setTitle:function(t){var i=this;this.options;t&&e(".l-dialog-title",i.dialog).html(t)},_hideDialog:function(){var e=this,t=this.options;t.showType&&t.fixedType?e.dialog.animate({bottom:-1*t.height},function(){e.dialog.hide()}):e.dialog.hide()},hidden:function(){var e=this;t.win.removeTask(e),e.dialog.hide(),e.unmask()},show:function(){var t=this,i=this.options;t.mask(),i.fixedType?i.showType?(t.dialog.css({bottom:-1*i.height}).addClass("l-dialog-fixed"),t.dialog.show().animate({bottom:0})):t.dialog.show().css({bottom:0}).addClass("l-dialog-fixed"):t.dialog.show(),e.ligerui.win.setFront.ligerDefer(e.ligerui.win,100,[t])},setUrl:function(e){this._setUrl(e)},_saveStatus:function(){var e=this;e._width=e.dialog.body.width(),e._height=e.dialog.body.height();var t=0,i=0;isNaN(parseInt(e.dialog.css("top")))||(t=parseInt(e.dialog.css("top"))),isNaN(parseInt(e.dialog.css("left")))||(i=parseInt(e.dialog.css("left"))),e._top=t,e._left=i},_applyDrag:function(){var i=this,r=this.options;e.fn.ligerDrag&&(i.draggable=i.dialog.ligerDrag({handler:".l-dialog-title",animate:!1,onStartDrag:function(){t.win.setFront(i);var r=e("<div class='l-dragging-mask' style='display:block'></div>").height(i.dialog.height());i.dialog.append(r),i.dialog.content.addClass("l-dialog-content-dragging")},onDrag:function(e,t){var i=t.pageY||t.screenY;return 0>i?!1:void 0},onStopDrag:function(){if(i.dialog.find("div.l-dragging-mask:first").remove(),i.dialog.content.removeClass("l-dialog-content-dragging"),r.target){var n=t.find(e.ligerui.controls.DateEditor),a=t.find(e.ligerui.controls.ComboBox);e(e.merge(n,a)).each(function(){this.updateSelectBoxPosition&&this.updateSelectBoxPosition()})}i._saveStatus()}}))},_onReisze:function(){var t=this,i=this.options;if(i.target||i.url){var r=e(i.target).liger();if(r||(r=e(i.target).find(":first").liger()),!r)return;var n=t.dialog.content.height(),a=t.dialog.content.width();r.trigger("resize",[{width:a,height:n}])}},_applyResize:function(){var t=this;this.options;e.fn.ligerResizable&&(t.resizable=t.dialog.ligerResizable({onStopResize:function(e,i){var r=0,n=0;return isNaN(parseInt(t.dialog.css("top")))||(r=parseInt(t.dialog.css("top"))),isNaN(parseInt(t.dialog.css("left")))||(n=parseInt(t.dialog.css("left"))),e.diffLeft&&t.set({left:n+e.diffLeft}),e.diffTop&&t.set({top:r+e.diffTop}),e.newWidth&&(t.set({width:e.newWidth}),t.dialog.body.css({width:e.newWidth-t._borderX})),e.newHeight&&t.set({height:e.newHeight}),t._onReisze(),t._saveStatus(),t.trigger("stopResize"),!1},animate:!1}))},_setImage:function(){var t=this,i=this.options;if(i.type){var r={paddingLeft:74,paddingRight:15,paddingBottom:30};"success"==i.type||"donne"==i.type||"ok"==i.type?(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-donne").show(),t.dialog.content.css(r)):"error"==i.type?(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-error").show(),t.dialog.content.css(r)):"warn"==i.type?(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-warn").show(),t.dialog.content.css(r)):"question"==i.type&&(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-question").show(),t.dialog.content.css(r))}}}),t.controls.Dialog.prototype.hide=t.controls.Dialog.prototype.hidden,e.ligerDialog.open=function(t){return e.ligerDialog(t)},e.ligerDialog.close=function(){var e=t.find(t.controls.Dialog.prototype.__getType());for(var i in e){var r=e[i];r.destroy.ligerDefer(r,5)}t.win.unmask()},e.ligerDialog.show=function(i){var r=t.find(t.controls.Dialog.prototype.__getType());if(r.length)for(var n in r)return void r[n].show();return e.ligerDialog(i)},e.ligerDialog.hide=function(){var e=t.find(t.controls.Dialog.prototype.__getType());for(var i in e){var r=e[i];r.hide()}},e.ligerDialog.tip=function(t){return t=e.extend({showType:"slide",width:240,modal:!1,height:100},t||{}),e.extend(t,{fixedType:"se",type:"none",isDrag:!1,isResize:!1,showMax:!1,showToggle:!1,showMin:!1}),e.ligerDialog.open(t)},e.ligerDialog.alert=function(t,i,r,n,a){t=t||"","function"==typeof i?(n=i,r=null):"function"==typeof r&&(n=r);var o=function(e,t,i){t.close(),n&&n(e,t,i)};return p={content:t,buttons:[{text:e.ligerDefaults.DialogString.ok,onclick:o}]},"string"==typeof i&&""!=i&&(p.title=i),"string"==typeof r&&""!=r&&(p.type=r),e.extend(p,{showMax:!1,showToggle:!1,showMin:!1},a||{}),e.ligerDialog(p)},e.ligerDialog.confirm=function(t,i,r){"function"==typeof i&&(r=i,type=null);var n=function(e,t){t.close(),r&&r("ok"==e.type)};return p={type:"question",content:t,buttons:[{text:e.ligerDefaults.DialogString.yes,onclick:n,type:"ok",cls:"l-dialog-btn-ok"},{text:e.ligerDefaults.DialogString.no,onclick:n,type:"no",cls:"l-dialog-btn-no"}]},"string"==typeof i&&""!=i&&(p.title=i),e.extend(p,{showMax:!1,showToggle:!1,showMin:!1}),e.ligerDialog(p)},e.ligerDialog.warning=function(t,i,r,n){"function"==typeof i&&(r=i,type=null);var a=function(e,t){t.close(),r&&r(e.type)};return p={type:"question",content:t,buttons:[{text:e.ligerDefaults.DialogString.yes,onclick:a,type:"yes"},{text:e.ligerDefaults.DialogString.no,onclick:a,type:"no"},{text:e.ligerDefaults.DialogString.cancel,onclick:a,type:"cancel"}]},"string"==typeof i&&""!=i&&(p.title=i),e.extend(p,{showMax:!1,showToggle:!1,showMin:!1},n||{}),e.ligerDialog(p)},e.ligerDialog.waitting=function(t){return t=t||e.ligerDefaults.Dialog.waittingMessage,e.ligerDialog.open({cls:"l-dialog-waittingdialog",type:"none",content:'<div style="padding:4px">'+t+"</div>",allowClose:!1})},e.ligerDialog.closeWaitting=function(){var e=t.find(t.controls.Dialog);for(var i in e){var r=e[i];r.dialog.hasClass("l-dialog-waittingdialog")&&r.close()}},e.ligerDialog.success=function(t,i,r,n){return e.ligerDialog.alert(t,i,"success",r,n)},e.ligerDialog.error=function(t,i,r,n){return e.ligerDialog.alert(t,i,"error",r,n)},e.ligerDialog.warn=function(t,i,r,n){return e.ligerDialog.alert(t,i,"warn",r,n)},e.ligerDialog.question=function(t,i,r){return e.ligerDialog.alert(t,i,"question",null,r)},e.ligerDialog.prompt=function(t,i,r,n){var a=e('<input type="text" class="l-dialog-inputtext"/>');"function"==typeof r&&(n=r),"function"==typeof i?n=i:"boolean"==typeof i&&(r=i),"boolean"==typeof r&&r&&(a=e('<textarea class="l-dialog-textarea"></textarea>')),("string"==typeof i||"int"==typeof i)&&a.val(i);var o=function(e,t,i){t.close(),n&&n("yes"==e.type,a.val())};return p={title:t,target:a,width:320,buttons:[{text:e.ligerDefaults.DialogString.ok,onclick:o,type:"yes"},{text:e.ligerDefaults.DialogString.cancel,onclick:o,type:"cancel"}]},e.ligerDialog(p)}}(jQuery),function(e){var t=e.ligerui;e.fn.ligerDrag=function(e){return t.run.call(this,"ligerDrag",arguments,{idAttrName:"ligeruidragid",hasElement:!1,propertyToElemnt:"target"})},e.fn.ligerGetDragManager=function(){return t.run.call(this,"ligerGetDragManager",arguments,{idAttrName:"ligeruidragid",hasElement:!1,propertyToElemnt:"target"})},e.ligerDefaults.Drag={onStartDrag:!1,onDrag:!1,onStopDrag:!1,handler:null,clickDelay:100,proxy:!0,revert:!1,animate:!0,onRevert:null,onEndRevert:null,receive:null,onDragEnter:null,onDragOver:null,onDragLeave:null,onDrop:null,disabled:!1,proxyX:null,proxyY:null},t.controls.Drag=function(e){t.controls.Drag.base.constructor.call(this,null,e)},t.controls.Drag.ligerExtend(t.core.UIComponent,{__getType:function(){return"Drag"},__idPrev:function(){return"Drag"},_render:function(){var t=this,i=this.options;this.set(i),t.cursor="move",t.handler.css("cursor",t.cursor),t.mouseDowned=!1,t.handler.bind("mousedown.drag",function(r){i.disabled||2!=r.button&&(t.mouseDowned=!0,e(document).bind("selectstart.drag",function(){return!1}),setTimeout(function(){t.mouseDowned&&t._start.call(t,r)},i.clickDelay||100))}).bind("mousemove.drag",function(){i.disabled||t.handler.css("cursor",t.cursor)}).bind("mouseup.drag",function(){e(document).unbind("selectstart.drag")}),e(document).bind("mouseup",function(){t.mouseDowned=!1})},_rendered:function(){this.options.target.ligeruidragid=this.id},_start:function(i){var r=this,n=this.options;if(!r.reverting&&!n.disabled){if(r.current={target:r.target,left:r.target.offset().left,top:r.target.offset().top,startX:i.pageX||i.screenX,startY:i.pageY||i.clientY},0==r.trigger("startDrag",[r.current,i]))return!1;if(r.cursor="move",r._createProxy(n.proxy,i),n.proxy&&!r.proxy)return!1;(r.proxy||r.handler).css("cursor",r.cursor),e(document).bind("mousemove.drag",function(){r._drag.apply(r,arguments)}),t.draggable.dragging=!0,e(document).bind("mouseup.drag",function(){t.draggable.dragging=!1,r._stop.apply(r,arguments)})}},_drag:function(t){var i=this;this.options;if(i.current){var r=t.pageX||t.screenX,n=t.pageY||t.screenY;i.current.diffX=r-i.current.startX,i.current.diffY=n-i.current.startY,(i.proxy||i.handler).css("cursor",i.cursor),i.receive&&i.receive.each(function(a,o){var l=e(o),s=l.offset();r>s.left&&r<s.left+l.width()&&n>s.top&&n<s.top+l.height()?i.receiveEntered[a]?i.trigger("dragOver",[o,i.proxy||i.target,t]):(i.receiveEntered[a]=!0,i.trigger("dragEnter",[o,i.proxy||i.target,t])):i.receiveEntered[a]&&(i.receiveEntered[a]=!1,i.trigger("dragLeave",[o,i.proxy||i.target,t]))}),i.hasBind("drag")?0!=i.trigger("drag",[i.current,t])?i._applyDrag():i.proxy?i._removeProxy():i._stop():i._applyDrag()}},_stop:function(t){var i=this,r=this.options;e(document).unbind("mousemove.drag"),e(document).unbind("mouseup.drag"),e(document).unbind("selectstart.drag"),i.receive&&i.receive.each(function(e,r){i.receiveEntered[e]&&i.trigger("drop",[r,i.proxy||i.target,t])}),i.proxy&&(r.revert?i.hasBind("revert")?0!=i.trigger("revert",[i.current,t])?i._revert(t):i._removeProxy():i._revert(t):(i._applyDrag(i.target),i._removeProxy())),i.cursor="move",i.trigger("stopDrag",[i.current,t]),i.current=null,i.handler.css("cursor",i.cursor)},_revert:function(e){var t=this;t.reverting=!0,t.proxy.animate({left:t.current.left,top:t.current.top},function(){t.reverting=!1,t._removeProxy(),t.trigger("endRevert",[t.current,e]),t.current=null})},_applyDrag:function(e){var t=this,i=this.options;e=e||t.proxy||t.target;var r={},n=!1,a=e==t.target;t.current.diffX&&(a||null==i.proxyX?r.left=t.current.left+t.current.diffX:r.left=t.current.startX+i.proxyX+t.current.diffX,n=!0),t.current.diffY&&(a||null==i.proxyY?r.top=t.current.top+t.current.diffY:r.top=t.current.startY+i.proxyY+t.current.diffY,n=!0),e==t.target&&t.proxy&&i.animate?(t.reverting=!0,e.animate(r,function(){t.reverting=!1})):e.css(r)},_setReceive:function(t){this.receiveEntered={},t&&("string"==typeof t?this.receive=e(t):this.receive=t)},_setHandler:function(t){var i=this,r=this.options;t?i.handler="string"==typeof t?e(t,r.target):t:i.handler=e(r.target)},_setTarget:function(t){this.target=e(t)},_setCursor:function(e){this.cursor=e,(this.proxy||this.handler).css("cursor",e)},_createProxy:function(t,i){if(t){var r=this,n=this.options;"function"==typeof t?r.proxy=t.call(this.options.target,r,i):"clone"==t?(r.proxy=r.target.clone().css("position","absolute"),r.proxy.appendTo("body")):(r.proxy=e("<div class='l-draggable'></div>"),r.proxy.width(r.target.width()).height(r.target.height()),r.proxy.attr("dragid",r.id).appendTo("body")),r.proxy.css({left:null==n.proxyX?r.current.left:r.current.startX+n.proxyX,top:null==n.proxyY?r.current.top:r.current.startY+n.proxyY}).show()}},_removeProxy:function(){var e=this;e.proxy&&(e.proxy.remove(),e.proxy=null)}})}(jQuery),function(e){e.fn.ligerEasyTab=function(){return e.ligerui.run.call(this,"ligerEasyTab",arguments)},e.fn.ligerGetEasyTabManager=function(){return e.ligerui.run.call(this,"ligerGetEasyTabManager",arguments)},e.ligerDefaults.EasyTab={},e.ligerMethos.EasyTab={},e.ligerui.controls.EasyTab=function(t,i){e.ligerui.controls.EasyTab.base.constructor.call(this,t,i)},e.ligerui.controls.EasyTab.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"EasyTab"},__idPrev:function(){return"EasyTab"},_extendMethods:function(){return e.ligerMethos.EasyTab},_render:function(){var t=this,i=this.options;t.tabs=e(this.element),t.tabs.addClass("l-easytab");var r=0;e("> div[lselected=true]",t.tabs).length>0&&(r=e("> div",t.tabs).index(e("> div[lselected=true]",t.tabs))),t.tabs.ul=e('<ul class="l-easytab-header"></ul>'),e("> div",t.tabs).each(function(i,n){var a=e("<li><span></span></li>");i==r&&e("span",a).addClass("l-selected"),e(n).attr("title")&&(e("span",a).html(e(n).attr("title")),e(n).removeAttr("title")),t.tabs.ul.append(a),e(n).hasClass("l-easytab-panelbox")||e(n).addClass("l-easytab-panelbox")}),t.tabs.ul.prependTo(t.tabs),e(".l-easytab-panelbox:eq("+r+")",t.tabs).show().siblings(".l-easytab-panelbox").hide(),e("> ul:first span",t.tabs).click(function(){if(!e(this).hasClass("l-selected")){var i=e("> ul:first span",t.tabs).index(this);e(this).addClass("l-selected").parent().siblings().find("span.l-selected").removeClass("l-selected"),e(".l-easytab-panelbox:eq("+i+")",t.tabs).show().siblings(".l-easytab-panelbox").hide()}}).not("l-selected").hover(function(){e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),t.set(i)}})}(jQuery),function(e){e.fn.ligerFilter=function(){return e.ligerui.run.call(this,"ligerFilter",arguments)},e.fn.ligerGetFilterManager=function(){return e.ligerui.run.call(this,"ligerGetFilterManager",arguments)},e.ligerDefaults.Filter={fields:[],operators:{},editors:{},buttonCls:null},e.ligerDefaults.FilterString={strings:{and:"å¹¶ä¸",or:"æè",equal:"ç¸ç­",notequal:"ä¸ç¸ç­",startwith:"ä»¥..å¼å§",endwith:"ä»¥..ç»æ",like:"ç¸ä¼¼",greater:"å¤§äº",greaterorequal:"å¤§äºæç­äº",less:"å°äº",lessorequal:"å°äºæç­äº","in":"åæ¬å¨...",notin:"ä¸åæ¬...",addgroup:"å¢å åç»",addrule:"å¢å æ¡ä»¶",deletegroup:"å é¤åç»"}},e.ligerDefaults.Filter.operators.string=e.ligerDefaults.Filter.operators.text=["equal","notequal","startwith","endwith","like","greater","greaterorequal","less","lessorequal","in","notin"],e.ligerDefaults.Filter.operators.number=e.ligerDefaults.Filter.operators["int"]=e.ligerDefaults.Filter.operators["float"]=e.ligerDefaults.Filter.operators.date=["equal","notequal","greater","greaterorequal","less","lessorequal","in","notin"],e.ligerDefaults.Filter.editors.string={create:function(t,i){var r=e("<input type='text'/>");return t.append(r),r.ligerTextBox(i.editor.options||{}),r},setValue:function(e,t){e.val(t)},getValue:function(e){return e.liger("option","value")},destroy:function(e){e.liger("destroy")}},e.ligerDefaults.Filter.editors.date={create:function(t,i){var r=e("<input type='text'/>");return t.append(r),r.ligerDateEditor(i.editor.options||{}),r},setValue:function(e,t){e.liger("option","value",t)},getValue:function(e,t){return e.liger("option","value")},destroy:function(e){e.liger("destroy")}},e.ligerDefaults.Filter.editors.number={create:function(t,i){var r=e("<input type='text'/>");t.append(r);var n={minValue:i.editor.minValue,maxValue:i.editor.maxValue};return r.ligerSpinner(e.extend(n,i.editor.options||{})),r},setValue:function(e,t){e.val(t)},getValue:function(e,t){var i="int"==t.editor.type;return i?parseInt(e.val(),10):parseFloat(e.val())},destroy:function(e){e.liger("destroy")}},e.ligerDefaults.Filter.editors.combobox={create:function(t,i){var r=e("<input type='text'/>");t.append(r);var n={data:i.data,slide:!1,valueField:i.editor.valueField||i.editor.valueColumnName,textField:i.editor.textField||i.editor.displayColumnName};return e.extend(n,i.editor.options||{}),r.ligerComboBox(n),r},setValue:function(e,t){e.liger("option","value",t)},getValue:function(e){return e.liger("option","value")},destroy:function(e){e.liger("destroy")}},e.ligerui.controls.Filter=function(t,i){e.ligerui.controls.Filter.base.constructor.call(this,t,i)},e.ligerui.controls.Filter.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Filter"},__idPrev:function(){return"Filter"},_init:function(){var t=this,i=this.options;e.ligerui.controls.Filter.base._init.call(this);for(var r in liger.editors){var n=liger.editors[r];!n||r in i.editors||(i.editors[r]=liger.getEditor(e.extend({type:r,master:t},n)))}},_render:function(){var t=this,i=this.options;t.set(i),e(t.element).bind("click",function(i){i.preventDefault();var r=e(i.target||i.srcElement),n=r.get(0).className;if(n.indexOf("addgroup")>=0){var a=r.parent().parent().parent().parent();t.addGroup(a)}else if(n.indexOf("deletegroup")>=0){var a=r.parent().parent().parent().parent();t.deleteGroup(a)}else if(n.indexOf("addrule")>=0){var a=r.parent().parent().parent().parent();t.addRule(a)}else if(n.indexOf("deleterole")>=0){var o=r.parent().parent();t.deleteRule(o)}})},_setFields:function(t){var i=this,r=this.options;i.group&&i.group.remove(),i.group=e(i._bulidGroupTableHtml()).appendTo(i.element),r.buttonCls&&i.group.find(".addgroup,.addrule,.deletegroup").addClass(r.buttonCls)},editors:{},editorCounter:0,addGroup:function(t){var i=this,r=this.options;t=e(t||i.group);var n=e(">tbody:first > tr:last",t),a=[];a.push('<tr class="l-filter-rowgroup"><td class="l-filter-cellgroup" colSpan="4">');var o=!t.hasClass("l-filter-group-alt");a.push(i._bulidGroupTableHtml(o,!0)),a.push("</td></tr>");var l=e(a.join(""));r.buttonCls&&l.find(".addgroup,.addrule,.deletegroup").addClass(r.buttonCls),n.before(l);var s=l.find("table:first");return r.addDefult&&i.addRule(s),s},deleteGroup:function(t){var i=this;this.options;e("td.l-filter-value",t).each(function(){var t=e(this).parent();e("select.fieldsel",t).unbind(),i.removeEditor(t)}),e(t).parent().parent().remove()},removeEditor:function(t){var i=this,r=this.options,n=e(t).attr("editortype"),a=e(t).attr("editorid"),o=i.editors[a];o&&r.editors[n].destroy&&r.editors[n].destroy(o),e("td.l-filter-value:first",t).html("")},setData:function(t,i){var r=this,n=this.options;i=i||r.group;var a=e(">tbody:first > tr:last",i);i&&i.find(">tbody:first > tr").not(a).remove(),e("select:first",a).val(t.op),t.rules&&e(t.rules).each(function(){var t=r.addRule(i),a=this.field,o=function(){for(var e=0;e<n.fields.length;e++)if(n.fields[e].name==a)return n.fields[e];return null}();e("select.opsel",t).html(r._bulidOpSelectOptionsHtml(this.type||"string",o.operator)),t.attr("fieldtype",this.type||"string"),e("select.opsel",t).val(this.op),e("select.fieldsel",t).val(this.field).trigger("change");var l=t.attr("editorid");if(l&&r.editors[l]){var o=r.getField(this.field);if(o&&o.editor){var s={field:o,filter:r};n.editors[o.editor.type].setValue.call(r,r.editors[l],this.value,s)}}else e(":text",t).val(this.value)}),t.groups&&e(t.groups).each(function(){var e=r.addGroup(i);r.setData(this,e)})},addRule:function(t){var i=this,r=this.options;t=t||i.group;var n=e(">tbody:first > tr:last",t),a=e(i._bulidRuleRowHtml());return n.before(a),r.fields.length&&i.appendEditor(a,r.fields[0]),e("select.fieldsel",a).bind("change",function(){var t=e(this).parent().next().find("select:first"),r=e(this).val();if(r){var n=i.getField(r),o=n.type||"string",l=a.attr("fieldtype");o!=l&&(t.html(i._bulidOpSelectOptionsHtml(o,n.operator)),a.attr("fieldtype",o));var s=null,d=a.attr("editortype");i.enabledEditor(n)&&(s=n.editor.type),d&&i.removeEditor(a),s?i.appendEditor(a,n):(a.removeAttr("editortype").removeAttr("editorid"),e("td.l-filter-value:first",a).html('<input type="text" class="valtxt l-text" />'))}}),a},deleteRule:function(t){e("select.fieldsel",t).unbind(),this.removeEditor(t),e(t).remove()},appendEditor:function(t,i){var r=this,n=this.options;if(r.enabledEditor(i)){var a=e("td.l-filter-value:first",t).html(""),o=n.editors[i.editor.type],l=++r.editorCounter,s={filter:r};s.field=e.extend(!0,{},i),s.field.name=i.name+"_"+l,r.editors[l]=o.create.call(this,a,s),t.attr("editortype",i.editor.type).attr("editorid",l)}},getData:function(t){var i=this;this.options;t=t||i.group;var r={};return e("> tbody > tr",t).each(function(t,n){var a=e(n).hasClass("l-filter-rowlast"),o=e(n).hasClass("l-filter-rowgroup");if(o){var l=e("> td:first > table:first",n);l.length&&(r.groups||(r.groups=[]),r.groups.push(i.getData(l)))}else if(a)r.op=e(".groupopsel:first",n).val();else{var s=e("select.fieldsel:first",n).val(),d=i.getField(s),c=e(".opsel:first",n).val(),u=i._getRuleValue(n,d),h=e(n).attr("fieldtype")||"string";r.rules||(r.rules=[]),null!=u&&r.rules.push({field:s,op:c,value:u,type:h})}}),r},_getRuleValue:function(t,i){var r=this,n=this.options,a=e(t).attr("editorid"),o=e(t).attr("editortype"),l=r.editors[a],s={field:i,filter:r};return l?n.editors[o].getValue.call(r,l,s):e(".valtxt:first",t).val()},enabledEditor:function(e){var t=this.options;return e.editor&&e.editor.type?e.editor.type in t.editors:!1},getField:function(e){for(var t=this.options,i=0,r=t.fields.length;r>i;i++){var n=t.fields[i];if(n.name==e)return n}return null},_bulidGroupTableHtml:function(e,t){var i=this.options,r=[];return r.push('<table cellpadding="0" cellspacing="0" border="0" class="l-filter-group'),e&&r.push(" l-filter-group-alt"),r.push('"><tbody>'),r.push('<tr class="l-filter-rowlast"><td class="l-filter-rowlastcell" align="right" colSpan="4">'),r.push('<select class="groupopsel">'),r.push('<option value="and">'+i.strings.and+"</option>"),r.push('<option value="or">'+i.strings.or+"</option>"),r.push("</select>"),r.push('<input type="button" value="'+i.strings.addgroup+'" class="addgroup">'),r.push('<input type="button" value="'+i.strings.addrule+'" class="addrule">'),t&&r.push('<input type="button" value="'+i.strings.deletegroup+'" class="deletegroup">'),r.push("</td></tr>"),r.push("</tbody></table>"),r.join("")},_bulidRuleRowHtml:function(e){var t=this,i=this.options;e=e||i.fields;var r=[],n=e&&e.length&&e[0].type?e[0].type:"string";r.push('<tr fieldtype="'+n+'"><td class="l-filter-column">'),r.push('<select class="fieldsel">');for(var a=0,o=e.length;o>a;a++){var l=e[a];r.push('<option value="'+l.name+'"'),0==a&&r.push(" selected "),r.push(">"),r.push(l.display),r.push("</option>")}return r.push("</select>"),r.push("</td>"),r.push('<td class="l-filter-op">'),r.push('<select class="opsel">'),r.push(t._bulidOpSelectOptionsHtml(n,e&&e.length?e[0].operator:null)),r.push("</select>"),r.push("</td>"),r.push('<td class="l-filter-value">'),r.push('<input type="text" class="valtxt" />'),r.push("</td>"),r.push("<td>"),r.push('<div class="l-icon-cross deleterole"></div>'),r.push("</td>"),r.push("</tr>"),r.join("")},_bulidOpSelectOptionsHtml:function(e,t){var i=this.options,r=i.operators[e],n=[];t&&t.length&&(r=t.split(",")),r&&r.length||(r=["equal","notequal"]);for(var a=0,o=r.length;o>a;a++){var l=r[a];n[n.length]='<option value="'+l+'">',n[n.length]=i.strings[l],n[n.length]="</option>"}return n.join("")}}),e.ligerFilter=function(){},e.ligerFilter.filterTranslator={translateGroup:function(e){var t=[];if(null==e)return" 1==1 ";var i=!1;if(t.push("("),null!=e.rules)for(var r in e.rules)if("indexOf"!=r){var n=e.rules[r];i&&t.push(this.getOperatorQueryText(e.op)),t.push(this.translateRule(n)),i=!0}if(null!=e.groups)for(var a in e.groups){var o=e.groups[a];i&&t.push(this.getOperatorQueryText(e.op)),t.push(this.translateGroup(o)),i=!0}return t.push(")"),0==i?" 1==1 ":t.join("")},translateRule:function(e){var t=[];return null==e?" 1==1 ":"like"==e.op||"startwith"==e.op||"endwith"==e.op?(t.push("/"),"startwith"==e.op&&t.push("^"),t.push(e.value),"endwith"==e.op&&t.push("$"),t.push("/i.test("),t.push('o["'),t.push(e.field),t.push('"]'),t.push(")"),t.join("")):(t.push('o["'),t.push(e.field),t.push('"]'),t.push(this.getOperatorQueryText(e.op)),t.push('"'),t.push(e.value),t.push('"'),t.join(""))},getOperatorQueryText:function(e){switch(e){case"equal":return" == ";case"notequal":return" != ";case"greater":return" > ";case"greaterorequal":return" >= ";case"less":return" < ";case"lessorequal":return" <= ";case"and":return" && ";case"or":return" || ";default:return" == "}}},e.ligerFilter.getFilterFunction=function(t){e.isArray(t)&&(t={op:"and",rules:t});var i=" return  "+e.ligerFilter.filterTranslator.translateGroup(t);return new Function("o",i)}}(jQuery),function($){function getInvalidInf(e){var t=[];return $(e).each(function(e,i){var r=$(i.element).parents("li:first").prev("li:first").html(),n=i.message;t.push("<div>"+r+" "+n+"</div>")}),t.join("")}$.fn.ligerForm=function(){return $.ligerui.run.call(this,"ligerForm",arguments)},$.ligerui.getConditions=function(e,t){return e?(e=liger.get($(e)),e&&e.toConditions?e.toConditions():void 0):null},$.ligerDefaults=$.ligerDefaults||{},$.ligerDefaults.Form={width:null,inputWidth:180,labelWidth:90,space:40,rightToken:"ï¼",labelAlign:"left",align:"left",autoTypePrev:"ui-",fields:[],appendID:!0,prefixID:null,toJSON:$.ligerui.toJSON,labelCss:null,fieldCss:null,spaceCss:null,onAfterSetFields:null,buttons:null,readonly:!1,editors:{},validate:null,unSetValidateAttr:!1,tab:null,clsTab:"ui-tabs-nav ui-helper-clearfix",clsTabItem:"ui-state-default",clsTabItemSelected:"ui-tabs-selected",clsTabContent:"ui-tabs-panel ui-widget-content"},$.ligerDefaults.FormString={invalidMessage:"å­å¨{errorCount}ä¸ªå­æ®µéªè¯ä¸éè¿ï¼è¯·æ£æ¥!",detailMessage:"è¯¦ç»",okMessage:"ç¡®å®"},$.ligerDefaults.Form.editors.textarea={create:function(e,t,i){var r=$('<textarea class="l-textarea" />'),n=(i.prefixID||"")+t.field.name;return $("#"+n).length&&(r=$("#"+n)),r.attr({id:n,name:n}),t.field.editor&&t.field.editor.height&&r.height(t.field.editor.height),i.readonly&&r.attr("readonly",!0),e.append(r),r},getValue:function(e,t){return e.val()},setValue:function(e,t,i){e.val(t)},resize:function(e,t,i,r){e.css({width:t-2}).parent().css("width","auto")}},$.ligerDefaults.Form.editors.hidden={create:function(e,t,i){var r=$('<input type = "hidden"  />'),n=(i.prefixID||"")+t.field.name;$("#"+n).length&&(r=$("#"+n)),r.attr($.extend({id:n,name:n},t.field.attr));var a=t.field.editor||t.field.options;return a&&r.val(a.value),e.append(r),r},getValue:function(e,t){return e.val()},setValue:function(e,t,i){e.val(t)}},$.ligerDefaults.Form_fields={name:null,textField:null,type:null,editor:null,label:null,labelInAfter:!1,afterContent:null,beforeContent:null,hideSpace:!1,hideLabel:!1,rightToken:null,attrRender:null,style:null,containerCls:null,newline:!0,op:null,vt:null,attr:null,validate:null},$.ligerDefaults.Form_editor={},$.ligerDefaults.Form.editorBulider=function(e){var t=this.options;if(e&&e.length){var i={},r=e.attr("ltype"),n={};t.readonly&&(i.readonly=!0),i=$.extend({width:(n.width||t.inputWidth)-2},n.options,n.editor,i);var a=null;if("autocomplete"==r&&(i.autocomplete=!0),e.is("select")&&"none"!=r)a=e.ligerComboBox(i);else if(e.is(":password")&&"none"!=r)a=e.ligerTextBox(i);else if(e.is(":radio")&&"none"!=r)a=e.ligerRadio(i);else if(e.is(":checkbox")&&"none"!=r)a=e.ligerCheckBox(i);else if(e.is("textarea")&&"none"!=r)e.addClass("l-textarea"),a={getValue:function(){return e.val()},setValue:function(t){e.val(t)}};else if(r&&"none"!=r){if(e.is(":text"))switch(r){case"select":case"combobox":case"autocomplete":a=e.ligerComboBox(i);break;case"spinner":a=e.ligerSpinner(i);break;case"date":a=e.ligerDateEditor(i);break;case"popup":a=e.ligerPopupEdit(i);break;case"currency":a=i.currency=!0;case"float":case"number":i.number=!0,a=e.ligerTextBox(i);break;case"int":case"digits":i.digits=!0;default:a=e.ligerTextBox(i)}else if(e.is(":hidden"))switch(r){case"select":case"combobox":case"autocomplete":a=e.ligerComboBox(i);break;case"checkboxlist":a=e.ligerCheckBoxList(i);break;case"radiolist":a=e.ligerRadioList(i);break;case"listbox":a=e.ligerListBox(i)}}else{var o=e.get(0).className;if(o){var l=t.autoTypePrev||"ui-";-1!=o.indexOf(l)&&(o=o.replace(l,""))}if(!o&&(e.is(":hidden")||e.is(":text"))&&e.attr("name"))a={getValue:function(){return e.val()},setValue:function(t){e.val(t)}};else switch(o){case"textbox":case"password":a=e.ligerTextBox(i);break;case"datepicker":a=e.ligerDateEditor(i);break;case"spinner":a=e.ligerSpinner(i);break;case"checkbox":a=e.ligerCheckBox(i);break;case"combobox":a=e.ligerComboBox(i);break;case"checkboxlist":a=e.ligerCheckBoxList(i);break;case"radiolist":a=e.ligerRadioList(i);break;case"listbox":a=e.ligerListBox(i)}}return a?{name:e.attr("name"),control:a}:null}},$.ligerui.controls.Form=function(e,t){$.ligerui.controls.Form.base.constructor.call(this,e,t)},$.ligerui.controls.Form.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"Form"},__idPrev:function(){return"Form"},_init:function(){var e=this,t=this.options;$.ligerui.controls.Form.base._init.call(this);for(var i in liger.editors){var r=liger.editors[i];!r||i in t.editors||(t.editors[i]=liger.getEditor($.extend({type:i,master:e},r)))}},_render:function(){var g=this,p=this.options,jform=$(this.element);if(g.form=jform.is("form")?jform:jform.parents("form:first"),$("input,select,textarea",jform).each(function(){var e=p.editorBulider.call(g,$(this));e&&(g.autoEditors=g.autoEditors||[],g.autoEditors.push(e))}),g.autoEditors&&g.autoEditors.length&&p.validate&&(g.validate=g.validate||{},$(g.autoEditors).each(function(){var name=this.name,control=this.control;if(name&&control.inputText&&control.inputText.attr("validate")){var v=null,vm=null;eval("v = "+control.inputText.attr("validate")),v&&(g.validate.rules=g.validate.rules||{},g.validate.rules[name]=v),control.inputText.attr("validateMessage")&&(eval("vm = "+control.inputText.attr("validateMessage")),vm&&(g.validate.messages=g.validate.messages||{},g.validate.messages[name]=vm))}})),g.set(p),g.initValidate(),p.buttons){var jbuttons=$('<ul class="l-form-buttons"></ul>').appendTo(jform);$(p.buttons).each(function(){var e=$("<li><div></div></li>").appendTo(jbuttons);$("div:first",e).ligerButton(this)})}g.element.id||(g.element.id=g.id),$("#"+g.element.id+" .togglebtn").live("click",function(){$(this).hasClass("togglebtn-down")?$(this).removeClass("togglebtn-down"):$(this).addClass("togglebtn-down");for(var e=$(this).parent().nextAll("ul,div"),t=0;t<e.length;t++){var i=$(e[t]);if(i.hasClass("l-group"))break;$(this).hasClass("togglebtn-down")?i.hide():i.show()}})},_setWidth:function(e){var t=this;this.options;e&&t.form.width(e)},getEditor:function(e){function t(t,n){for(var a=null==t?r.fields:t.fields,o=0,l=a.length;l>o;o++){var s=a[o],d=null==n?o:"tab"+n+"_"+o;if(s.name==e&&i.editors[d])return i.editors[d].control}}var i=this,r=this.options;if(i.editors){var n=t(null);if(n)return n;if(r.tab&&r.tab.items)for(var a=0;a<r.tab.items.length;a++){var o=r.tab.items[a],n=t(o,a);if(n)return n}return null}},getField:function(e){var t=this.options;return t.fields?t.fields[e]:null},toConditions:function(){var e=this,t=this.options,i=[];return $(t.fields).each(function(t,r){var n=r.name,a=(r.textField,e.editors[t]);if(a&&n){var o=a.editor.getValue.call(e,a.control,{field:r});null!=o&&""!==o&&i.push({op:r.operator||"like",field:n,value:o,type:r.type||"string"})}}),i},_preSetFields:function(e){var t=this.options,i=null,r=null;$(t.fields).each(function(e,n){
(t.readonly||n.readonly||n.editor&&n.editor.readonly)&&delete n.validate,"hidden"!=n.type&&(n.type=n.type||"text",null==n.newline&&(n.newline=!0),i&&!n.group&&(n.group=i,n.groupicon=r),n.group&&(n.group=n.group.toString().replace(/^\s\s*/,"").replace(/\s\s*$/,""),i=n.group,r=n.groupicon))})},_setReadonly:function(e){var t=this;this.options;if(e&&t.editors)for(var i in t.editors){var r=t.editors[i].control;r&&r._setReadonly&&r._setReadonly(!0)}},_setFields:function(e){var t=this,i=this.options;$.isFunction(i.prefixID)&&(i.prefixID=i.prefixID(t));var r=$(t.element).addClass("l-form");t._initFieldsValidate({fields:e}),t._initFieldsHtml({panel:r,fields:e}),t._createEditors({fields:e}),t.trigger("afterSetFields")},_initFieldsValidate:function(e){var t=this,i=this.options,r=e.fields;t.validate=t.validate||{},r&&r.length&&$(r).each(function(e,r){var n=(r.name,r.readonly||r.editor&&r.editor.readonly?!0:!1),a=(i.prefixID||"")+(r.textField||r.id||r.name);r.validate&&!n&&(t.validate.rules=t.validate.rules||{},t.validate.rules[a]=r.validate,r.validateMessage&&(t.validate.messages=t.validate.messages||{},t.validate.messages[a]=r.validateMessage))})},_initFieldsHtml:function(e){var t=this,i=this.options,r=e.panel,n=e.fields,a=e.idPrev||t.id,o=e.tabindex;$(">.l-form-container",r).remove();var l=0,s=0;if(n&&n.length){t._preSetFields(n);var d=['<div class="l-form-container">'],c=!1,u=null,h=[];$(n).each(function(e,t){t.group||(t.group=""),-1==$.inArray(t.group,h)&&h.push(t.group)}),$(h).each(function(r,h){$(n).each(function(r,g){if(g.group==h){var p=$.inArray(g,n),f=g.id||g.name,v=g.newline,m=(i.prefixID||"")+(g.id||g.name);if(f){if("hidden"==g.type)return void($("#"+m).length||d.push('<div style="display:none" id="'+(a+"|"+r)+'"></div>'));var b=g.group&&g.group!=u;if((0==p||b)&&(v=!0),v&&(l=0,c&&(d.push("</ul>"),c=!1),b&&(d.push('<div class="l-group'),g.groupicon&&d.push(" l-group-hasicon"),d.push('">'),g.groupicon&&d.push('<img src="'+g.groupicon+'" />'),d.push("<span>"+g.group+"</span></div>"),u=g.group),d.push("<ul>"),c=!0),d.push('<li class="l-fieldcontainer'),v&&d.push(" l-fieldcontainer-first"),g.containerCls&&d.push(" "+g.containerCls),d.push('"'),g.style&&d.push(' style="'+g.style+'"'),d.push(' fieldindex="'+p+'"'),null!=o&&d.push(' tabindex="'+o+'"'),g.attrRender&&d.push(" "+g.attrRender()),d.push("><ul>"),g.beforeContent){var x=$.isFunction(g.beforeContent)?g.afterContent(g):g.beforeContent;x&&d.push(x)}if(g.hideLabel||g.labelInAfter||d.push(t._buliderLabelContainer(g,p)),d.push(t._buliderControlContainer(g,p,e.idPrev)),g.labelInAfter&&d.push(t._buliderLabelContainer(g,p)),g.afterContent){var y=$.isFunction(g.afterContent)?g.afterContent(g):g.afterContent;y&&d.push(y)}g.hideSpace||d.push(t._buliderSpaceContainer(g,p)),d.push("</ul></li>"),l+=g.width||i.inputWidth||0,l+=g.space||i.space||0,l+=g.labelWidth||i.labelWidth||0,l>s&&(s=l)}}})}),c&&(d.push("</ul>"),c=!1),d.push('<div class="l-clear"></div>'),d.push("</div>"),r.append(d.join("")),!i.width||s>i.width,$(".l-group .togglebtn",r).remove(),$(".l-group",r).width(.95*r.width()).append("<div class='togglebtn'></div>")}},_createEditors:function(e){var t=this,i=this.options,r=e.fields,n=e.idPrev||t.id,a=e.editPrev||"";t.editors=t.editors||{};$(t.element);$(r).each(function(e,r){var o=document.getElementById(n+"|"+e),l=i.editors[r.type],s=a+e;if(o){o=$(o);var d=t._createEditor(l,o,{field:r},o.width(),o.height());d&&(t.editors[s]&&t.editors[s].control&&t.editors[s].control.destroy&&t.editors[s].control.destroy(),t.editors[s]={control:d,editor:l})}})},getChanges:function(){var e=this,t=(this.options,e.data),i=e.getData();e.data=t;var r={};for(var n in t)i[n]!=t[n]&&(r[n]=i[n]);return r},setEnabled:function(e,t){function i(e,i){$(e).each(function(e,a){var o=a.name,l=(a.textField,null==i?"":"tab"+i+"_"),s=n.editors[l+e];s&&o&&s.editor&&s.editor.setEnabled&&-1!=$.inArray(o,r)&&s.editor.setEnabled(s.control,t)})}var r=[];$.isArray(e)&&(r=e),"string"==typeof e&&r.push(e);var n=this,a=this.options;if(i(a.fields),a.tab&&a.tab.items)for(var o=0;o<a.tab.items.length;o++){var l=a.tab.items[o];i(l.fields,o)}},setVisible:function(e,t){function i(e,i){$(e).each(function(e,a){var o=a.name;-1!=$.inArray(o,r)&&n._setFieldPanelVisible(i,e,t)})}var r=[];$.isArray(e)&&(r=e),"string"==typeof e&&r.push(e);var n=this,a=this.options;if(i(a.fields),a.tab&&a.tab.items)for(var o=0;o<a.tab.items.length;o++){var l=a.tab.items[o];i(l.fields,o)}},_setFieldPanelVisible:function(e,t,i){var r=this,n=this.options;null==e?$("li.l-fieldcontainer[fieldindex="+t+"]",r.element)[i?"show":"hide"]():$("div."+n.clsTabContent+"[data-index="+e+"] li.l-fieldcontainer[fieldindex="+t+"]",r.element)[i?"show":"hide"]()},getData:function(){function e(e,i){$(e).each(function(e,r){var n=r.name,a=r.textField,o=null==i?"":"tab"+i+"_",l=t.editors[o+e];if(l){if(n){var s=l.editor.getValue.call(t,l.control,{field:r});t._setValueByName(t.data,n,s)}if(a&&l.editor.getText){var s=l.editor.getText.call(t,l.control,{field:r});t._setValueByName(t.data,a,s)}}})}var t=this,i=this.options;if(t.data=t.formData||{},t.autoEditors&&t.autoEditors.length&&$(t.autoEditors).each(function(){var e=this.name,i=this.control;e&&i&&i.getValue&&(t.data[e]=i.getValue())}),e(i.fields),i.tab&&i.tab.items)for(var r=0;r<i.tab.items.length;r++){var n=i.tab.items[r];e(n.fields,r)}return t.data},_setData:function(e){this.setData(e)},setData:function(e){function t(e,t){$(e).each(function(e,r){var n=r.name,a=r.textField,o=null==t?"":"tab"+t+"_",l=i.editors[o+e];if(l){if(n&&n in i.data){var s=i._getValueByName(i.data,n);l.editor.setValue.call(i,l.control,s,{field:r})}if(a&&a in i.data){var d=i._getValueByName(i.data,a);l.editor.setText.call(i,l.control,d,{field:r})}}})}var i=this,r=this.options;if(i.data=e||{},i.autoEditors&&i.autoEditors.length&&$(i.autoEditors).each(function(){var e=this.name,t=this.control;e&&i.data[e]&&t&&t.setValue&&t.setValue(i.data[e])}),t(r.fields),r.tab&&r.tab.items)for(var n=0;n<r.tab.items.length;n++){var a=r.tab.items[n];t(a.fields,n)}},_setValueByName:function(e,t,i){if(!e||!t)return null;if(-1==t.indexOf("."))e[t]=i;else try{new Function("data,value","data."+t+"=value;")(e,i)}catch(r){}},_getValueByName:function(e,t){if(!e||!t)return null;if(-1==t.indexOf("."))return e[t];try{return new Function("data","return data."+t+";")(e)}catch(i){return null}},valid:function(){var e=this;this.options;return e.form&&e.validator?e.form.valid():!0},showFieldError:function(e,t){var i=$("[name="+e+"]",this.element);i.hasClass("l-textarea")?i.addClass("l-textarea-invalid"):i.hasClass("l-text-field")&&i.parent().addClass("l-text-invalid"),$(i).removeAttr("title").ligerHideTip(),$(i).attr("title",t).ligerTip({distanceX:5,distanceY:-3,auto:!0})},hideFieldError:function(e){var t=$("[name="+e+"]",this.element);t.hasClass("l-textarea")?t.removeClass("l-textarea-invalid"):t.parent().removeClass("l-text-invalid"),$(t).removeAttr("title").ligerHideTip()},initValidate:function(){var e=this,t=this.options;if(!e.form||!t.validate||!e.form.validate)return void(e.validator=null);var i=1==t.validate?{}:t.validate,r=$.extend({errorPlacement:function(e,t){if($(e).html()){if(!t.attr("id")){var i=(new Date).getTime();t.attr("id",i),e.attr("for",i)}t.hasClass("l-textarea")?t.addClass("l-textarea-invalid"):t.hasClass("l-text-field")&&t.parent().addClass("l-text-invalid"),$(t).removeAttr("title").ligerHideTip(),$(t).attr("title",$(e).html()).ligerTip({distanceX:5,distanceY:-3,auto:!0})}},success:function(e){var t=e.attr("for");if(t){var i=$("#"+t);i.hasClass("l-textarea")?i.removeClass("l-textarea-invalid"):i.parent().removeClass("l-text-invalid"),$(i).removeAttr("title").ligerHideTip()}}},i,{rules:e.validate.rules,messages:e.validate.messages});e.validator=e.form.validate(r)},setFieldValidate:function(e,t,i){var r=$("[name="+e+"]");if(r.length&&r.rules){var n=r.rules("remove");if(n&&(r.hasClass("l-text-field")&&r.parent().removeClass("l-text-invalid"),r.removeAttr("title").ligerHideTip(),n.required&&r.parents("li:first").next("li:first").find(".l-star").remove()),t){var a=$.extend({},t,{messages:i});r.rules("add",a),t.required&&r.parents("li:first").next("li:first").append('<span class="l-star">*</span>')}}},showInvalid:function(){var e=this,t=this.options;if(e.validator){var i=t.invalidMessage.replace("{errorCount}",e.validator.errorList.length);if(t.showInvalid)t.showInvalid(i);else{var r=$('<div><div class="invalid">'+i+'<a class="viewInvalidDetail" href="javascript:void(0)">'+t.detailMessage+'</a></div><div class="invalidDetail" style="display:none;">'+getInvalidInf(e.validator.errorList)+"</div></div>");r.find("a.viewInvalidDetail:first").bind("click",function(){$(this).parent().next("div.invalidDetail").toggle()}),$.ligerDialog.open({type:"error",width:350,showMax:!1,showToggle:!1,showMin:!1,target:r,buttons:[{text:t.okMessage,onclick:function(e,t){t.close()}}]})}}},_createEditor:function(e,t,i,r,n){var a=this.options;try{var o=e.create.call(this,t,i,a);return o&&e.resize&&e.resize.call(this,o,r,n,i),o}catch(l){return null}},_buliderLabelContainer:function(e){var t=this.options,i=e.label||e.display,r=e.labelWidth||e.labelwidth||t.labelWidth,n=e.labelAlign||t.labelAlign;if(i){var a=e.rightToken;(null==a||""==a)&&(a=t.rightToken),i+=a}var o=[];return o.push("<li"),t.labelCss&&o.push(' class="'+t.labelCss+'"'),o.push(' style="'),/px$/i.test(r)||/auto/i.test(r)||/%$/i.test(r)?o.push("width:"+r+";"):r&&o.push("width:"+r+"px;"),n&&"top"!=n&&o.push("text-align:"+n+";"),o.push('">'),i&&o.push(i),o.push("</li>"),o.join("")},_buliderControlContainer:function(e,t,i){var r=this,n=this.options,a=e.width||n.inputWidth,o=e.align||e.textAlign||e.textalign||n.align,l=[],i=i||r.id,s=e.labelAlign||n.labelAlign;return l.push("<li"),l.push(' id="'+(i+"|"+t)+'"'),n.fieldCss&&l.push(' class="'+n.fieldCss+'"'),l.push(' style="'),/px$/i.test(a)||/auto/i.test(a)||/%$/i.test(a)?l.push("width:"+a+";"):a&&l.push("width:"+a+"px;"),o&&l.push("text-align:"+o+";"),"top"==s&&l.push("clear:both;"),l.push('">'),l.push("</li>"),l.join("")},_buliderSpaceContainer:function(e){var t=this.options,i=e.space||e.spaceWidth||t.space;(0===e.space||0===e.spaceWidth)&&(i=0);var r=[];return r.push("<li"),t.spaceCss&&r.push(' class="'+t.spaceCss+'"'),r.push(' style="'),(/px$/i.test(i)||/auto/i.test(i)||/%$/i.test(i))&&r.push("width:"+i+";"),i&&r.push("width:"+i+"px;"),r.push('">'),e.validate&&e.validate.required&&r.push("<span class='l-star'>*</span>"),r.push("</li>"),r.join("")},_getInputAttrHtml:function(e){var t=[],i=(e.type||"text").toLowerCase();if("textarea"==i&&(e.cols&&t.push('cols="'+e.cols+'" '),e.rows&&t.push('rows="'+e.rows+'" ')),t.push('ltype="'+i+'" '),e.op&&t.push('op="'+e.op+'" '),e.vt&&t.push('vt="'+e.vt+'" '),e.attr)for(var r in e.attr)t.push(r+'="'+e.attr[r]+'" ');return t.join("")},_setTab:function(e){var t=this,i=this.options;if(e&&e.items){for(var r=$('<div class="l-form-tabs"></div>').appendTo(t.element),n=$('<ul class="'+i.clsTab+'" original-title="">').appendTo(r),a=0;a<e.items.length;a++){var o=e.items[a],l=$('<li class="'+i.clsTabItem+'"><a href="javascript:void(0)"></a></li>').appendTo(n),s=$('<div class="'+i.clsTabContent+'">').appendTo(r),d=t.id+"|tdb"+a;l.add(s).attr("data-index",a),o.id&&l.attr("data-id",o.id),l.find("a:first").text(o.title),t._initFieldsValidate({fields:o.fields}),t._initFieldsHtml({panel:s,fields:o.fields,tabindex:a,idPrev:d}),t._createEditors({fields:o.fields,idPrev:d,editPrev:"tab"+a+"_"})}n.find("li").click(function(){$(this).addClass(i.clsTabItemSelected)},function(){$(this).removeClass(i.clsTabItemSelected)}).click(function(){var e=$(this).attr("data-index");t.selectTab(e)}),t.selectTab(0)}},selectTab:function(e){var t=this,i=this.options,r=$(t.element).find(".l-form-tabs:first"),n=r.find(".ui-tabs-nav li"),a=r.find(".ui-tabs-panel");n.filter("[data-index="+e+"]").addClass(i.clsTabItemSelected),n.filter("[data-index!="+e+"]").removeClass(i.clsTabItemSelected),a.filter("[data-index="+e+"]").show(),a.filter("[data-index!="+e+"]").hide()},destroy:function(){try{var e=this;this.options;liger.remove(this);for(var t in e.editors){var i=e.editors[t].control;i&&i.destroy&&i.destroy()}$(e.element).remove()}catch(r){}}})}(jQuery),function($){function removeArrItem(e,t){for(var i=e.length-1;i>=0;i--)t(e[i])&&e.splice(i,1)}var l=$.ligerui;$.fn.ligerGrid=function(e){return $.ligerui.run.call(this,"ligerGrid",arguments)},$.fn.ligerGetGridManager=function(){return $.ligerui.run.call(this,"ligerGetGridManager",arguments)},$.ligerDefaults.Grid={title:null,width:"auto",height:"auto",columnWidth:null,resizable:!0,url:!1,urlParms:null,data:null,usePager:!0,hideLoadButton:!1,pagerRender:null,page:1,pageSize:10,pageSizeOptions:[10,20,30,40,50],parms:[],columns:[],minColToggle:1,dataType:"server",dataAction:"server",showTableToggleBtn:!1,switchPageSizeApplyComboBox:!1,allowAdjustColWidth:!0,checkbox:!1,isSingleCheck:!1,allowHideColumn:!0,enabledEdit:!1,isScroll:!0,dateFormat:"yyyy-MM-dd",inWindow:!0,statusName:"__status",method:"post",async:!0,fixedCellHeight:!0,heightDiff:0,cssClass:null,root:"Rows",record:"Total",pageParmName:"page",pagesizeParmName:"pagesize",sortnameParmName:"sortname",sortorderParmName:"sortorder",allowUnSelectRow:!1,alternatingRow:!0,mouseoverRowCssClass:"l-grid-row-over",enabledSort:!0,rowClsRender:null,rowAttrRender:null,groupColumnName:null,groupColumnDisplay:"åç»",groupRender:null,totalRender:null,delayLoad:!1,where:null,selectRowButtonOnly:!1,selectable:!0,whenRClickToSelect:!1,contentType:null,checkboxColWidth:27,detailColWidth:29,clickToEdit:!0,detailToEdit:!1,onEndEdit:null,minColumnWidth:80,tree:null,isChecked:null,isSelected:null,frozen:!0,frozenDetail:!1,frozenCheckbox:!0,detail:null,detailHeight:260,isShowDetailToggle:null,rownumbers:!1,frozenRownumbers:!0,rownumbersColWidth:26,colDraggable:!1,rowDraggable:!1,rowDraggingRender:null,autoCheckChildren:!0,onRowDragDrop:null,rowHeight:28,headerRowHeight:28,toolbar:null,toolbarShowInLeft:!0,headerImg:null,editorTopDiff:3,editorLeftDiff:1,editorHeightDiff:-1,unSetValidateAttr:!0,autoFilter:!1,rowSelectable:!0,scrollToPage:!1,scrollToAppend:!0,onDragCol:null,onToggleCol:null,onChangeSort:null,onSuccess:null,onDblClickRow:null,onSelectRow:null,onBeforeSelectRow:null,onUnSelectRow:null,onBeforeCheckRow:null,onCheckRow:null,onBeforeCheckAllRow:null,onCheckAllRow:null,onBeforeShowData:null,onAfterShowData:null,onError:null,onSubmit:null,onReload:null,onToFirst:null,onToPrev:null,onToNext:null,onToLast:null,onAfterAddRow:null,onBeforeEdit:null,onBeforeSubmitEdit:null,onAfterEdit:null,onLoading:null,onLoaded:null,onContextmenu:null,onBeforeCancelEdit:null,onAfterSubmitEdit:null,onRowDragDrop:null,onGroupExtend:null,onGroupCollapse:null,onTreeExpand:null,onTreeCollapse:null,onTreeExpanded:null,onTreeCollapsed:null,onLoadData:null,onHeaderCellBulid:null},$.ligerDefaults.GridString={errorMessage:"åçéè¯¯",pageStatMessage:"æ¾ç¤ºä»{from}å°{to}ï¼æ» {total} æ¡ ãæ¯é¡µæ¾ç¤ºï¼{pagesize}",pageTextMessage:"Page",loadingMessage:"å è½½ä¸­...",findTextMessage:"æ¥æ¾",noRecordMessage:"æ²¡æç¬¦åæ¡ä»¶çè®°å½å­å¨",isContinueByDataChanged:"æ°æ®å·²ç»æ¹å,å¦æç»§ç»­å°ä¸¢å¤±æ°æ®,æ¯å¦ç»§ç»­?",cancelMessage:"åæ¶",saveMessage:"ä¿å­",applyMessage:"åºç¨",draggingMessage:"{count}è¡"},$.ligerDefaults.Grid_columns={id:null,name:null,totalSummary:null,display:null,headerRender:null,isAllowHide:!0,isSort:!1,type:null,columns:null,width:120,minWidth:80,format:null,align:"left",hide:!1,editor:null,render:null,textField:null},$.ligerDefaults.Grid_editor={type:null,ext:null,onChange:null,onChanged:null},$.ligerMethos.Grid=$.ligerMethos.Grid||{},$.ligerDefaults.Grid.sorters=$.ligerDefaults.Grid.sorters||{},$.ligerDefaults.Grid.formatters=$.ligerDefaults.Grid.formatters||{},$.ligerDefaults.Grid.editors=$.ligerDefaults.Grid.editors||{},$.ligerDefaults.Grid.sorters.date=function(e,t){return t>e?-1:e>t?1:0},$.ligerDefaults.Grid.sorters["int"]=function(e,t){return parseInt(e)<parseInt(t)?-1:parseInt(e)>parseInt(t)?1:0},$.ligerDefaults.Grid.sorters["float"]=function(e,t){return parseFloat(e)<parseFloat(t)?-1:parseFloat(e)>parseFloat(t)?1:0},$.ligerDefaults.Grid.sorters.string=function(e,t){return e?e.localeCompare(t):!1},$.ligerDefaults.Grid.formatters.date=function(value,column){function getFormatDate(e,t){this.options;if(isNaN(e))return null;var i=t,r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in r)new RegExp("("+n+")").test(i)&&(i=i.replace(RegExp.$1,1==RegExp.$1.length?r[n]:("00"+r[n]).substr((""+r[n]).length)));return i}if(!value)return"";if("string"==typeof value&&/^\/Date/.test(value)&&(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)),value instanceof Date){var format=column.format||this.options.dateFormat||"yyyy-MM-dd";return getFormatDate(value,format)}return value.toString()},$.ligerDefaults.Grid.formatters.ref=function(e){return $.isArray(e)?e.length>1?e[1]:e[0]:e},$.ligerui.controls.Grid=function(e,t){$.ligerui.controls.Grid.base.constructor.call(this,e,t)},$.ligerui.controls.Grid.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"$.ligerui.controls.Grid"},__idPrev:function(){return"grid"},_extendMethods:function(){return $.ligerMethos.Grid},_init:function(){$.ligerui.controls.Grid.base._init.call(this);var e=this,t=this.options;t.dataType=t.url?"server":"local","local"==t.dataType&&(t.data=t.data||[],t.dataAction="local"),0==t.isScroll&&(t.height="auto"),t.frozen||(t.frozenCheckbox=!1,t.frozenDetail=!1,t.frozenRownumbers=!1),t.detailToEdit&&(t.enabledEdit=!0,t.clickToEdit=!1,t.detail={height:"auto",onShowDetail:function(i,r,n){function a(){$(r).parent().parent().remove(),e.collapseDetail(i)}$(r).addClass("l-grid-detailpanel-edit"),e.beginEdit(i,function(e,i){var n=$("<div class='l-editbox'></div>");return n.width(120).height(t.rowHeight+1),n.appendTo(r),n}),$("<div class='l-clear'></div>").appendTo(r),$("<div class='l-button'>"+t.saveMessage+"</div>").appendTo(r).click(function(){e.endEdit(i),a()}),$("<div class='l-button'>"+t.applyMessage+"</div>").appendTo(r).click(function(){e.submitEdit(i)}),$("<div class='l-button'>"+t.cancelMessage+"</div>").appendTo(r).click(function(){e.cancelEdit(i),a()})}}),t.tree&&(t.tree.childrenName=t.tree.childrenName||"children",t.tree.isParent=t.tree.isParent||function(e){var i=t.tree.childrenName in e;return i},t.tree.isExtend=t.tree.isExtend||function(e){return"isextend"in e&&0==e.isextend?!1:!0});for(var i in liger.editors){var r=liger.editors[i];!r||i in t.editors||(t.editors[i]=liger.getEditor($.extend({type:i,master:e},r)))}},_render:function(){var e=this,t=this.options;e.grid=$(e.element),e.grid.addClass("l-panel");var i=[];if(i.push("        <div class='l-panel-header'><span class='l-panel-header-text'></span></div>"),i.push("                    <div class='l-grid-loading'></div>"),i.push("        <div class='l-panel-topbar' style='display:none'><div class='l-panel-topbarinner'></div></div><div class='l-clear'></div>"),i.push("        <div class='l-panel-bwarp'>"),i.push("            <div class='l-panel-body'>"),i.push("                <div class='l-grid'>"),i.push("                    <div class='l-grid-dragging-line'></div>"),i.push("                    <div class='l-grid-popup'><table cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                  <div class='l-grid1'>"),i.push("                      <div class='l-grid-header l-grid-header1'>"),i.push("                          <div class='l-grid-header-inner'><table class='l-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                      </div>"),i.push("                      <div class='l-grid-body l-grid-body1'>"),i.push("                      </div>"),i.push("                  </div>"),i.push("                  <div class='l-grid2'>"),i.push("                      <div class='l-grid-header l-grid-header2'>"),i.push("                          <div class='l-grid-header-inner'><table class='l-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                      </div>"),i.push("                      <div class='l-grid-body l-grid-body2 l-scroll'>"),i.push("                      </div>"),i.push("                  </div>"),i.push("                 </div>"),i.push("              </div>"),i.push("         </div>"),i.push("         <div class='l-panel-bar'>"),i.push("            <div class='l-panel-bbar-inner'>"),i.push("                <div class='l-bar-group  l-bar-message'><span class='l-bar-text'></span></div>"),i.push("            <div class='l-bar-group l-bar-selectpagesize'></div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'>"),i.push("                    <div class='l-bar-button l-bar-btnfirst'><span></span></div>"),i.push("                    <div class='l-bar-button l-bar-btnprev'><span></span></div>"),i.push("                </div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'><span class='pcontrol'> <input type='text' size='4' value='1' style='width:20px' maxlength='3' /> / <span></span></span></div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'>"),i.push("                     <div class='l-bar-button l-bar-btnnext'><span></span></div>"),i.push("                    <div class='l-bar-button l-bar-btnlast'><span></span></div>"),i.push("                </div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'>"),i.push("                     <div class='l-bar-button l-bar-btnload'><span></span></div>"),i.push("                </div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-clear'></div>"),i.push("            </div>"),i.push("         </div>"),e.grid.html(i.join("")),e.header=$(".l-panel-header:first",e.grid),e.body=$(".l-panel-body:first",e.grid),e.toolbar=$(".l-panel-bar:first",e.grid),e.popup=$(".l-grid-popup:first",e.grid),e.gridloading=$(".l-grid-loading:first",e.grid),e.draggingline=$(".l-grid-dragging-line",e.grid),e.topbar=$(".l-panel-topbarinner:first",e.grid),e.gridview=$(".l-grid:first",e.grid),e.gridview.attr("id",e.id+"grid"),e.gridview1=$(".l-grid1:first",e.gridview),e.gridview2=$(".l-grid2:first",e.gridview),e.gridheader=$(".l-grid-header:first",e.gridview2),e.gridbody=$(".l-grid-body:first",e.gridview2),t.autoFilter){var r={text:"é«çº§æ¥è¯¢",gridid:e.id,click:function(){e.showFilter()},icon:"search2"};t.toolbar&&t.toolbar.items?t.toolbar.items.push(r):t.toolbar={items:[r]}}e.f={},e.f.gridheader=$(".l-grid-header:first",e.gridview1),e.f.gridbody=$(".l-grid-body:first",e.gridview1),e.currentData=null,e.changedCells={},e.editors={},e.editor={editing:!1},e.cacheData={},"auto"==t.height&&e.bind("SysGridHeightChanged",function(){e.enabledFrozen()&&e.gridview.height(Math.max(e.gridview1.height(),e.gridview2.height()))});var n=$.extend({},t);this._bulid(),this._setColumns(t.columns),delete n.columns,delete n.data,delete n.url,e.set(n),t.delayLoad||(t.url?e.set({url:t.url}):t.data&&e.set({data:t.data}))},_setFrozen:function(e){e?this.grid.addClass("l-frozen"):this.grid.removeClass("l-frozen")},_setCssClass:function(e){this.grid.addClass(e)},_setLoadingMessage:function(e){this.gridloading.html(e)},_setToolbar:function(e){var t=this,i=this.options;if(e&&$.fn.ligerToolBar){if(t.topbar.parent().show(),t.toolbarManager=t.topbar.ligerToolBar(e),e.title){var r=$("<div class='l-panel-topbartitle'><span>"+e.title+"</span></div>");e.icon&&(r.append("<img class='l-panel-topbaricon' src='"+e.icon+"'></img>"),r.addClass("l-panel-topbartitle-hasicon")),t.topbar.parent().append(r)}i.toolbarShowInLeft&&t.topbar.addClass("l-panel-topbarinner-left")}else t.topbar.parent().remove()},isHorizontalScrollShowed:function(){var e=this,t=e.gridbody.find(".l-grid-body-inner:first");return t.length?e.gridbody.width()-20<t.width():!1},_setHeight:function(e){var t=this,i=this.options;if(t.unbind("SysGridHeightChanged"),"auto"==e)return void t.bind("SysGridHeightChanged",function(){t.enabledFrozen()&&t.gridview.height(Math.max(t.gridview1.height(),t.gridview2.height()))});if(e=t._calculateGridBodyHeight(e),e>0){if(t.gridbody.height(e),i.frozen){var r=t.gridbody.width(),n=$(":first-child",t.gridbody).width();n&&n+18>r?e>18&&t.f.gridbody.height(e-18):t.f.gridbody.height(e)}var a=i.headerRowHeight*(t._columnMaxLevel-1)+i.headerRowHeight-1;t.gridview.height(e+a)}t._updateHorizontalScrollStatus.ligerDefer(t,10)},_calculateGridBodyHeight:function(e){var t=this,i=this.options;"string"==typeof e&&e.indexOf("%")>0&&(e=i.inWindow?$(window).height()*parseInt(e)*.01:t.grid.parent().height()*parseInt(e)*.01),i.title&&(e-=24),(i.usePager&&i.pagerRender||!i.scrollToPage)&&(e-=t.toolbar.outerHeight()),i.totalRender&&(e-=25),i.toolbar&&(e-=t.topbar.outerHeight());var r=i.headerRowHeight*(t._columnMaxLevel-1)+i.headerRowHeight-1;return e-=r||0},_updateHorizontalScrollStatus:function(){var e=this;this.options;e.isHorizontalScrollShowed()?e.gridview.addClass("l-grid-hashorizontal"):e.gridview.removeClass("l-grid-hashorizontal")},_updateFrozenWidth:function(){var e=this;this.options;if(e.enabledFrozen()){e.gridview1.width(e.f.gridtablewidth);var t=e.gridview.width()-e.f.gridtablewidth;e.gridview2.css({left:e.f.gridtablewidth}),t>0&&e.gridview2.css({width:t})}},_setWidth:function(e){var t=this;this.options;t.enabledFrozen()&&t._onResize()},_setUrl:function(e){this.options.url=e,e?(this.options.dataType="server",this.loadData(!0)):this.options.dataType="local"},removeParm:function(e){var t=this,i=t.get("parms");i||(i={}),i instanceof Array?removeArrItem(i,function(t){return t.name==e}):delete i[e],t.set("parms",i)},setParm:function(e,t){var i=this,r=i.get("parms");r||(r={}),r instanceof Array?(removeArrItem(r,function(t){return t.name==e}),r.push({name:e,value:t})):r[e]=t,i.set("parms",r)},_setData:function(e){this.loadData(this.options.data),this.trigger("afterSetData")},loadData:function(e,t){var i=this,r=this.options;i.loading=!0,i.trigger("loadData");var n=null,a=!0;"function"==typeof e?(n=e,i.lastData?i.data=i.lastData:(i.data=i.currentData,i.data||(i.data={}),i.data[r.root]||(i.data[r.root]=[]),i.lastData=i.data),a=!1):"boolean"==typeof e?a=e:"object"==typeof e&&e?(a=!1,r.dataType="local",r.data=e):"number"==typeof e&&(r.newPage=e),r.newPage||(r.newPage=1),"server"==r.dataAction&&(r.sortOrder||(r.sortOrder="asc"));var o=[];if(r.parms){var l=$.isFunction(r.parms)?r.parms():r.parms;if(l.length){$(l).each(function(){o.push({name:this.name,value:this.value})});for(var s=l.length-1;s>=0;s--)l[s].temp&&l.splice(s,1)}else if("object"==typeof l)for(var d in l)o.push({name:d,value:l[d]})}"server"==r.dataAction&&(r.usePager&&(o.push({name:r.pageParmName,value:r.newPage}),o.push({name:r.pagesizeParmName,value:r.pageSize})),r.sortName&&(o.push({name:r.sortnameParmName,value:r.sortName}),o.push({name:r.sortorderParmName,value:r.sortOrder}))),$(".l-bar-btnload span",i.toolbar).addClass("l-disabled"),"local"==r.dataType?(i.filteredData=$.extend(!0,{},r.data||i.currentData),n&&(i.filteredData[r.root]=i._searchData(i.filteredData[r.root],n)),r.usePager?i.currentData=i._getCurrentPageData(i.filteredData):i.currentData=i.filteredData,i._convertTreeData(),i._showData()):"local"!=r.dataAction||a?i.loadServerData(o,n,t):i.data&&i.data[r.root]&&(i.filteredData=i.data,n&&(i.filteredData[r.root]=i._searchData(i.filteredData[r.root],n)),i.currentData=i._getCurrentPageData(i.filteredData),i._convertTreeData(),i._showData()),i.loading=!1},_convertTreeData:function(){var e=this,t=this.options;t.tree&&t.tree.idField&&t.tree.parentIDField&&(e.currentData[t.root]=e.arrayToTree(e.currentData[t.root],t.tree.idField,t.tree.parentIDField),e.currentData[t.record]=e.currentData[t.root].length)},loadServerData:function(e,t,i){function r(e){if(!e)return"null";var t=e,i={};if($.isArray(t))for(var r=0;r<t.length;r++)i[t[r].name]=t[r].value;else i=t;return liger.toJSON(i)}var n=this,a=this.options,o=a.url;$.isFunction(o)&&(o=o.call(n));var l=$.isFunction(a.urlParms)?a.urlParms.call(n):a.urlParms;if(l)for(name in l)o+=-1==o.indexOf("?")?"?":"&",o+=name+"="+l[name];var s={type:a.method,url:o,data:e,async:a.async,dataType:"json",beforeSend:function(){n.hasBind("loading")?n.trigger("loading"):n.toggleLoading(!0)},success:function(e){return n.trigger("success",[e,n]),e&&e[a.root]&&e[a.root].length?(n.data=e,null!=n.data[a.record]&&(n.cacheData.records=n.data[a.record]),"server"==a.dataAction?(n.currentData=n.data,null==n.currentData[a.record]&&n.cacheData.records&&(n.currentData[a.record]=n.cacheData.records)):(n.filteredData=n.data,t&&(n.filteredData[a.root]=n._searchData(n.filteredData[a.root],t)),a.usePager?n.currentData=n._getCurrentPageData(n.filteredData):n.currentData=n.filteredData),n._convertTreeData(),void n._showData.ligerDefer(n,10,[i])):(n.currentData=n.data={},n.currentData[a.root]=n.data[a.root]=[],e&&e[a.record]?n.currentData[a.record]=n.data[a.record]=e[a.record]:n.currentData[a.record]=n.data[a.record]=0,n._convertTreeData(),void n._showData(i))},complete:function(){n.trigger("complete",[n]),n.hasBind("loaded")?n.trigger("loaded",[n]):n.toggleLoading.ligerDefer(n,10,[!1])},error:function(e,t,i){n.currentData=n.data={},n.currentData[a.root]=n.data[a.root]=[],n.currentData[a.record]=n.data[a.record]=0,n.toggleLoading.ligerDefer(n,10,[!1]),$(".l-bar-btnload span",n.toolbar).removeClass("l-disabled"),n.trigger("error",[e,t,i])}};a.contentType&&(s.contentType=a.contentType),"application/json"==a.contentType&&"string"!=typeof parms&&(s.data=r(e)),$.ajax(s)},toggleLoading:function(e){this.gridloading[e?"show":"hide"]()},_createEditor:function(e,t,i,r,n){var a=e.create.call(this,t,i);return e.setValue&&e.setValue.call(this,a,i.value,i),i.column.editor&&i.column.editor.initSelect&&(a.element&&$(a.element).is(":text")&&$(a.element).select(),a instanceof jQuery&&(a.is(":text")?a.select():a.find(":text").select())),e.setText&&i.column.textField&&e.setText.call(this,a,i.text,i),e.resize&&e.resize.call(this,a,r,n,i),a},beginEdit:function(e,t){var i=this,r=this.options;if(r.enabledEdit){var n=i.getRow(e);if(!n._editing&&0!=i.trigger("beginEdit",{record:n,rowindex:n.__index})){i.editors[n.__id]={},n._editing=!0,i.reRender({rowdata:n}),t=t||function(e,t){var r=i.getCellObj(e,t),n=$(r).html("");return i.setCellEditing(e,t,!0),n};for(var a=0,o=i.columns.length;o>a;a++){var l=i.columns[a];if(l.name&&l.editor&&l.editor.type&&r.editors[l.editor.type]){var s=r.editors[l.editor.type],d={record:n,value:i._getValueByName(n,l.name),column:l,rowindex:n.__index,grid:i},c=t(n,l),u=c.width(),h=c.height(),g=i._createEditor(s,c,d,u,h);i.editors[n.__id][l.__id]={editor:s,input:g,editParm:d,container:c}}}i.trigger("afterBeginEdit",{record:n,rowindex:n.__index})}}},cancelEdit:function(e){var t=this;if(void 0==e)for(var i in t.editors)t.cancelEdit(i);else{var r=t.getRow(e);if(!t.editors[r.__id])return;if(0==t.trigger("beforeCancelEdit",{record:r,rowindex:r.__index}))return;for(var n in t.editors[r.__id]){var a=t.editors[r.__id][n];a.editor.destroy&&a.editor.destroy(a.input,a.editParm)}delete t.editors[r.__id],delete r._editing,t.reRender({rowdata:r})}},addEditRow:function(e,t){this.submitEdit(),e=this.add(e),this.beginEdit(e,t)},submitEdit:function(e){var t=this;this.options;if(void 0==e)for(var i in t.editors)t.submitEdit(i);else{var r=t.getRow(e),n={};if(!r||!t.editors[r.__id])return;for(var a in t.editors[r.__id]){var o=t.editors[r.__id][a],l=o.editParm.column;l.name&&(n[l.name]=o.editor.getValue(o.input,o.editParm)),l.textField&&o.editor.getText&&(n[l.textField]=o.editor.getText(o.input,o.editParm))}if(0==t.trigger("beforeSubmitEdit",{record:r,rowindex:r.__index,newdata:n}))return!1;t.updateRow(r,n),t.trigger("afterSubmitEdit",{
record:r,rowindex:r.__index,newdata:n})}},_enabledEditByCell:function(e){var t=this,i=(this.options,t.getColumn(e));return i?i.editor&&i.editor.type:!1},endEditToNext:function(){function e(){return n.parent("tr").next(".l-grid-row").find("td:first")}var t=this,i=(this.options,t.editor),r=null,n=null;if(i){var a=i.editParm,o=a.column,l=($.inArray(o,t.columns),t.getCellObj(a.record,a.column));if(n=$(l),r=n.next(),r.length||(r=e()),r.length)for(;!t._enabledEditByCell(r.get(0));)n=r,r=r.next(),r.length||(r=e())}t.endEdit(),r&&r.length&&t._applyEditor(r.get(0))},endEdit:function(e){var t=this;this.options;if(t.editor.editing){var i=t.editor;t.trigger("sysEndEdit",[t.editor.editParm]),t.trigger("endEdit",[t.editor.editParm]),i.editor.destroy&&i.editor.destroy(i.input,i.editParm),t.editor.container.remove(),t.reRender({rowdata:t.editor.editParm.record,column:t.editor.editParm.column}),t.trigger("afterEdit",[t.editor.editParm]),t.editor={editing:!1}}else if(void 0!=e){var r=t.getRow(e);if(!t.editors[r.__id])return;if(0==t.submitEdit(e))return!1;for(var n in t.editors[r.__id]){var i=t.editors[r.__id][n];i.editor.destroy&&i.editor.destroy(i.input,i.editParm)}delete t.editors[r.__id],delete r._editing,t.trigger("afterEdit",{record:r,rowindex:r.__index})}else for(var a in t.editors)t.endEdit(a);t._fixHeight.ligerDefer(t,10)},setWidth:function(e){return this._setWidth(e)},setHeight:function(e){return this._setHeight(e)},enabledCheckbox:function(){return this.options.checkbox?!0:!1},enabledFrozen:function(){var e=this,t=this.options;if(!t.frozen)return!1;var i=e.columns||[];if(e.enabledDetail()&&t.frozenDetail||e.enabledCheckbox()&&t.frozenCheckbox||t.frozenRownumbers&&t.rownumbers)return!0;for(var r=0,n=i.length;n>r;r++)if(i[r].frozen)return!0;return this._setFrozen(!1),!1},enabledDetailEdit:function(){return this.enabledDetail()&&this.options.detailToEdit?!0:!1},enabledDetail:function(){return this.options.detail&&this.options.detail.onShowDetail?!0:!1},enabledGroup:function(){return this.options.groupColumnName?!0:!1},deleteSelectedRow:function(){if(this.selected){for(var e in this.selected){var t=this.selected[e];t.__id in this.records&&this._deleteData.ligerDefer(this,10,[t])}this.reRender.ligerDefer(this,20)}},removeRange:function(e){var t=this;this.options;$.each(e,function(){t._removeData(this)}),t.reRender()},remove:function(e){var t=this;this.options,t.getRow(e);t._removeData(e),t.reRender()},deleteRange:function(e){var t=this;this.options;$.each(e,function(){t._deleteData(this)}),t.reRender()},deleteRow:function(e){var t=this,i=(this.options,t.getRow(e));i&&(t._deleteData(i),t.reRender(),t.isDataChanged=!0)},_deleteData:function(e){var t=this,i=this.options,r=t.getRow(e);if(r[i.statusName]="delete",i.tree){var n=t.getChildren(r,!0);if(n)for(var a=0,o=n.length;o>a;a++)n[a][i.statusName]="delete"}t.deletedRows=t.deletedRows||[],t.deletedRows.push(r),t._removeSelected(r)},updateCell:function(e,t,i){var r,n,a,o=this,l=this.options;if("string"!=typeof e){if("number"==typeof e)r=o.columns[e],a=o.getRow(i),n=o.getCellObj(a,r);else if("object"==typeof e&&e.__id)r=e,a=o.getRow(i),n=o.getCellObj(a,r);else{n=e;var s=n.id.split("|"),d=s[s.length-1];r=o._columns[d];var c=$(n).parent();a=a||o.getRow(c[0])}null!=t&&r.name&&(o._setValueByName(a,r.name,t),"add"!=a[l.statusName]&&(a[l.statusName]="update"),o.isDataChanged=!0),o.reRender({rowdata:a,column:r})}else for(var u=0,h=o.columns.length;h>u;u++)o.columns[u].name==e&&o.updateCell(u,t,i)},addRows:function(e,t,i,r){var n=this;this.options;$(e).each(function(){n.addRow(this,t,i,r)})},_createRowid:function(){return"r"+(1e3+this.recordNumber)},_isRowId:function(e){return e in this.records},_addNewRecord:function(e,t,i){var r=this,n=this.options;if(r.recordNumber++,e.__id=r._createRowid(),e.__previd=t,t&&-1!=t){var a=r.records[t];if(a.__nextid&&-1!=a.__nextid){var o=r.records[a.__nextid];o&&(o.__previd=e.__id)}a.__nextid=e.__id,e.__index=a.__index+1}else e.__index=0;if(n.tree){if(i&&-1!=i){var l=r.records[i];e.__pid=i,e.__level=l.__level+1}else e.__pid=-1,e.__level=1;e.__hasChildren=e[n.tree.childrenName]?!0:!1}return e[n.statusName]=e[n.statusName]||"nochanged",r.rows[e.__index]=e,r.records[e.__id]=e,e},_getRows:function(e){function t(e){if(e&&e.length)for(var n=0,a=e.length;a>n;n++){var o=e[n];r.push(o),o[i.tree.childrenName]&&t(o[i.tree.childrenName])}}var i=this.options,r=[];return t(e),r},_updateGridData:function(){function e(n,a){if(n&&n.length)for(var o=0,l=n.length;l>o;o++){var s=n[o];t.formatRecord(s),"delete"!=s[i.statusName]&&(t._addNewRecord(s,r,a),r=s.__id,s.__hasChildren&&e(s[i.tree.childrenName],s.__id))}}var t=this,i=this.options;t.recordNumber=0,t.rows=[],t.records={};var r=-1;return e(t.currentData[i.root],-1),t.rows},_moveData:function(e,t,i){var r,n,a=this,o=(this.options,a.getRow(e)),l=a.getRow(t),s=a._getParentChildren(o);r=$.inArray(o,s),s.splice(r,1),s=a._getParentChildren(l),n=$.inArray(l,s),s.splice(n+(i?1:0),0,o)},move:function(e,t,i){this._moveData(e,t,i),this.reRender()},moveRange:function(e,t,i){for(var r in e)this._moveData(e[r],t,i);this.reRender()},up:function(e){var t=this,i=(this.options,t.getRow(e)),r=t._getParentChildren(i),n=$.inArray(i,r);if(-1!=n&&0!=n){var a=t.getSelected();t.move(i,r[n-1],!1),t.select(a)}},down:function(e){var t=this,i=(this.options,t.getRow(e)),r=t._getParentChildren(i),n=$.inArray(i,r);if(-1!=n&&n!=r.length-1){var a=t.getSelected();t.move(i,r[n+1],!0),t.select(a)}},addRow:function(e,t,i,r){var n=this,a=this.options;if(e=e||{},n._addData(e,r,t,i),n.reRender(),e[a.statusName]="add",a.tree){var o=n.getChildren(e,!0);if(o)for(var l=0,s=o.length;s>l;l++)o[l][a.statusName]="add"}return n.isDataChanged=!0,a.total=a.total?a.total+1:1,a.pageCount=Math.ceil(a.total/a.pageSize),n._buildPager(),n.trigger("SysGridHeightChanged"),n.trigger("afterAddRow",[e]),e},updateRow:function(e,t){var i=this,r=this.options,n=i.getRow(e);return i.isDataChanged=!0,$.extend(n,t||{}),"add"!=n[r.statusName]&&(n[r.statusName]="update"),i.reRender.ligerDefer(i,10,[{rowdata:n}]),n},setCellEditing:function(e,t,i){var r=this,n=(this.options,r.getCellObj(e,t)),a=i?"addClass":"removeClass";if($(n)[a]("l-grid-row-cell-editing"),0!=e.__id){var o=$(r.getRowObj(e.__id)).prev();if(!o.length||o.length<=0||null==o[0].id||""==o[0].id)return;var l=r.getRow(o[0]),s=r.getCellObj(l,t);if(!s)return;$(s)[a]("l-grid-row-cell-editing-topcell")}if(-1!=t.__previd&&null!=t.__previd){var s=$(r.getCellObj(e,t)).prev();$(s)[a]("l-grid-row-cell-editing-leftcell")}},reRender:function(e){function t(e){if(e.totalSummary)for(var t=0;t<i.totalNumber;t++){var n=document.getElementById(i.id+"|total"+t+"|"+e.__id);$("div:first",n).html(i._getTotalCellContent(e,i.groups&&i.groups[t]?i.groups[t]:i.currentData[r.root]))}}var i=this,r=this.options;e=e||{};var n=e.rowdata,a=e.column,o=e.totalOnly;if(!(a&&(a.isdetail||a.ischeckbox)||n&&"delete"==n[r.statusName]))if(o)$(i.columns).each(function(){t(this)});else if(n&&a){var l=i.getCellObj(n,a);$(l).html(i._getCellHtml(n,a)),a.issystem||i.setCellEditing(n,a,!1)}else if(n)$(i.columns).each(function(){i.reRender({rowdata:n,column:this})});else if(a){for(var s in i.records)i.reRender({rowdata:i.records[s],column:a});t(a)}else i._showData()},getData:function(e,t){var i=this,r=this.options,n=[];void 0==t&&(t=!0);for(var a in i.records){var o=$.extend(!0,{},i.records[a]);(o[r.statusName]==e||void 0==e)&&n.push(i.formatRecord(o,t))}return n},formatRecord:function(e,t){return delete e.__id,delete e.__previd,delete e.__nextid,delete e.__index,this.options.tree&&(delete e.__pid,delete e.__level,delete e.__hasChildren),t&&delete e[this.options.statusName],e},getUpdated:function(){return this.getData("update",!0)},getDeleted:function(){return this.deletedRows},getAdded:function(){return this.getData("add",!0)},getChanges:function(){var e=this,t=(this.options,[]);return this.deletedRows&&$(this.deletedRows).each(function(){var i=$.extend(!0,{},this);t.push(e.formatRecord(i,!1))}),$.merge(t,e.getData("update",!1)),$.merge(t,e.getData("add",!1)),t},getColumn:function(e){var t=this;this.options;if("string"==typeof e)return t._isColumnId(e)?t._columns[e]:t.columns[parseInt(e)];if("number"==typeof e)return t.columns[e];if("object"==typeof e&&1==e.nodeType){var i=e.id.split("|"),r=i[i.length-1];return t._columns[r]}return e},getColumnByName:function(e){var t=this;this.options;for(i=0;i<t.columns.length;i++)if(t.columns[i].name==e)return t.columns[i];return null},getColumnType:function(e){var t=this;this.options;for(i=0;i<t.columns.length;i++)if(t.columns[i].name==e)return t.columns[i].type?t.columns[i].type:"string";return null},isTotalSummary:function(){for(var e=this,t=(this.options,0);t<e.columns.length;t++)if(e.columns[t].totalSummary)return!0;return!1},getColumns:function(e){var t=this,i=(this.options,[]);for(var r in t._columns){var n=t._columns[r];void 0!=e?n.__level==e&&i.push(n):n.__leaf&&i.push(n)}return i},changeSort:function(e,t){var i=this,r=this.options;if(i.loading)return!0;if("local"==r.dataAction){var n=i.getColumnType(e);if(i.sortedData||(i.sortedData=i.filteredData),!i.sortedData||!i.sortedData[r.root])return;r.sortName==e?i.sortedData[r.root].reverse():i.sortedData[r.root].sort(function(t,r){return i._compareData(t,r,e,n)}),r.usePager?i.currentData=i._getCurrentPageData(i.sortedData):i.currentData=i.sortedData,i._showData()}r.sortName=e,r.sortOrder=t,"server"==r.dataAction&&i.loadData(r.where)},changePage:function(e){var t=this,i=this.options;if(t.loading)return!0;if("local"!=i.dataAction&&t.isDataChanged&&!confirm(i.isContinueByDataChanged))return!1;switch(i.pageCount=parseInt($(".pcontrol span",t.toolbar).html()),e){case"first":if(1==i.page)return;i.newPage=1;break;case"prev":if(1==i.page)return;i.page>1&&(i.newPage=parseInt(i.page)-1);break;case"next":if(i.page>=i.pageCount)return;i.newPage=parseInt(i.page)+1;break;case"last":if(i.page>=i.pageCount)return;i.newPage=i.pageCount;break;case"input":var r=parseInt($(".pcontrol input",t.toolbar).val());isNaN(r)&&(r=1),1>r?r=1:r>i.pageCount&&(r=i.pageCount),$(".pcontrol input",t.toolbar).val(r),i.newPage=r}if(i.newPage==i.page)return!1;if(1==i.newPage?($(".l-bar-btnfirst span",t.toolbar).addClass("l-disabled"),$(".l-bar-btnprev span",t.toolbar).addClass("l-disabled")):($(".l-bar-btnfirst span",t.toolbar).removeClass("l-disabled"),$(".l-bar-btnprev span",t.toolbar).removeClass("l-disabled")),i.newPage==i.pageCount?($(".l-bar-btnlast span",t.toolbar).addClass("l-disabled"),$(".l-bar-btnnext span",t.toolbar).addClass("l-disabled")):($(".l-bar-btnlast span",t.toolbar).removeClass("l-disabled"),$(".l-bar-btnnext span",t.toolbar).removeClass("l-disabled")),t.trigger("changePage",[i.newPage]),"server"==i.dataAction)i.parms||(i.parms=[]),$.isArray(i.parms)?i.parms.push({name:"changepage",value:"1",temp:!0}):i.parms.changepage="1",t.loadData(i.where);else{if(t.currentData=t._getCurrentPageData(t.filteredData),i.tree){var n=i.tree.childrenName;$(t.filteredData[i.root]).each(function(e,t){t[n]&&(t[n]=[])}),t._convertTreeData()}t._showData()}},getSelectedRow:function(){for(var e in this.selected){var t=this.selected[e];if(t.__id in this.records)return t}return null},getSelectedRows:function(){var e=[];for(var t in this.selected){var i=this.selected[t];i.__id in this.records&&e.push(i)}return e},getSelectedRowObj:function(){for(var e in this.selected){var t=this.selected[e];if(t.__id in this.records)return this.getRowObj(t)}return null},getSelectedRowObjs:function(){var e=[];for(var t in this.selected){var i=this.selected[t];i.__id in this.records&&e.push(this.getRowObj(i))}return e},getCellObj:function(e,t){var i=this.getRow(e);return t=this.getColumn(t),document.getElementById(this._getCellDomId(i,t))},getRowObj:function(e,t){var i=this;this.options;return null==e?null:"string"==typeof e?i._isRowId(e)?document.getElementById(i.id+(t?"|1|":"|2|")+e):document.getElementById(i.id+(t?"|1|":"|2|")+i.rows[parseInt(e)].__id):"number"==typeof e?document.getElementById(i.id+(t?"|1|":"|2|")+i.rows[e].__id):"object"==typeof e&&e.__id?i.getRowObj(e.__id,t):e},getRow:function(e){var t=this;this.options;return null==e?null:"string"==typeof e?t._isRowId(e)?t.records[e]:t.rows[parseInt(e)]:"number"==typeof e?t.rows[parseInt(e)]:"object"!=typeof e||1!=e.nodeType||e.__id?e:t._getRowByDomId(e.id)},_setColumnVisible:function(e,t){var i=this;this.options;if(t){if(e._hide=!0,document.getElementById(e.__domid).style.display="none",-1!=e.__pid){for(var r=!0,n=this._columns[e.__pid],a=0;n&&a<n.columns.length;a++)if(!n.columns[a]._hide){r=!1;break}r&&(n._hide=!0,document.getElementById(n.__domid).style.display="none",this._setColumnVisible(n,t))}}else if(e._hide=!1,document.getElementById(e.__domid).style.display="",-1!=e.__pid){var n=i._columns[e.__pid];n._hide&&(document.getElementById(n.__domid).style.display="",this._setColumnVisible(n,t))}},toggleCol:function(e,t,i){var r,n=this;this.options;if("number"==typeof e)r=n.columns[e];else if("object"==typeof e&&e.__id)r=e;else if("string"==typeof e){if(!n._isColumnId(e))return void $(n.columns).each(function(){this.name==e&&n.toggleCol(this,t,i)});r=n._columns[e]}if(r){var a=r.__leafindex,o=document.getElementById(r.__domid);if(o){o=$(o);var l=[];for(var s in n.rows){var d=n.getCellObj(n.rows[s],r);d&&l.push(d)}for(var s=0;s<n.totalNumber;s++){var c=document.getElementById(n.id+"|total"+s+"|"+r.__id);c&&l.push(c)}var u=r._width;t&&r._hide?(r.frozen?n.f.gridtablewidth+=parseInt(u)+1:n.gridtablewidth+=parseInt(u)+1,n._setColumnVisible(r,!1),$(l).show()):t||r._hide||(r.frozen?n.f.gridtablewidth-=parseInt(u)+1:n.gridtablewidth-=parseInt(u)+1,n._setColumnVisible(r,!0),$(l).hide()),r.frozen?($("div:first",n.f.gridheader).width(n.f.gridtablewidth),$("div:first",n.f.gridbody).width(n.f.gridtablewidth)):($("div:first",n.gridheader).width(n.gridtablewidth+40),n.gridtablewidth?$("div:first",n.gridbody).width(n.gridtablewidth):$("div:first",n.gridbody).css("width","auto")),n._updateFrozenWidth(),i||$(":checkbox[columnindex="+a+"]",n.popup).each(function(){if(this.checked=t,$.fn.ligerCheckBox){var e=$(this).ligerGetCheckBoxManager();e&&e.updateStyle()}})}}},setColumnWidth:function(e,t){var i=this,r=this.options;if(t){t=parseInt(t,10);var n;if("number"==typeof e)n=i.columns[e];else if("object"==typeof e&&e.__id)n=e;else if("string"==typeof e){if(!i._isColumnId(e))return void $(i.columns).each(function(){this.name==e&&i.setColumnWidth(this,t)});n=i._columns[e]}if(n){var a=r.minColumnWidth;n.minWidth&&(a=n.minWidth),t=a>t?a:t;var o=t-n._width;if(0!=i.trigger("beforeChangeColumnWidth",[n,t])){n._width=t,n.frozen?(i.f.gridtablewidth+=o,$("div:first",i.f.gridheader).width(i.f.gridtablewidth),$("div:first",i.f.gridbody).width(i.f.gridtablewidth)):(i.gridtablewidth+=o,$("div:first",i.gridheader).width(i.gridtablewidth+40),$("div:first",i.gridbody).width(i.gridtablewidth)),$(document.getElementById(n.__domid)).css("width",t);var l=[];for(var s in i.records){var d=i.getCellObj(i.records[s],n);if(d&&l.push(d),!i.enabledDetailEdit()&&i.editors[s]&&i.editors[s][n.__id]){var c=i.editors[s][n.__id];c.editor.resize&&c.editor.resize(c.input,t,c.container.height(),c.editParm)}}for(var u=0;u<i.totalNumber;u++){var h=document.getElementById(i.id+"|total"+u+"|"+n.__id);h&&l.push(h)}$(l).css("width",t).find("> div.l-grid-row-cell-inner:first").css("width",t-8),i._updateFrozenWidth(),i._updateHorizontalScrollStatus.ligerDefer(i,10),i.trigger("afterChangeColumnWidth",[n,t])}}}},changeHeaderText:function(e,t){var i,r=this,n=this.options;if("number"==typeof e)i=r.columns[e];else if("object"==typeof e&&e.__id)i=e;else if("string"==typeof e){if(!r._isColumnId(e))return void $(r.columns).each(function(){this.name==e&&r.changeHeaderText(this,t)});i=r._columns[e]}if(i){var a=i.__leafindex,o=document.getElementById(i.__domid);$(".l-grid-hd-cell-text",o).html(t),n.allowHideColumn&&$(":checkbox[columnindex="+a+"]",r.popup).parent().next().html(t)}},changeCol:function(e,t,i){var r=this,n=this.options;if(e&&t){var a=r.getColumn(e),o=r.getColumn(t);a.frozen=o.frozen;var l,s,d=-1==a.__pid?n.columns:r._columns[a.__pid].columns,c=-1==o.__pid?n.columns:r._columns[o.__pid].columns;l=$.inArray(a,d),s=$.inArray(o,c);var u=d==c;a.__level==o.__level;c.splice(s+(i?1:0),0,a),u?i?d.splice(l,1):d.splice(l+1,1):d.splice(l,1),r._setColumns(n.columns),r.reRender()}},collapseDetail:function(e){var t=this,i=(this.options,t.getRow(e));if(i)for(var r=0,n=t.columns.length;n>r;r++)if(t.columns[r].isdetail){var a=t.getRowObj(i),o=t.getCellObj(i,t.columns[r]);return $(a).next("tr.l-grid-detailpanel").hide(),$(".l-grid-row-cell-detailbtn:first",o).removeClass("l-open"),void t.trigger("SysGridHeightChanged")}},extendDetail:function(e){var t=this,i=(this.options,t.getRow(e));if(i)for(var r=0,n=t.columns.length;n>r;r++)if(t.columns[r].isdetail){var a=t.getRowObj(i),o=t.getCellObj(i,t.columns[r]);return $(a).next("tr.l-grid-detailpanel").show(),$(".l-grid-row-cell-detailbtn:first",o).addClass("l-open"),void t.trigger("SysGridHeightChanged")}},getParent:function(e){var t=this,i=this.options;if(!i.tree)return null;var r=t.getRow(e);return r&&r.__pid in t.records?t.records[r.__pid]:null},getChildren:function(e,t){function i(e){if(e[n.tree.childrenName])for(var r=0,a=e[n.tree.childrenName].length;a>r;r++){var l=e[n.tree.childrenName][r];"delete"!=l[n.statusName]&&(o.push(l),t&&i(l))}}var r=this,n=this.options;if(!n.tree)return null;var a=r.getRow(e);if(!a)return null;var o=[];return i(a),o},isLeaf:function(e){var t=this,i=(this.options,t.getRow(e));return i?i.__hasChildren?!1:!0:void 0},hasChildren:function(e){var t=this.options,i=this.getRow(e);return i?i[t.tree.childrenName]&&i[t.tree.childrenName].length?!0:!1:void 0},existRecord:function(e){for(var t in this.records)if(this.records[t]==e)return!0;return!1},_removeSelected:function(e){var t=this,i=this.options;if(i.tree){var r=t.getChildren(e,!0);if(r)for(var n=0,a=r.length;a>n;n++){var o=$.inArray(r[n],t.selected);-1!=o&&t.selected.splice(o,1)}}var l=$.inArray(e,t.selected);-1!=l&&t.selected.splice(l,1)},_getParentChildren:function(e){var t,i=this,r=this.options,n=i.getRow(e);return t=r.tree&&i.existRecord(n)&&n.__pid in i.records?i.records[n.__pid][r.tree.childrenName]:i.currentData[r.root]},_removeData:function(e){var t=this,i=(this.options,t._getParentChildren(e)),r=$.inArray(e,i);-1!=r&&i.splice(r,1),t._removeSelected(e)},_addData:function(e,t,i,r){var n=this,a=this.options;n.currentData||(n.currentData={}),n.currentData[a.root]||(n.currentData[a.root]=[]);var o=n.currentData[a.root];if(i){a.tree&&(t?o=t[a.tree.childrenName]:i.__pid in n.records&&(o=n.records[i.__pid][a.tree.childrenName]));var l=$.inArray(i,o);o.splice(-1==l?-1:l+(r?0:1),0,e)}else a.tree&&t&&(o=t[a.tree.childrenName]),o.push(e)},_appendData:function(e,t,i,r){var n=this,a=this.options;e[a.statusName]="update",n._removeData(e),n._addData(e,t,i,r)},appendRange:function(e,t,i,r){var n=this,a=(this.options,!1);$.each(e,function(e,o){o.__id&&n.existRecord(o)?(n.isLeaf(t)&&n.upgrade(t),n._appendData(o,t,i,r),a=!0):n.appendRow(o,t,i,r)}),a&&n.reRender()},appendRow:function(e,t,i,r){var n=this;this.options;return $.isArray(e)?void n.appendRange(e,t,i,r):e.__id&&n.existRecord(e)?(n._appendData(e,t,i,r),void n.reRender()):(t&&n.isLeaf(t)&&n.upgrade(t),void n.addRow(e,i,r?!0:!1,t))},upgrade:function(e){var t=this,i=this.options,r=t.getRow(e);if(r&&i.tree){r[i.tree.childrenName]=r[i.tree.childrenName]||[],r.__hasChildren=!0;var n=[t.getRowObj(r)];t.enabledFrozen()&&n.push(t.getRowObj(r,!0)),$("> td > div > .l-grid-tree-space:last",n).addClass("l-grid-tree-link l-grid-tree-link-open")}},demotion:function(e){var t=this,i=this.options,r=t.getRow(e);if(r&&i.tree){var n=[t.getRowObj(r)];if(t.enabledFrozen()&&n.push(t.getRowObj(r,!0)),$("> td > div > .l-grid-tree-space:last",n).removeClass("l-grid-tree-link l-grid-tree-link-open l-grid-tree-link-close"),t.hasChildren(r))for(var a=t.getChildren(r),o=0,l=a.length;l>o;o++)t.deleteRow(a[o]);r.__hasChildren=!1}},collapseAll:function(){var e=this;this.options;$(e.rows).each(function(t,i){var r=e.getRowObj(i),n=$(".l-grid-tree-link",r);n.hasClass("l-grid-tree-link-close")||e.toggle(i)})},expandAll:function(){var e=this;this.options;$(e.rows).each(function(t,i){var r=e.getRowObj(i),n=$(".l-grid-tree-link",r);n.hasClass("l-grid-tree-link-open")||e.toggle(i)})},collapse:function(e){var t=this,i=(this.options,t.getRowObj(e)),r=$(".l-grid-tree-link",i);r.hasClass("l-grid-tree-link-close")||t.toggle(e)},expand:function(e){var t=this,i=(this.options,t.getRowObj(e)),r=$(".l-grid-tree-link",i);r.hasClass("l-grid-tree-link-open")||t.toggle(e)},toggle:function(e){function t(e){for(var i=0,r=e.length;r>i;i++){var n=e[i],o=a.getChildren(n,!1),l=o&&o.length?!0:!1,s=$([a.getRowObj(n.__id)]);a.enabledFrozen()&&(s=s.add(a.getRowObj(n.__id,!0))),l?$(".l-grid-tree-link",s).hasClass("l-grid-tree-link-close")?s.show():(s.show(),t(o)):($(".l-grid-tree-link",s).removeClass("l-grid-tree-link-close").addClass("l-grid-tree-link-open"),s.show())}}function i(){var e=[];return c?(e=a.getChildren(o,!1),t(e),void a.trigger("treeExpanded",[o])):(e=a.getChildren(o,!0),$(e).each(function(){$(a.getRowObj(this)).hide(),a.enabledFrozen()&&$(a.getRowObj(this,!0)).hide()}),void a.trigger("treeCollapsed",[o]))}function r(){d.removeClass("l-grid-tree-link-close").addClass("l-grid-tree-link-open"),s=$.inArray(o,a.collapsedRows),-1!=s&&a.collapsedRows.splice(s,1)}function n(){d.addClass("l-grid-tree-link-close").removeClass("l-grid-tree-link-open"),s=$.inArray(o,a.collapsedRows),-1==s&&a.collapsedRows.push(o)}if(e){var a=this,o=(this.options,a.getRow(e)),l=[a.getRowObj(o)];a.enabledFrozen()&&l.push(a.getRowObj(o,!0));var s,d=(o.__level,$(".l-grid-tree-link:first",l)),c=!0;a.collapsedRows=a.collapsedRows||[];var u=d.hasClass("l-grid-tree-link-close");if(u){var h={update:function(){r(),i()}};if(a.hasBind("treeExpand")&&0==a.trigger("treeExpand",[o,h]))return!1;r()}else{var h={update:function(){n(),i()}};if(a.hasBind("treeCollapse")&&0==a.trigger("treeCollapse",[o,h]))return!1;c=!1,n()}i()}},_bulid:function(){var e=this;e._clearGrid(),e._initBuildHeader(),e._initHeight(),e._initFootbar(),e._buildPager(),e._setEvent()},_setColumns:function(e){var t=this;t._initColumns(),t._initBuildGridHeader(),t._initBuildPopup()},_initBuildHeader:function(){var e=this,t=this.options;t.title?($(".l-panel-header-text",e.header).html(t.title),t.headerImg&&e.header.append("<img src='"+t.headerImg+"' />").addClass("l-panel-header-hasicon")):e.header.hide(),t.toolbar?$.fn.ligerToolBar&&(e.toolbarManager=e.topbar.ligerToolBar(t.toolbar),0==e.topbar.height()?e.topbar.parent().height(25):e.topbar.parent().height(e.topbar.height())):e.topbar.parent().remove()},_createColumnId:function(e){return null!=e.id&&""!=e.id?e.id.toString():"c"+(100+this._columnCount)},_isColumnId:function(e){return e in this._columns},_initColumns:function(){function e(e,t){for(var i in t)t[i]in e&&delete e[t[i]]}function t(r,n,a,o){if(r.editorType&&(r.editor=r.editor||{},r.editor.type=r.editorType),e(r,["__id","__pid","__previd","__nextid","__domid","__leaf","__leafindex","__level","__colSpan","__rowSpan"]),n>i._columnMaxLevel&&(i._columnMaxLevel=n),i._columnCount++,r.__id=i._createColumnId(r),r.__domid=i.id+"|hcell|"+r.__id,i._columns[r.__id]=r,r.columns&&r.columns.length||(r.__leafindex=i._columnLeafCount++),r.__level=n,r.__pid=a,r.__previd=o,!r.columns||!r.columns.length)return r.__leaf=!0,1;for(var l=0,s=-1,d=0,c=r.columns.length;c>d;d++){var u=r.columns[d];l+=t(u,n+1,r.__id,s),s=u.__id}return r.__leafcount=l,l}var i=this,r=this.options;if(i._columns={},i._columnCount=0,i._columnLeafCount=0,i._columnMaxLevel=1,r.columns){var n=-1;if(r.rownumbers){var a=i.enabledGroup()?!1:r.frozen&&r.frozenRownumbers,o={isrownumber:!0,issystem:!0,width:r.rownumbersColWidth,frozen:a};t(o,1,-1,n),n=o.__id}if(i.enabledDetail()){var l=i.enabledGroup()?!1:r.frozen&&r.frozenDetail,o={isdetail:!0,issystem:!0,width:r.detailColWidth,frozen:l};t(o,1,-1,n),n=o.__id}if(i.enabledCheckbox()){var s=i.enabledGroup()?!1:r.frozen&&r.frozenCheckbox,o={ischeckbox:!0,issystem:!0,width:r.detailColWidth,frozen:s};t(o,1,-1,n),n=o.__id}for(var d=0,c=r.columns.length;c>d;d++){var o=r.columns[d];o&&(t(o,1,-1,n),n=o.__id)}for(var u in i._columns){var o=i._columns[u];o.__leafcount>1&&(o.__colSpan=o.__leafcount),o.__leaf&&o.__level!=i._columnMaxLevel&&(o.__rowSpan=i._columnMaxLevel-o.__level+1)}i.columns=i.getColumns(),$(i.columns).each(function(e,t){t.columnname=t.name,t.columnindex=e,t.type=t.type||"string",t.islast=e==i.columns.length-1,t.isSort=0==t.isSort?!1:!0,t.frozen=t.frozen?!0:!1,t._width=i._getColumnWidth(t),t._hide=t.hide?!0:!1})}},_getColumnWidth:function(e){var t=this,i=this.options;if(e._width)return e._width;var r=e.width||i.columnWidth;if(!r||"auto"==r){var n=0,a=0;$(t.columns).each(function(e,r){var o=r.width||i.columnWidth,l=o&&"auto"!=o?!1:!0;l?n++:a+=parseInt(t._getColumnWidth(r))+1}),r=parseInt((t.grid.width()-a)/n)-1}if("string"==typeof r&&r.indexOf("%")>0){var o=0;t.enabledDetail()&&(o+=i.detailColWidth),t.enabledCheckbox()&&(o+=i.checkboxColWidth),t.options.rownumbers&&(o+=t.options.rownumbersColWidth),e._width=r=parseInt(.01*parseInt(r)*(t.grid.width()-o-t.columns.length/2-1))}return e.minWidth&&r<e.minWidth&&(r=e.minWidth),e.maxWidth&&r>e.maxWidth&&(r=e.maxWidth),r},_createHeaderCell:function(e){var t=this,i=this.options,r=$("<td class='l-grid-hd-cell'><div class='l-grid-hd-cell-inner'><span class='l-grid-hd-cell-text'></span></div></td>");if(r.attr("id",e.__domid),e.__leaf||r.addClass("l-grid-hd-cell-mul"),e.columnindex==t.columns.length-1&&r.addClass("l-grid-hd-cell-last"),e.isrownumber&&(r.addClass("l-grid-hd-cell-rownumbers"),r.html("<div class='l-grid-hd-cell-inner'></div>")),e.ischeckbox&&(r.addClass("l-grid-hd-cell-checkbox"),r.html("<div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-text l-grid-hd-cell-btn-checkbox'></div></div>")),e.isdetail&&(r.addClass("l-grid-hd-cell-detail"),r.html("<div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-text l-grid-hd-cell-btn-detail'></div></div>")),e.heightAlign&&$(".l-grid-hd-cell-inner:first",r).css("textAlign",e.heightAlign),e.__colSpan&&r.attr("colSpan",e.__colSpan),e.__rowSpan){r.attr("rowSpan",e.__rowSpan),r.height(i.headerRowHeight*e.__rowSpan);var n=(i.headerRowHeight*e.__rowSpan-i.headerRowHeight)/2-5;$(".l-grid-hd-cell-inner:first",r).css("paddingTop",n)}else r.height(i.headerRowHeight);e.__leaf&&(r.width(e._width),r.attr("columnindex",e.__leafindex));var a=r.height();!e.__rowSpan&&a>10&&$(">div:first",r).height(a),e._hide&&r.hide(),e.name&&r.attr({columnname:e.name});var o="";return o=e.display&&""!=e.display?e.display:e.headerRender?e.headerRender(e):"&nbsp;",$(".l-grid-hd-cell-text:first",r).html(o),!e.issystem&&e.__leaf&&e.resizable!==!1&&$.fn.ligerResizable&&i.allowAdjustColWidth&&(t.colResizable[e.__id]=r.ligerResizable({handles:"e",onStartResize:function(e,i){this.proxy.hide(),t.draggingline.css({height:t.body.height(),top:0,left:i.pageX-t.grid.offset().left+parseInt(t.body[0].scrollLeft)}).show()},onResize:function(e,i){t.colresizing=!0,t.draggingline.css({left:i.pageX-t.grid.offset().left+parseInt(t.body[0].scrollLeft)}),$("body").add(r).css("cursor","e-resize")},onStopResize:function(i){return t.colresizing=!1,$("body").add(r).css("cursor","default"),t.draggingline.hide(),t.setColumnWidth(e,parseInt(e._width)+i.diffX),!1}})),t.trigger("headerCellBulid",[r,e]),r},_initBuildGridHeader:function(){var e=this,t=this.options;if(e.gridtablewidth=0,e.f.gridtablewidth=0,e.colResizable){for(var i in e.colResizable)e.colResizable[i].destroy();e.colResizable=null}e.colResizable={},$("tbody:first",e.gridheader).html(""),$("tbody:first",e.f.gridheader).html("");for(var r=1;r<=e._columnMaxLevel;r++){var n=e.getColumns(r),a=r==e._columnMaxLevel,o=$("<tr class='l-grid-hd-row'></tr>"),l=$("<tr class='l-grid-hd-row'></tr>");a||o.add(l).addClass("l-grid-hd-mul"),$("tbody:first",e.gridheader).append(o),$("tbody:first",e.f.gridheader).append(l),$(n).each(function(t,i){if((i.frozen?l:o).append(e._createHeaderCell(i)),i.__leaf){var r=i._width;i.frozen?e.f.gridtablewidth+=(parseInt(r)?parseInt(r):0)+1:e.gridtablewidth+=(parseInt(r)?parseInt(r):0)+1}})}if(e._columnMaxLevel>0){var s=t.headerRowHeight*e._columnMaxLevel;e.gridheader.add(e.f.gridheader).height(s),t.rownumbers&&t.frozenRownumbers&&e.f.gridheader.find("td:first").height(s)}e._updateFrozenWidth(),$("div:first",e.gridheader).width(e.gridtablewidth+40)},_initBuildPopup:function(){var e=this,t=this.options;if($(":checkbox",e.popup).unbind(),$("tbody tr",e.popup).remove(),$(e.columns).each(function(t,i){if(!i.issystem&&0!=i.isAllowHide){var r='checked="checked"';i._hide&&(r="");var n=i.display;$("tbody",e.popup).append('<tr><td class="l-column-left"><input type="checkbox" '+r+' class="l-checkbox" columnindex="'+t+'"/></td><td class="l-column-right">'+n+"</td></tr>")}}),$.fn.ligerCheckBox&&$("input:checkbox",e.popup).ligerCheckBox({onBeforeClick:function(i){return i.checked&&$("input:checked",e.popup).length<=t.minColToggle?!1:!0}}),t.allowHideColumn){$("tr",e.popup).hover(function(){$(this).addClass("l-popup-row-over")},function(){$(this).removeClass("l-popup-row-over")});var i=function(){return $("input:checked",e.popup).length+1<=t.minColToggle?!1:void e.toggleCol(parseInt($(this).attr("columnindex")),this.checked,!0)};$.fn.ligerCheckBox?$(":checkbox",e.popup).bind("change",i):$(":checkbox",e.popup).bind("click",i)}},_initHeight:function(){var e=this,t=this.options;"auto"==t.height&&(e.gridbody.height("auto"),e.f.gridbody.height("auto")),t.width&&e.grid.width(t.width),e._onResize.call(e)},_initFootbar:function(){var e=this,t=this.options;if(t.usePager){if(t.pagerRender)return void e.toolbar.html(t.pagerRender.call(e));if(t.scrollToPage)return void e.toolbar.hide();var i="",r=-1;$(t.pageSizeOptions).each(function(e,n){var a="";t.pageSize==n&&(r=e),i+="<option value='"+n+"' "+a+" >"+n+"</option>"}),$(".l-bar-selectpagesize",e.toolbar).append("<select name='rp'>"+i+"</select>"),-1!=r&&($(".l-bar-selectpagesize select",e.toolbar)[0].selectedIndex=r),t.switchPageSizeApplyComboBox&&$.fn.ligerComboBox&&$(".l-bar-selectpagesize select",e.toolbar).ligerComboBox({onBeforeSelect:function(){return t.url&&e.isDataChanged&&!confirm(t.isContinueByDataChanged)?!1:!0},width:45})}else e.toolbar.hide()},_searchData:function(e,t){for(var i=(this.options,new Array),r=0;r<e.length;r++)t(e[r],r)&&(i[i.length]=e[r]);return i},_clearGrid:function(){var e=this;this.options;e._fixRows();for(var t in e.rows){var i=$(e.getRowObj(e.rows[t]));e.enabledFrozen()&&(i=i.add(e.getRowObj(e.rows[t],!0))),i.unbind()}e.gridbody.html(""),e.f.gridbody.html(""),e.recordNumber=0,e.records={},e.rows=[],e._fixRows(),e.selected=[],e.totalNumber=0,e.editorcounter=0},_fixRows:function(){var e=this;this.options;if(e.rows)for(var t in e.rows)$.isFunction(e.rows[t])&&delete e.rows[t]},_fillGridBody:function(e,t,i){var r=this,n=this.options,a="scrollappend"==i?[]:['<div class="l-grid-body-inner"><table class="l-grid-body-table" cellpadding=0 cellspacing=0><tbody>'];if(r.enabledGroup()){var o=[],l=[];r.groups=l;for(var s in e){var d=e[s],c=d[n.groupColumnName],u=$.inArray(c,o);-1==u&&(o.push(c),u=o.length-1,l.push([])),l[u].push(d)}$(l).each(function(e,i){1==l.length&&a.push('<tr class="l-grid-grouprow l-grid-grouprow-last l-grid-grouprow-first"'),e==l.length-1?a.push('<tr class="l-grid-grouprow l-grid-grouprow-last"'):0==e?a.push('<tr class="l-grid-grouprow l-grid-grouprow-first"'):a.push('<tr class="l-grid-grouprow"'),a.push(' groupindex"='+e+'" >'),a.push('<td colSpan="'+r.columns.length+'" class="l-grid-grouprow-cell">'),a.push('<span class="l-grid-group-togglebtn">&nbsp;&nbsp;&nbsp;&nbsp;</span>'),n.groupRender?a.push(n.groupRender(o[e],i,n.groupColumnDisplay)):a.push(n.groupColumnDisplay+":"+o[e]),a.push("</td>"),a.push("</tr>"),a.push(r._getHtmlFromData(i,t)),r.isTotalSummary()&&a.push(r._getTotalSummaryHtml(i,"l-grid-totalsummary-group",t));
})}else a.push(r._getHtmlFromData(e,t));if("scrollappend"==!i&&a.push("</tbody></table></div>"),"scrollappend"==i?(t?r.f.gridbody:r.gridbody).find("tbody:first").append(a.join("")):(t?r.f.gridbody:r.gridbody).html(a.join("")),t&&(r.f.gridbody.find(">l-jplace").remove(),r.f.gridbody.append('<div class="l-jplace"></div>')),n.usePager&&n.scrollToPage&&!n.scrollToAppend){var h=t?r.f.gridbody.find("> .l-grid-body-inner"):r.gridbody.find("> .l-grid-body-inner"),g=h.find("> .l-scrollreplacetop");g=g.length?g:$('<div class="l-scrollreplacetop"></div>').prependTo(h),g.css("width","80%").height(r.lastScrollTop),g=h.find("> .l-scrollreplacebottom"),g=g.length?g:$('<div class="l-scrollreplacebottom"></div>').appendTo(h),g.css("width","80%").height((n.pageCount-n.newPage)*r._getOnePageHeight())}r.enabledGroup()||r._bulidTotalSummary(t),$("> div:first",r.gridbody).width(r.gridtablewidth),r._onResize()},_showData:function(e){var t=this,i=this.options;t.changedCells={};var r=t.currentData[i.root];if(i.usePager&&("server"==i.dataAction&&t.data&&t.data[i.record]?i.total=t.data[i.record]:t.filteredData&&t.filteredData[i.root]?i.total=t.filteredData[i.root].length:t.data&&t.data[i.root]?i.total=t.data[i.root].length:r&&(i.total=r.length),i.page=i.newPage,i.total||(i.total=0),i.page||(i.page=1),i.pageCount=Math.ceil(i.total/i.pageSize),i.pageCount||(i.pageCount=1),i.scrollToPage||t._buildPager()),$(".l-bar-btnloading:first",t.toolbar).removeClass("l-bar-btnloading"),0!=t.trigger("beforeShowData",[t.currentData])){if("scrollappend"!=e&&t._clearGrid(),t.isDataChanged=!1,!r||!r.length)return t.gridview.addClass("l-grid-empty"),$(t.element).addClass("l-empty"),$("<div></div>").addClass("l-grid-body-inner").appendTo(t.gridbody).css({width:t.gridheader.find(">div:first").width(),height:t.gridbody.height()}),i.pagerRender?void t.toolbar.html(i.pagerRender.call(t)):void t._onResize.ligerDefer(t,50);if(t.gridview.removeClass("l-grid-empty"),$(t.element).removeClass("l-empty"),$(".l-bar-btnload:first span",t.toolbar).removeClass("l-disabled"),t._updateGridData(),t.enabledFrozen()&&t._fillGridBody(t.rows,!0,e),t._fillGridBody(t.rows,!1,e),t.trigger("SysGridHeightChanged"),"scroll"==e&&t.trigger("sysScrollLoaded"),i.totalRender&&($(".l-panel-bar-total",t.element).remove(),$(".l-panel-bar",t.element).before('<div class="l-panel-bar-total">'+i.totalRender(t.data,t.filteredData)+"</div>")),i.mouseoverRowCssClass)for(var n in t.rows){var a=$(t.getRowObj(t.rows[n]));t.enabledFrozen()&&(a=a.add(t.getRowObj(t.rows[n],!0))),a.bind("mouseover.gridrow",function(){t._onRowOver(this,!0)}).bind("mouseout.gridrow",function(){t._onRowOver(this,!1)})}if(t._fixHeight(),i.pagerRender)return void t.toolbar.html(i.pagerRender.call(t));t.gridbody.trigger("scroll.grid"),t.trigger("afterShowData",[t.currentData])}},_fixHeight:function(){var e=this,t=this.options;if(!t.fixedCellHeight&&t.frozen){var i,r;for(var n in e.columns){var a=e.columns[n];if(i&&r)break;!a.frozen||i?a.frozen||r||(r=a):i=a}if(i&&r)for(var o in e.records){var l=e.getCellObj(o,i),s=e.getCellObj(o,r),d=Math.max($(l).height(),$(s).height());$(l).add(s).height(d)}}},_getRowDomId:function(e,t){return this.id+"|"+(t?"1":"2")+"|"+e.__id},_getCellDomId:function(e,t){return this._getRowDomId(e,t.frozen)+"|"+t.__id},_getHtmlFromData:function(e,t){if(!e)return"";for(var i=this,r=this.options,n=[],a=0,o=e.length;o>a;a++){var l=e[a],s=l.__id;if(l){if(n.push("<tr"),n.push(' id="'+i._getRowDomId(l,t)+'"'),n.push(' class="l-grid-row'),!t&&i.enabledCheckbox()&&r.isChecked&&r.isChecked(l)?(i.select(l),n.push(" l-selected")):i.isSelected(l)?n.push(" l-selected"):r.isSelected&&r.isSelected(l)&&(i.select(l),n.push(" l-selected")),l.__index%2==1&&r.alternatingRow&&n.push(" l-grid-row-alt"),r.rowClsRender){var d=r.rowClsRender(l,s);d&&n.push(" "+d)}if(n.push('" '),r.rowAttrRender&&n.push(r.rowAttrRender(l,s)),r.tree&&i.collapsedRows&&i.collapsedRows.length){var c=function(){for(var e=i.getParent(l);e;){if(-1!=$.inArray(e,i.collapsedRows))return!0;e=i.getParent(e)}return!1};c()&&n.push(' style="display:none;" ')}else if(r.tree&&r.tree.isExtend){var c=function(){for(var e=i.getParent(l);e;){if(0==r.tree.isExtend(e))return!0;e=i.getParent(e)}return!1};c()&&n.push(' style="display:none;" ')}n.push(">"),$(i.columns).each(function(e,a){if(t==a.frozen){if(n.push("<td"),n.push(' id="'+i._getCellDomId(l,this)+'"'),this.isrownumber)return n.push(' class="l-grid-row-cell l-grid-row-cell-rownumbers" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"'),r.fixedCellHeight?n.push(' style = "height:'+r.rowHeight+'px;" '):n.push(' style = "min-height:'+r.rowHeight+'px;" '),void n.push(">"+(parseInt(l.__index)+1)+"</div></td>");if(this.ischeckbox)return n.push(' class="l-grid-row-cell l-grid-row-cell-checkbox" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"'),r.fixedCellHeight?n.push(' style = "height:'+r.rowHeight+'px;" '):n.push(' style = "min-height:'+r.rowHeight+'px;" '),n.push(">"),n.push('<span class="l-grid-row-cell-btn-checkbox"></span>'),void n.push("</div></td>");if(this.isdetail)return n.push(' class="l-grid-row-cell l-grid-row-cell-detail" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"'),r.fixedCellHeight?n.push(' style = "height:'+r.rowHeight+'px;" '):n.push(' style = "min-height:'+r.rowHeight+'px;" '),n.push(">"),(!r.isShowDetailToggle||r.isShowDetailToggle(l))&&n.push('<span class="l-grid-row-cell-detailbtn"></span>'),void n.push("</div></td>");var o=this._width;n.push(' class="l-grid-row-cell '),i.changedCells[s+"_"+this.__id]&&n.push("l-grid-row-cell-edited "),this.islast&&n.push("l-grid-row-cell-last "),n.push('"'),n.push(' style = "'),n.push("width:"+o+"px; "),a._hide&&n.push("display:none;"),n.push(' ">'),n.push(i._getCellHtml(l,a)),n.push("</td>")}}),n.push("</tr>")}}return n.join("")},_getCellHtml:function(e,t){var i=this,r=this.options;if(t.isrownumber)return'<div class="l-grid-row-cell-inner">'+(parseInt(e.__index)+1)+"</div>";var n=[];n.push('<div class="l-grid-row-cell-inner"'),n.push(' style = "width:'+parseInt(t._width-8)+"px;"),r.fixedCellHeight&&n.push("height:"+r.rowHeight+"px;"),n.push("min-height:"+r.rowHeight+"px; "),t.align&&n.push("text-align:"+t.align+";");var a=i._getCellContent(e,t);return n.push('">'+a+"</div>"),n.join("")},_setValueByName:function(e,t,i){if(!e||!t)return null;if(-1==t.indexOf("."))e[t]=i;else try{new Function("data,value","data."+t+"=value;")(e,i)}catch(r){}},_getValueByName:function(e,t){if(!e||!t)return null;if(-1==t.indexOf("."))return e[t];try{return new Function("data","return data."+t+";")(e)}catch(i){return null}},_getCellContent:function(e,t){var i=this,r=this.options;if(!e||!t)return"";if(t.isrownumber)return parseInt(e.__index)+1;var n=(e.__id,e.__index),a=i._getValueByName(e,t.name),o=i._getValueByName(e,t.textField),l="";return t.render?l=t.render.call(i,e,n,a,t):r.formatters[t.type]?l=r.formatters[t.type].call(i,a,t):null!=o?l=o.toString():null!=a&&(l=a.toString()),r.tree&&(null!=r.tree.columnName&&r.tree.columnName==t.name||null!=r.tree.columnId&&r.tree.columnId==t.id)&&(l=i._getTreeCellHtml(l,e)),l||""},_getTreeCellHtml:function(e,t){var i=t.__level,r=this,n=this.options,a=null==r.collapsedRows?n.tree.isExtend(t):-1==$.inArray(t,r.collapsedRows||[]),o=n.tree.isParent(t),l="";i=parseInt(i)||1;for(var s=1;i>s;s++)l+="<div class='l-grid-tree-space'></div>";return l+=a&&o?"<div class='l-grid-tree-space l-grid-tree-link l-grid-tree-link-open'></div>":o?"<div class='l-grid-tree-space l-grid-tree-link l-grid-tree-link-close'></div>":"<div class='l-grid-tree-space'></div>",l+="<span class='l-grid-tree-content'>"+e+"</span>"},_applyEditor:function(e){var t=this,i=this.options,r=e,n=r.id.split("|"),a=n[n.length-1],o=t._columns[a],l=$(r).parent(),s=t.getRow(l[0]),d=s.__id,c=s.__index;if(o&&o.editor){var u=o.name;o.columnindex;if(o.editor.type&&i.editors[o.editor.type]){var h=t._getValueByName(s,u),g={record:s,value:h,column:o,rowindex:c};if(o.textField&&(g.text=t._getValueByName(s,o.textField)),0==t.trigger("beforeEdit",[g]))return!1;t.lastEditRow=s,liger.lastEditGrid=t;var p=i.editors[o.editor.type],f=$(r),v=($(r).offset(),$(r).width()),m=$(r).height(),b=$("<div class='l-grid-editor'></div>").appendTo(t.grid),x=0,y=0,w=f.position(),C=t.gridbody.position(),_=t.gridview2.position(),D=(i.toolbar?t.topbar.parent().outerHeight():0)+(i.title?t.header.outerHeight():0),x=w.left+C.left+_.left,y=w.top+C.top+_.top+D;f.html(""),t.setCellEditing(s,o,!0);var k=window.ActiveXObject||"ActiveXObject"in window?!0:!1,T=0==$.browser.version.indexOf("8");k?(m-=T?1:2,y-=1,x-=1):$.browser.mozilla?(m-=1,y-=1,x-=1):$.browser.safari?y-=1:m-=1,x+=i.editorLeftDiff||0,y+=i.editorTopDiff||0,m+=i.editorHeightDiff||0,b.css({left:x,top:y}).show(),o.textField&&(g.text=t._getValueByName(s,o.textField));var B=t._createEditor(p,b,g,v,m-1);t.editor={editing:!0,editor:p,input:B,editParm:g,container:b},t.unbind("sysEndEdit"),t.bind("sysEndEdit",function(){var e=p.getValue(B,g);o.textField&&p.getText&&(g.text=p.getText(B,g)),p.getSelected&&(g.selected=p.getSelected(B,g)),e!=h&&($(r).addClass("l-grid-row-cell-edited"),t.changedCells[d+"_"+o.__id]=!0,g.value=e),o.editor.onChange&&o.editor.onChange.call(B,g),t._checkEditAndUpdateCell(g)&&o.editor.onChanged&&o.editor.onChanged.call(B,g)})}}},_checkEditAndUpdateCell:function(e){var t=this;this.options;if(0==t.trigger("beforeSubmitEdit",[e]))return!1;var i=e.column;return e.text&&i.textField&&t._setValueByName(e.record,i.textField,e.text),t.updateCell(i,e.value,e.record),(i.render||t.enabledTotal())&&t.reRender({column:i}),t.reRender({rowdata:e.record}),!0},_getCurrentPageData:function(e){var t=this.options,r={};if(r[t.root]=[],!e||!e[t.root]||!e[t.root].length)return r[t.record]=0,r;for(r[t.record]=e[t.root].length,t.newPage||(t.newPage=1),i=(t.newPage-1)*t.pageSize;i<e[t.root].length&&i<t.newPage*t.pageSize;i++)r[t.root].push(e[t.root][i]);return r},_compareData:function(e,t,i,r){var n=this,a=this.options,o=e[i],l=t[i];return null==o&&null!=l?1:null==o&&null==l?0:null!=o&&null==l?-1:a.sorters[r]?a.sorters[r].call(n,o,l):l>o?-1:o>l?1:0},_getTotalInfo:function(e,t){var i=this.options;try{if(!e.totalSummary)return null;var r=0,n=0,a=0,o=0,l=0;if(t&&t.length){l=parseFloat(t[0][e.name]),o=parseFloat(t[0][e.name]);for(var s=0;s<t.length;s++)if("delete"!=t[s][i.statusName]){n+=1;var d=t[s][e.name];"string"==typeof d&&(d=d.replace(/\$|\,/g,"")),d=parseFloat(d),d&&(r+=d,d>l&&(l=d),o>d&&(o=d))}a=1*r/t.length}return{sum:r,count:n,avg:a,min:o,max:l}}catch(c){return{}}},_getTotalCellContent:function(e,t){var i=this,r=(this.options,[]);if(e.totalSummary){var n=function(e){for(var t=0;t<l.length;t++)if(l[t].toLowerCase()==e.toLowerCase())return!0;return!1},a=i._getTotalInfo(e,t);if(e.totalSummary.render){var o=e.totalSummary.render(a,e,i.data);r.push(o)}else if(e.totalSummary.type&&a){var l=e.totalSummary.type.split(",");n("sum")&&r.push("<div>Sum="+a.sum.toFixed(2)+"</div>"),n("tsum")&&r.push("<div>"+sum.toFixed(0)+"</div>"),n("count")&&r.push("<div>Count="+a.count+"</div>"),n("max")&&r.push("<div>Max="+a.max.toFixed(2)+"</div>"),n("min")&&r.push("<div>Min="+a.min.toFixed(2)+"</div>"),n("avg")&&r.push("<div>Avg="+a.avg.toFixed(2)+"</div>")}}return r.join("")},_getTotalSummaryHtml:function(e,t,i){var r=this,n=(this.options,[]);return t?n.push('<tr class="l-grid-totalsummary '+t+'">'):n.push('<tr class="l-grid-totalsummary">'),$(r.columns).each(function(t,a){if(this.frozen==i){if(this.isrownumber)return void n.push('<td class="l-grid-totalsummary-cell l-grid-totalsummary-cell-rownumbers" style="width:'+this.width+'px"><div>&nbsp;</div></td>');if(this.ischeckbox)return void n.push('<td class="l-grid-totalsummary-cell l-grid-totalsummary-cell-checkbox" style="width:'+this.width+'px"><div>&nbsp;</div></td>');if(this.isdetail)return void n.push('<td class="l-grid-totalsummary-cell l-grid-totalsummary-cell-detail" style="width:'+this.width+'px"><div>&nbsp;</div></td>');n.push('<td class="l-grid-totalsummary-cell'),this.islast&&n.push(" l-grid-totalsummary-cell-last"),n.push('" '),n.push('id="'+r.id+"|total"+r.totalNumber+"|"+a.__id+'" '),n.push('width="'+this._width+'" '),columnname=this.columnname,columnname&&n.push('columnname="'+columnname+'" '),n.push('columnindex="'+t+'" '),n.push('><div class="l-grid-totalsummary-cell-inner"'),a.align&&n.push(' style="text-Align:'+a.align+';"'),n.push(">"),n.push(r._getTotalCellContent(a,e)),n.push("</div></td>")}}),n.push("</tr>"),i||r.totalNumber++,n.join("")},_bulidTotalSummary:function(e){var t=this,i=this.options;if(!t.isTotalSummary())return!1;if(!t.currentData||0==t.currentData[i.root].length)return!1;var r=$(t._getTotalSummaryHtml(t.currentData[i.root],null,e));$("tbody:first",e?t.f.gridbody:t.gridbody).append(r),e?t.totalRow1=r:t.totalRow2=r},updateTotalSummary:function(){var e=this;this.options;e.reRender({totalOnly:!0})},_buildPager:function(){var e=this,t=this.options;if(!t.pagerRender){$(".pcontrol input",e.toolbar).val(t.page),t.pageCount||(t.pageCount=1),$(".pcontrol span",e.toolbar).html(t.pageCount);var i=parseInt((t.page-1)*t.pageSize)+1,r=parseInt(i)+parseInt(t.pageSize)-1;t.total||(t.total=0),t.total<r&&(r=t.total),t.total||(i=r=0),0>i&&(i=0),0>r&&(r=0);var n=t.pageStatMessage;n=n.replace(/{from}/,i),n=n.replace(/{to}/,r),n=n.replace(/{total}/,t.total),n=n.replace(/{pagesize}/,t.pageSize),$(".l-bar-text",e.toolbar).html(n),t.total||$(".l-bar-btnfirst span,.l-bar-btnprev span,.l-bar-btnnext span,.l-bar-btnlast span",e.toolbar).addClass("l-disabled"),t.hideLoadButton&&($(".l-bar-btnload:first",e.toolbar).parent().hide(),$(".l-bar-btnload:first",e.toolbar).parent().next().hide()),1==t.page?($(".l-bar-btnfirst span",e.toolbar).addClass("l-disabled"),$(".l-bar-btnprev span",e.toolbar).addClass("l-disabled")):t.page>t.pageCount&&t.pageCount>0&&($(".l-bar-btnfirst span",e.toolbar).removeClass("l-disabled"),$(".l-bar-btnprev span",e.toolbar).removeClass("l-disabled")),t.page==t.pageCount?($(".l-bar-btnlast span",e.toolbar).addClass("l-disabled"),$(".l-bar-btnnext span",e.toolbar).addClass("l-disabled")):t.page<t.pageCount&&t.pageCount>0&&($(".l-bar-btnlast span",e.toolbar).removeClass("l-disabled"),$(".l-bar-btnnext span",e.toolbar).removeClass("l-disabled"))}},_getRowIdByDomId:function(e){var t=e.split("|"),i=t[2];return i},_getRowByDomId:function(e){return this.records[this._getRowIdByDomId(e)]},_isEditing:function(e){var t=this;if(e.hasClass("l-box-dateeditor")||e.hasClass("l-box-select"))return!0;if(e.hasClass("l-dialog")){var i=[];if(e.find(".l-dialog").each(function(){var e=$(this).attr("ligeruiid");e&&i.push(e)}),t._editorIncludeCotrols(i))return!0}return!1},_getSrcElementByEvent:function(e){var t=this,i=e.target||e.srcElement,r=$(i).parents().add(i),n=function(e){for(var t=0,i=r.length;i>t;t++)if("string"==typeof e){if($(r[t]).hasClass(e))return r[t]}else if("object"==typeof e&&r[t]==e)return r[t];return null};if(n("l-grid-editor"))return{editing:!0,editor:n("l-grid-editor")};if(-1==r.index(this.element))return t._isEditing(r)?{editing:!0}:{out:!0};var a=!1;if(r.hasClass("l-grid-detailpanel")&&t.detailrows)for(var o=0,l=t.detailrows.length;l>o;o++)if(-1!=r.index(t.detailrows[o])){a=!0;break}var s={grid:n("l-panel"),indetail:a,frozen:n(t.gridview1[0])?!0:!1,header:n("l-panel-header"),gridheader:n("l-grid-header"),gridbody:n("l-grid-body"),total:n("l-panel-bar-total"),popup:n("l-grid-popup"),toolbar:n("l-panel-bar")};if(s.gridheader&&(s.hrow=n("l-grid-hd-row"),s.hcell=n("l-grid-hd-cell"),s.hcelltext=n("l-grid-hd-cell-text"),s.checkboxall=n("l-grid-hd-cell-checkbox"),s.hcell)){var d=s.hcell.id.split("|")[2];s.column=t._columns[d]}return s.gridbody&&(s.row=n("l-grid-row"),s.cell=n("l-grid-row-cell"),s.checkbox=n("l-grid-row-cell-btn-checkbox"),s.groupbtn=n("l-grid-group-togglebtn"),s.grouprow=n("l-grid-grouprow"),s.detailbtn=n("l-grid-row-cell-detailbtn"),s.detailrow=n("l-grid-detailpanel"),s.totalrow=n("l-grid-totalsummary"),s.totalcell=n("l-grid-totalsummary-cell"),s.rownumberscell=$(s.cell).hasClass("l-grid-row-cell-rownumbers")?s.cell:null,s.detailcell=$(s.cell).hasClass("l-grid-row-cell-detail")?s.cell:null,s.checkboxcell=$(s.cell).hasClass("l-grid-row-cell-checkbox")?s.cell:null,s.treelink=n("l-grid-tree-link"),s.editor=n("l-grid-editor"),s.row&&(s.data=this._getRowByDomId(s.row.id)),s.cell&&(s.editing=$(s.cell).hasClass("l-grid-row-cell-editing")),s.editor&&(s.editing=!0),s.editing&&(s.out=!1)),s.toolbar&&(s.first=n("l-bar-btnfirst"),s.last=n("l-bar-btnlast"),s.next=n("l-bar-btnnext"),s.prev=n("l-bar-btnprev"),s.load=n("l-bar-btnload"),s.button=n("l-bar-button")),s},_editorIncludeCotrols:function(e){var t=this;this.options;if(!e||!e.length)return!1;if(t.editor&&t.editor.input){if(t._controlIncludeCotrols(t.editor.input,e))return!0}else if(t.editors)for(var i in t.editors)if(t.editors[i])for(var r in t.editors[i]){var n=t.editors[i][r];if(n&&n.input&&t._controlIncludeCotrols(n.input,e))return!0}return!1},_controlIncludeCotrols:function(e,t){this.options;if(!e||!e.includeControls||!e.includeControls.length)return!1;for(var i=0;i<e.includeControls.length;i++){var r=e.includeControls[i];if(-1!=$.inArray(r.id,t))return!0}return!1},_getOnePageHeight:function(){var e=this.options;return(parseFloat(e.rowHeight||24)+1)*parseInt(e.pageSize)},_setEvent:function(){var e=this,t=this.options;e.grid.bind("mousedown.grid",function(t){e._onMouseDown.call(e,t)}),e.grid.bind("dblclick.grid",function(t){e._onDblClick.call(e,t)}),e.grid.bind("contextmenu.grid",function(t){return e._onContextmenu.call(e,t)}),$(document).bind("mouseup.grid",function(t){e._onMouseUp.call(e,t)}),$(document).bind("click.grid",function(t){e._onClick.call(e,t)}),$(window).bind("resize.grid",function(t){e._onResize.call(e)}),$(document).bind("keydown.grid",function(t){t.ctrlKey&&(e.ctrlKey=!0)}),$(document).bind("keyup.grid",function(t){delete e.ctrlKey}),e.gridbody.bind("scroll.grid",function(){var i=e.gridbody.scrollLeft(),r=e.gridbody.scrollTop();if(null!=i&&(e.gridheader[0].scrollLeft=i),null!=r&&(e.f.gridbody[0].scrollTop=r),t.scrollToPage&&t.usePager&&!e.loading){var n=e.gridbody.find(".l-grid-body-inner:first").height(),a=r+e.gridbody.height();if(t.scrollToAppend)t.newPage!=t.pageCount&&a>=n&&e.reload(t.newPage+1,"scrollappend");else{var o=a>=n?t.pageCount:Math.ceil(a/e._getOnePageHeight());e.scrollLoading||(e.scrollLoading=!0,e.lastScrollTop=r,e.unbind("sysScrollLoaded"),e.bind("sysScrollLoaded",function(){e.gridbody.scrollTop(r),setTimeout(function(){e.scrollLoading=!1},500)}),e.scrollLoading=!0,e.reload(o,"scroll"))}}e.trigger("SysGridHeightChanged")}),$("select",e.toolbar).change(function(){return e.isDataChanged&&"local"!=t.dataAction&&!confirm(t.isContinueByDataChanged)?!1:(t.newPage=1,t.pageSize=this.value,void e.loadData("local"!=t.dataAction?t.where:!1))}),$("span.pcontrol :text",e.toolbar).blur(function(t){e.changePage("input")}),$("div.l-bar-button",e.toolbar).hover(function(){$(this).addClass("l-bar-button-over")},function(){$(this).removeClass("l-bar-button-over")}),$.fn.ligerDrag&&t.colDraggable&&(e.colDroptip=$("<div class='l-drag-coldroptip' style='display:none'><div class='l-drop-move-up'></div><div class='l-drop-move-down'></div></div>").appendTo("body"),e.gridheader.add(e.f.gridheader).ligerDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(t,i){var r=e._getSrcElementByEvent(i);if(r.hcell&&r.column){var n=$(".l-grid-hd-cell-text:first",r.hcell).html(),a=$("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div></div>").appendTo("body");return a.append(n),a}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),e.children[this.id]=this},onStartDrag:function(t,i){if(2==i.button)return!1;if(e.colresizing)return!1;this.set("cursor","default");var r=e._getSrcElementByEvent(i);if(!r.hcell||!r.column||r.column.issystem||r.hcelltext)return!1;if(-1!=$(r.hcell).css("cursor").indexOf("resize"))return!1;this.draggingColumn=r.column,e.coldragging=!0;var n=e.grid.offset();this.validRange={top:n.top,bottom:n.top+e.gridheader.height(),left:n.left-10,right:n.left+e.grid.width()+10}},onDrag:function(i,r){this.set("cursor","default");var n=this.draggingColumn;if(!n)return!1;if(e.colresizing)return!1;null==e.colDropIn&&(e.colDropIn=-1);var a=r.pageX,o=r.pageY,l=!1,s=(e.grid.offset(),this.validRange);if(a<s.left||a>s.right||o>s.bottom||o<s.top)return e.colDropIn=-1,e.colDroptip.hide(),void this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no");for(var d in e._columns){var c=e._columns[d];if(n!=c){if(!c.issystem){var u=c.__level==n.__level,h=u&&l?!0:!1;if(n.frozen!=c.frozen&&(h=c.frozen?!1:!0),-1==e.colDropIn||e.colDropIn==d){var g=document.getElementById(c.__domid),p=$(g).offset(),f={top:p.top,bottom:p.top+$(g).height(),left:p.left-10,right:p.left+10};if(h){var v=$(g).width();f.left+=v,f.right+=v}if(a>f.left&&a<f.right&&o>f.top&&o<f.bottom){var m=t.headerRowHeight;c.__rowSpan&&(m*=c.__rowSpan),e.colDroptip.css({left:f.left+5,top:f.top-9,height:m+18}).show(),e.colDropIn=d,e.colDropDir=h?"right":"left",this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no").addClass("l-drop-yes");break}-1!=e.colDropIn&&(e.colDropIn=-1,e.colDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no"))}}}else l=!0}},onStopDrag:function(t,i){var r=this.draggingColumn;e.coldragging=!1,-1!=e.colDropIn&&(e.changeCol.ligerDefer(e,0,[r,e.colDropIn,"right"==e.colDropDir]),e.colDropIn=-1),e.colDroptip.hide(),this.set("cursor","default")}})),$.fn.ligerDrag&&t.rowDraggable&&(e.rowDroptip=$("<div class='l-drag-rowdroptip' style='display:none'></div>").appendTo("body"),e.gridbody.add(e.f.gridbody).ligerDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(i,r){var n=e._getSrcElementByEvent(r);if(n.row){var a=t.draggingMessage.replace(/{count}/,i.draggingRows?i.draggingRows.length:1);t.rowDraggingRender&&(a=t.rowDraggingRender(i.draggingRows,i,e));var o=$("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div>"+a+"</div>").appendTo("body");return o}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),e.children[this.id]=this},onStartDrag:function(t,i){if(2==i.button)return!1;if(e.colresizing)return!1;if(!e.columns.length)return!1;this.set("cursor","default");var r=e._getSrcElementByEvent(i);if(!r.cell||!r.data||r.checkbox)return!1;var n=r.cell.id.split("|"),a=e._columns[n[n.length-1]];if(!(r.rownumberscell||r.detailcell||r.checkboxcell||a==e.columns[0]))return!1;if(e.enabledCheckbox()){if(this.draggingRows=e.getSelecteds(),!this.draggingRows||!this.draggingRows.length)return!1}else this.draggingRows=[r.data];this.draggingRow=r.data,this.set("cursor","move"),e.rowdragging=!0,this.validRange={top:e.gridbody.offset().top,bottom:e.gridbody.offset().top+e.gridbody.height(),left:e.grid.offset().left-10,right:e.grid.offset().left+e.grid.width()+10}},onDrag:function(i,r){var n=this.draggingRow;if(!n)return!1;var a=this.draggingRows?this.draggingRows:[n];if(e.colresizing)return!1;null==e.rowDropIn&&(e.rowDropIn=-1);var o=r.pageX,l=r.pageY,s=!1,d=this.validRange;if(o<d.left||o>d.right||l>d.bottom||l<d.top)return e.rowDropIn=-1,e.rowDroptip.hide(),void this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes l-drop-add").addClass("l-drop-no");for(var c in e.rows){var u=e.rows[c],h=u.__id;if(n==u&&(s=!0),-1==$.inArray(u,a)){var g=s?!0:!1;if(-1==e.rowDropIn||e.rowDropIn==h){var p=e.getRowObj(h),f=$(p).offset(),v={top:f.top-4,bottom:f.top+$(p).height()+4,left:e.grid.offset().left,right:e.grid.offset().left+e.grid.width()};if(o>v.left&&o<v.right&&l>v.top&&l<v.bottom){var m=f.top;g&&(m+=$(p).height()),e.rowDroptip.css({left:v.left,top:m,width:v.right-v.left}).show(),e.rowDropIn=h,e.rowDropDir=g?"bottom":"top",t.tree&&l>v.top+5&&l<v.bottom-5?(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-yes").addClass("l-drop-add"),e.rowDroptip.hide(),e.rowDropInParent=!0):(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-add").addClass("l-drop-yes"),e.rowDroptip.show(),e.rowDropInParent=!1);break}-1!=e.rowDropIn&&(e.rowDropIn=-1,e.rowDropInParent=!1,e.rowDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes  l-drop-add").addClass("l-drop-no"))}}}},onStopDrag:function(i,r){var n=this.draggingRows;e.rowdragging=!1;for(var a=0;a<n.length;a++){var o=n[a].children;o&&(n=$.grep(n,function(e,t){var i=-1==$.inArray(e,o);return i}))}if(-1!=e.rowDropIn){if(t.tree){var l,s;e.rowDropInParent?s=e.getRow(e.rowDropIn):(l=e.getRow(e.rowDropIn),s=e.getParent(l)),e.appendRange(n,s,l,"bottom"!=e.rowDropDir),e.trigger("rowDragDrop",{rows:n,parent:s,near:l,after:"bottom"==e.rowDropDir})}else e.moveRange(n,e.rowDropIn,"bottom"==e.rowDropDir),e.trigger("rowDragDrop",{rows:n,parent:s,near:e.getRow(e.rowDropIn),after:"bottom"==e.rowDropDir});e.rowDropIn=-1}e.rowDroptip.hide(),this.set("cursor","default")}}))},_onRowOver:function(e,t){if(!l.draggable.dragging){var i=this,r=this.options,n=i.getRow(e),a=t?"addClass":"removeClass";t&&i.editor.editing&&$("tr."+r.mouseoverRowCssClass,i.gridview).removeClass(r.mouseoverRowCssClass),i.enabledFrozen()&&$(i.getRowObj(n,!0))[a](r.mouseoverRowCssClass),$(i.getRowObj(n,!1))[a](r.mouseoverRowCssClass)}},_onMouseUp:function(e){var t=this;this.options;if(l.draggable.dragging){var i=t._getSrcElementByEvent(e);i.hcell&&i.column?t.trigger("dragdrop",[{type:"header",column:i.column,cell:i.hcell},e]):i.row&&t.trigger("dragdrop",[{type:"row",record:i.data,row:i.row},e])}},_onMouseDown:function(e){this.options},_onContextmenu:function(e){var t=this,i=this.options,r=t._getSrcElementByEvent(e);if(r.row){if(i.whenRClickToSelect&&t.select(r.data),t.hasBind("contextmenu"))return t.trigger("contextmenu",[{data:r.data,rowindex:r.data.__index,row:r.row},e])}else if(r.hcell){if(!i.allowHideColumn)return!0;var n=$(r.hcell).attr("columnindex");if(void 0==n)return!0;var a=e.pageX-t.body.offset().left+parseInt(t.body[0].scrollLeft);return n==t.columns.length-1&&(a-=50),t.popup.css({left:a,top:t.gridheader.height()+1}),t.popup.toggle(),!1}},_onDblClick:function(e){var t=this,i=(this.options,t._getSrcElementByEvent(e));i.row&&t.trigger("dblClickRow",[i.data,i.data.__id,i.row])},_onClick:function(e){var t=e.target||e.srcElement,i=this,r=this.options,n=i._getSrcElementByEvent(e);if(n.out)return i.editor.editing&&!$.ligerui.win.masking&&i.endEdit(),void(r.allowHideColumn&&i.popup.hide());if(!n.indetail&&!n.editing)if(i.editor.editing&&i.endEdit(),r.allowHideColumn&&(n.popup||i.popup.hide()),n.checkboxall){var a=$(n.hrow),o=a.hasClass("l-checked");if(0==i.trigger("beforeCheckAllRow",[!o,i.element]))return!1;o?a.removeClass("l-checked"):a.addClass("l-checked"),i.selected=[];for(var l in i.records)o?i.unselect(i.records[l]):i.select(i.records[l]);i.trigger("checkAllRow",[!o,i.element])}else if(n.hcelltext){var s=$(n.hcelltext).parent().parent();if(!r.enabledSort||!n.column)return;if(0==n.column.isSort)return;if(r.url&&"local"!=r.dataAction&&i.isDataChanged&&!confirm(r.isContinueByDataChanged))return;var d=$(".l-grid-hd-cell-sort:first",s),c=n.column.name;if(!c)return;d.length>0?d.hasClass("l-grid-hd-cell-sort-asc")?(d.removeClass("l-grid-hd-cell-sort-asc").addClass("l-grid-hd-cell-sort-desc"),s.removeClass("l-grid-hd-cell-asc").addClass("l-grid-hd-cell-desc"),i.trigger("ChangeSort",[c,"desc"]),i.changeSort(c,"desc")):d.hasClass("l-grid-hd-cell-sort-desc")&&(d.removeClass("l-grid-hd-cell-sort-desc").addClass("l-grid-hd-cell-sort-asc"),s.removeClass("l-grid-hd-cell-desc").addClass("l-grid-hd-cell-asc"),i.trigger("ChangeSort",[c,"asc"]),i.changeSort(c,"asc")):(s.removeClass("l-grid-hd-cell-desc").addClass("l-grid-hd-cell-asc"),$(n.hcelltext).after("<span class='l-grid-hd-cell-sort l-grid-hd-cell-sort-asc'>&nbsp;&nbsp;</span>"),i.trigger("ChangeSort",[c,"asc"]),i.changeSort(c,"asc")),$(".l-grid-hd-cell-sort",i.gridheader).add($(".l-grid-hd-cell-sort",i.f.gridheader)).not($(".l-grid-hd-cell-sort:first",s)).remove()}else if(n.detailbtn&&r.detail){var u=n.data,a=$([i.getRowObj(u,!1)]);i.enabledFrozen()&&(a=a.add(i.getRowObj(u,!0)));var l=u.__id;if($(n.detailbtn).hasClass("l-open"))r.detail.onCollapse&&r.detail.onCollapse(u,$(".l-grid-detailpanel-inner:first",h)[0]),a.next("tr.l-grid-detailpanel").hide(),$(n.detailbtn).removeClass("l-open");else{var h=a.next("tr.l-grid-detailpanel");if(h.length>0)return h.show(),r.detail.onExtend&&r.detail.onExtend(u,$(".l-grid-detailpanel-inner:first",h)[0]),$(n.detailbtn).addClass("l-open"),void i.trigger("SysGridHeightChanged");$(n.detailbtn).addClass("l-open");for(var g=0,p=0;p<i.columns.length;p++)i.columns[p].frozen&&g++;var f=$("<tr class='l-grid-detailpanel'><td><div class='l-grid-detailpanel-inner' style='display:none'></div></td></tr>"),v=$("<tr class='l-grid-detailpanel'><td><div class='l-grid-detailpanel-inner' style='display:none'></div></td></tr>");f.find("div:first").width(i.gridheader.find("div:first").width()-50),f.attr("id",i.id+"|detail|"+l),i.detailrows=i.detailrows||[],i.detailrows.push(f[0]),i.detailrows.push(v[0]);var m=$("div:first",f);m.parent().attr("colSpan",i.columns.length-g),a.eq(0).after(f),g>0&&(v.find("td:first").attr("colSpan",g),a.eq(1).after(v)),r.detail.onShowDetail?(r.detail.onShowDetail(u,m[0],function(){i.trigger("SysGridHeightChanged")}),$("div:first",v).add(m).show().height(r.detail.height||r.detailHeight)):r.detail.render&&(m.append(r.detail.render()),m.show()),i.trigger("SysGridHeightChanged")}}else if(n.groupbtn){var b=$(n.grouprow),x=!0;$(n.groupbtn).hasClass("l-grid-group-togglebtn-close")?($(n.groupbtn).removeClass("l-grid-group-togglebtn-close"),b.hasClass("l-grid-grouprow-last")&&$("td:first",b).width("auto")):(x=!1,$(n.groupbtn).addClass("l-grid-group-togglebtn-close"),b.hasClass("l-grid-grouprow-last")&&$("td:first",b).width(i.gridtablewidth));for(var y=b.next(".l-grid-row,.l-grid-totalsummary-group,.l-grid-detailpanel");;){if(0==y.length)break;x?(y.show(),y.hasClass("l-grid-detailpanel")&&!y.prev().find("td.l-grid-row-cell-detail:first span.l-grid-row-cell-detailbtn:first").hasClass("l-open")&&y.hide()):y.hide(),y=y.next(".l-grid-row,.l-grid-totalsummary-group,.l-grid-detailpanel")}i.trigger(x?"groupExtend":"groupCollapse"),i.trigger("SysGridHeightChanged")}else if(n.treelink)i.toggle(n.data);else if(n.row&&i.enabledCheckbox()){var w=r.selectRowButtonOnly?!0:!1;if(r.enabledEdit&&(w=!0),"a"==t.tagName.toLowerCase())return;if((n.checkbox||!w)&&0!=r.selectable){var a=$(n.row),o=a.hasClass("l-selected");if(0==i.trigger("beforeCheckRow",[!o,n.data,n.data.__id,n.row]))return!1;var C=o?"unselect":"select";if(i[C](n.data),r.tree&&r.autoCheckChildren)for(var _=i.getChildren(n.data,!0),p=0,D=_.length;D>p;p++)i[C](_[p]);i.trigger("checkRow",[!o,n.data,n.data.__id,n.row])}!n.checkbox&&n.cell&&r.enabledEdit&&r.clickToEdit&&i._applyEditor(n.cell)}else if(n.row&&!i.enabledCheckbox()&&0!=r.selectable)if(n.cell&&r.enabledEdit&&r.clickToEdit&&i._applyEditor(n.cell),$(n.row).hasClass("l-selected")){if(!r.allowUnSelectRow)return void $(n.row).addClass("l-selected-again");i.unselect(n.data)}else i.select(n.data);else if(n.toolbar)if(n.first){if(0==i.trigger("toFirst",[i.element]))return!1;i.changePage("first")}else if(n.prev){if(0==i.trigger("toPrev",[i.element]))return!1;i.changePage("prev")}else if(n.next){if(0==i.trigger("toNext",[i.element]))return!1;i.changePage("next")}else if(n.last){if(0==i.trigger("toLast",[i.element]))return!1;i.changePage("last")}else if(n.load){if($("span",n.load).hasClass("l-disabled"))return!1;if(0==i.trigger("reload",[i.element]))return!1;if(r.url&&i.isDataChanged&&!confirm(r.isContinueByDataChanged))return!1;i.loadData(r.where)}},select:function(e){var t=this,i=this.options,r=t.getRow(e),n=r.__id,a=t.getRowObj(n);if(i.rowSelectable&&0!=t.trigger("beforeSelectRow",[r,n,a])){var o=t.getRowObj(n,!0);if(!t.enabledCheckbox()&&!t.ctrlKey||i.isSingleCheck){for(var l in t.selected){var s=t.selected[l];s.__id in t.records&&($(t.getRowObj(s)).removeClass("l-selected l-selected-again"),
t.enabledFrozen()&&$(t.getRowObj(s,!0)).removeClass("l-selected l-selected-again"))}t.selected=[]}a&&$(a).addClass("l-selected"),o&&$(o).addClass("l-selected"),t.selected[t.selected.length]=r,t.trigger("selectRow",[r,n,a])}},unselect:function(e){var t=this,i=(this.options,t.getRow(e)),r=i.__id,n=t.getRowObj(r),a=t.getRowObj(r,!0);$(n).removeClass("l-selected l-selected-again"),t.enabledFrozen()&&$(a).removeClass("l-selected l-selected-again"),t._removeSelected(i),t.trigger("unSelectRow",[i,r,n])},isSelected:function(e){var t=this,i=(this.options,t.getRow(e));for(var r in t.selected)if(t.selected[r]==i)return!0;return!1},arrayToTree:function(e,t,i){function r(e){return"string"==typeof e&&(e=e.replace(/[.]/g,"").toLowerCase()),e}var n=this.options,a="children";if(n.tree&&(a=n.tree.childrenName),!e||!e.length)return[];for(var o=[],l={},s=e.length,d=0;s>d;d++){var c=e[d],u=r(c[t]);l[u]=c}for(var d=0;s>d;d++){var h=e[d],u=r(h[i]),g=l[u];g?(g[a]=g[a]||[],g[a].push(h)):o.push(h)}return o},_onResize:function(){var e=this,t=this.options;if(t.height&&"auto"!=t.height){var i=$(window).height(),r=0,n=null;if("string"==typeof t.height&&t.height.indexOf("%")>0){var a=e.grid.parent();t.inWindow?(n=i,n-=parseInt($("body").css("paddingTop")),n-=parseInt($("body").css("paddingBottom"))):n=a.height(),r=n*parseInt(t.height)*.01,(t.inWindow||"body"==a[0].tagName.toLowerCase())&&(r-=e.grid.offset().top-parseInt($("body").css("paddingTop")))}else r=parseInt(t.height);r+=t.heightDiff,e.windowHeight=i,e._setHeight(r)}else e._updateHorizontalScrollStatus.ligerDefer(e,10);if(e.enabledFrozen()){var o=e.gridview1.width(),l=e.gridview.width();0>=l-o?e.gridview2.css({width:"auto"}):e.gridview2.css({width:l-o})}e.trigger("SysGridHeightChanged")},showFilter:function(){function e(){var e=[];return $(n.columns).each(function(){var t={name:this.name,display:this.display},i="int"==this.type||"number"==this.type||"float"==this.type,r="date"==this.type;i&&(t.type="number"),r&&(t.type="date"),this.editor&&(t.editor=this.editor),e.push(t)}),e}function t(){var e=o.getData();"server"==n.options.dataType?i(e):r(e)}function i(e){e&&e.rules&&e.rules.length?n.setParm("where",JSON.stringify(e)):n.removeParm("where"),n.loadData()}function r(e){n.loadData($.ligerFilter.getFilterFunction(e))}var n=this;this.options;if(n.winfilter)return void n.winfilter.show();var a=$('<div id="'+n.id+'_filtercontainer"></div>').width(380).height(120).hide(),o=a.ligerFilter({fields:e()});return o.addRule($(o.element.firstChild)),n.winfilter=$.ligerDialog.open({width:420,height:208,target:a,isResize:!0,top:50,buttons:[{text:"ç¡®å®",onclick:function(e,i){t(),i.hide()}},{text:"åæ¶",onclick:function(e,t){t.hide()}}]})}}),$.ligerui.controls.Grid.prototype.enabledTotal=$.ligerui.controls.Grid.prototype.isTotalSummary,$.ligerui.controls.Grid.prototype.add=$.ligerui.controls.Grid.prototype.addRow,$.ligerui.controls.Grid.prototype.update=$.ligerui.controls.Grid.prototype.updateRow,$.ligerui.controls.Grid.prototype.append=$.ligerui.controls.Grid.prototype.appendRow,$.ligerui.controls.Grid.prototype.getSelected=$.ligerui.controls.Grid.prototype.getSelectedRow,$.ligerui.controls.Grid.prototype.getSelecteds=$.ligerui.controls.Grid.prototype.getSelectedRows,$.ligerui.controls.Grid.prototype.getCheckedRows=$.ligerui.controls.Grid.prototype.getSelectedRows,$.ligerui.controls.Grid.prototype.getCheckedRowObjs=$.ligerui.controls.Grid.prototype.getSelectedRowObjs,$.ligerui.controls.Grid.prototype.setOptions=$.ligerui.controls.Grid.prototype.set,$.ligerui.controls.Grid.prototype.reload=$.ligerui.controls.Grid.prototype.loadData,$.ligerui.controls.Grid.prototype.refreshSize=$.ligerui.controls.Grid.prototype._onResize,$.ligerui.controls.Grid.prototype.append=$.ligerui.controls.Grid.prototype.appendRange}(jQuery),function(e){e.fn.ligerLayout=function(t){return e.ligerui.run.call(this,"ligerLayout",arguments)},e.fn.ligerGetLayoutManager=function(){return e.ligerui.run.call(this,"ligerGetLayoutManager",arguments)},e.ligerDefaults.Layout={topHeight:50,bottomHeight:50,leftWidth:110,centerWidth:300,rightWidth:170,centerBottomHeight:100,allowCenterBottomResize:!0,inWindow:!0,heightDiff:0,height:"100%",onHeightChanged:null,isLeftCollapse:!1,isRightCollapse:!1,allowLeftCollapse:!0,allowRightCollapse:!0,allowLeftResize:!0,allowRightResize:!0,allowTopResize:!0,allowBottomResize:!0,space:3,onEndResize:null,minLeftWidth:80,minRightWidth:80,onLeftToggle:null,onRightToggle:null},e.ligerMethos.Layout={},e.ligerui.controls.Layout=function(t,i){e.ligerui.controls.Layout.base.constructor.call(this,t,i)},e.ligerui.controls.Layout.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Layout"},__idPrev:function(){return"Layout"},_extendMethods:function(){return e.ligerMethos.Layout},_init:function(){e.ligerui.controls.Layout.base._init.call(this);var t=this.options;null!=t.InWindow&&null==t.inWindow&&(t.inWindow=t.InWindow)},_render:function(){var t=this,i=this.options;if(t.layout=e(this.element),t.layout.addClass("l-layout"),t.width=t.layout.width(),e("> div[position=top]",t.layout).length>0&&(t.top=e("> div[position=top]",t.layout).wrap('<div class="l-layout-top" style="top:0px;"></div>').parent(),t.top.content=e("> div[position=top]",t.top),t.top.content.hasClass("l-layout-content")||t.top.content.addClass("l-layout-content"),t.topHeight=i.topHeight,t.topHeight&&t.top.height(t.topHeight)),e("> div[position=bottom]",t.layout).length>0){t.bottom=e("> div[position=bottom]",t.layout).wrap('<div class="l-layout-bottom"></div>').parent(),t.bottom.content=e("> div[position=bottom]",t.bottom),t.bottom.content.hasClass("l-layout-content")||t.bottom.content.addClass("l-layout-content"),t.bottomHeight=i.bottomHeight,t.bottomHeight&&t.bottom.height(t.bottomHeight);var r=t.bottom.content.attr("title");r&&(t.bottom.header=e('<div class="l-layout-header"></div>'),t.bottom.prepend(t.bottom.header),t.bottom.header.html(r),t.bottom.content.attr("title",""))}if(e("> div[position=left]",t.layout).length>0){t.left=e("> div[position=left]",t.layout).wrap('<div class="l-layout-left" style="left:0px;"></div>').parent(),t.left.header=e('<div class="l-layout-header"><div class="l-layout-header-toggle"></div><div class="l-layout-header-inner"></div></div>'),t.left.prepend(t.left.header),t.left.header.toggle=e(".l-layout-header-toggle",t.left.header),t.left.content=e("> div[position=left]",t.left),t.left.content.hasClass("l-layout-content")||t.left.content.addClass("l-layout-content"),i.allowLeftCollapse||e(".l-layout-header-toggle",t.left.header).remove();var n=t.left.content.attr("title");n&&(t.left.content.attr("title",""),e(".l-layout-header-inner",t.left.header).html(n)),t.left.content.attr("hidetitle")&&(t.left.content.attr("title",""),t.left.header.remove()),t.leftWidth=i.leftWidth,t.leftWidth&&t.left.width(t.leftWidth)}if(e("> div[position=center]",t.layout).length>0){t.center=e("> div[position=center]",t.layout).wrap('<div class="l-layout-center" ></div>').parent(),t.center.content=e("> div[position=center]",t.center),t.center.content.addClass("l-layout-content");var a=t.center.content.attr("title");if(a&&(t.center.content.attr("title",""),t.center.header=e('<div class="l-layout-header"></div>'),t.center.prepend(t.center.header),t.center.header.html(a)),t.center.content.attr("hidetitle")&&(t.center.content.attr("title",""),t.center.header.remove()),t.centerWidth=i.centerWidth,t.centerWidth&&t.center.width(t.centerWidth),e("> div[position=centerbottom]",t.layout).length>0){t.centerBottom=e("> div[position=centerbottom]",t.layout).wrap('<div class="l-layout-centerbottom" ></div>').parent(),t.centerBottom.content=e("> div[position=centerbottom]",t.centerBottom),t.centerBottom.content.addClass("l-layout-content");var a=t.centerBottom.content.attr("title");a&&(t.centerBottom.content.attr("title",""),t.centerBottom.header=e('<div class="l-layout-header"></div>'),t.centerBottom.prepend(t.centerBottom.header),t.centerBottom.header.html(a)),t.centerBottom.content.attr("hidetitle")&&(t.centerBottom.content.attr("title",""),t.centerBottom.header&&t.centerBottom.header.remove()),t.centerWidth&&t.centerBottom.width(t.centerWidth)}}if(e("> div[position=right]",t.layout).length>0){t.right=e("> div[position=right]",t.layout).wrap('<div class="l-layout-right"></div>').parent(),t.right.header=e('<div class="l-layout-header"><div class="l-layout-header-toggle"></div><div class="l-layout-header-inner"></div></div>'),t.right.prepend(t.right.header),t.right.header.toggle=e(".l-layout-header-toggle",t.right.header),i.allowRightCollapse||e(".l-layout-header-toggle",t.right.header).remove(),t.right.content=e("> div[position=right]",t.right),t.right.content.hasClass("l-layout-content")||t.right.content.addClass("l-layout-content");var o=t.right.content.attr("title");o&&(t.right.content.attr("title",""),e(".l-layout-header-inner",t.right.header).html(o)),t.right.content.attr("hidetitle")&&(t.right.content.attr("title",""),t.right.header.remove()),t.rightWidth=i.rightWidth,t.rightWidth&&t.right.width(t.rightWidth)}t.layout.lock=e("<div class='l-layout-lock'></div>"),t.layout.append(t.layout.lock),t._addDropHandle(),t.isLeftCollapse=i.isLeftCollapse,t.isRightCollapse=i.isRightCollapse,t.leftCollapse=e('<div class="l-layout-collapse-left" style="display: none; "><div class="l-layout-collapse-left-toggle"></div></div>'),t.rightCollapse=e('<div class="l-layout-collapse-right" style="display: none; "><div class="l-layout-collapse-right-toggle"></div></div>'),t.layout.append(t.leftCollapse).append(t.rightCollapse),t.leftCollapse.toggle=e("> .l-layout-collapse-left-toggle",t.leftCollapse),t.rightCollapse.toggle=e("> .l-layout-collapse-right-toggle",t.rightCollapse),t._setCollapse(),t._bulid(),e(window).resize(function(){t._onResize()}),t.set(i),t.mask.height(t.layout.height())},setLeftCollapse:function(e){var t=this;this.options;return t.left?(t.isLeftCollapse=e,t.isLeftCollapse?(t.leftCollapse.show(),t.leftDropHandle&&t.leftDropHandle.hide(),t.left.hide()):(t.leftCollapse.hide(),t.leftDropHandle&&t.leftDropHandle.show(),t.left.show()),t._onResize(),void t.trigger("leftToggle",[e])):!1},setRightCollapse:function(e){var t=this;this.options;return t.right?(t.isRightCollapse=e,t._onResize(),t.isRightCollapse?(t.rightCollapse.show(),t.rightDropHandle&&t.rightDropHandle.hide(),t.right.hide()):(t.rightCollapse.hide(),t.rightDropHandle&&t.rightDropHandle.show(),t.right.show()),t._onResize(),void t.trigger("rightToggle",[e])):!1},_bulid:function(){var t=this,i=this.options;e("> .l-layout-left .l-layout-header,> .l-layout-right .l-layout-header",t.layout).hover(function(){e(this).addClass("l-layout-header-over")},function(){e(this).removeClass("l-layout-header-over")}),e(".l-layout-header-toggle",t.layout).hover(function(){e(this).addClass("l-layout-header-toggle-over")},function(){e(this).removeClass("l-layout-header-toggle-over")}),e(".l-layout-header-toggle",t.left).click(function(){t.setLeftCollapse(!0)}),e(".l-layout-header-toggle",t.right).click(function(){t.setRightCollapse(!0)}),t.middleTop=0,t.top&&(t.middleTop+=t.top.height(),t.middleTop+=parseInt(t.top.css("borderTopWidth")),t.middleTop+=parseInt(t.top.css("borderBottomWidth")),t.middleTop+=i.space),t.left&&(t.left.css({top:t.middleTop}),t.leftCollapse.css({top:t.middleTop})),t.center&&t.center.css({top:t.middleTop}),t.right&&(t.right.css({top:t.middleTop}),t.rightCollapse.css({top:t.middleTop})),t.left&&t.left.css({left:0}),t._onResize(),t._onResize()},_setCollapse:function(){var t=this;this.options;t.leftCollapse.hover(function(){e(this).addClass("l-layout-collapse-left-over")},function(){e(this).removeClass("l-layout-collapse-left-over")}),t.leftCollapse.toggle.hover(function(){e(this).addClass("l-layout-collapse-left-toggle-over")},function(){e(this).removeClass("l-layout-collapse-left-toggle-over")}),t.rightCollapse.hover(function(){e(this).addClass("l-layout-collapse-right-over")},function(){e(this).removeClass("l-layout-collapse-right-over")}),t.rightCollapse.toggle.hover(function(){e(this).addClass("l-layout-collapse-right-toggle-over")},function(){e(this).removeClass("l-layout-collapse-right-toggle-over")}),t.leftCollapse.toggle.click(function(){t.setLeftCollapse(!1)}),t.rightCollapse.toggle.click(function(){t.setRightCollapse(!1)}),t.left&&t.isLeftCollapse&&(t.leftCollapse.show(),t.leftDropHandle&&t.leftDropHandle.hide(),t.left.hide()),t.right&&t.isRightCollapse&&(t.rightCollapse.show(),t.rightDropHandle&&t.rightDropHandle.hide(),t.right.hide())},_addDropHandle:function(){var t=this,i=this.options;t.left&&i.allowLeftResize&&(t.leftDropHandle=e("<div class='l-layout-drophandle-left'></div>"),t.layout.append(t.leftDropHandle),t.leftDropHandle&&t.leftDropHandle.show(),t.leftDropHandle.mousedown(function(e){t._start("leftresize",e)})),t.right&&i.allowRightResize&&(t.rightDropHandle=e("<div class='l-layout-drophandle-right'></div>"),t.layout.append(t.rightDropHandle),t.rightDropHandle&&t.rightDropHandle.show(),t.rightDropHandle.mousedown(function(e){t._start("rightresize",e)})),t.top&&i.allowTopResize&&(t.topDropHandle=e("<div class='l-layout-drophandle-top'></div>"),t.layout.append(t.topDropHandle),t.topDropHandle.show(),t.topDropHandle.mousedown(function(e){t._start("topresize",e)})),t.bottom&&i.allowBottomResize&&(t.bottomDropHandle=e("<div class='l-layout-drophandle-bottom'></div>"),t.layout.append(t.bottomDropHandle),t.bottomDropHandle.show(),t.bottomDropHandle.mousedown(function(e){t._start("bottomresize",e)})),t.centerBottom&&i.allowCenterBottomResize&&(t.centerBottomDropHandle=e("<div class='l-layout-drophandle-centerbottom'></div>"),t.layout.append(t.centerBottomDropHandle),t.centerBottomDropHandle.show(),t.centerBottomDropHandle.mousedown(function(e){t._start("centerbottomresize",e)})),t.draggingxline=e("<div class='l-layout-dragging-xline'></div>"),t.draggingyline=e("<div class='l-layout-dragging-yline'></div>"),t.mask=e("<div class='l-dragging-mask'></div>"),t.layout.append(t.draggingxline).append(t.draggingyline).append(t.mask)},_setDropHandlePosition:function(){var e=this,t=this.options;e.leftDropHandle&&e.leftDropHandle.css({left:e.left.width()+parseInt(e.left.css("left")),height:e.middleHeight,top:e.middleTop}),e.rightDropHandle&&e.rightDropHandle.css({left:parseInt(e.right.css("left"))-t.space,height:e.middleHeight,top:e.middleTop}),e.topDropHandle&&e.topDropHandle.css({top:e.top.height()+parseInt(e.top.css("top")),width:e.top.width()}),e.bottomDropHandle&&e.bottomDropHandle.css({top:parseInt(e.bottom.css("top"))-t.space,width:e.bottom.width()}),e.centerBottomDropHandle&&e.centerBottomDropHandle.css({top:parseInt(e.centerBottom.css("top"))-t.space,left:parseInt(e.center.css("left")),width:e.center.width()})},_onResize:function(){var t=this,i=this.options,r=t.layout.height(),n=0,a=e(window).height(),o=null;if("string"==typeof i.height&&i.height.indexOf("%")>0){var l=t.layout.parent();i.inWindow||"body"==l[0].tagName.toLowerCase()?(o=a,o-=parseInt(e("body").css("paddingTop")),o-=parseInt(e("body").css("paddingBottom"))):o=l.height(),n=o*parseFloat(i.height)*.01,(i.inWindow||"body"==l[0].tagName.toLowerCase())&&(n-=t.layout.offset().top-parseInt(e("body").css("paddingTop")))}else n=parseInt(i.height);if(n+=i.heightDiff,t.layout.height(n),t.layoutHeight=t.layout.height(),t.middleWidth=t.layout.width(),t.middleHeight=t.layout.height(),t.top&&(t.middleHeight-=t.top.height(),t.middleHeight-=parseInt(t.top.css("borderTopWidth")),t.middleHeight-=parseInt(t.top.css("borderBottomWidth")),t.middleHeight-=i.space),t.bottom&&(t.middleHeight-=t.bottom.height(),t.middleHeight-=parseInt(t.bottom.css("borderTopWidth")),t.middleHeight-=parseInt(t.bottom.css("borderBottomWidth")),t.middleHeight-=i.space),t.middleHeight-=2,t.hasBind("heightChanged")&&t.layoutHeight!=r&&t.trigger("heightChanged",[{layoutHeight:t.layoutHeight,diff:t.layoutHeight-r,middleHeight:t.middleHeight}]),t.center){t.centerWidth=t.middleWidth,t.left&&(t.isLeftCollapse?(t.centerWidth-=t.leftCollapse.width(),t.centerWidth-=parseInt(t.leftCollapse.css("borderLeftWidth")),t.centerWidth-=parseInt(t.leftCollapse.css("borderRightWidth")),t.centerWidth-=parseInt(t.leftCollapse.css("left")),t.centerWidth-=i.space):(t.centerWidth-=t.leftWidth,t.centerWidth-=parseInt(t.left.css("borderLeftWidth")),t.centerWidth-=parseInt(t.left.css("borderRightWidth")),t.centerWidth-=parseInt(t.left.css("left")),t.centerWidth-=i.space)),t.right&&(t.isRightCollapse?(t.centerWidth-=t.rightCollapse.width(),t.centerWidth-=parseInt(t.rightCollapse.css("borderLeftWidth")),t.centerWidth-=parseInt(t.rightCollapse.css("borderRightWidth")),t.centerWidth-=parseInt(t.rightCollapse.css("right")),t.centerWidth-=i.space):(t.centerWidth-=t.rightWidth,t.centerWidth-=parseInt(t.right.css("borderLeftWidth")),t.centerWidth-=parseInt(t.right.css("borderRightWidth")),t.centerWidth-=i.space)),t.centerLeft=0,t.left&&(t.isLeftCollapse?(t.centerLeft+=t.leftCollapse.width(),t.centerLeft+=parseInt(t.leftCollapse.css("borderLeftWidth")),t.centerLeft+=parseInt(t.leftCollapse.css("borderRightWidth")),t.centerLeft+=parseInt(t.leftCollapse.css("left")),t.centerLeft+=i.space):(t.centerLeft+=t.left.width(),t.centerLeft+=parseInt(t.left.css("borderLeftWidth")),t.centerLeft+=parseInt(t.left.css("borderRightWidth")),t.centerLeft+=i.space)),t.center.css({left:t.centerLeft}),t.centerWidth>=0&&t.center.width(t.centerWidth),t.middleHeight>=0&&t.center.height(t.middleHeight);var s=t.middleHeight;t.center.header&&(s-=t.center.header.height()),s>=0&&t.center.content.height(s),t._updateCenterBottom(!0)}t.left&&(t.leftCollapse.height(t.middleHeight),t.left.height(t.middleHeight)),t.right&&(t.rightCollapse.height(t.middleHeight),t.right.height(t.middleHeight),t.rightLeft=0,t.left&&(t.isLeftCollapse?(t.rightLeft+=t.leftCollapse.width(),t.rightLeft+=parseInt(t.leftCollapse.css("borderLeftWidth")),t.rightLeft+=parseInt(t.leftCollapse.css("borderRightWidth")),t.rightLeft+=i.space):(t.rightLeft+=t.left.width(),t.rightLeft+=parseInt(t.left.css("borderLeftWidth")),t.rightLeft+=parseInt(t.left.css("borderRightWidth")),t.rightLeft+=parseInt(t.left.css("left")),t.rightLeft+=i.space)),t.center&&(t.rightLeft+=t.center.width(),t.rightLeft+=parseInt(t.center.css("borderLeftWidth")),t.rightLeft+=parseInt(t.center.css("borderRightWidth")),t.rightLeft+=i.space),t.right.css({left:t.rightLeft})),t.bottom&&(t.bottomTop=t.layoutHeight-t.bottom.height()-2,t.bottom.css({top:t.bottomTop})),t._setDropHandlePosition()},_updateCenterBottom:function(e){var t=this,i=this.options;if(t.centerBottom){if(e){var r=t.centerBottomHeight||i.centerBottomHeight;t.centerBottom.css({left:t.centerLeft}),t.centerWidth>=0&&t.centerBottom.width(t.centerWidth);var n=t.center.height(),a=parseInt(t.center.css("top"));t.centerBottom.height(r),t.centerBottom.css({top:a+n-r+2}),t.center.height(n-r-2)}var o=parseInt(t.center.css("left"));t.centerBottom.width(t.center.width()).css({left:o})}},_start:function(t,i){var r=this;this.options;if(r.dragtype=t,"leftresize"==t||"rightresize"==t)r.xresize={startX:i.pageX},r.draggingyline.css({left:i.pageX-r.layout.offset().left,height:r.middleHeight,top:r.middleTop}).show(),e("body").css("cursor","col-resize"),r.mask.height(r.layout.height()).removeClass("l-layout-ymask").addClass("l-layout-xmask").show();else if("topresize"==t||"bottomresize"==t)r.yresize={startY:i.pageY},r.draggingxline.css({top:i.pageY-r.layout.offset().top,width:r.layout.width()}).show(),e("body").css("cursor","row-resize"),r.mask.height(r.layout.height()).removeClass("l-layout-xmask").addClass("l-layout-ymask").show();else{if("centerbottomresize"!=t)return;r.yresize={startY:i.pageY},r.draggingxline.css({top:i.pageY-r.layout.offset().top,width:r.layout.width()}).show(),e("body").css("cursor","row-resize"),r.mask.height(r.layout.height()).removeClass("l-layout-xmask").addClass("l-layout-ymask").show()}r.layout.lock.width(r.layout.width()),r.layout.lock.height(r.layout.height()),r.layout.lock.show(),(e.browser.msie||e.browser.safari)&&e("body").bind("selectstart",function(){return!1}),e(document).bind("mouseup",function(){r._stop.apply(r,arguments)}),e(document).bind("mousemove",function(){r._drag.apply(r,arguments)})},_drag:function(t){var i=this;this.options;i.xresize?(i.xresize.diff=t.pageX-i.xresize.startX,i.draggingyline.css({left:t.pageX-i.layout.offset().left}),e("body").css("cursor","col-resize")):i.yresize&&(i.yresize.diff=t.pageY-i.yresize.startY,i.draggingxline.css({top:t.pageY-i.layout.offset().top}),e("body").css("cursor","row-resize"))},_stop:function(t){var i,r=this,n=this.options;if(r.xresize&&void 0!=r.xresize.diff){if(i=r.xresize.diff,"leftresize"==r.dragtype){if(n.minLeftWidth&&r.leftWidth+r.xresize.diff<n.minLeftWidth)return;r.leftWidth+=r.xresize.diff,r.left.width(r.leftWidth),r.center?r.center.width(r.center.width()-r.xresize.diff).css({left:parseInt(r.center.css("left"))+r.xresize.diff}):r.right&&r.right.width(r.left.width()-r.xresize.diff).css({left:parseInt(r.right.css("left"))+r.xresize.diff})}else if("rightresize"==r.dragtype){if(n.minRightWidth&&r.rightWidth-r.xresize.diff<n.minRightWidth)return;r.rightWidth-=r.xresize.diff,r.right.width(r.rightWidth).css({left:parseInt(r.right.css("left"))+r.xresize.diff}),r.center?r.center.width(r.center.width()+r.xresize.diff):r.left&&r.left.width(r.left.width()+r.xresize.diff)}r._updateCenterBottom()}else if(r.yresize&&void 0!=r.yresize.diff)if(i=r.yresize.diff,"topresize"==r.dragtype)r.top.height(r.top.height()+r.yresize.diff),r.middleTop+=r.yresize.diff,r.middleHeight-=r.yresize.diff,r.left&&(r.left.css({top:r.middleTop}).height(r.middleHeight),r.leftCollapse.css({top:r.middleTop}).height(r.middleHeight)),r.center&&r.center.css({top:r.middleTop}).height(r.middleHeight),r.right&&(r.right.css({top:r.middleTop}).height(r.middleHeight),r.rightCollapse.css({top:r.middleTop}).height(r.middleHeight)),r._updateCenterBottom(!0);else if("bottomresize"==r.dragtype)r.bottom.height(r.bottom.height()-r.yresize.diff),r.middleHeight+=r.yresize.diff,r.bottomTop+=r.yresize.diff,r.bottom.css({top:r.bottomTop}),r.left&&(r.left.height(r.middleHeight),r.leftCollapse.height(r.middleHeight)),r.center&&r.center.height(r.middleHeight),r.right&&(r.right.height(r.middleHeight),r.rightCollapse.height(r.middleHeight)),r._updateCenterBottom(!0);else if("centerbottomresize"==r.dragtype){r.centerBottomHeight=r.centerBottomHeight||n.centerBottomHeight,r.centerBottomHeight-=r.yresize.diff;var a=parseInt(r.centerBottom.css("top"));r.centerBottom.css("top",a+r.yresize.diff),r.centerBottom.height(r.centerBottom.height()-r.yresize.diff),r.center.height(r.center.height()+r.yresize.diff)}r.trigger("endResize",[{direction:r.dragtype?r.dragtype.replace(/resize/,""):"",diff:i},t]),r._setDropHandlePosition(),r.draggingxline.hide(),r.draggingyline.hide(),r.mask.hide(),r.xresize=r.yresize=r.dragtype=!1,r.layout.lock.hide(),(e.browser.msie||e.browser.safari)&&e("body").unbind("selectstart"),e(document).unbind("mousemove",r._drag),e(document).unbind("mouseup",r._stop),e("body").css("cursor","")}})}(jQuery),function(e){e.fn.ligerListBox=function(t){return e.ligerui.run.call(this,"ligerListBox",arguments)},e.ligerDefaults.ListBox={isMultiSelect:!1,isShowCheckBox:!1,columns:null,width:150,height:100,onSelect:!1,onSelected:null,valueField:"id",textField:"text",valueFieldID:null,split:";",data:null,parms:null,url:null,urlParms:null,ajaxContentType:null,ajaxType:"post",onSuccess:null,onError:null,render:null,css:null,value:null,valueFieldCssClass:null},e.ligerMethos.ListBox=e.ligerMethos.ListBox||{},e.ligerui.controls.ListBox=function(t,i){e.ligerui.controls.ListBox.base.constructor.call(this,t,i)},e.ligerui.controls.ListBox.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"ListBox"},_extendMethods:function(){return e.ligerMethos.ListBox},_init:function(){e.ligerui.controls.ListBox.base._init.call(this)},_render:function(){var t=this,i=this.options;t.data=i.data,t.valueField=null,e(this.element).is(":hidden")||e(this.element).is(":text")?(t.valueField=e(this.element),e(this.element).is(":text")&&t.valueField.hide()):i.valueFieldID?(t.valueField=e("#"+i.valueFieldID+":input,[name="+i.valueFieldID+"]:input"),0==t.valueField.length&&(t.valueField=e('<input type="hidden"/>')),t.valueField[0].id=t.valueField[0].name=i.valueFieldID):(t.valueField=e('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.id+"_val"),null==t.valueField[0].name&&(t.valueField[0].name=t.valueField[0].id),i.valueFieldCssClass&&t.valueField.addClass(i.valueFieldCssClass),t.valueField.attr("data-ligerid",t.id),e(this.element).is(":hidden")||e(this.element).is(":text")?t.selectBox=e("<div></div>").insertBefore(this.element):t.selectBox=e(this.element),t.selectBox.html('<div class="l-listbox-inner"><table cellpadding="0" cellspacing="0" border="0" class="l-listbox-table"></table></div>').addClass("l-listbox").append(t.valueField),t.selectBox.table=e("table:first",t.selectBox),t.set(i),t._addClickEven()},destroy:function(){this.selectBox&&this.selectBox.remove(),this.options=null,e.ligerui.remove(this)},clear:function(){this._changeValue(""),this.trigger("clear")},_setIsShowCheckBox:function(t){t?e("table",this.selectBox).addClass("l-table-checkbox"):e("table",this.selectBox).addClass("l-table-nocheckbox")},_setCss:function(e){e&&this.selectBox.addClass(e)},_setDisabled:function(e){e?this.selectBox.addClass("l-text-disabled"):this.selectBox.removeClass("l-text-disabled")},_setWidth:function(e){this.selectBox.width(e)},_setHeight:function(e){this.selectBox.height(e)},getText:function(){var e=this.getValue();return this.findTextByValue(e)},findTextByValue:function(t){var i=this,r=this.options;if(null==t||""==t)return"";var n=[],a=function(e){for(var i=t.toString().split(r.split),n=0;n<i.length;n++)if(i[n]==e)return!0;return!1};return e(i.data).each(function(e,t){var i=t[r.valueField],o=t[r.textField];a(i)&&n.push(o)}),n.join(r.split)},getDataByValue:function(e){for(var t=this,i=this.options,r=0,n=t.data.length;n>r;r++)if(t.data[r][i.valueField]==e)return t.data[r];return null},indexOf:function(e){var t=this,i=this.options;if(!t.data)return-1;for(var r="object"==typeof e,n=0,a=t.data.length;a>n;n++)if(r){if(t.data[n]==e)return n}else if(t.data[n][i.valueField]&&t.data[n][i.valueField].toString()==e.toString())return n;return-1},removeItems:function(t){var i=this;i.data&&(e(t).each(function(e,t){var r=i.indexOf(t);-1!=r&&i.data.splice(r,1)}),i.refresh())},removeItem:function(e){if(this.data){var t=this.indexOf(e);-1!=t&&(this.data.splice(t,1),this.refresh())}},insertItem:function(e,t){var i=this;i.data||(i.data=[]),i.data.splice(t,0,e),i.refresh()},addItems:function(t){var i=this;i.data||(i.data=[]),e(t).each(function(e,t){i.data.push(t)}),i.refresh()},addItem:function(e){var t=this;t.data||(t.data=[]),t.data.push(e),t.refresh()},getSelectedItems:function(){var t=this,i=this.options;if(!t.data)return null;var r=t.getValue();if(!r)return null;var n=[];return e(r.split(i.split)).each(function(){var e=t.indexOf(this.toString());-1!=e&&n.push(t.data[e])}),n},_setValue:function(e){var t=this.options;t.value=e,this._dataInit()},setValue:function(e){this._setValue(e)},_setUrl:function(t){if(t){var i=this,r=this.options,n=e.isFunction(r.urlParms)?r.urlParms.call(i):r.urlParms;if(n)for(name in n)t+=-1==t.indexOf("?")?"?":"&",t+=name+"="+n[name];var a=e.isFunction(r.parms)?r.parms():r.parms;"application/json"==r.ajaxContentType&&"string"!=typeof a&&(a=liger.toJSON(a));var o={type:r.ajaxType||"post",url:t,data:a,cache:!1,dataType:"json",success:function(e){i.setData(e),i.trigger("success",[e])},error:function(e,t){i.trigger("error",[e,t])}};r.ajaxContentType&&(o.contentType=r.ajaxContentType),e.ajax(o)}},reload:function(){this.set("url",this.options.url)},setUrl:function(e){return this._setUrl(e)},setParm:function(e,t){if(e){var i=this,r=i.get("parms");r||(r={}),r[e]=t,i.set("parms",r)}},clearContent:function(){var t=this;this.options;e("table",t.selectBox).html("")},_setColumns:function(e){var t=this,i=this.options;i.columns=e,t.refresh()},_setData:function(e){this.setData(e)},setData:function(e){var t=this;this.options;e&&e.length&&(t.data=e,t.refresh(),t.updateStyle())},refresh:function(){var t=this,i=this.options,r=this.data;if(this.clearContent(),r){if(i.columns){t.selectBox.table.headrow=e("<tr class='l-table-headerow'><td width='18px' class='l-checkboxrow'></td></tr>"),t.selectBox.table.append(t.selectBox.table.headrow),t.selectBox.table.addClass("l-listbox-grid");for(var n=0;n<i.columns.length;n++){var a=e("<td columnindex='"+n+"' columnname='"+i.columns[n].name+"'>"+i.columns[n].header+"</td>");i.columns[n].width&&a.width(i.columns[n].width),t.selectBox.table.headrow.append(a)}}for(var o=[],l=0;l<r.length;l++){var s=r[l][i.valueField],d=r[l][i.textField],c=" value='"+s+"' index='"+l+"'";if(i.columns){o.push("<tr "+c+"><td style='width:18px;' class='l-checkboxrow'><input type='checkbox' "+c+"/></td>");for(var n=0;n<i.columns.length;n++){var u=i.columns[n].name;o.push("<td>"+r[l][u]+"</td>")}o.push("</tr>")}else{o.push("<tr "+c+">"),o.push("<td style='width:18px;' class='l-checkboxrow'><input type='checkbox'"+c+"/></td>");var h=d;i.render&&(h=i.render({data:r[l],value:s,text:d})),o.push("<td align='left'>"+h+"</td></tr>")}}t.selectBox.table.append(o.join(""))}},_getValue:function(){return e(this.valueField).val()},getValue:function(){return this._getValue()},updateStyle:function(){this._dataInit()},selectAll:function(){var t=this,i=this.options,r=[];e("tr",t.selectBox).each(function(){var t=e(this);r.push(t.attr("value"))}),e("tr",t.selectBox).addClass("l-selected").find(":checkbox").each(function(){this.checked=!0}),t.valueField.val(r.join(i.split))},_dataInit:function(){var t=this,i=this.options,r=i.value;null!=r?t._changeValue(r):""!=t.valueField.val()&&(i.value=t.valueField.val());var n=(r||"").toString().split(i.split);e("tr.l-selected",t.selectBox).removeClass("l-selected").find(":checkbox").each(function(){this.checked=!1}),e(n).each(function(i,r){e("tr[value='"+r+"']",t.selectBox).addClass("l-selected").find(":checkbox").each(function(){this.checked=!0})})},_changeValue:function(e){var t=this;this.options;t.valueField.val(e),t.selectedValue=e},_updateValue:function(){var t=this,i=this.options,r=[];e("tr",t.selectBox).each(function(){var t=e(this);t.hasClass("l-selected")&&r.push(t.attr("value"))}),t._changeValue(r.join(i.split))},_addClickEven:function(){var t=this,i=this.options;t.selectBox.click(function(r){var n=r.target||r.srcElement,a=e(n).parents("tr:first");if(a.length){var o=a.attr("value"),l=t.findTextByValue(o),s=t.getDataByValue(o);if(t.hasBind("select")&&0==t.trigger("select",[o,l,s]))return!1;i.isMultiSelect||e("tr.l-selected",t.selectBox).not(a).removeClass("l-selected").find(":checkbox").each(function(){this.checked=!1}),a.hasClass("l-selected")?a.removeClass("l-selected"):a.addClass("l-selected"),a.find(":checkbox").each(function(){this.checked=a.hasClass("l-selected")}),t._updateValue(),t.trigger("selected",[o,l,s])}})}})}(jQuery),function(e){e.ligerMenu=function(t){return e.ligerui.run.call(null,"ligerMenu",arguments)},e.ligerDefaults.Menu={width:120,top:0,left:0,cls:null,items:null,shadow:!0},e.ligerMethos.Menu={},e.ligerui.controls.Menu=function(t){e.ligerui.controls.Menu.base.constructor.call(this,null,t)},e.ligerui.controls.Menu.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Menu"},__idPrev:function(){return"Menu"},_extendMethods:function(){return e.ligerMethos.Menu},_render:function(){var t=this,i=this.options;t.menuItemCount=0,t.menus={},t.menu=t.createMenu(),t.element=t.menu[0],t.menu.css({top:i.top,left:i.left,width:i.width}),i.cls&&t.menu.addClass(i.cls),i.items&&e(i.items).each(function(e,i){t.addItem(i)}),e(document).bind("click.menu",function(){for(var e in t.menus){var i=t.menus[e];if(!i)return;i.hide(),i.shadow&&i.shadow.hide()}}),t.set(i)},show:function(e,t){var i=this;this.options;void 0==t&&(t=i.menu),e&&void 0!=e.left&&t.css({left:e.left}),e&&void 0!=e.top&&t.css({
top:e.top}),t.show(),i.updateShadow(t)},updateShadow:function(e){var t=this.options;t.shadow&&(e.shadow.css({left:e.css("left"),top:e.css("top"),width:e.outerWidth(),height:e.outerHeight()}),e.is(":visible")?e.shadow.show():e.shadow.hide())},hide:function(e){var t=this;this.options;void 0==e&&(e=t.menu),t.hideAllSubMenu(e),e.hide(),t.updateShadow(e)},toggle:function(){var e=this;this.options;e.menu.toggle(),e.updateShadow(e.menu)},removeItem:function(t){var i=this;this.options;e("> .l-menu-item[menuitemid="+t+"]",i.menu.items).remove()},setEnabled:function(t){var i=this;this.options;e("> .l-menu-item[menuitemid="+t+"]",i.menu.items).removeClass("l-menu-item-disable")},setMenuText:function(t,i){var r=this;this.options;e("> .l-menu-item[menuitemid="+t+"] >.l-menu-item-text:first",r.menu.items).html(i)},setDisabled:function(t){var i=this;this.options;e("> .l-menu-item[menuitemid="+t+"]",i.menu.items).addClass("l-menu-item-disable")},isEnable:function(t){var i=this;this.options;return!e("> .l-menu-item[menuitemid="+t+"]",i.menu.items).hasClass("l-menu-item-disable")},getItemCount:function(){var t=this;this.options;return e("> .l-menu-item",t.menu.items).length},addItem:function(t,i){var r=this,n=this.options;if(t){if(void 0==i&&(i=r.menu),t.line)return void i.items.append('<div class="l-menu-item-line"></div>');var a=e('<div class="l-menu-item"><div class="l-menu-item-text"></div> </div>'),o=e("> .l-menu-item",i.items).length;if(i.items.append(a),a.attr("ligeruimenutemid",++r.menuItemCount),t.id&&a.attr("menuitemid",t.id),t.text&&e(">.l-menu-item-text:first",a).html(t.text),t.icon&&a.prepend('<div class="l-menu-item-icon l-icon-'+t.icon+'"></div>'),t.img&&a.prepend('<div class="l-menu-item-icon"><img style="width:16px;height:16px;margin:2px;" src="'+t.img+'" /></div>'),(t.disable||t.disabled)&&a.addClass("l-menu-item-disable"),t.children){a.append('<div class="l-menu-item-arrow"></div>');var l=r.createMenu(a.attr("ligeruimenutemid"));r.menus[a.attr("ligeruimenutemid")]=l,l.width(n.width),l.hover(null,function(){l.showedSubMenu||r.hide(l)}),e(t.children).each(function(){r.addItem(this,l)})}t.click&&a.click(function(){e(this).hasClass("l-menu-item-disable")||t.click(t,o)}),t.dblclick&&a.dblclick(function(){e(this).hasClass("l-menu-item-disable")||t.dblclick(t,o)});var s=e("> .l-menu-over:first",i);a.hover(function(){if(!e(this).hasClass("l-menu-item-disable")){var n=e(this).offset().top,a=n-i.offset().top;if(s.css({top:a}),r.hideAllSubMenu(i),t.children){var o=e(this).attr("ligeruimenutemid");if(!o)return;r.menus[o]&&(r.show({top:n,left:e(this).offset().left+e(this).width()-5},r.menus[o]),i.showedSubMenu=!0)}}},function(){if(!e(this).hasClass("l-menu-item-disable")){var i=e(this).attr("ligeruimenutemid");if(t.children){var i=e(this).attr("ligeruimenutemid");if(!i)return}}})}},hideAllSubMenu:function(t){var i=this;this.options;void 0==t&&(t=i.menu),e("> .l-menu-item",t.items).each(function(){if(e("> .l-menu-item-arrow",this).length>0){var t=e(this).attr("ligeruimenutemid");if(!t)return;i.menus[t]&&i.hide(i.menus[t])}}),t.showedSubMenu=!1},createMenu:function(t){var i=this,r=this.options,n=e('<div class="l-menu" style="display:none"><div class="l-menu-yline"></div><div class="l-menu-over"><div class="l-menu-over-l"></div> <div class="l-menu-over-r"></div></div><div class="l-menu-inner"></div></div>');return t&&n.attr("ligeruiparentmenuitemid",t),n.items=e("> .l-menu-inner:first",n),n.appendTo("body"),r.shadow&&(n.shadow=e('<div class="l-menu-shadow"></div>').insertAfter(n),i.updateShadow(n)),n.hover(null,function(){n.showedSubMenu||e("> .l-menu-over:first",n).css({top:-24})}),t?i.menus[t]=n:i.menus[0]=n,n}}),e.ligerui.controls.Menu.prototype.setEnable=e.ligerui.controls.Menu.prototype.setEnabled,e.ligerui.controls.Menu.prototype.setDisable=e.ligerui.controls.Menu.prototype.setDisabled}(jQuery),function(e){e.fn.ligerMenuBar=function(t){return e.ligerui.run.call(this,"ligerMenuBar",arguments)},e.fn.ligerGetMenuBarManager=function(){return e.ligerui.run.call(this,"ligerGetMenuBarManager",arguments)},e.ligerDefaults.MenuBar={},e.ligerMethos.MenuBar={},e.ligerui.controls.MenuBar=function(t,i){e.ligerui.controls.MenuBar.base.constructor.call(this,t,i)},e.ligerui.controls.MenuBar.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"MenuBar"},__idPrev:function(){return"MenuBar"},_extendMethods:function(){return e.ligerMethos.MenuBar},_render:function(){var t=this,i=this.options;t.menubar=e(this.element),t.menubar.hasClass("l-menubar")||t.menubar.addClass("l-menubar"),i&&i.items&&e(i.items).each(function(e,i){t.addItem(i)}),e(document).click(function(){e(".l-panel-btn-selected",t.menubar).removeClass("l-panel-btn-selected")}),t.set(i)},addItem:function(t){var i=this,r=(this.options,e('<div class="l-menubar-item l-panel-btn"><span></span><div class="l-panel-btn-l"></div><div class="l-panel-btn-r"></div><div class="l-menubar-item-down"></div></div>'));if(i.menubar.append(r),t.id&&r.attr("menubarid",t.id),t.text&&e("span:first",r).html(t.text),t.disable&&r.addClass("l-menubar-item-disable"),t.click&&r.click(function(){t.click(t)}),t.menu){var n=e.ligerMenu(t.menu);r.hover(function(){i.actionMenu&&i.actionMenu.hide();var t=e(this).offset().left,r=e(this).offset().top+e(this).height();n.show({top:r,left:t}),i.actionMenu=n,e(this).addClass("l-panel-btn-over l-panel-btn-selected").siblings(".l-menubar-item").removeClass("l-panel-btn-selected")},function(){e(this).removeClass("l-panel-btn-over")})}else r.hover(function(){e(this).addClass("l-panel-btn-over")},function(){e(this).removeClass("l-panel-btn-over")}),e(".l-menubar-item-down",r).remove()}})}(jQuery),function(e){e.ligerMessageBox=function(t){return e.ligerui.run.call(null,"ligerMessageBox",arguments,{isStatic:!0})},e.ligerDefaults.MessageBox={isDrag:!0},e.ligerMethos.MessageBox={},e.ligerui.controls.MessageBox=function(t){e.ligerui.controls.MessageBox.base.constructor.call(this,null,t)},e.ligerui.controls.MessageBox.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"MessageBox"},__idPrev:function(){return"MessageBox"},_extendMethods:function(){return e.ligerMethos.MessageBox},_render:function(){var t=this,i=this.options,r="";r+='<div class="l-messagebox">',r+='        <div class="l-messagebox-lt"></div><div class="l-messagebox-rt"></div>',r+='        <div class="l-messagebox-l"></div><div class="l-messagebox-r"></div> ',r+='        <div class="l-messagebox-image"></div>',r+='        <div class="l-messagebox-title">',r+='            <div class="l-messagebox-title-inner"></div>',r+='            <div class="l-messagebox-close"></div>',r+="        </div>",r+='        <div class="l-messagebox-content">',r+="        </div>",r+='        <div class="l-messagebox-buttons"><div class="l-messagebox-buttons-inner">',r+="        </div></div>",r+="    </div>",t.messageBox=e(r),e("body").append(t.messageBox),t.messageBox.close=function(){t._removeWindowMask(),t.messageBox.remove()},i.width&&t.messageBox.width(i.width),i.title&&e(".l-messagebox-title-inner",t.messageBox).html(i.title),i.content&&e(".l-messagebox-content",t.messageBox).html(i.content),i.buttons&&(e(i.buttons).each(function(i,r){var n=e('<div class="l-messagebox-btn"><div class="l-messagebox-btn-l"></div><div class="l-messagebox-btn-r"></div><div class="l-messagebox-btn-inner"></div></div>');e(".l-messagebox-btn-inner",n).html(r.text),e(".l-messagebox-buttons-inner",t.messageBox).append(n),r.width&&n.width(r.width),r.onclick&&n.click(function(){r.onclick(r,i,t.messageBox)})}),e(".l-messagebox-buttons-inner",t.messageBox).append("<div class='l-clear'></div>"));var n=t.messageBox.width(),a=0;e(".l-messagebox-buttons-inner .l-messagebox-btn",t.messageBox).each(function(){a+=e(this).width()}),e(".l-messagebox-buttons-inner",t.messageBox).css({marginLeft:parseInt(.5*(n-a))}),t._applyWindowMask(),t._applyDrag(),t._setImage();var o=0,l=0,s=i.width||t.messageBox.width();null!=i.left?o=i.left:i.left=o=.5*(e(window).width()-s),null!=i.top?l=i.top:i.top=l=.5*(e(window).height()-t.messageBox.height())+e(window).scrollTop()-10,0>o&&(i.left=o=0),0>l&&(i.top=l=0),t.messageBox.css({left:o,top:l}),e(".l-messagebox-btn",t.messageBox).hover(function(){e(this).addClass("l-messagebox-btn-over")},function(){e(this).removeClass("l-messagebox-btn-over")}),e(".l-messagebox-close",t.messageBox).hover(function(){e(this).addClass("l-messagebox-close-over")},function(){e(this).removeClass("l-messagebox-close-over")}).click(function(){t.messageBox.close()}),t.set(i)},close:function(){this.options;this.g._removeWindowMask(),this.messageBox.remove()},_applyWindowMask:function(){this.options;e(".l-window-mask").remove(),e("<div class='l-window-mask' style='display: block;'></div>").appendTo(e("body"))},_removeWindowMask:function(){this.options;e(".l-window-mask").remove()},_applyDrag:function(){var t=this,i=this.options;i.isDrag&&e.fn.ligerDrag&&t.messageBox.ligerDrag({handler:".l-messagebox-title-inner",animate:!1})},_setImage:function(){var t=this,i=this.options;i.type&&("success"==i.type||"donne"==i.type?(e(".l-messagebox-image",t.messageBox).addClass("l-messagebox-image-donne").show(),e(".l-messagebox-content",t.messageBox).css({paddingLeft:64,paddingBottom:30})):"error"==i.type?(e(".l-messagebox-image",t.messageBox).addClass("l-messagebox-image-error").show(),e(".l-messagebox-content",t.messageBox).css({paddingLeft:64,paddingBottom:30})):"warn"==i.type?(e(".l-messagebox-image",t.messageBox).addClass("l-messagebox-image-warn").show(),e(".l-messagebox-content",t.messageBox).css({paddingLeft:64,paddingBottom:30})):"question"==i.type&&(e(".l-messagebox-image",t.messageBox).addClass("l-messagebox-image-question").show(),e(".l-messagebox-content",t.messageBox).css({paddingLeft:64,paddingBottom:40})))}}),e.ligerMessageBox.show=function(t){return e.ligerMessageBox(t)},e.ligerMessageBox.alert=function(t,i,r,n){t=t||"",i=i||t;var a=function(e,t,i){i.close(),n&&n(e,t,i)};return p={title:t,content:i,buttons:[{text:"ç¡®å®",onclick:a}]},r&&(p.type=r),e.ligerMessageBox(p)},e.ligerMessageBox.confirm=function(t,i,r){var n=function(e,t,i){i.close(),r&&r(0==t)};return p={type:"question",title:t,content:i,buttons:[{text:"æ¯",onclick:n},{text:"å¦",onclick:n}]},e.ligerMessageBox(p)},e.ligerMessageBox.success=function(t,i,r){return e.ligerMessageBox.alert(t,i,"success",r)},e.ligerMessageBox.error=function(t,i,r){return e.ligerMessageBox.alert(t,i,"error",r)},e.ligerMessageBox.warn=function(t,i,r){return e.ligerMessageBox.alert(t,i,"warn",r)},e.ligerMessageBox.question=function(t,i){return e.ligerMessageBox.alert(t,i,"question")}}(jQuery),function(e){e.fn.ligerPanel=function(t){return e.ligerui.run.call(this,"ligerPanel",arguments)},e.ligerDefaults.Panel={width:400,height:300,title:"Panel",content:null,url:null,urlParms:null,frameName:null,data:null,showClose:!1,showToggle:!0,showRefresh:!1,icon:null,onClose:null,onClosed:null,onLoaded:null,onToggle:null},e.ligerDefaults.PanelString={refreshMessage:"å·æ°",closeMessage:"å³é­",expandMessage:"å±å¼",collapseMessage:"æ¶èµ·"},e.ligerMethos.Panel={},e.ligerui.controls.Panel=function(t,i){e.ligerui.controls.Panel.base.constructor.call(this,t,i)},e.ligerui.controls.Panel.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Panel"},__idPrev:function(){return"Panel"},_extendMethods:function(){return e.ligerMethos.Panel},_init:function(){var t=this,i=this.options;e.ligerui.controls.Panel.base._init.call(this),i.content=i.content||e(t.element).html()},_render:function(){var t=this,i=this.options;t.panel=e(t.element).addClass("l-panel").html(""),t.panel.append('<div class="l-panel-header"><span></span><div class="icons"></div></div><div class="l-panel-content"></div>'),t.set(i),t.panel.find(".l-panel-header").hover(function(){e(this).addClass("l-panel-header-hover")},function(){e(this).removeClass("l-panel-header-hover")}),t.panel.bind("click.panel",function(i){var r=i.target||i.srcElement,n=e(r);if(n.hasClass("l-panel-header-toggle")){var a=!t.panel.find(".l-panel-header .l-panel-header-toggle:first").hasClass("l-panel-header-toggle-hide");t.toggle(),t.trigger("toggle",[a])}else n.hasClass("l-panel-header-close")?t.close():n.hasClass("l-panel-header-refresh")&&t.refresh()})},_setChildren:function(t){var i=this,r=(this.options,{input:["textbox","combobox","select"]}),n={grid:"ligerGrid",toolbar:"ligerToolBar",tree:"ligerTree",form:"ligerForm",menu:"ligerMenu",menubar:"ligerMenuBar",portal:"ligerPortal",combobox:"ligerComboBox",textbox:"ligerTextBox",spinner:"ligerSpinner",listbox:"ligerListBox",checkbox:"ligerCheckBox",radio:"ligerRadio",checkboxlist:"ligerCheckBoxList",radiolist:"ligerRadioList",popupedit:"ligerPopupEdit",button:"ligerButton",dateeditor:"ligerDateEditor",dialog:"ligerDialog",panel:"ligerPanel",layout:"ligerLayout",accordion:"ligerAccordion",tab:"ligerTab"};if(t&&t.length)for(var a=0;a<t.length;a++){var o=t[a],l=o.type,s=r[l]||"div",d=n[l];if(d){var c=document.createElement(s);i.panel.find(".l-panel-content").append(c);var u=e.extend({},o);u.type=null,e(c)[d](u)}}},collapse:function(){var e=this,t=(this.options,e.panel.find(".l-panel-header .l-panel-header-toggle:first"));t.hasClass("l-panel-header-toggle-hide")||e.toggle()},expand:function(){var e=this,t=(this.options,e.panel.find(".l-panel-header .l-panel-header-toggle:first"));t.hasClass("l-panel-header-toggle-hide")&&e.toggle()},toggle:function(){var e=this,t=this.options,i=e.panel.find(".l-panel-header .l-panel-header-toggle:first");i.hasClass("l-panel-header-toggle-hide")?(i.removeClass("l-panel-header-toggle-hide"),i.attr("title",t.collapseMessage)):(i.addClass("l-panel-header-toggle-hide"),i.attr("title",t.expandMessage)),e.panel.find(".l-panel-content:first").toggle()},refresh:function(){var e=this,t=this.options;e.set("url",t.url)},_setShowToggle:function(t){var i=this,r=this.options,n=i.panel.find(".l-panel-header:first");if(t){var a=e("<a class='l-panel-icon l-panel-header-toggle'></a>");a.appendTo(n.find(".icons")),a.attr("title",r.collapseMessage)}else n.find(".l-panel-header-toggle").remove()},_setContent:function(e){var t=this,i=(this.options,t.panel.find(".l-panel-content:first"));e&&i.html(e)},_setUrl:function(t){var i=this,r=this.options,n=i.panel.find(".l-panel-content:first");if(t){var a=e.isFunction(r.urlParms)?r.urlParms.call(i):r.urlParms;if(a)for(name in a)t+=-1==t.indexOf("?")?"?":"&",t+=name+"="+a[name];if(!i.jiframe){i.jiframe=e("<iframe frameborder='0'></iframe>");var o=r.frameName?r.frameName:"ligerpanel"+(new Date).getTime();i.jiframe.attr("name",o),i.jiframe.attr("id",o),n.prepend(i.jiframe),i.jiframe[0].panel=i,i.frame=window.frames[i.jiframe.attr("name")]}setTimeout(function(){0==n.find(".l-panel-loading:first").length&&n.append("<div class='l-panel-loading' style='display:block;'></div>");var r=e(".l-panel-loading:first",n);i.jiframe.attr("src",t).bind("load.panel",function(){r.hide(),i.trigger("loaded")})},0)}},_setShowClose:function(t){var i=this,r=this.options,n=i.panel.find(".l-panel-header:first");if(t){var a=e("<a class='l-panel-icon l-panel-header-close'></a>");a.appendTo(n.find(".icons")),a.attr("title",r.closeMessage)}else n.find(".l-panel-header-close").remove()},_setShowRefresh:function(t){var i=this,r=this.options,n=i.panel.find(".l-panel-header:first");if(t){var a=e("<a class='l-panel-icon l-panel-header-refresh'></a>");a.appendTo(n.find(".icons")),a.attr("title",r.refreshMessage)}else n.find(".l-panel-header-refresh").remove()},close:function(){var e=this;this.options;0!=e.trigger("close")&&(e.panel.remove(),e.trigger("closed"))},show:function(){this.panel.show()},_setIcon:function(e){var t=this;e?(t.panel.addClass("l-panel-hasicon"),t.panel.append('<img src="'+e+'" />')):(t.panel.removeClass("l-panel-hasicon"),t.panel.find("img").remove())},_setWidth:function(e){"string"==typeof e?e.indexOf("%")>-1?this.panel.width(e):this.panel.width(parseInt(e)):this.panel.width(e)},_setHeight:function(e){var t=this,i=(this.options,t.panel.find(".l-panel-header:first"));this.panel.find(".l-panel-content:first").height(e-i.height())},_setTitle:function(e){this.panel.find(".l-panel-header span:first").text(e)}})}(jQuery),function(e){e.fn.ligerPopupEdit=function(t){return e.ligerui.run.call(this,"ligerPopupEdit",arguments)},e.fn.ligerGetPopupEditManager=function(){return e.ligerui.run.call(this,"ligerGetPopupEditManager",arguments)},e.ligerDefaults.PopupEdit={valueFieldID:null,css:null,onButtonClick:null,nullText:null,disabled:!1,method:"post",async:!0,cancelable:!0,width:200,heigth:null,render:null,split:";",data:[],grid:null,condition:null,valueField:"id",textField:"text",parms:null,onSelect:null,onSelected:null,valueFieldCssClass:null,searchClick:null},e.ligerMethos.PopupEdit=e.ligerMethos.PopupEdit||{},e.ligerui.controls.PopupEdit=function(t,i){e.ligerui.controls.PopupEdit.base.constructor.call(this,t,i)},e.ligerui.controls.PopupEdit.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"PopupEdit"},_extendMethods:function(){return e.ligerMethos.PopupEdit},_init:function(){e.ligerui.controls.PopupEdit.base._init.call(this)},_render:function(){var t=this,i=this.options;t.inputText=null,"input"==this.element.tagName.toLowerCase()&&(this.element.readOnly=!0,t.inputText=e(this.element),t.textFieldID=this.element.id),void 0==t.inputText[0].name&&(t.inputText[0].name=t.textFieldID),t.valueField=null,i.valueFieldID?(t.valueField=e("#"+i.valueFieldID+":input"),0==t.valueField.length&&(t.valueField=e('<input type="hidden"/>')),void 0==t.valueField[0].name&&(t.valueField[0].id=t.valueField[0].name=i.valueFieldID)):(t.valueField=e('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.textFieldID+"_val"),void 0==t.valueField[0].name&&(t.valueField[0].name=t.valueField[0].id),i.valueFieldCssClass&&t.valueField.addClass(i.valueFieldCssClass),t.link=e('<div class="l-trigger"><div class="l-trigger-icon"></div></div>'),t.wrapper=t.inputText.wrap('<div class="l-text l-text-popup"></div>').parent(),t.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),t.wrapper.append(t.link),t.wrapper.append(t.valueField),t.valueField.attr("data-ligerid",t.id),t.inputText.addClass("l-text-field"),t.link.hover(function(){i.disabled||(this.className="l-trigger-hover")},function(){i.disabled||(this.className="l-trigger")}).mousedown(function(){i.disabled||(this.className="l-trigger-pressed")}).mouseup(function(){i.disabled||(this.className="l-trigger-hover")}).click(function(){return i.disabled?void 0:0==t.trigger("buttonClick")?!1:void 0}),t.inputText.click(function(){i.disabled}).blur(function(){i.disabled||t.wrapper.removeClass("l-text-focus")}).focus(function(){i.disabled||t.wrapper.addClass("l-text-focus")}),t.wrapper.hover(function(){i.disabled||t.wrapper.addClass("l-text-over")},function(){i.disabled||t.wrapper.removeClass("l-text-over")}),t.set(i),t.setTextByVal(t.getValue())},destroy:function(){this.wrapper&&this.wrapper.remove(),this.options=null,e.ligerui.remove(this)},clear:function(){var e=this;this.options;e.inputText.val(""),e.valueField.val("")},_setCss:function(e){e&&this.wrapper.addClass(e)},_setCancelable:function(t){var i=this,r=this.options;!t&&i.unselect&&(i.unselect.remove(),i.unselect=null),(t||i.unselect)&&(i.unselect=e('<div class="l-trigger l-trigger-cancel"><div class="l-trigger-icon"></div></div>').hide(),i.wrapper.hover(function(){i.unselect.show()},function(){i.unselect.hide()}),!r.disabled&&r.cancelable&&i.wrapper.append(i.unselect),i.unselect.hover(function(){this.className="l-trigger-hover l-trigger-cancel"},function(){this.className="l-trigger l-trigger-cancel"}).click(function(){i.clear()}))},_setDisabled:function(e){e?this.wrapper.addClass("l-text-disabled"):this.wrapper.removeClass("l-text-disabled")},_setWidth:function(e){var t=this;e>20&&(t.wrapper.css({width:e}),t.inputText.css({width:e-20}))},_setHeight:function(e){var t=this;e>10&&(t.wrapper.height(e),t.inputText.height(e-2))},getData:function(){var t=this,i=this.options,r=[],n=e(t.valueField).val(),a=e(t.inputText).val(),o=n?n.split(i.split):null,l=a?a.split(i.split):null;return e(o).each(function(e){var t={};t[i.textField]=l[e],t[i.valueField]=o[e],r.push(t)}),r},_getText:function(){return e(this.inputText).val()},_getValue:function(){return e(this.valueField).val()},getValue:function(){return this._getValue()},getText:function(){return this._getText()},setValue:function(e,t){if(""!=e){var i=this;this.options;return arguments.length>=2?(i.setValue(e),void i.setText(t)):void i.valueField.val(e)}},setTextByVal:function(t){if(t="string"!=typeof t?t.toString:t,""!=t){var i=this,r=[],n=this.options,a=[];i.valueField.val()!=t&&i.valueField.val(t);var o=n.grid;e.isFunction(o)&&(o=o());var l=e.extend({parms:n.parms},o);if(n.data.length>0)a=n.data.Rows;else{if(l.url)return void i.loadServerData(l.url,t);a=l.data.Rows}var s=t.split(n.split);e(a).each(function(t,i){-1!=e.inArray(i[n.valueField],s)&&r.push(i[n.textField])}),r=r.join(n.split),i.setText(r)}},loadServerData:function(t,i){var r=this,n=this.options;e.isFunction(t)&&(t=t());var a={type:n.method,url:t,async:n.async,dataType:"json",success:function(t){gridData=e.extend(!0,{},t),n.data=gridData,gridData=t.Rows;var a=i.split(n.split),o=[];e(gridData).each(function(t,i){-1!=e.inArray(i[n.valueField],a)&&o.push(i[n.textField])}),o=o.join(n.split),r.setText(o)},error:function(e,t,i){}};e.ajax(a)},setText:function(e){var t=this,i=this.options;i.render?t.inputText.val(i.render(e)):t.inputText.val(e)},addValue:function(t,i){var r=this,n=this.options;if(t){var a=r.getValue(),o=r.getText();if(a){for(var l=[],s=[],d=a.split(n.split),t=t.split(n.split),i=i.split(n.split),c=0,u=t.length;u>c;c++)-1==e.inArray(t[c],d)&&(l.push(t[c]),s.push(i[c]));l.length&&(r.setValue(a+n.split+l.join(n.split)),r.setText(o+n.split+s.join(n.split)))}else r.setValue(t),r.setText(i)}},removeValue:function(t,i){var r=this,n=this.options;if(t){var a=r.getValue(),o=r.getText();if(a){for(var l=a.split(n.split),s=o.split(n.split),t=t.split(n.split),d=0,c=-1,u=t.length;u>d;d++)-1!=(c=e.inArray(t[d],l))&&(l.splice(c,1),s.splice(c,1));r.setValue(l.join(n.split)),r.setText(s.join(n.split))}}},_setGrid:function(t){if(t){var i=this,r=this.options,n=e.extend({parms:r.parms},r.grid);this.bind("buttonClick",function(){function t(){try{return i.getData()}catch(e){return null}}if(!i.popupFn){var a={grid:n,condition:r.condition,valueField:r.valueField,textField:r.textField,split:r.split,searchClick:r.searchClick,lastSelected:t(),onSelect:function(e){0!=i.trigger("select",e)&&(r.grid.checkbox?(i.addValue(e.value,e.text),i.removeValue(e.remvoeValue,e.remvoeText)):(i.setValue(e.value),i.setText(e.text)),i.trigger("selected",e))},selectInit:function(t){var n=i.getValue();return n&&r.valueField&&t[r.valueField]?-1!=e.inArray(t[r.valueField].toString(),n.split(r.split)):!1}};i.popupFn=e.ligerui.getPopupFn(a,i)}i.popupFn()})}}}),e.ligerui.getPopupFn=function(t,i){function r(){function r(e){return e=e||t.height,e-=c.height()}if(o)return l._showData(),o.show(),l.refreshSize(),void(d=l.selected.concat());var n=e("<div></div>"),c=e("<div></div>"),u=e("<div></div>");if(n.append(c).append(u),t.condition){var h=e.extend({labelWidth:60,space:20},t.condition);setTimeout(function(){s=c.ligerForm(h)},50)}else c.remove();var g=e.extend({columnWidth:120,alternatingRow:!1,frozen:!0,rownumbers:!0},t.grid,{width:"100%",height:r(),isChecked:t.selectInit,isSelected:t.selectInit,inWindow:!1});l=u.ligerGrid(g),t.condition&&setTimeout(function(){var i=e('<li style="margin-right:9px"><div></div></li>');e("ul:first",c).append(i).after('<div class="l-clear"></div>'),e("div",i).ligerButton({text:"æç´¢",click:function(){var i=s.toConditions();t.searchClick?t.searchClick({grid:l,rules:i}):l.get("url")?(l.setParm(l.conditionParmName||"condition",e.ligerui.toJSON(i)),l.reload()):l.loadData(e.ligerFilter.getFilterFunction(i))}})},100),o=e.ligerDialog.open({title:t.title,width:t.width,height:"auto",top:t.top,left:t.left,target:n,isResize:!0,cls:"l-selectorwin",onContentHeightChange:function(e){return l.set("height",r(e)),!1},onStopResize:function(){l.refreshSize()},buttons:[{text:"éæ©",onclick:function(e,t){a(),t.hide()}},{text:"åæ¶",onclick:function(e,t){t.hide()}}]}),i&&(i.includeControls=i.includeControls||[],i.includeControls.push(o)),l.refreshSize()}function n(e,i){for(var r=0;i&&i[r];r++){var n=i[r];if(n[t.valueField]==e)return!0}return!1}function a(){var i=l.selected||[],r=[],a=[],o=[];e(i).each(function(i,n){t.valueField&&r.push(n[t.valueField]),t.textField&&a.push(n[t.textField]);var s=e.extend(!0,{},this);l.formatRecord(s,!0),o.push(s)});var s=[];e(d).each(function(e,r){!n(r[t.valueField],i)&&n(r[t.valueField],l.rows)&&s.push(r)});var c=[],u=[],h=[];e(s).each(function(i,r){t.valueField&&c.push(r[t.valueField]),t.textField&&u.push(r[t.textField]);var n=e.extend(!0,{},this);l.formatRecord(n,!0),h.push(n)}),t.onSelect({value:r.join(t.split),text:a.join(t.split),data:o,remvoeValue:c.join(t.split),remvoeText:u.join(t.split),removeData:h})}if(t=e.extend({title:"éæ©æ°æ®",width:700,height:320,top:null,left:null,split:";",valueField:null,textField:null,grid:null,condition:null,onSelect:function(e){},searchClick:t.searchClick,selectInit:function(e){return!1}},t),t.grid){var o,l,s,d=t.lastSelected||[];return function(){return r(),!1}}}}(jQuery),function(e){e.fn.ligerPortal=function(t){return e.ligerui.run.call(this,"ligerPortal",arguments)},e.ligerDefaults.Portal={width:null,rows:null,columns:null,url:null,method:"get",parms:null,draggable:!1,onLoaded:null},e.ligerDefaults.Portal_rows={width:null,height:null},e.ligerDefaults.Portal_columns={width:null,height:null},e.ligerMethos.Portal={},e.ligerui.controls.Portal=function(t,i){e.ligerui.controls.Portal.base.constructor.call(this,t,i)},e.ligerui.controls.Portal.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Portal"},__idPrev:function(){return"Portal"},_extendMethods:function(){return e.ligerMethos.Portal},_init:function(){var t=this,i=this.options;e.ligerui.controls.Portal.base._init.call(this),e(">div",t.element).length&&(i.columns=[],e(">div",t.element).each(function(e,t){i.columns[e]={panels:[]}}),t.tempInitPanels=e("<div></div>"),e(">div",t.element).appendTo(t.tempInitPanels)),!i.rows&&i.columns&&(i.rows=[{columns:i.columns}])},_render:function(){var t=this,i=this.options;t.portal=e(t.element).addClass("l-portal").html(""),t.set(i)},_setRows:function(t){var i=this;this.options;if(i.rows=[],t&&t.length)for(var r=0;r<t.length;r++){var n=t[r],a=e('<div class="l-row"></div>').appendTo(i.portal);i.rows[r]=i._renderRow({row:n,rowIndex:r,jrow:a}),a.append('<div class="l-clear"></div>')}},_renderRow:function(t){var i=t.row,r=t.rowIndex,n=t.jrow,a=this,o=(this.options,{element:n[0]});if(i.width&&("string"==typeof i.width?i.width.indexOf("%")>-1?n.width(i.width):n.width(parseInt(i.width)):n.width(i.width)),i.height&&n.height(i.height),i.columns&&(o.columns=[]),i.columns&&i.columns.length)for(var l=0;l<i.columns.length;l++){var s=i.columns[l],d=e('<div class="l-column"></div>').appendTo(n);o.columns[l]=a._renderColumn({column:s,columnIndex:l,jcolumn:d,rowIndex:r})}return o},remove:function(e){var t=this,i=(this.options,e.rowIndex),r=e.columnIndex,n=e.index;if(null==n&&(n=-1),n>=0&&t.rows[i]&&t.rows[i].columns&&t.rows[i].columns[r]&&t.rows[i].columns[r].panels){var a=t.rows[i].columns[r].panels[n];a&&a.close(),t._updatePortal()}},add:function(t){var i=this,r=this.options,n=t.rowIndex,a=t.columnIndex,o=t.index,l=t.panel;if(null==o&&(o=-1),i.rows[n]&&i.rows[n].columns&&i.rows[n].columns[a]){var s,d=i.rows[n].columns[a],c=r.rows[n].columns[a];e(d.element);if(c.panels=c.panels||[],d.panels=d.panels||[],c.panels.splice(o,0,l),0>o){var u=e("<div></div>").insertBefore(d.jplace);s=u.ligerPanel(l)}else if(d.panels[o]){var u=e("<div></div>").insertBefore(d.panels[o].panel);s=u.ligerPanel(l)}s&&(s.bind("closed",i._createPanelClosed()),i.setPanelEvent({panel:s}),d.panels.splice(o,0,s)),i._updatePortal()}},_createPanelClosed:function(){var t=this,i=this.options;return function(){var r,n,a,o=this,l=t.getPanels();e(l).each(function(){this.panel==o&&(r=this.rowIndex,n=this.columnIndex,a=this.index)}),i.rows[r].columns[n].panels.splice(a,1),t.rows[r].columns[n].panels.splice(a,1)}},_renderColumn:function(t){var i=t.column,r=t.columnIndex,n=t.jcolumn,a=(t.rowIndex,this),o=(this.options,{element:n[0]});if(i.width&&n.width(i.width),i.height&&n.height(i.height),i.panels&&(o.panels=[]),i.panels&&i.panels.length)for(var l=0;l<i.panels.length;l++){var s=i.panels[l],d=e("<div></div>").appendTo(n);o.panels[l]=d.ligerPanel(s),o.panels[l].bind("closed",a._createPanelClosed()),a.setPanelEvent({panel:o.panels[l]})}else if(a.tempInitPanels){var c=a.tempInitPanels.find(">div:eq("+r+")");if(c.length){o.panels=[];var u={},h=c.clone();liger.inject&&liger.inject.getOptions&&(u=liger.inject.getOptions({jelement:h,defaults:e.ligerDefaults.Panel,config:liger.inject.config.Panel})),o.panels[0]=h.appendTo(n).ligerPanel(u),o.panels[0].bind("closed",a._createPanelClosed()),a.setPanelEvent({panel:o.panels[0]})}}return o.jplace=e('<div class="l-column-place"></div>').appendTo(n),o},setPanelEvent:function(t){var r=t.panel,n=r.panel,a=this,o=this.options;e.fn.ligerDrag&&o.draggable&&n.addClass("l-panel-draggable").ligerDrag({proxy:!1,revert:!0,handler:".l-panel-header span:first",onRendered:function(){},onStartDrag:function(t,i){a.portal.find(">.l-row").addClass("l-row-dragging"),this.jplace=e('<div class="l-panel-place"></div>'),this.jplace.height(n.height()),n.width(n.width()),n.addClass("l-panel-dragging"),n.css("position","absolute"),n.after(this.jplace),a._updatePortal()},onDrag:function(e,t){function o(e,t,n,a){for(i=0,l=e.length;i<l;i++){var o=e[i];if(o.panel!=r){var d=s(o,null,n,a);if(d)return d}}for(i=0,l=t.length;i<l;i++){var c=t[i],d=s(null,c,n,a);if(d)return d}return null}function s(e,t,i,r){var n=e?e.jpanel:t.jplace;if(!n)return null;var a=n.height(),o=n.width(),l=n.offset().left,s=n.offset().top,d=3;if(i>l-d&&l+o+d>i){if(r>s-d&&s+a/2+d>r)return{panel:e,column:t,position:"top"};if(r>s+a/2-d&&s+a+d>r)return{panel:e,column:t,position:e?"bottom":"top"}}return null}var d=(t.pageX||t.screenX,t.pageY||t.screenY,n.height(),n.width()),c=n.offset(),u=c.left+d/2,h=c.top+10,g=a.getPanels(),p=a.getEmptyColumns(),f=o(g,p,u,h);if(f){if(this.placeStatus){if(this.placeStatus.panel&&f.panel&&this.placeStatus.panel.rowIndex==f.panel.rowIndex&&this.placeStatus.panel.columnIndex==f.panel.columnIndex&&this.placeStatus.panel.index==f.panel.index&&this.placeStatus.position==f.position)return;if(this.placeStatus.column&&f.column&&this.placeStatus.column.rowIndex==f.column.rowIndex&&this.placeStatus.column.columnIndex==f.column.columnIndex&&this.placeStatus.position==f.position)return}"top"==f.position?(this.jplace.insertBefore(f.panel?f.panel.jpanel:f.column.jplace),this.savedPosition=f.panel?f.panel:f.column,this.savedPosition.inTop=!0):"bottom"==f.position&&(this.jplace.insertAfter(f.panel.jpanel),this.savedPosition=f.panel,this.savedPosition.inTop=!1),this.placeStatus=f}else this.placeStatus=null},onStopDrag:function(t,i){if(a.portal.find(">.l-row").removeClass("l-row-dragging"),r.set("width",r.get("width")),n.removeClass("l-panel-dragging"),this.jplace&&(n.css({position:"relative",left:null,top:null}),n.insertAfter(this.jplace),a.portal.find(">.l-row > .l-column >.l-panel-place").remove(),this.savedPosition)){var l,s,d,c=a.getPanels();e(c).each(function(){this.panel==r&&(l=this.rowIndex,s=this.columnIndex,d=this.index)});var u=o.rows[l].columns[s].panels[d],h=a.rows[l].columns[s].panels[d];o.rows[l].columns[s].panels.splice(d,1),a.rows[l].columns[s].panels.splice(d,1),this.savedPosition.panel?(o.rows[this.savedPosition.rowIndex].columns[this.savedPosition.columnIndex].panels.splice(this.savedPosition.index+this.savedPosition.inTop?-1:0,0,u),a.rows[this.savedPosition.rowIndex].columns[this.savedPosition.columnIndex].panels.splice(this.savedPosition.index+this.savedPosition.inTop?-1:0,0,h)):(o.rows[this.savedPosition.rowIndex].columns[this.savedPosition.columnIndex].panels=[u],
a.rows[this.savedPosition.rowIndex].columns[this.savedPosition.columnIndex].panels=[h])}return a._updatePortal(),!1}})},_updatePortal:function(){var t=this;this.options;e(t.rows).each(function(t){e(this.columns).each(function(t){this.panels&&this.panels.length?e(this.element).removeClass("l-column-empty"):e(this.element).addClass("l-column-empty")})})},getPanels:function(){var t=this,i=(this.options,[]);return e(t.rows).each(function(t){e(this.columns).each(function(r){e(this.panels).each(function(e){i.push({rowIndex:t,columnIndex:r,index:e,panel:this,jpanel:this.panel})})})}),i},getPanel:function(t){var i=this;this.options;t=e.extend({rowIndex:0,columnIndex:0,index:0},t);var r=null;return e(i.rows).each(function(i){e(this.columns).each(function(n){e(this.panels).each(function(e){r||i==t.rowIndex&&n==t.columnIndex&&e==t.index&&(r=this)})})}),r},getEmptyColumns:function(){var t=this,i=(this.options,[]);return e(t.rows).each(function(t){e(this.columns).each(function(e){this.panels&&this.panels.length||i.push({rowIndex:t,columnIndex:e,jplace:this.jplace})})}),i},_setUrl:function(t){var i=this,r=this.options;t&&e.ajax({url:t,data:r.parms,type:r.method,dataType:"json",success:function(e){i.set("rows",e)}})},_setWidth:function(e){e&&this.portal.width(e)},collapseAll:function(){var t=this,i=(this.options,t.getPanels());e(i).each(function(e,t){var i=t.panel;i.collapse()})},expandAll:function(){var t=this,i=(this.options,t.getPanels());e(i).each(function(e,t){var i=t.panel;i.expand()})}})}(jQuery),function(e){e.fn.ligerRadio=function(){return e.ligerui.run.call(this,"ligerRadio",arguments)},e.fn.ligerGetRadioManager=function(){return e.ligerui.run.call(this,"ligerGetRadioManager",arguments)},e.ligerDefaults.Radio={disabled:!1},e.ligerMethos.Radio={},e.ligerui.controls.Radio=function(t,i){e.ligerui.controls.Radio.base.constructor.call(this,t,i)},e.ligerui.controls.Radio.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"Radio"},__idPrev:function(){return"Radio"},_extendMethods:function(){return e.ligerMethos.Radio},_render:function(){var t=this,i=this.options;t.input=e(this.element),t.link=e('<a href="javascript:void(0)" class="l-radio"></a>'),t.wrapper=t.input.addClass("l-hidden").wrap('<div class="l-radio-wrapper"></div>').parent(),t.wrapper.prepend(t.link),t.input.change(function(){return this.checked?t.link.addClass("l-radio-checked"):t.link.removeClass("l-radio-checked"),!0}),t.link.click(function(){t._doclick()}),t.wrapper.hover(function(){i.disabled||e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),this.element.checked&&t.link.addClass("l-radio-checked"),this.element.id&&e("label[for="+this.element.id+"]").click(function(){t._doclick()}),t.set(i)},setValue:function(e){var t=this;this.options;e?(t.input[0].checked=!0,t.link.addClass("l-radio-checked")):(t.input[0].checked=!1,t.link.removeClass("l-radio-checked"))},getValue:function(){return this.input[0].checked},setEnabled:function(){this.input.attr("disabled",!1),this.wrapper.removeClass("l-disabled"),this.options.disabled=!1},setDisabled:function(){this.input.attr("disabled",!0),this.wrapper.addClass("l-disabled"),this.options.disabled=!0},updateStyle:function(){this.input.attr("disabled")&&(this.wrapper.addClass("l-disabled"),this.options.disabled=!0),this.input[0].checked?this.link.addClass("l-checkbox-checked"):this.link.removeClass("l-checkbox-checked")},_doclick:function(){var t=this;this.options;if(t.input.attr("disabled"))return!1;t.input.trigger("click").trigger("change");var i;return i=t.input[0].form?t.input[0].form:document,e("input:radio[name="+t.input[0].name+"]",i).not(t.input).trigger("change"),!1}})}(jQuery),function(e){e.fn.ligerRadioList=function(t){return e.ligerui.run.call(this,"ligerRadioList",arguments)},e.ligerDefaults.RadioList={rowSize:3,valueField:"id",textField:"text",valueFieldID:null,name:null,data:null,parms:null,url:null,urlParms:null,ajaxContentType:null,ajaxType:"post",onSuccess:null,onError:null,onSelect:null,css:null,value:null,valueFieldCssClass:null},e.ligerMethos.RadioList=e.ligerMethos.RadioList||{},e.ligerui.controls.RadioList=function(t,i){e.ligerui.controls.RadioList.base.constructor.call(this,t,i)},e.ligerui.controls.RadioList.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"RadioList"},_extendMethods:function(){return e.ligerMethos.RadioList},_init:function(){e.ligerui.controls.RadioList.base._init.call(this)},_render:function(){var t=this,i=this.options;t.data=i.data,t.valueField=null,e(this.element).is(":hidden")||e(this.element).is(":text")?(t.valueField=e(this.element),e(this.element).is(":text")&&t.valueField.hide()):i.valueFieldID?(t.valueField=e("#"+i.valueFieldID+":input,[name="+i.valueFieldID+"]:input"),0==t.valueField.length&&(t.valueField=e('<input type="hidden"/>')),t.valueField[0].id=t.valueField[0].name=i.valueFieldID):(t.valueField=e('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.id+"_val"),null==t.valueField[0].name&&(t.valueField[0].name=t.valueField[0].id),i.valueFieldCssClass&&t.valueField.addClass(i.valueFieldCssClass),t.valueField.attr("data-ligerid",t.id),e(this.element).is(":hidden")||e(this.element).is(":text")?t.radioList=e("<div></div>").insertBefore(this.element):t.radioList=e(this.element),t.radioList.html('<div class="l-radiolist-inner"><table cellpadding="0" cellspacing="0" border="0" class="l-radiolist-table"></table></div>').addClass("l-radiolist").append(t.valueField),t.radioList.table=e("table:first",t.radioList),i.value=t.valueField.val()||i.value,t.set(i),t._addClickEven()},destroy:function(){this.radioList&&this.radioList.remove(),this.options=null,e.ligerui.remove(this)},clear:function(){this._changeValue(""),this.trigger("clear")},_setCss:function(e){e&&this.radioList.addClass(e)},_setDisabled:function(t){t?(this.radioList.addClass("l-radiolist-disabled"),e("input:radio",this.radioList).attr("disabled",!0)):(this.radioList.removeClass("l-radiolist-disabled"),e("input:radio",this.radioList).removeAttr("disabled"))},_setWidth:function(e){this.radioList.width(e)},_setHeight:function(e){this.radioList.height(e)},indexOf:function(e){var t=this,i=this.options;if(!t.data)return-1;for(var r=0,n=t.data.length;n>r;r++)if("object"==typeof e){if(t.data[r]==e)return r}else if(t.data[r][i.valueField].toString()==e.toString())return r;return-1},removeItems:function(t){var i=this;i.data&&(e(t).each(function(e,t){var r=i.indexOf(t);-1!=r&&i.data.splice(r,1)}),i.refresh())},removeItem:function(e){if(this.data){var t=this.indexOf(e);-1!=t&&(this.data.splice(t,1),this.refresh())}},insertItem:function(e,t){var i=this;i.data||(i.data=[]),i.data.splice(t,0,e),i.refresh()},addItems:function(t){var i=this;i.data||(i.data=[]),e(t).each(function(e,t){i.data.push(t)}),i.refresh()},addItem:function(e){var t=this;t.data||(t.data=[]),t.data.push(e),t.refresh()},_setValue:function(e){var t=this,i=this.options;t.valueField.val(e),i.value=e,this._dataInit()},setValue:function(e){this._setValue(e)},_setUrl:function(t){var i=this,r=this.options;if(t){var n=e.isFunction(r.urlParms)?r.urlParms.call(i):r.urlParms;if(n)for(name in n)t+=-1==t.indexOf("?")?"?":"&",t+=name+"="+n[name];var a=e.isFunction(r.parms)?r.parms():r.parms;"application/json"==r.ajaxContentType&&"string"!=typeof a&&(a=liger.toJSON(a)),e.ajax({type:"post",url:t,data:a,cache:!1,dataType:"json",contentType:r.ajaxContentType,success:function(e){i.setData(e),i.trigger("success",[e])},error:function(e,t){i.trigger("error",[e,t])}})}},setUrl:function(e){return this._setUrl(e)},setParm:function(e,t){if(e){var i=this,r=i.get("parms");r||(r={}),r[e]=t,i.set("parms",r)}},clearContent:function(){var t=this;this.options;e("table",t.radioList).html("")},_setData:function(e){this.setData(e)},setData:function(e){var t=this;this.options;e&&e.length&&(t.data=e,t.refresh(),t.updateStyle())},refresh:function(){var e=this,t=this.options,i=this.data;if(this.clearContent(),i){for(var r=[],n=t.rowSize,a=!1,o=t.name||e.id,l=0;l<i.length;l++){var s=i[l][t.valueField],d=i[l][t.textField],c=e.id+"-"+l,u=l%n==0;u&&(a&&r.push("</tr>"),r.push("<tr>"),a=!0),r.push("<td><input type='radio' name='"+o+"' value='"+s+"' id='"+c+"'/><label for='"+c+"'>"+d+"</label></td>")}a&&r.push("</tr>"),e.radioList.table.append(r.join(""))}},_getValue:function(){var t=this,i=this.options,r=i.name||t.id;return e('input:radio[name="'+r+'"]:checked').val()},getValue:function(){return this._getValue()},updateStyle:function(){var t=this;this.options;t._dataInit(),e(":radio",t.element).change(function(){var e=t.getValue();t.trigger("select",[{value:e}])})},_dataInit:function(){var e=this,t=this.options,i=e.valueField.val()||e._getValue()||t.value;e._changeValue(i)},_changeValue:function(t){var i=this,r=this.options,n=r.name||i.id;e("input:radio[name='"+n+"']",i.radioList).each(function(){this.checked=this.value==t}),i.valueField.val(t),i.selectedValue=t},_addClickEven:function(){var e=this;this.options;e.radioList.click(function(t){var i=e.getValue();i&&e.valueField.val(i)})}})}(jQuery),function(e){e.fn.ligerResizable=function(t){return e.ligerui.run.call(this,"ligerResizable",arguments,{idAttrName:"ligeruiresizableid",hasElement:!1,propertyToElemnt:"target"})},e.fn.ligerGetResizableManager=function(){return e.ligerui.run.call(this,"ligerGetResizableManager",arguments,{idAttrName:"ligeruiresizableid",hasElement:!1,propertyToElemnt:"target"})},e.ligerDefaults.Resizable={handles:"n, e, s, w, ne, se, sw, nw",maxWidth:2e3,maxHeight:2e3,minWidth:20,minHeight:20,scope:3,animate:!1,onStartResize:function(e){},onResize:function(e){},onStopResize:function(e){},onEndResize:null},e.ligerui.controls.Resizable=function(t){e.ligerui.controls.Resizable.base.constructor.call(this,null,t)},e.ligerui.controls.Resizable.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Resizable"},__idPrev:function(){return"Resizable"},_render:function(){var t=this,i=this.options;t.target=e(i.target),t.set(i),t.target.mousemove(function(r){if(!i.disabled&&(t.dir=t._getDir(r),t.dir?t.target.css("cursor",t.dir+"-resize"):t.target.css("cursor").indexOf("-resize")>0&&t.target.css("cursor","default"),i.target.ligeruidragid)){var n=e.ligerui.get(i.target.ligeruidragid);n&&t.dir?n.set("disabled",!0):n&&n.set("disabled",!1)}}).mousedown(function(e){i.disabled||t.dir&&t._start(e)})},_rendered:function(){this.options.target.ligeruiresizableid=this.id},_getDir:function(t){var i=this,r=this.options,n="",a=i.target.offset(),o=i.target.width(),l=i.target.height(),s=r.scope,d=t.pageX||t.screenX,c=t.pageY||t.screenY;return c>=a.top&&c<a.top+s?n+="n":c<=a.top+l&&c>a.top+l-s&&(n+="s"),d>=a.left&&d<a.left+s?n+="w":d<=a.left+o&&d>a.left+o-s&&(n+="e"),"all"==r.handles||""==n?n:-1!=e.inArray(n,i.handles)?n:""},_setHandles:function(e){e&&(this.handles=e.replace(/(\s*)/g,"").split(","))},_createProxy:function(){var t=this;t.proxy=e('<div class="l-resizable"></div>'),t.proxy.width(t.target.width()).height(t.target.height()),t.proxy.attr("resizableid",t.id).appendTo("body")},_removeProxy:function(){var e=this;e.proxy&&(e.proxy.remove(),e.proxy=null)},_start:function(t){var i=this;this.options;i._createProxy(),i.proxy.css({left:i.target.offset().left,top:i.target.offset().top,position:"absolute"}),i.current={dir:i.dir,left:i.target.offset().left,top:i.target.offset().top,startX:t.pageX||t.screenX,startY:t.pageY||t.clientY,width:i.target.width(),height:i.target.height()},e(document).bind("selectstart.resizable",function(){return!1}),e(document).bind("mouseup.resizable",function(){i._stop.apply(i,arguments)}),e(document).bind("mousemove.resizable",function(){i._drag.apply(i,arguments)}),i.proxy.show(),i.trigger("startResize",[i.current,t])},changeBy:{t:["n","ne","nw"],l:["w","sw","nw"],w:["w","sw","nw","e","ne","se"],h:["n","ne","nw","s","se","sw"]},_drag:function(e){var t=this;this.options;if(t.current&&t.proxy){t.proxy.css("cursor",""==t.current.dir?"default":t.current.dir+"-resize");var i=e.pageX||e.screenX,r=e.pageY||e.screenY;t.current.diffX=i-t.current.startX,t.current.diffY=r-t.current.startY,t._applyResize(t.proxy),t.trigger("resize",[t.current,e])}},_stop:function(t){var i=this;this.options;i.hasBind("stopResize")?0!=i.trigger("stopResize",[i.current,t])&&i._applyResize():i._applyResize(),i._removeProxy(),i.trigger("endResize",[i.current,t]),e(document).unbind("selectstart.resizable"),e(document).unbind("mousemove.resizable"),e(document).unbind("mouseup.resizable")},_applyResize:function(t){var i=this,r=this.options,n={left:i.current.left,top:i.current.top,width:i.current.width,height:i.current.height},a=!1;t||(t=i.target,a=!0,isNaN(parseInt(i.target.css("top")))?n.top=0:n.top=parseInt(i.target.css("top")),isNaN(parseInt(i.target.css("left")))?n.left=0:n.left=parseInt(i.target.css("left"))),e.inArray(i.current.dir,i.changeBy.l)>-1?(n.left+=i.current.diffX,i.current.diffLeft=i.current.diffX):a&&delete n.left,e.inArray(i.current.dir,i.changeBy.t)>-1?(n.top+=i.current.diffY,i.current.diffTop=i.current.diffY):a&&delete n.top,e.inArray(i.current.dir,i.changeBy.w)>-1?(n.width+=(-1==i.current.dir.indexOf("w")?1:-1)*i.current.diffX,i.current.newWidth=n.width):a&&delete n.width,e.inArray(i.current.dir,i.changeBy.h)>-1?(n.height+=(-1==i.current.dir.indexOf("n")?1:-1)*i.current.diffY,i.current.newHeight=n.height):a&&delete n.height,a&&r.animate?t.animate(n):t.css(n)}})}(jQuery),function(e){e.fn.ligerSpinner=function(){return e.ligerui.run.call(this,"ligerSpinner",arguments)},e.fn.ligerGetSpinnerManager=function(){return e.ligerui.run.call(this,"ligerGetSpinnerManager",arguments)},e.ligerDefaults.Spinner={type:"float",isNegative:!0,decimalplace:2,step:.1,interval:50,value:null,onChangeValue:!1,minValue:null,maxValue:null,disabled:!1,readonly:!1},e.ligerMethos.Spinner={},e.ligerui.controls.Spinner=function(t,i){e.ligerui.controls.Spinner.base.constructor.call(this,t,i)},e.ligerui.controls.Spinner.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"Spinner"},__idPrev:function(){return"Spinner"},_extendMethods:function(){return e.ligerMethos.Spinner},_init:function(){e.ligerui.controls.Spinner.base._init.call(this);var t=this.options;"float"==t.type?(t.step=.1,t.interval=50):"int"==t.type?(t.step=1,t.interval=100):"time"==t.type?(t.step=1,t.interval=100):(t.type="int",t.step=1,t.interval=100)},_render:function(){var t=this,i=this.options;t.interval=null,t.inputText=null,t.value=null,t.textFieldID="","input"==this.element.tagName.toLowerCase()&&this.element.type&&"text"==this.element.type?(t.inputText=e(this.element),this.element.id&&(t.textFieldID=this.element.id)):(t.inputText=e('<input type="text"/>'),t.inputText.appendTo(e(this.element))),""==t.textFieldID&&i.textFieldID&&(t.textFieldID=i.textFieldID),t.link=e('<div class="l-trigger"><div class="l-spinner-up"><div class="l-spinner-icon"></div></div><div class="l-spinner-split"></div><div class="l-spinner-down"><div class="l-spinner-icon"></div></div></div>'),t.wrapper=t.inputText.wrap('<div class="l-text"></div>').parent(),t.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),t.wrapper.append(t.link).after(t.selectBox).after(t.valueField),t.link.up=e(".l-spinner-up",t.link),t.link.down=e(".l-spinner-down",t.link),t.inputText.addClass("l-text-field"),i.disabled&&t.wrapper.addClass("l-text-disabled"),t._isVerify(t.inputText.val())||(t.value=t._getDefaultValue(),t._showValue(t.value)),t.link.up.hover(function(){i.disabled||e(this).addClass("l-spinner-up-over")},function(){clearInterval(t.interval),e(document).unbind("selectstart.spinner"),e(this).removeClass("l-spinner-up-over")}).mousedown(function(){i.disabled||(t._uping.call(t),t.interval=setInterval(function(){t._uping.call(t)},i.interval),e(document).bind("selectstart.spinner",function(){return!1}))}).mouseup(function(){clearInterval(t.interval),t.inputText.trigger("change").focus(),e(document).unbind("selectstart.spinner")}),t.link.down.hover(function(){i.disabled||e(this).addClass("l-spinner-down-over")},function(){clearInterval(t.interval),e(document).unbind("selectstart.spinner"),e(this).removeClass("l-spinner-down-over")}).mousedown(function(){i.disabled||(t.interval=setInterval(function(){t._downing.call(t)},i.interval),e(document).bind("selectstart.spinner",function(){return!1}))}).mouseup(function(){clearInterval(t.interval),t.inputText.trigger("change").focus(),e(document).unbind("selectstart.spinner")}),t.inputText.change(function(){var e=t.inputText.val();t.value=t._getVerifyValue(e),t.trigger("changeValue",[t.value]),t._showValue(t.value)}).blur(function(){t.wrapper.removeClass("l-text-focus")}).focus(function(){t.wrapper.addClass("l-text-focus")}),t.wrapper.hover(function(){i.disabled||t.wrapper.addClass("l-text-over")},function(){t.wrapper.removeClass("l-text-over")}),t.set(i)},_setValue:function(e){null!=e&&this.inputText.val(e)},_setWidth:function(e){var t=this;e>20&&(t.wrapper.css({width:e}),t.inputText.css({width:e-20}))},_setHeight:function(e){var t=this;e>10&&(t.wrapper.height(e),t.inputText.height(e-2),t.link.height(e-4))},_setDisabled:function(e){e?this.wrapper.addClass("l-text-disabled"):this.wrapper.removeClass("l-text-disabled")},_showValue:function(e){var t=this.options;e&&"NaN"!=e||(e=0),"float"==t.type&&(e=parseFloat(e).toFixed(t.decimalplace)),this.inputText.val(e)},_setValue:function(e){this._showValue(e)},setValue:function(e){this._showValue(e)},getValue:function(){return this.inputText.val()},_round:function(e,t){for(var i=(this.options,1);t>0;i*=10,t--);for(;0>t;i/=10,t++);return Math.round(e*i)/i},_isInt:function(e){var t=this.options,i=t.isNegative?/^-?\d+$/:/^\d+$/;return i.test(e)?parseFloat(e)!=e?!1:!0:!1},_isFloat:function(e){var t=this.options,i=t.isNegative?/^-?\d+(\.\d+)?$/:/^\d+(\.\d+)?$/;return i.test(e)?parseFloat(e)!=e?!1:!0:!1},_isTime:function(e){var t=(this.options,e.match(/^(\d{1,2}):(\d{1,2})$/));return null==t?!1:t[1]>24||t[2]>60?!1:!0},_isVerify:function(e){var t=this,i=this.options;if("float"==i.type){if(!t._isFloat(e))return!1;var r=parseFloat(e);return void 0!=i.minValue&&i.minValue>r?!1:void 0!=i.maxValue&&i.maxValue<r?!1:!0}if("int"==i.type){if(!t._isInt(e))return!1;var r=parseInt(e);return void 0!=i.minValue&&i.minValue>r?!1:void 0!=i.maxValue&&i.maxValue<r?!1:!0}return"time"==i.type?t._isTime(e):!1},_getVerifyValue:function(e){var t=this,i=this.options,r=null;return"float"==i.type?r=t._round(e,i.decimalplace):"int"==i.type?r=parseInt(e):"time"==i.type&&(r=e),t._isVerify(r)?r:t.value},_isOverValue:function(e){var t=this.options;return null!=t.minValue&&t.minValue>e?!0:null!=t.maxValue&&t.maxValue<e?!0:!1},_getDefaultValue:function(){var e=this.options;return"float"==e.type||"int"==e.type?0:"time"==e.type?"00:00":void 0},_addValue:function(e){var t=this,i=(this.options,t.inputText.val());i=parseFloat(i)+e,t._isOverValue(i)||(t._showValue(i),t.inputText.trigger("change"))},_addTime:function(e){var t=this,i=(this.options,t.inputText.val()),r=i.match(/^(\d{1,2}):(\d{1,2})$/);newminute=parseInt(r[2])+e,newminute<10&&(newminute="0"+newminute),i=r[1]+":"+newminute,t._isOverValue(i)||(t._showValue(i),t.inputText.trigger("change"))},_uping:function(){var e=this,t=this.options;"float"==t.type||"int"==t.type?e._addValue(t.step):"time"==t.type&&e._addTime(t.step)},_downing:function(){var e=this,t=this.options;"float"==t.type||"int"==t.type?e._addValue(-1*t.step):"time"==t.type&&e._addTime(-1*t.step)},_isDateTime:function(e){var t=(this.options,e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/));if(null==t)return!1;var i=new Date(t[1],t[3]-1,t[4]);return"NaN"==i?!1:i.getFullYear()==t[1]&&i.getMonth()+1==t[3]&&i.getDate()==t[4]},_isLongDateTime:function(e){var t=(this.options,/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/),i=e.match(t);if(null==i)return!1;var r=new Date(i[1],i[3]-1,i[4],i[5],i[6]);return"NaN"==r?!1:r.getFullYear()==i[1]&&r.getMonth()+1==i[3]&&r.getDate()==i[4]&&r.getHours()==i[5]&&r.getMinutes()==i[6]}})}(jQuery),function(e){e.fn.ligerTab=function(t){return e.ligerui.run.call(this,"ligerTab",arguments)},e.fn.ligerGetTabManager=function(){return e.ligerui.run.call(this,"ligerGetTabManager",arguments)},e.ligerDefaults.Tab={height:null,heightDiff:0,changeHeightOnResize:!1,contextmenu:!0,dblClickToClose:!1,dragToMove:!1,showSwitch:!1,showSwitchInTab:!1,data:null,onBeforeOverrideTabItem:null,onAfterOverrideTabItem:null,onBeforeRemoveTabItem:null,onAfterRemoveTabItem:null,onBeforeAddTabItem:null,onAfterAddTabItem:null,onBeforeSelectTabItem:null,onAfterSelectTabItem:null,onCloseOther:null,onCloseAll:null,onClose:null,onReload:null,onSwitchRender:null},e.ligerDefaults.TabString={closeMessage:"å³é­å½åé¡µ",closeOtherMessage:"å³é­å¶ä»",closeAllMessage:"å³é­ææ",reloadMessage:"å·æ°"},e.ligerMethos.Tab={},e.ligerui.controls.Tab=function(t,i){e.ligerui.controls.Tab.base.constructor.call(this,t,i)},e.ligerui.controls.Tab.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Tab"},__idPrev:function(){return"Tab"},_extendMethods:function(){return e.ligerMethos.Tab},_render:function(){function t(){var e=i.tab.width()-parseInt(i.tab.links.css("marginLeft"),10)-parseInt(i.tab.links.css("marginRight"),10);i.tab.links.width(e)}var i=this,r=this.options;r.height&&(i.makeFullHeight=!0),i.tab=e(this.element),i.tab.addClass("l-tab"),r.contextmenu&&e.ligerMenu&&(i.tab.menu=e.ligerMenu({width:100,items:[{text:r.closeMessage,id:"close",click:function(){i._menuItemClick.apply(i,arguments)}},{text:r.closeOtherMessage,id:"closeother",click:function(){i._menuItemClick.apply(i,arguments)}},{text:r.closeAllMessage,id:"closeall",click:function(){i._menuItemClick.apply(i,arguments)}},{text:r.reloadMessage,id:"reload",click:function(){i._menuItemClick.apply(i,arguments)}}]})),i.tab.content=e('<div class="l-tab-content"></div>'),e("> div",i.tab).appendTo(i.tab.content),i.tab.content.appendTo(i.tab),i.tab.links=e('<div class="l-tab-links"><ul style="left: 0px; "></ul><div class="l-tab-switch"></div></div>'),i.tab.links.prependTo(i.tab),i.tab.links.ul=e("ul",i.tab.links);var n=e("> div[lselected=true]",i.tab.content),a=n.length>0;i.selectedTabId=n.attr("tabid"),e("> div",i.tab.content).each(function(t,r){var n=e('<li class=""><a></a><div class="l-tab-links-item-left"></div><div class="l-tab-links-item-right"></div></li>'),o=e(this);o.attr("title")&&(e("> a",n).html(o.attr("title")),o.attr("title",""));var l=o.attr("tabid");void 0==l&&(l=i.getNewTabid(),o.attr("tabid",l),o.attr("lselected")&&(i.selectedTabId=l)),n.attr("tabid",l),a||0!=t||(i.selectedTabId=l);var s=o.attr("showClose");if(s&&n.append("<div class='l-tab-links-item-close'></div>"),e("> ul",i.tab.links).append(n),o.hasClass("l-tab-content-item")||o.addClass("l-tab-content-item"),o.find("iframe").length>0){var d=e("iframe:first",o);if("complete"!=d[0].readyState){0==o.find(".l-tab-loading:first").length&&o.prepend("<div class='l-tab-loading' style='display:block;'></div>");var c=e(".l-tab-loading:first",o);d.bind("load.tab",function(){c.hide()})}}}),i.selectTabItem(i.selectedTabId),r.height&&("string"==typeof r.height&&r.height.indexOf("%")>0?(i.onResize(),r.changeHeightOnResize&&e(window).resize(function(){i.onResize.call(i)})):i.setHeight(r.height)),i.makeFullHeight&&i.setContentHeight(),e("li",i.tab.links).each(function(){i._addTabItemEvent(e(this))}),i.tab.bind("dblclick.tab",function(t){if(r.dblClickToClose){i.dblclicking=!0;var n=t.target||t.srcElement,a=n.tagName.toLowerCase();if("a"==a){var o=e(n).parent().attr("tabid"),l=e(n).parent().find("div.l-tab-links-item-close").length?!0:!1;l&&i.removeTabItem(o)}i.dblclicking=!1}}),i.set(r),setTimeout(t,100),e(window).resize(function(){t.call(i)}),i.bind("sysWidthChange",function(){t.call(i)})},_setShowSwitch:function(t){var i=this;this.options;t?(e(".l-tab-switch",i.tab.links).length||e("<div class='l-tab-switch'></div>").appendTo(i.tab.links),e(i.tab).addClass("l-tab-switchable"),e(".l-tab-switch",i.tab).click(function(){i.toggleSwitch(this)})):(e(i.tab).removeClass("l-tab-switchable"),e("body > .l-tab-windowsswitch").remove())},_setShowSwitchInTab:function(t){var i=this,r=this.options;if(r.showSwitch&&t){e(i.tab).removeClass("l-tab-switchable"),e(".l-tab-switch",i.tab).remove();var n=e("<li class='l-tab-itemswitch'><a></a><div class='l-tab-links-item-left'></div><div class='l-tab-links-item-right'></div></li>");n.appendTo(i.tab.links.ul),n.click(function(){i.toggleSwitch(this)})}else e(".l-tab-itemswitch",i.tab.ul).remove()},toggleSwitch:function(t){var i=this;this.options;if(e("body > .l-tab-windowsswitch").length)return void e("body > .l-tab-windowsswitch").remove();if(null!=t){var r=e("<div class='l-tab-windowsswitch'></div>").appendTo("body"),n=i.tab.links.ul.find(">li"),a=i.getSelectedTabItemID();n.each(function(t,i){var n=e("<a href='javascript:void(0)'></a>");n.text(e(i).find("a").text());var o=e(i).attr("tabid");null!=o&&(o==a&&n.addClass("selected"),n.attr("tabid",o),r.append(n))}),r.css({top:e(t).offset().top+e(t).height(),left:e(t).offset().left-r.width()}),r.find("a").bind("click",function(t){var r=e(this).attr("tabid");void 0!=r&&(i.selectTabItem(r),i.moveToTabItem(r),e("body > .l-tab-windowsswitch").remove())}),i.trigger("switchRender",[r])}},_applyDrag:function(t){var i=this;this.options;i.droptip=i.droptip||e("<div class='l-tab-drag-droptip' style='display:none'><div class='l-drop-move-up'></div><div class='l-drop-move-down'></div></div>").appendTo("body");var r=e(t).ligerDrag({revert:!0,animate:!1,proxy:function(){var t=e(this).find("a").html();return i.dragproxy=e("<div class='l-tab-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div></div>").appendTo("body"),i.dragproxy.append(t),i.dragproxy},onRendered:function(){this.set("cursor","pointer")},onStartDrag:function(i,r){if(!e(t).hasClass("l-selected"))return!1;if(2==r.button)return!1;var n=r.srcElement||r.target;return e(n).hasClass("l-tab-links-item-close")?!1:void 0},onDrag:function(t,r){null==i.dropIn&&(i.dropIn=-1);var n=i.tab.links.ul.find(">li"),a=n.index(t.target);n.each(function(t,n){if(a!=t){var o=t>a;if(-1==i.dropIn||i.dropIn==t){var l=e(this).offset(),s={top:l.top,bottom:l.top+e(this).height(),left:l.left-10,right:l.left+10};o&&(s.left+=e(this).width(),s.right+=e(this).width());var d=r.pageX||r.screenX,c=r.pageY||r.screenY;d>s.left&&d<s.right&&c>s.top&&c<s.bottom?(i.droptip.css({left:s.left+5,top:s.top-9}).show(),i.dropIn=t,i.dragproxy.find(".l-drop-icon").removeClass("l-drop-no").addClass("l-drop-yes")):(i.dropIn=-1,i.droptip.hide(),i.dragproxy.find(".l-drop-icon").removeClass("l-drop-yes").addClass("l-drop-no"))}}})},onStopDrag:function(t,r){if(i.dropIn>-1){var n=i.tab.links.ul.find(">li:eq("+i.dropIn+")").attr("tabid"),a=e(t.target).attr("tabid");setTimeout(function(){i.moveTabItem(a,n)},0),i.dropIn=-1,i.dragproxy.remove()}i.droptip.hide(),this.set("cursor","default")}});return r},_setDragToMove:function(t){if(e.fn.ligerDrag){var i=this;this.options;if(t){if(i.drags)return;i.drags=i.drags||[],i.tab.links.ul.find(">li").each(function(){i.drags.push(i._applyDrag(this))})}}},moveTabItem:function(e,t){var i=this,r=i.tab.links.ul.find(">li[tabid="+e+"]"),n=i.tab.links.ul.find(">li[tabid="+t+"]"),a=i.tab.links.ul.find(">li").index(r),o=i.tab.links.ul.find(">li").index(n);o>a?n.after(r):n.before(r)},setTabButton:function(){var t=this,i=(this.options,0);e("li",t.tab.links.ul).each(function(){i+=e(this).width()+2});var r=t.tab.width();return i>r?(e(".l-tab-links-left",t.tab).length||(t.tab.links.append('<div class="l-tab-links-left"><span></span></div><div class="l-tab-links-right"><span></span></div>'),t.setTabButtonEven()),!0):(t.tab.links.ul.animate({left:0}),e(".l-tab-links-left,.l-tab-links-right",t.tab.links).remove(),!1)},setTabButtonEven:function(){var t=this;this.options;e(".l-tab-links-left",t.tab.links).hover(function(){e(this).addClass("l-tab-links-left-over")},function(){e(this).removeClass("l-tab-links-left-over")}).click(function(){t.moveToPrevTabItem()}),e(".l-tab-links-right",t.tab.links).hover(function(){e(this).addClass("l-tab-links-right-over")},function(){e(this).removeClass("l-tab-links-right-over")}).click(function(){t.moveToNextTabItem()})},moveToPrevTabItem:function(t){var i=this,r=(this.options,e("> li",i.tab.links.ul)),n=e(".l-tab-links-right",i.tab),a=e(".l-tab-links-left",i.tab);if(!n.length||!a.length)return!1;for(var o=(n.offset(),a.offset()),l=null,s=0,d=o.left+a.outerWidth(),c=0,u=r.length;u>c;c++){var h=e(r[c]),g=h.offset(),p=g.left,f=g.left+h.outerWidth();if(null!=t){if(d>p&&h.attr("tabid")==t){l=h;break}}else if(d>p&&f>=d){l=h;break}s+=h.outerWidth()+parseInt(h.css("marginLeft"))+parseInt(h.css("marginRight"))}if(null==l)return!1;var v=s-a.outerWidth();return i.tab.links.ul.animate({left:-1*v}),!0},moveToNextTabItem:function(t){var i=this,r=(this.options,e("> li",i.tab.links.ul)),n=e(".l-tab-links-right",i.tab),a=e(".l-tab-links-left",i.tab);if(!n.length||!a.length)return!1;for(var o=n.offset(),l=a.offset(),s=null,d=0,c=0,u=r.length;u>c;c++){var h=e(r[c]);d+=h.outerWidth()+parseInt(h.css("marginLeft"))+parseInt(h.css("marginRight"));var g=h.offset(),p=g.left,f=g.left+h.outerWidth();if(null!=t){if(f>o.left&&h.attr("tabid")==t){s=h;break}}else if(p<=o.left&&f>o.left){s=h;break}}if(null==s)return!1;var v=d-(o.left-l.left)+parseInt(s.css("marginLeft"))+parseInt(s.css("marginRight"));return i.tab.links.ul.animate({left:-1*v}),!0},moveToTabItem:function(e){var t=this;this.options;t.moveToPrevTabItem(e)||t.moveToNextTabItem(e)},getTabItemCount:function(){var t=this;this.options;return e("li",t.tab.links.ul).length},getSelectedTabItemID:function(){var t=this;this.options;return e("li.l-selected",t.tab.links.ul).attr("tabid")},removeSelectedTabItem:function(){var e=this;this.options;e.removeTabItem(e.getSelectedTabItemID())},overrideSelectedTabItem:function(e){var t=this;this.options;t.overrideTabItem(t.getSelectedTabItemID(),e)},overrideTabItem:function(t,i){var r=this;this.options;if(0==r.trigger("beforeOverrideTabItem",[t]))return!1;var n=i.tabid;void 0==n&&(n=r.getNewTabid());var a=i.url,o=i.content,l=(i.target,i.text),s=i.showClose,d=i.height;if(!r.isTabItemExist(n)){var c=e("li[tabid="+t+"]",r.tab.links.ul),u=e(".l-tab-content-item[tabid="+t+"]",r.tab.content);c&&u&&(c.attr("tabid",n),u.attr("tabid",n),0==e("iframe",u).length&&a?u.html("<iframe frameborder='0'></iframe>"):o&&u.html(o),e("iframe",u).attr("name",n),void 0==s&&(s=!0),0==s?e(".l-tab-links-item-close",c).remove():0==e(".l-tab-links-item-close",c).length&&c.append("<div class='l-tab-links-item-close'></div>"),void 0==l&&(l=n),d&&u.height(d),e("a",c).text(l),e("iframe",u).attr("src",a),r.trigger("afterOverrideTabItem",[t]))}},setHeader:function(t,i){e("li[tabid="+t+"] a",this.tab.links.ul).text(i)},selectTabItem:function(t){var i=this;this.options;return 0==i.trigger("beforeSelectTabItem",[t])?!1:(i.selectedTabId=t,e("> .l-tab-content-item[tabid="+t+"]",i.tab.content).show().siblings().hide(),e("li[tabid="+t+"]",i.tab.links.ul).addClass("l-selected").siblings().removeClass("l-selected"),void i.trigger("afterSelectTabItem",[t]))},moveToLastTabItem:function(){var t=this,i=(this.options,0);e("li",t.tab.links.ul).each(function(){i+=e(this).width()+2});var r=t.tab.width();if(i>r){var n=e(".l-tab-links-right",t.tab.links).width();t.tab.links.ul.animate({left:-1*(i-r+n+2)})}},getTabItemTitle:function(t){var i=this;this.options;return e("li[tabid="+t+"] a",i.tab.links.ul).text()},setTabItemTitle:function(t,i){var r=this;this.options;e("li[tabid="+t+"] a",r.tab.links.ul).text(i)},getTabItemSrc:function(t){var i=this;this.options;return e(".l-tab-content-item[tabid="+t+"] iframe",i.tab.content).attr("src")},setTabItemSrc:function(t,i){var r=this,n=(this.options,e(".l-tab-content-item[tabid="+t+"]",r.tab.content)),a=e(".l-tab-loading:first",n),o=e(".l-tab-content-item[tabid="+t+"] iframe",r.tab.content);a.show(),o.attr("src",i).unbind("load.tab").bind("load.tab",function(){a.hide()})},isTabItemExist:function(t){var i=this;this.options;return e("li[tabid="+t+"] a",i.tab.links.ul).length>0},addTabItem:function(t){
var i=this,r=this.options;if(0==i.trigger("beforeAddTabItem",[t]))return!1;var n=t.tabid;void 0==n&&(n=i.getNewTabid());var a=t.url,o=t.content,l=t.text,s=t.showClose,d=t.height;if(i.isTabItemExist(n))return void i.selectTabItem(n);var c=e("<li><a></a><div class='l-tab-links-item-left'></div><div class='l-tab-links-item-right'></div><div class='l-tab-links-item-close'></div></li>"),u=e("<div class='l-tab-content-item'><div class='l-tab-loading' style='display:block;'></div><iframe frameborder='0'></iframe></div>"),h=e("div:first",u),g=e("iframe:first",u);if(i.makeFullHeight){var p=i.tab.height()-i.tab.links.height();u.height(p)}c.attr("tabid",n),u.attr("tabid",n),a?(g[0].tab=i,t.data&&(g[0].openerData=t.data),g.attr("name",n).attr("id",n).attr("src",a).bind("load.tab",function(){h.hide(),t.callback&&t.callback()})):(g.remove(),h.remove()),o?(u.html(o),t.callback&&t.callback()):t.target&&(u.append(t.target),t.callback&&t.callback()),void 0==s&&(s=!0),0==s&&e(".l-tab-links-item-close",c).remove(),void 0==l&&(l=n),d&&u.height(d),e("a",c).text(l),e(".l-tab-itemswitch",i.tab.links.ul).length?c.insertBefore(e(".l-tab-itemswitch",i.tab.links.ul)):i.tab.links.ul.append(c),i.tab.content.append(u),i.selectTabItem(n),i.setTabButton()&&i.moveToTabItem(n),i._addTabItemEvent(c),r.dragToMove&&e.fn.ligerDrag&&(i.drags=i.drags||[],c.each(function(){i.drags.push(i._applyDrag(this))})),i.toggleSwitch(),i.trigger("afterAddTabItem",[t])},_addTabItemEvent:function(t){var i=this;this.options;t.click(function(){var t=e(this).attr("tabid");i.selectTabItem(t)}),i.tab.menu&&i._addTabItemContextMenuEven(t),e(".l-tab-links-item-close",t).hover(function(){e(this).addClass("l-tab-links-item-close-over")},function(){e(this).removeClass("l-tab-links-item-close-over")}).click(function(){var t=e(this).parent().attr("tabid");i.removeTabItem(t)})},removeTabItem:function(t){var i=this;this.options;if(0==i.trigger("beforeRemoveTabItem",[t]))return!1;var r=e("li[tabid="+t+"]",i.tab.links.ul).hasClass("l-selected");r&&(e(".l-tab-content-item[tabid="+t+"]",i.tab.content).prev().show(),e("li[tabid="+t+"]",i.tab.links.ul).prev().addClass("l-selected").siblings().removeClass("l-selected"));var n=e(".l-tab-content-item[tabid="+t+"]",i.tab.content),a=e("iframe",n);if(a.length){var o=a[0];o.src="about:blank";try{o.contentWindow.document.write("")}catch(l){}e.browser.msie&&CollectGarbage(),a.remove()}n.remove(),e("li[tabid="+t+"]",i.tab.links.ul).remove(),i.setTabButton(),i.trigger("afterRemoveTabItem",[t])},hideTabItem:function(t){var i=this,r=(this.options,e("li[tabid="+t+"]",i.tab.links.ul).hasClass("l-selected"));r&&(e(".l-tab-content-item[tabid="+t+"]",i.tab.content).prev().show(),e("li[tabid="+t+"]",i.tab.links.ul).prev().addClass("l-selected").siblings().removeClass("l-selected")),e("li[tabid="+t+"]",i.tab.links.ul).hide(),e(".l-tab-content-item[tabid="+t+"]",i.tab.content).hide()},showTabItem:function(t){var i=this;this.options;e("li[tabid="+t+"]",i.tab.links.ul).show()},addHeight:function(e){var t=this,i=(this.options,t.tab.height()+e);t.setHeight(i)},setHeight:function(e){var t=this;this.options;t.tab.height(e),t.setContentHeight()},setContentHeight:function(){var t=this,i=(this.options,t.tab.height()-t.tab.links.height());t.tab.content.height(i),e("> .l-tab-content-item",t.tab.content).height(i)},getNewTabid:function(){var e=this;this.options;return e.getnewidcount=e.getnewidcount||0,"tabitem"+ ++e.getnewidcount},getTabidList:function(t,i){var r=this,n=(this.options,[]);return e("> li",r.tab.links.ul).each(function(){e(this).attr("tabid")&&e(this).attr("tabid")!=t&&(!i||e(".l-tab-links-item-close",this).length>0)&&n.push(e(this).attr("tabid"))}),n},removeOther:function(t,i){var r=this,n=(this.options,r.getTabidList(t,!0));e(n).each(function(){r.removeTabItem(this)})},reload:function(t){var i=(this.options,e(".l-tab-content-item[tabid="+t+"]")),r=e(".l-tab-loading:first",i),n=e("iframe:first",i),a=e(n).attr("src");r.show(),n.attr("src",a).unbind("load.tab").bind("load.tab",function(){r.hide()})},removeAll:function(t){var i=this,r=(this.options,i.getTabidList(null,!0));e(r).each(function(){i.removeTabItem(this)})},onResize:function(){var t=this,i=this.options;if(!i.height||"string"!=typeof i.height||-1==i.height.indexOf("%"))return!1;if("body"==t.tab.parent()[0].tagName.toLowerCase()){var r=e(window).height();r-=parseInt(t.tab.parent().css("paddingTop")),r-=parseInt(t.tab.parent().css("paddingBottom")),t.height=i.heightDiff+r*parseFloat(t.height)*.01}else t.height=i.heightDiff+t.tab.parent().height()*parseFloat(i.height)*.01;t.tab.height(t.height),t.setContentHeight()},_menuItemClick:function(e){var t=this;this.options;if(e.id&&t.actionTabid)switch(e.id){case"close":if(0==t.trigger("close"))return;t.removeTabItem(t.actionTabid),t.actionTabid=null;break;case"closeother":if(0==t.trigger("closeother"))return;t.removeOther(t.actionTabid);break;case"closeall":if(0==t.trigger("closeall"))return;t.removeAll(),t.actionTabid=null;break;case"reload":if(0==t.trigger("reload",[{tabid:t.actionTabid}]))return;t.selectTabItem(t.actionTabid),t.reload(t.actionTabid)}},_addTabItemContextMenuEven:function(t){var i=this;this.options;t.bind("contextmenu",function(r){return i.tab.menu?(i.actionTabid=t.attr("tabid"),i.tab.menu.show({top:r.pageY,left:r.pageX}),0==e(".l-tab-links-item-close",this).length?i.tab.menu.setDisabled("close"):i.tab.menu.setEnabled("close"),!1):void 0})}})}(jQuery),function(e){function t(e,t){var i,r;if(e||(e=0),e=e.toString().replace(/\$|\,/g,"").replace(/[a-zA-Z]+/g,""),e.indexOf(".")>-1&&(e=e.replace(/[0]+$/g,"")),isNaN(e)&&(e=0),r=e==(e=Math.abs(e)),null==t)e=e.toString(),i=-1!=e.indexOf(".")?e.substr(e.indexOf(".")+1):"",i&&(e=Math.floor(1*e),e=e.toString());else{t=parseInt(t);var n=Math.pow(10,t);for(e=Math.floor(e*n+.50000000001),i=e%100,e=Math.floor(e/n).toString();i.toString().length<t;)i="0"+i}for(var a=0;a<Math.floor((e.length-(1+a))/3);a++)e=e.substring(0,e.length-(4*a+3))+","+e.substring(e.length-(4*a+3));var o=""+((r?"":"-")+""+e);return i&&(o+="."+i),o}e.fn.ligerTextBox=function(){return e.ligerui.run.call(this,"ligerTextBox",arguments)},e.fn.ligerGetTextBoxManager=function(){return e.ligerui.run.call(this,"ligerGetTextBoxManager",arguments)},e.ligerDefaults.TextBox={onChangeValue:null,onMouseOver:null,onMouseOut:null,onBlur:null,onFocus:null,width:null,disabled:!1,initSelect:!1,value:null,precision:2,nullText:null,digits:!1,number:!1,currency:!1,readonly:!1},e.ligerui.controls.TextBox=function(t,i){e.ligerui.controls.TextBox.base.constructor.call(this,t,i)},e.ligerui.controls.TextBox.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"TextBox"},__idPrev:function(){return"TextBox"},_init:function(){e.ligerui.controls.TextBox.base._init.call(this);var t=this,i=this.options;i.width||(i.width=e(t.element).width()),e(this.element).attr("readonly")?i.readonly=!0:i.readonly&&e(this.element).attr("readonly",!0)},_render:function(){var t=this,i=this.options;t.inputText=e(this.element),t.wrapper=t.inputText.wrap('<div class="l-text"></div>').parent(),t.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),t.inputText.hasClass("l-text-field")||t.inputText.addClass("l-text-field"),this._setEvent(),(i.digits||i.number||i.currency)&&t.inputText.addClass("l-text-field-number"),t.set(i),t.formatValue()},destroy:function(){var e=this;e.wrapper&&e.wrapper.remove(),e.options=null,liger.remove(this)},_getValue:function(){var e=this,t=this.options;return e.inputText.hasClass("l-text-field-null")?"":t.digits||t.number||t.currency?e.parseNumber():e.inputText.val()},_setNullText:function(){this.checkNotNull()},formatValue:function(){var e=this,i=this.options,r=e.inputText.val()||"";if(""==r)return"";if(i.currency)e.inputText.val(t(r,i.precision));else if(i.number&&i.precision&&r){var n=parseFloat(e.inputText.val()).toFixed(i.precision);e.inputText.val(n)}},checkNotNull:function(){var e=this,t=this.options;if(!t.nullText||"null"==t.nullText||t.disabled||t.readonly)e.inputText.removeClass("l-text-field-null");else if(!e.inputText.val())return void e.inputText.addClass("l-text-field-null").val(t.nullText)},_setEvent:function(){function t(){var e=r.inputText.val();if(!e||"-"==e)return!0;var t=(n.digits?/^-?\d+$/:/^(-?\d+)(\.)?(\d+)?$/).test(e);return t}function i(){t()||r.inputText.val(r.parseNumber())}var r=this,n=this.options;(n.digits||n.number||n.currency)&&r.inputText.keyup(i).bind("paste",i),r.inputText.bind("blur.textBox",function(){r.trigger("blur"),r.checkNotNull(),r.formatValue(),r.wrapper.removeClass("l-text-focus")}).bind("focus.textBox",function(){n.readonly||(r.trigger("focus"),n.nullText&&e(this).hasClass("l-text-field-null")&&e(this).removeClass("l-text-field-null").val(""),r.wrapper.addClass("l-text-focus"),(n.digits||n.number||n.currency)&&(e(this).val(r.parseNumber()),n.initSelect&&setTimeout(function(){r.inputText.select()},150)))}).change(function(){r.trigger("changeValue",[this.value])}),r.wrapper.hover(function(){r.trigger("mouseOver"),r.wrapper.addClass("l-text-over")},function(){r.trigger("mouseOut"),r.wrapper.removeClass("l-text-over")})},parseNumber:function(e){var t=this,i=this.options,r=i.digits?!0:!1;if(e=e||t.inputText.val(),null==e||""==e)return"";if(!(i.digits||i.number||i.currency))return e;"string"!=typeof e&&(e=(e||"").toString());var n=/^\-/.test(e);if(r){if("0"==e)return e;e=e.replace(/\D+|^[0]+/g,"")}else e=e.replace(/[^0-9.]/g,""),/^[0]+[1-9]+/.test(e)&&(e=e.replace(/^[0]+/,""));return!r&&i.precision&&(e=parseFloat(e).toFixed(i.precision),"NaN"==e)?"0":(n&&(e="-"+e),e)},_setDisabled:function(e){var t=this.options;e?(this.inputText.attr("readonly","readonly"),this.wrapper.addClass("l-text-disabled")):t.readonly||(this.inputText.removeAttr("readonly"),this.wrapper.removeClass("l-text-disabled"))},_setWidth:function(e){e>20&&(this.wrapper.css({width:e}),this.inputText.css({width:e-4}))},_setHeight:function(e){e>10&&(this.wrapper.height(e),this.inputText.height(e-2))},_setValue:function(e){null!=e&&this.inputText.val(e),this.checkNotNull()},_setLabel:function(t){var i=this,r=this.options;if(i.labelwrapper)i.labelwrapper.find(".l-text-label").html(t+":&nbsp");else{i.labelwrapper=i.wrapper.wrap('<div class="l-labeltext"></div>').parent();var n=e('<div class="l-text-label" style="float:left;">'+t+":&nbsp</div>");i.labelwrapper.prepend(n),i.wrapper.css("float","left"),r.labelWidth?i._setLabelWidth(r.labelWidth):r.labelWidth=n.width(),n.height(i.wrapper.height()),r.labelAlign&&i._setLabelAlign(r.labelAlign),i.labelwrapper.append('<br style="clear:both;" />'),i.labelwrapper.width(r.labelWidth+r.width+2)}},_setLabelWidth:function(e){var t=this;this.options;t.labelwrapper&&t.labelwrapper.find(".l-text-label").width(e)},_setLabelAlign:function(e){var t=this;this.options;t.labelwrapper&&t.labelwrapper.find(".l-text-label").css("text-align",e)},updateStyle:function(){var e=this,t=this.options;e.inputText.attr("readonly")?(e.wrapper.addClass("l-text-readonly"),t.disabled=!0):(e.wrapper.removeClass("l-text-readonly"),t.disabled=!1),e.inputText.attr("disabled")?(e.wrapper.addClass("l-text-disabled"),t.disabled=!0):(e.wrapper.removeClass("l-text-disabled"),t.disabled=!1),e.inputText.hasClass("l-text-field-null")&&e.inputText.val()!=t.nullText&&e.inputText.removeClass("l-text-field-null"),e.formatValue()},setValue:function(e){this._setValue(e),this.trigger("changeValue",[e])}})}(jQuery),function(e){e.ligerTip=function(t){return e.ligerui.run.call(null,"ligerTip",arguments)},e.fn.ligerTip=function(t){return this.each(function(){var i=e.extend({},e.ligerDefaults.ElementTip,t||{});if(i.target=i.target||this,i.auto||void 0==t)i.content||(i.content=this.title,i.removeTitle&&e(this).removeAttr("title")),i.content=i.content||this.title,e(this).bind("mouseover.tip",function(){i.x=e(this).offset().left+e(this).width()+(i.distanceX||0),i.y=e(this).offset().top+(i.distanceY||0),e.ligerTip(i)}).bind("mouseout.tip",function(){var t=e.ligerui.managers[this.ligeruitipid];t&&t.remove()});else{if(i.target.ligeruitipid)return;i.x=e(this).offset().left+e(this).width()+(i.distanceX||0),i.y=e(this).offset().top+(i.distanceY||0),i.x=i.x||0,i.y=i.y||0,e.ligerTip(i)}}),e.ligerui.get(this,"ligeruitipid")},e.fn.ligerHideTip=function(t){return this.each(function(){var i=t||{};void 0==i.isLabel&&(i.isLabel="label"==this.tagName.toLowerCase()&&null!=e(this).attr("for"));var r=this;if(i.isLabel){var n=e("#"+e(this).attr("for"));if(0==n.length)return;r=n[0]}var a=e.ligerui.managers[r.ligeruitipid];a&&a.remove()}).unbind("mouseover.tip").unbind("mouseout.tip")},e.fn.ligerGetTipManager=function(){return e.ligerui.get(this)},e.ligerDefaults=e.ligerDefaults||{},e.ligerDefaults.HideTip={},e.ligerDefaults.Tip={content:null,callback:null,width:150,height:null,x:0,y:0,appendIdTo:null,target:null,auto:null,removeTitle:!0},e.ligerDefaults.ElementTip={distanceX:1,distanceY:-3,auto:null,removeTitle:!0},e.ligerMethos.Tip={},e.ligerui.controls.Tip=function(t){e.ligerui.controls.Tip.base.constructor.call(this,null,t)},e.ligerui.controls.Tip.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Tip"},__idPrev:function(){return"Tip"},_extendMethods:function(){return e.ligerMethos.Tip},_render:function(){var t=this,i=this.options,r=e('<div class="l-verify-tip"><div class="l-verify-tip-corner"></div><div class="l-verify-tip-content"></div></div>');t.tip=r,t.tip.attr("id",t.id),i.content&&(e("> .l-verify-tip-content:first",r).html(i.content),r.appendTo("body"),r.css({left:i.x,top:i.y}).show(),i.width&&e("> .l-verify-tip-content:first",r).width(i.width-8),i.height&&e("> .l-verify-tip-content:first",r).width(i.height),eee=i.appendIdTo,i.appendIdTo&&i.appendIdTo.attr("ligerTipId",t.id),i.target&&(e(i.target).attr("ligerTipId",t.id),i.target.ligeruitipid=t.id),i.callback&&i.callback(r),t.set(i))},_setContent:function(t){e("> .l-verify-tip-content:first",this.tip).html(t)},remove:function(){this.options.appendIdTo&&this.options.appendIdTo.removeAttr("ligerTipId"),this.options.target&&(e(this.options.target).removeAttr("ligerTipId"),this.options.target.ligeruitipid=null),this.tip.remove()}})}(jQuery),function(e){e.fn.ligerToolBar=function(t){return e.ligerui.run.call(this,"ligerToolBar",arguments)},e.fn.ligerGetToolBarManager=function(){return e.ligerui.run.call(this,"ligerGetToolBarManager",arguments)},e.ligerDefaults.ToolBar={},e.ligerMethos.ToolBar={},e.ligerui.controls.ToolBar=function(t,i){e.ligerui.controls.ToolBar.base.constructor.call(this,t,i)},e.ligerui.controls.ToolBar.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"ToolBar"},__idPrev:function(){return"ToolBar"},_extendMethods:function(){return e.ligerMethos.ToolBar},_render:function(){var t=this,i=this.options;t.toolbarItemCount=0,t.toolBar=e(this.element),t.toolBar.addClass("l-toolbar"),t.set(i)},_setItems:function(t){var i=this;i.toolBar.html(""),e(t).each(function(e,t){i.addItem(t)})},removeItem:function(t){var i=this;this.options;e("> .l-toolbar-item[toolbarid="+t+"]",i.toolBar).remove()},setEnabled:function(t){var i=this;this.options;e("> .l-toolbar-item[toolbarid="+t+"]",i.toolBar).removeClass("l-toolbar-item-disable")},setDisabled:function(t){var i=this;this.options;e("> .l-toolbar-item[toolbarid="+t+"]",i.toolBar).addClass("l-toolbar-item-disable")},isEnable:function(t){var i=this;this.options;return!e("> .l-toolbar-item[toolbarid="+t+"]",i.toolBar).hasClass("l-toolbar-item-disable")},addItem:function(t){var i=this;this.options;if(t.line||"line"==t.type)return void i.toolBar.append('<div class="l-bar-separator"></div>');if("text"==t.type)return void i.toolBar.append('<div class="l-toolbar-item l-toolbar-text"><span>'+t.text||"</span></div>");var r=e('<div class="l-toolbar-item l-panel-btn"><span></span><div class="l-panel-btn-l"></div><div class="l-panel-btn-r"></div></div>');i.toolBar.append(r),t.id||(t.id="item-"+ ++i.toolbarItemCount),r.attr("toolbarid",t.id),t.img?(r.append("<img src='"+t.img+"' />"),r.addClass("l-toolbar-item-hasicon")):t.icon?(r.append("<div class='l-icon l-icon-"+t.icon+"'></div>"),r.addClass("l-toolbar-item-hasicon")):t.color&&(r.append("<div class='l-toolbar-item-color' style='background:"+t.color+"'></div>"),r.addClass("l-toolbar-item-hasicon")),t.text&&e("span:first",r).html(t.text),t.disable&&r.addClass("l-toolbar-item-disable"),t.click&&r.click(function(){e(this).hasClass("l-toolbar-item-disable")||t.click(t)}),t.menu?(t.menu=e.ligerMenu(t.menu),r.hover(function(){if(!e(this).hasClass("l-toolbar-item-disable")){i.actionMenu&&i.actionMenu.hide();var r=e(this).offset().left,n=e(this).offset().top+e(this).height();t.menu.show({top:n,left:r}),i.actionMenu=t.menu,e(this).addClass("l-panel-btn-over")}},function(){e(this).hasClass("l-toolbar-item-disable")||e(this).removeClass("l-panel-btn-over")})):r.hover(function(){e(this).hasClass("l-toolbar-item-disable")||e(this).addClass("l-panel-btn-over")},function(){e(this).hasClass("l-toolbar-item-disable")||e(this).removeClass("l-panel-btn-over")})}}),e.ligerui.controls.ToolBar.prototype.setEnable=e.ligerui.controls.ToolBar.prototype.setEnabled,e.ligerui.controls.ToolBar.prototype.setDisable=e.ligerui.controls.ToolBar.prototype.setDisabled}(jQuery),function(e){function t(e){return e?e.replace(/(^\s*)|(\s*$)/g,""):e}e.fn.ligerTree=function(t){return e.ligerui.run.call(this,"ligerTree",arguments)},e.fn.ligerGetTreeManager=function(){return e.ligerui.run.call(this,"ligerGetTreeManager",arguments)},e.ligerDefaults.Tree={url:null,urlParms:null,data:null,checkbox:!0,autoCheckboxEven:!0,enabledCompleteCheckbox:!0,parentIcon:"folder",childIcon:"leaf",textFieldName:"text",attribute:["id","url"],treeLine:!0,nodeWidth:90,statusName:"__status",isLeaf:null,single:!1,needCancel:!0,onBeforeExpand:function(){},onContextmenu:function(){},onExpand:function(){},onBeforeCollapse:function(){},onCollapse:function(){},onBeforeSelect:function(){},onSelect:function(){},onBeforeCancelSelect:function(){},onCancelselect:function(){},onCheck:function(){},onSuccess:function(){},onError:function(){},onClick:function(){},idFieldName:"id",parentIDFieldName:null,topParentIDValue:0,onBeforeAppend:function(){},onAppend:function(){},onAfterAppend:function(){},slide:!0,iconFieldName:"icon",nodeDraggable:!1,nodeDraggingRender:null,btnClickToToggleOnly:!0,ajaxType:"post",ajaxContentType:null,render:null,selectable:null,isExpand:null,delay:null,idField:null,parentIDField:null,iconClsFieldName:null},e.ligerui.controls.Tree=function(t,i){e.ligerui.controls.Tree.base.constructor.call(this,t,i)},e.ligerui.controls.Tree.ligerExtend(e.ligerui.core.UIComponent,{_init:function(){e.ligerui.controls.Tree.base._init.call(this);var t=this.options;t.single&&(t.autoCheckboxEven=!1)},_render:function(){var t=this,i=this.options;t.set(i,!0),t.tree=e(t.element),t.tree.addClass("l-tree"),t.toggleNodeCallbacks=[],t.sysAttribute=["isexpand","ischecked","href","style","delay"],t.loading=e("<div class='l-tree-loading'></div>"),t.tree.after(t.loading),t.data=[],t.maxOutlineLevel=1,t.treedataindex=0,t._applyTree(),t._setTreeEven(),t.set(i,!1)},_setTreeLine:function(e){e?this.tree.removeClass("l-tree-noline"):this.tree.addClass("l-tree-noline")},_setParms:function(){var t=this.options;e.isFunction(t.parms)&&(t.parms=t.parms())},reload:function(e){var t=this,i=this.options;t.clear(),t.loadData(null,i.url,null,{success:e})},reloadNode:function(e,t,i){var r=this,n=this.options;if(r.clear(e),"string"==typeof t)r.loadData(e,t,null,{success:i});else{if(!t)return;n.idField&&n.parentIDField&&(t=r.arrayToTree(t,n.idField,n.parentIDField)),r.append(e,t)}},_setUrl:function(e){var t=this;this.options;e&&(t.clear(),t.loadData(null,e))},_setData:function(e){e&&(this.clear(),this.append(null,e))},setData:function(e){this.set("data",e)},getData:function(){return this.data},hasChildren:function(e){return this.options.isLeaf?!this.options.isLeaf(e):e.children?!0:!1},getParent:function(t,i){var r=this;t=r.getNodeDom(t);var n=r.getParentTreeItem(t,i);if(!n)return null;var a=e(n).attr("treedataindex");return r._getDataNodeByTreeDataIndex(r.data,a)},getParentTreeItem:function(t,i){var r=this;t=r.getNodeDom(t);var n=e(t);if(n.parent().hasClass("l-tree"))return null;if(void 0==i)return 0==n.parent().parent("li").length?null:n.parent().parent("li")[0];for(var a=parseInt(n.attr("outlinelevel")),o=n,l=a-1;l>=i;l--)o=o.parent().parent("li");return o[0]},getChecked:function(){var t=this;this.options;if(!this.options.checkbox)return null;var i=[];return e(".l-checkbox-checked",t.tree).parent().parent("li").each(function(){var r=parseInt(e(this).attr("treedataindex"));i.push({target:this,data:t._getDataNodeByTreeDataIndex(t.data,r)})}),i},getCheckedData:function(){var t=this;this.options;if(!this.options.checkbox)return null;var i=[];return e(".l-checkbox-checked",t.tree).parent().parent("li").each(function(){var r=parseInt(e(this).attr("treedataindex"));i.push(t._getDataNodeByTreeDataIndex(t.data,r))}),i},refreshTree:function(){var t=this;this.options;e.each(this.getChecked(),function(i,r){t._setParentCheckboxStatus(e(r.target))})},getSelected:function(){var t=this,i=(this.options,{});if(i.target=e(".l-selected",t.tree).parent("li")[0],i.target){var r=parseInt(e(i.target).attr("treedataindex"));return i.data=t._getDataNodeByTreeDataIndex(t.data,r),i}return null},upgrade:function(t){var i=this;this.options;e(".l-note",t).each(function(){e(this).removeClass("l-note").addClass("l-expandable-open")}),e(".l-note-last",t).each(function(){e(this).removeClass("l-note-last").addClass("l-expandable-open")}),e("."+i._getChildNodeClassName(),t).each(function(){e(this).removeClass(i._getChildNodeClassName()).addClass(i._getParentNodeClassName(!0))})},demotion:function(t){var i=this;this.options;if(t||"li"==t[0].tagName.toLowerCase()){var r=e(t).hasClass("l-last");e(".l-expandable-open",t).each(function(){e(this).removeClass("l-expandable-open").addClass(r?"l-note-last":"l-note")}),e(".l-expandable-close",t).each(function(){e(this).removeClass("l-expandable-close").addClass(r?"l-note-last":"l-note")}),e("."+i._getParentNodeClassName(!0),t).each(function(){e(this).removeClass(i._getParentNodeClassName(!0)).addClass(i._getChildNodeClassName())})}},collapseAll:function(){var t=this;this.options;e(".l-expandable-open",t.tree).click()},expandAll:function(){var t=this;this.options;e(".l-expandable-close",t.tree).click()},arrayToTree:function(e,t,i){function r(e){return"string"==typeof e&&(e=e.replace(/[.]/g,"").toLowerCase()),e}var n=(this.options,"children");if(!e||!e.length)return[];for(var a=[],o={},l=e.length,s=0;l>s;s++){var d=e[s],c=r(d[t]);o[c]=d}for(var s=0;l>s;s++){var u=e[s],c=r(u[i]),h=o[c];h?(h[n]=h[n]||[],h[n].push(u)):a.push(u)}return a},loadData:function(t,i,r,n){var a=this,o=this.options;n=e.extend({showLoading:function(){a.loading.show()},success:function(){},error:function(){},hideLoading:function(){a.loading.hide()}},n||{});var l=o.ajaxType;r=e.extend(e.isFunction(o.parms)?o.parms():o.parms,r),"application/json"==o.ajaxContentType&&"string"!=typeof r&&(r=liger.toJSON(r));var s=e.isFunction(o.urlParms)?o.urlParms.call(a):o.urlParms;if(s)for(name in s)i+=-1==i.indexOf("?")?"?":"&",i+=name+"="+s[name];var d={type:l,url:i,data:r,dataType:"json",beforeSend:function(){n.showLoading()},success:function(e){e&&(o.idField&&o.parentIDField&&(e=a.arrayToTree(e,o.idField,o.parentIDField)),n.hideLoading(),a.append(t,e),a.trigger("success",[e]),n.success(e))},error:function(e,t,i){try{r.hideLoading(),a.trigger("error",[e,t,i]),r.error(e,t,i)}catch(r){}}};o.ajaxContentType&&(d.contentType=o.ajaxContentType),e.ajax(d)},clear:function(t){var i=this;this.options;if(t){var r=i.getNodeDom(t),n=i._getDataNodeByTreeDataIndex(i.data,e(r).attr("treedataindex"));e(r).find("ul.l-children").remove(),n&&(n.children=[])}else i.toggleNodeCallbacks=[],i.data=null,i.data=[],i.nodes=null,i.tree.html("")},getNodeDom:function(t){var i=this;this.options;return null==t?t:"string"==typeof t||"number"==typeof t?e("li[treedataindex="+t+"]",i.tree).get(0):"object"==typeof t&&"treedataindex"in t?i.getNodeDom(t.treedataindex):t.target&&t.data?t.target:t},hide:function(t){var i=this;this.options;t=i.getNodeDom(t),t&&e(t).hide()},show:function(t){var i=this;this.options;t=i.getNodeDom(t),t&&e(t).show()},remove:function(t){var i=this,r=this.options;t=i.getNodeDom(t);var n=parseInt(e(t).attr("treedataindex")),a=i._getDataNodeByTreeDataIndex(i.data,n);a&&i._setTreeDataStatus([a],"delete");var o=i.getParentTreeItem(t);r.checkbox&&i._setParentCheckboxStatus(e(t)),e(t).remove(),i._updateStyle(o?e("ul:first",o):i.tree)},_updateStyle:function(t){var i=this,r=(this.options,e(" > li",t)),n=r.length;n&&r.each(function(t,r){0!=t||e(this).hasClass("l-first")||e(this).addClass("l-first"),t!=n-1||e(this).hasClass("l-last")||e(this).addClass("l-last"),0==t&&t==n-1&&e(this).addClass("l-onlychild"),e("> div .l-note,> div .l-note-last",this).removeClass("l-note l-note-last").addClass(t==n-1?"l-note-last":"l-note"),i._setTreeItem(this,{isLast:t==n-1})})},update:function(t,i){var r=this,n=this.options;t=r.getNodeDom(t);var a=parseInt(e(t).attr("treedataindex"));nodedata=r._getDataNodeByTreeDataIndex(r.data,a);for(var o in i)nodedata[o]=i[o],o==n.textFieldName&&e("> .l-body > span",t).text(i[o])},append:function(t,i,r,n){var a=this,o=this.options;if(t=a.getNodeDom(t),0==a.trigger("beforeAppend",[t,i]))return!1;if(!i||!i.length)return!1;if(o.idFieldName&&o.parentIDFieldName&&(i=a.arrayToTree(i,o.idFieldName,o.parentIDFieldName)),a._addTreeDataIndexToData(i),a._setTreeDataStatus(i,"add"),null!=r&&(r=a.getNodeDom(r)),a.trigger("append",[t,i]),a._appendData(t,i),null==t){var l=a._getTreeHTMLByData(i,1,[],!0);return l[l.length-1]=l[0]="",null!=r?(e(r)[n?"after":"before"](l.join("")),a._updateStyle(t?e("ul:first",t):a.tree)):(e("> li:last",a.tree).length>0&&a._setTreeItem(e("> li:last",a.tree)[0],{isLast:!1}),a.tree.append(l.join(""))),e(".l-body",a.tree).hover(function(){e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),a._upadteTreeWidth(),void a.trigger("afterAppend",[t,i])}var s=e(t),d=parseInt(s.attr("outlinelevel")),c=e("> ul",s).length>0;c||(s.append("<ul class='l-children'></ul>"),a.upgrade(t));for(var u=[],h=1;d-1>=h;h++){var g=e(a.getParentTreeItem(t,h));u.push(g.hasClass("l-last"))}u.push(s.hasClass("l-last"));var l=a._getTreeHTMLByData(i,d+1,u,!0);l[l.length-1]=l[0]="",null!=r?(e(r)[n?"after":"before"](l.join("")),a._updateStyle(t?e("ul:first",t):a.tree)):(e("> .l-children > li:last",s).length>0&&a._setTreeItem(e("> .l-children > li:last",s)[0],{isLast:!1}),e(">.l-children",t).append(l.join(""))),a._upadteTreeWidth(),e(">.l-children .l-body",t).hover(function(){e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),a.trigger("afterAppend",[t,i])},cancelSelect:function(t,i){var r=this,n=this.options,a=r.getNodeDom(t),o=e(a),l=parseInt(o.attr("treedataindex")),s=r._getDataNodeByTreeDataIndex(r.data,l),d=e(">div:first",o);n.checkbox?e(".l-checkbox",d).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"):d.removeClass("l-selected"),0!=i&&r.trigger("cancelSelect",[{data:s,target:o[0]}])},selectNode:function(i,r){var n=this,a=this.options,o=null;if("function"==typeof i)o=i;else{if("object"==typeof i){var l=e(i),s=parseInt(l.attr("treedataindex")),d=n._getDataNodeByTreeDataIndex(n.data,s),c=e(">div:first",l);return c.length||(c=e("li[treedataindex="+s+"] >div:first",n.tree)),a.checkbox?e(".l-checkbox",c).removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked"):(e("div.l-selected",n.tree).removeClass("l-selected"),c.addClass("l-selected")),void(0!=r&&n.trigger("select",[{data:d,target:c.parent().get(0)}]))}o=function(e){return e[a.idFieldName]||0==e[a.idFieldName]?t(e[a.idFieldName].toString())==t(i.toString()):!1}}e("li",n.tree).each(function(){var t=e(this),i=parseInt(t.attr("treedataindex")),a=n._getDataNodeByTreeDataIndex(n.data,i);o(a,i)?n.selectNode(this,r):n.options.checkbox||n.cancelSelect(this,r)})},getTextByID:function(e){var t=this,i=this.options,r=t.getDataByID(e);return r?r[i.textFieldName]:null},getDataByID:function(t){function i(e){for(var r=0;r<e.length;r++){var a=e[r];if(a[n.idFieldName]==t)return a;if(a.children&&a.children.length){var o=i(a.children);if(o)return o}}return null}var r=this,n=this.options,a=null;return r.data&&r.data.length?i(r.data):(e("li",r.tree).each(function(){if(!a){var i=e(this),o=parseInt(i.attr("treedataindex")),l=r._getDataNodeByTreeDataIndex(r.data,o);l[n.idFieldName].toString()==t.toString()&&(a=l)}}),a)},arrayToTree:function(e,t,i){if(!e||!e.length)return[];for(var r=[],n={},a=e.length,o=0;a>o;o++){var l=e[o];n[l[t]]=l}for(var o=0;a>o;o++){var s=e[o],d=n[s[i]];d?(d.children=d.children||[],d.children.push(s)):r.push(s)}return r},_getDataNodeByTreeDataIndex:function(e,t){for(var i=this,r=(this.options,0);r<e.length;r++){if(e[r].treedataindex==t)return e[r];if(e[r].children){var n=i._getDataNodeByTreeDataIndex(e[r].children,t);if(n)return n}}return null},_setTreeDataStatus:function(t,i){var r=this,n=this.options;e(t).each(function(){this[n.statusName]=i,this.children&&r._setTreeDataStatus(this.children,i)})},_addTreeDataIndexToData:function(t){var i=this;this.options;e(t).each(function(){void 0==this.treedataindex&&(this.treedataindex=i.treedataindex++,this.children&&i._addTreeDataIndexToData(this.children))})},_addToNodes:function(t){var i=this;this.options;i.nodes=i.nodes||[],i.nodes.push(t),t.children&&e(t.children).each(function(e,t){i._addToNodes(t)})},_appendData:function(t,i){var r=this,n=(this.options,parseInt(e(t).attr("treedataindex"))),a=r._getDataNodeByTreeDataIndex(r.data,n);void 0==r.treedataindex&&(r.treedataindex=0),a&&void 0==a.children&&(a.children=[]),e(i).each(function(e,t){a?a.children[a.children.length]=t:r.data[r.data.length]=t,r._addToNodes(t)})},_setTreeItem:function(t,i){var r=this;this.options;if(i){t=r.getNodeDom(t);var n=e(t),a=parseInt(n.attr("outlinelevel"));void 0!=i.isLast&&(1==i.isLast?(n.removeClass("l-last").addClass("l-last"),e("> div .l-note",n).removeClass("l-note").addClass("l-note-last"),e(".l-children li",n).find(".l-box:eq("+(a-1)+")").removeClass("l-line")):0==i.isLast&&(n.removeClass("l-last"),e("> div .l-note-last",n).removeClass("l-note-last").addClass("l-note"),e(".l-children li",n).find(".l-box:eq("+(a-1)+")").removeClass("l-line").addClass("l-line")))}},_upadteTreeWidth:function(){var e=this,t=this.options,i=22*e.maxOutlineLevel;t.checkbox&&(i+=22),(t.parentIcon||t.childIcon)&&(i+=22),i+=t.nodeWidth,e.tree.width(i)},_getChildNodeClassName:function(){var e=this.options;return"l-tree-icon-"+e.childIcon},_getParentNodeClassName:function(e){var t=this.options,i="l-tree-icon-"+t.parentIcon;return e&&(i+="-open"),i},_isExpand:function(e,t){var i=this.options,r=null!=e.isExpand?e.isExpand:null!=e.isexpand?e.isexpand:i.isExpand;return null==r?!0:("function"==typeof r&&(r=i.isExpand({data:e,level:t})),"boolean"==typeof r?r:"string"==typeof r?"true"==r:"number"==typeof r?r>t:!0)},_getDelay:function(t,i){var r=this.options,n=null!=t.delay?t.delay:r.delay;return null==n?!1:("function"==typeof n&&(n=n({data:t,level:i})),"boolean"==typeof n?n:"string"==typeof n?{url:n}:("number"==typeof n&&(n=[n]),e.isArray(n)?-1!=e.inArray(i,n):"object"==typeof n&&n.url?n:!1))},_getTreeHTMLByData:function(t,i,r,n){var a=this,o=this.options;a.maxOutlineLevel<i&&(a.maxOutlineLevel=i),r=r||[],i=i||1;var l=[];n?l.push("<ul class='l-children'>"):l.push('<ul class="l-children" style="display:none">');for(var s=0;s<t.length;s++){var d=t[s],c=0==s,u=s==t.length-1,h=a._getDelay(d,i),g=h?!1:a._isExpand(d,i);l.push("<li "),void 0!=d.treedataindex&&l.push('treedataindex="'+d.treedataindex+'" '),g&&l.push("isexpand="+d.isexpand+" "),l.push("outlinelevel="+i+" ");for(var p=0;p<a.sysAttribute.length;p++)e(this).attr(a.sysAttribute[p])&&(t[dataindex][a.sysAttribute[p]]=e(this).attr(a.sysAttribute[p]));for(var p=0;p<o.attribute.length;p++)d[o.attribute[p]]&&l.push(o.attribute[p]+'="'+d[o.attribute[p]]+'" ');l.push('class="'),
c&&l.push("l-first "),u&&l.push("l-last "),c&&u&&l.push("l-onlychild "),l.push('"'),l.push(">"),l.push('<div class="l-body'),o.selectable&&0==o.selectable(d)&&l.push(" l-unselectable"),l.push('">');for(var f=0;i-2>=f;f++)r[f]?l.push('<div class="l-box"></div>'):l.push('<div class="l-box l-line"></div>');if(a.hasChildren(d)?(g?l.push('<div class="l-box l-expandable-open"></div>'):l.push('<div class="l-box l-expandable-close"></div>'),o.checkbox&&(d.ischecked?l.push('<div class="l-box l-checkbox l-checkbox-checked"></div>'):l.push('<div class="l-box l-checkbox l-checkbox-unchecked"></div>')),o.parentIcon&&(l.push('<div class="l-box l-tree-icon '),l.push(a._getParentNodeClassName(g?!0:!1)+" "),o.iconFieldName&&d[o.iconFieldName]?l.push("l-tree-icon-none"):o.iconClsFieldName&&d[o.iconClsFieldName]&&l.push("l-tree-icon-"+d[o.iconClsFieldName]+" "),l.push('">'),o.iconFieldName&&d[o.iconFieldName]&&l.push('<img src="'+d[o.iconFieldName]+'" />'),l.push("</div>"))):(u?l.push('<div class="l-box l-note-last"></div>'):l.push('<div class="l-box l-note"></div>'),o.checkbox&&(d.ischecked?l.push('<div class="l-box l-checkbox l-checkbox-checked"></div>'):l.push('<div class="l-box l-checkbox l-checkbox-unchecked"></div>')),o.childIcon&&(l.push('<div class="l-box l-tree-icon '),l.push(a._getChildNodeClassName()+" "),o.iconFieldName&&d[o.iconFieldName]?l.push("l-tree-icon-none"):o.iconClsFieldName&&d[o.iconClsFieldName]&&l.push("l-tree-icon-"+d[o.iconClsFieldName]+" "),l.push('">'),o.iconFieldName&&d[o.iconFieldName]&&l.push('<img src="'+d[o.iconFieldName]+'" />'),l.push("</div>"))),o.render?l.push("<span>"+o.render(d,d[o.textFieldName])+"</span>"):l.push("<span>"+d[o.textFieldName]+"</span>"),l.push("</div>"),a.hasChildren(d)){for(var v=[],f=0;f<r.length;f++)v.push(r[f]);v.push(u),h?1==h?a.toggleNodeCallbacks.push({data:d,callback:function(t,r){var n=a._getTreeHTMLByData(r.children,i+1,v,g).join("");e(t).append(n),e(">.l-children .l-body",t).hover(function(){e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),a._removeToggleNodeCallback(r)}}):h.url&&!function(t,i,r){a.toggleNodeCallbacks.push({data:t,callback:function(t,n){a.loadData(t,i,r,{showLoading:function(){e("div.l-expandable-close:first",t).addClass("l-box-loading")},hideLoading:function(){e("div.l-box-loading:first",t).removeClass("l-box-loading")}}),a._removeToggleNodeCallback(n)}})}(d,h.url,h.parms):l.push(a._getTreeHTMLByData(d.children,i+1,v,g).join(""))}l.push("</li>")}return l.push("</ul>"),l},_removeToggleNodeCallback:function(e){for(var t=this,i=(this.options,0);i<=t.toggleNodeCallbacks.length;i++)if(t.toggleNodeCallbacks[i]&&t.toggleNodeCallbacks[i].data==e){t.toggleNodeCallbacks.splice(i,1);break}},_getDataByTreeHTML:function(t){var i=this,r=this.options,n=[];return e("> li",t).each(function(t,a){var o=n.length;n[o]={treedataindex:i.treedataindex++},n[o][r.textFieldName]=e("> span,> a",this).html();for(var l=0;l<i.sysAttribute.length;l++)e(this).attr(i.sysAttribute[l])&&(n[o][i.sysAttribute[l]]=e(this).attr(i.sysAttribute[l]));for(var l=0;l<r.attribute.length;l++)e(this).attr(r.attribute[l])&&(n[o][r.attribute[l]]=e(this).attr(r.attribute[l]));e("> ul",this).length>0&&(n[o].children=i._getDataByTreeHTML(e("> ul",this)))}),n},_applyTree:function(){var t=this;this.options;t.data=t._getDataByTreeHTML(t.tree);var i=t._getTreeHTMLByData(t.data,1,[],!0);i[i.length-1]=i[0]="",t.tree.html(i.join("")),t._upadteTreeWidth(),e(".l-body",t.tree).hover(function(){e(this).addClass("l-over")},function(){e(this).removeClass("l-over")})},_getSrcElementByEvent:function(t){var i=this,r=t.target||t.srcElement,n=r.tagName.toLowerCase(),a=e(r).parents().add(r),o=function(t){for(var i=a.length-1;i>=0;i--)if(e(a[i]).hasClass(t))return a[i];return null};if(-1==a.index(this.element))return{out:!0};var l={tree:o("l-tree"),node:o("l-body"),checkbox:o("l-checkbox"),icon:o("l-tree-icon"),text:"span"==n};if(l.node){var s=parseInt(e(l.node).parent().attr("treedataindex"));l.data=i._getDataNodeByTreeDataIndex(i.data,s)}return l},_setTreeEven:function(){var t=this,i=this.options;t.hasBind("contextmenu")&&t.tree.bind("contextmenu",function(i){var r=i.target||i.srcElement,n=null;if("a"==r.tagName.toLowerCase()||"span"==r.tagName.toLowerCase()||e(r).hasClass("l-box")?n=e(r).parent().parent():e(r).hasClass("l-body")?n=e(r).parent():"li"==r.tagName.toLowerCase()&&(n=e(r)),n){var a=parseInt(n.attr("treedataindex")),o=t._getDataNodeByTreeDataIndex(t.data,a);return t.trigger("contextmenu",[{data:o,target:n[0]},i])}}),t.tree.click(function(r){var n=r.target||r.srcElement,a=null;if(a="a"==n.tagName.toLowerCase()||"span"==n.tagName.toLowerCase()||e(n).hasClass("l-box")?e(n).parent().parent():e(n).hasClass("l-body")?e(n).parent():e(n)){var o=parseInt(a.attr("treedataindex")),l=t._getDataNodeByTreeDataIndex(t.data,o),s=e("div.l-body:first",a).find("div.l-expandable-open:first,div.l-expandable-close:first"),d=e(n).hasClass("l-expandable-open")||e(n).hasClass("l-expandable-close");if(!e(n).hasClass("l-checkbox")&&!d&&!a.hasClass("l-unselectable"))if(e(">div:first",a).hasClass("l-selected")&&i.needCancel){if(0==t.trigger("beforeCancelSelect",[{data:l,target:a[0]}]))return!1;e(">div:first",a).removeClass("l-selected"),t.trigger("cancelSelect",[{data:l,target:a[0]}])}else{if(0==t.trigger("beforeSelect",[{data:l,target:a[0]}]))return!1;e(".l-body",t.tree).removeClass("l-selected"),e(">div:first",a).addClass("l-selected"),t.trigger("select",[{data:l,target:a[0]}])}if(e(n).hasClass("l-checkbox"))i.autoCheckboxEven?(e(n).hasClass("l-checkbox-unchecked")?(e(n).removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked"),e(".l-children .l-checkbox",a).removeClass("l-checkbox-incomplete l-checkbox-unchecked").addClass("l-checkbox-checked"),t.trigger("check",[{data:l,target:a[0]},!0])):e(n).hasClass("l-checkbox-checked")?(e(n).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"),e(".l-children .l-checkbox",a).removeClass("l-checkbox-incomplete l-checkbox-checked").addClass("l-checkbox-unchecked"),t.trigger("check",[{data:l,target:a[0]},!1])):e(n).hasClass("l-checkbox-incomplete")&&(e(n).removeClass("l-checkbox-incomplete").addClass("l-checkbox-checked"),e(".l-children .l-checkbox",a).removeClass("l-checkbox-incomplete l-checkbox-unchecked").addClass("l-checkbox-checked"),t.trigger("check",[{data:l,target:a[0]},!0])),t._setParentCheckboxStatus(a)):e(n).hasClass("l-checkbox-unchecked")?(e(n).removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked"),i.single&&e(".l-checkbox",t.tree).not(n).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"),t.trigger("check",[{data:l,target:a[0]},!0])):e(n).hasClass("l-checkbox-checked")&&(e(n).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"),t.trigger("check",[{data:l,target:a[0]},!1]));else if(!s.hasClass("l-expandable-open")||i.btnClickToToggleOnly&&!d){if(s.hasClass("l-expandable-close")&&(!i.btnClickToToggleOnly||d)){if(0==t.trigger("beforeExpand",[{data:l,target:a[0]}]))return!1;e(t.toggleNodeCallbacks).each(function(){this.data==l&&this.callback(a[0],l)}),s.removeClass("l-expandable-close").addClass("l-expandable-open");var c=function(){t.trigger("expand",[{data:l,target:a[0]}])};i.slide?e("> .l-children",a).slideToggle("fast",c):(e("> .l-children",a).show(),c()),e("> div ."+t._getParentNodeClassName(),a).removeClass(t._getParentNodeClassName()).addClass(t._getParentNodeClassName(!0))}}else{if(0==t.trigger("beforeCollapse",[{data:l,target:a[0]}]))return!1;s.removeClass("l-expandable-open").addClass("l-expandable-close"),i.slide?e("> .l-children",a).slideToggle("fast"):e("> .l-children",a).hide(),e("> div ."+t._getParentNodeClassName(!0),a).removeClass(t._getParentNodeClassName(!0)).addClass(t._getParentNodeClassName()),t.trigger("collapse",[{data:l,target:a[0]}])}t.trigger("click",[{data:l,target:a[0]}])}}),e.fn.ligerDrag&&i.nodeDraggable&&(t.nodeDroptip=e("<div class='l-drag-nodedroptip' style='display:none'></div>").appendTo("body"),t.tree.ligerDrag({revert:!0,animate:!1,proxyX:20,proxyY:20,proxy:function(r,n){var a=t._getSrcElementByEvent(n);if(a.node){var o="dragging";if(i.nodeDraggingRender)o=i.nodeDraggingRender(r.draggingNodes,r,t);else{o="";var l=!1;for(var s in r.draggingNodes){var d=r.draggingNodes[s];l&&(o+=","),o+=d.text,l=!0}}var c=e("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div>"+o+"</div>").appendTo("body");return c}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),t.children[this.id]=this},onStartDrag:function(e,r){if(2==r.button)return!1;this.set("cursor","default");var n=t._getSrcElementByEvent(r);if(n.checkbox)return!1;if(i.checkbox){var a=t.getChecked();this.draggingNodes=[];for(var o in a)this.draggingNodes.push(a[o].data);if(!this.draggingNodes||!this.draggingNodes.length)return!1}else this.draggingNodes=[n.data];this.draggingNode=n.data,this.set("cursor","move"),t.nodedragging=!0,this.validRange={top:t.tree.offset().top,bottom:t.tree.offset().top+t.tree.height(),left:t.tree.offset().left,right:t.tree.offset().left+t.tree.width()}},onDrag:function(i,r){var n=this.draggingNode;if(!n)return!1;var a=this.draggingNodes?this.draggingNodes:[n];null==t.nodeDropIn&&(t.nodeDropIn=-1);var o=r.pageX,l=r.pageY,s=!1,d=this.validRange;if(o<d.left||o>d.right||l>d.bottom||l<d.top)return t.nodeDropIn=-1,t.nodeDroptip.hide(),void this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes l-drop-add").addClass("l-drop-no");for(var c=0,u=t.nodes.length;u>c;c++){var h=t.nodes[c],g=h.treedataindex;if(n.treedataindex==g&&(s=!0),-1==e.inArray(h,a)){var p=s?!0:!1;if(-1==t.nodeDropIn||t.nodeDropIn==g){var f=e("li[treedataindex="+g+"] div:first",t.tree),v=f.offset(),m={top:v.top,bottom:v.top+f.height(),left:t.tree.offset().left,right:t.tree.offset().left+t.tree.width()};if(o>m.left&&o<m.right&&l>m.top&&l<m.bottom){var b=v.top;p&&(b+=f.height()),t.nodeDroptip.css({left:m.left,top:b,width:m.right-m.left}).show(),t.nodeDropIn=g,t.nodeDropDir=p?"bottom":"top",l>m.top+7&&l<m.bottom-7?(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-yes").addClass("l-drop-add"),t.nodeDroptip.hide(),t.nodeDropInParent=!0):(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-add").addClass("l-drop-yes"),t.nodeDroptip.show(),t.nodeDropInParent=!1);break}-1!=t.nodeDropIn&&(t.nodeDropIn=-1,t.nodeDropInParent=!1,t.nodeDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes  l-drop-add").addClass("l-drop-no"))}}}},onStopDrag:function(i,r){var n=this.draggingNodes;if(t.nodedragging=!1,-1!=t.nodeDropIn){for(var a=0;a<n.length;a++){var o=n[a].children;o&&(n=e.grep(n,function(t,i){var r=-1==e.inArray(t,o);return r}))}for(var a in n){var l=n[a];t.nodeDropInParent?(t.remove(l),t.append(t.nodeDropIn,[l])):(t.remove(l),t.append(t.getParent(t.nodeDropIn),[l],t.nodeDropIn,"bottom"==t.nodeDropDir))}t.nodeDropIn=-1}t.nodeDroptip.hide(),this.set("cursor","default")}}))},_setParentCheckboxStatus:function(t){var i=this,r=this.options,n=0==e(".l-checkbox-unchecked",t.parent()).length,a=0==e(".l-checkbox-checked",t.parent()).length;a?t.parent().prev().find("> .l-checkbox").removeClass("l-checkbox-checked l-checkbox-incomplete").addClass("l-checkbox-unchecked"):n||!r.enabledCompleteCheckbox?t.parent().prev().find(".l-checkbox").removeClass("l-checkbox-unchecked l-checkbox-incomplete").addClass("l-checkbox-checked"):t.parent().prev().find("> .l-checkbox").removeClass("l-checkbox-unchecked l-checkbox-checked").addClass("l-checkbox-incomplete"),t.parent().parent("li").length>0&&i._setParentCheckboxStatus(t.parent().parent("li"))}})}(jQuery),function(e){var t=e.ligerui;t.windowCount=0,e.ligerWindow=function(e){return t.run.call(null,"ligerWindow",arguments,{isStatic:!0})},e.ligerWindow.show=function(t){return e.ligerWindow(t)},e.ligerDefaults.Window={showClose:!0,showMax:!0,showToggle:!0,showMin:!0,title:"window",load:!1,onLoaded:null,onClose:null,onRegain:null,onMax:null,modal:!1},e.ligerMethos.Window={},t.controls.Window=function(e){t.controls.Window.base.constructor.call(this,null,e)},t.controls.Window.ligerExtend(t.core.Win,{__getType:function(){return"Window"},__idPrev:function(){return"Window"},_extendMethods:function(){return e.ligerMethos.Window},_render:function(){var i=this,r=this.options;if(i.window=e('<div class="l-window"><div class="l-window-header"><div class="l-window-header-buttons"><div class="l-window-toggle"></div><div class="l-window-max"></div><div class="l-window-close"></div><div class="l-clear"></div></div><div class="l-window-header-inner"></div></div><div class="l-window-content"></div></div>'),i.element=i.window[0],i.window.content=e(".l-window-content",i.window),i.window.header=e(".l-window-header",i.window),i.window.buttons=e(".l-window-header-buttons:first",i.window),r.url)if(r.load)i.window.content.load(r.url,function(){i.trigger("loaded")}),i.window.content.addClass("l-window-content-scroll");else{var n=e("<iframe frameborder='0' src='"+r.url+"'></iframe>"),a="ligeruiwindow"+t.windowCount++;r.name&&(a=r.name),n.attr("name",a).attr("id",a),r.framename=a,n.appendTo(i.window.content),i.iframe=n}else if(r.content){var o=e("<div>"+r.content+"</div>");o.appendTo(i.window.content)}else r.target&&(i.window.content.append(r.target),r.target.show());this.mask(),i.active(),e("body").append(i.window),i.set({width:r.width,height:r.height});var l=0,s=0;null!=r.left?l=r.left:r.left=l=.5*(e(window).width()-i.window.width()),null!=r.top?s=r.top:r.top=s=.5*(e(window).height()-i.window.height())+e(window).scrollTop()-10,0>l&&(r.left=l=0),0>s&&(r.top=s=0),i.set(r),r.framename&&e(">iframe",i.window.content).attr("name",r.framename),r.showToggle||e(".l-window-toggle",i.window).remove(),r.showMax||e(".l-window-max",i.window).remove(),r.showClose||e(".l-window-close",i.window).remove(),i._saveStatus(),e.fn.ligerDrag&&(i.draggable=i.window.drag=i.window.ligerDrag({handler:".l-window-header-inner",onStartDrag:function(){i.active()},onStopDrag:function(){i._saveStatus()},animate:!1})),e.fn.ligerResizable&&(i.resizeable=i.window.resizable=i.window.ligerResizable({onStartResize:function(){i.active(),e(".l-window-max",i.window).removeClass("l-window-regain")},onStopResize:function(e,t){var r=0,n=0;return isNaN(parseInt(i.window.css("top")))||(r=parseInt(i.window.css("top"))),isNaN(parseInt(i.window.css("left")))||(n=parseInt(i.window.css("left"))),e.diffTop&&i.window.css({top:r+e.diffTop}),e.diffLeft&&i.window.css({left:n+e.diffLeft}),e.newWidth&&i.window.width(e.newWidth),e.newHeight&&i.window.content.height(e.newHeight-28),i._saveStatus(),!1}}),i.window.append("<div class='l-btn-nw-drop'></div>")),e(".l-window-toggle",i.window).click(function(){e(this).hasClass("l-window-toggle-close")?(i.collapsed=!1,e(this).removeClass("l-window-toggle-close")):(i.collapsed=!0,e(this).addClass("l-window-toggle-close")),i.window.content.slideToggle()}).hover(function(){i.window.drag&&i.window.drag.set("disabled",!0)},function(){i.window.drag&&i.window.drag.set("disabled",!1)}),e(".l-window-close",i.window).click(function(){return 0==i.trigger("close")?!1:(i.window.hide(),void t.win.removeTask(i))}).hover(function(){i.window.drag&&i.window.drag.set("disabled",!0)},function(){i.window.drag&&i.window.drag.set("disabled",!1)}),e(".l-window-max",i.window).click(function(){if(e(this).hasClass("l-window-regain")){if(0==i.trigger("regain"))return!1;i.window.width(i._width).css({left:i._left,top:i._top}),i.window.content.height(i._height-28),e(this).removeClass("l-window-regain")}else{if(0==i.trigger("max"))return!1;i.window.width(e(window).width()-2).css({left:0,top:0}),i.window.content.height(e(window).height()-28).show(),e(this).addClass("l-window-regain")}})},_saveStatus:function(){var e=this;e._width=e.window.width(),e._height=e.window.height();var t=0,i=0;isNaN(parseInt(e.window.css("top")))||(t=parseInt(e.window.css("top"))),isNaN(parseInt(e.window.css("left")))||(i=parseInt(e.window.css("left"))),e._top=t,e._left=i},min:function(){this.window.hide(),this.minimize=!0,this.actived=!1},_setShowMin:function(i){var r=this;this.options;i?r.winmin||(r.winmin=e('<div class="l-window-min"></div>').prependTo(r.window.buttons).click(function(){r.min()}),t.win.addTask(r)):r.winmin&&(r.winmin.remove(),r.winmin=null)},_setLeft:function(e){null!=e&&this.window.css({left:e})},_setTop:function(e){null!=e&&this.window.css({top:e})},_setWidth:function(e){e>0&&this.window.width(e)},_setHeight:function(e){e>28&&this.window.content.height(e-28)},_setTitle:function(t){t&&e(".l-window-header-inner",this.window.header).html(t)},_setUrl:function(e){var t=this,i=this.options;i.url=e,i.load?t.window.content.html("").load(i.url,function(){return 0==t.trigger("loaded")?!1:void 0}):t.jiframe&&t.jiframe.attr("src",i.url)},hide:function(){this.options;this.unmask(),this.window.hide()},show:function(){this.options;this.mask(),this.window.show()},remove:function(){this.options;this.unmask(),this.window.remove()},active:function(){var i=this;this.options;if(i.minimize){var r=i._width,n=i._height,a=i._left,o=i._top;i.maximum&&(r=e(window).width(),n=e(window).height(),a=o=0,t.win.taskbar&&(n-=t.win.taskbar.outerHeight(),t.win.top&&(o+=t.win.taskbar.outerHeight()))),i.set({width:r,height:n,left:a,top:o})}i.actived=!0,i.minimize=!1,t.win.setFront(i),i.show(),t.win.setFront(this)},setUrl:function(e){return _setUrl(e)}})}(jQuery),define("ligerui.all",function(){}),function($){if(Function.prototype.ligerExtend=function(e,t){if("function"!=typeof e)return this;this.base=e.prototype,this.base.constructor=e;var i=function(){};i.prototype=e.prototype,this.prototype=new i,this.prototype.constructor=this,t&&$.extend(this.prototype,t)},Function.prototype.ligerDefer=function(e,t,i){var r=this;return setTimeout(function(){r.apply(e,i||[])},t)},window.liger=$.ligerui={version:"V1.3.2",managerCount:0,managers:{},managerIdPrev:"ligerui",autoNewId:!0,error:{managerIsExist:"ç®¡çå¨idå·²ç»å­å¨"},pluginPrev:"liger",attrPrev:"data",getId:function(e){e=e||this.managerIdPrev;var t=e+(1e3+this.managerCount);return this.managerCount++,t},add:function(e){if(2==arguments.length){var t=arguments[1];return t.id=t.id||t.options.id||arguments[0].id,void this.addManager(t)}e.id||(e.id=this.getId(e.__idPrev())),this.managers[e.id]=e},remove:function(e){if("string"==typeof e||"number"==typeof e)delete liger.managers[e];else if("object"==typeof e)if(e instanceof liger.core.Component)delete liger.managers[e.id];else{if(!$(e).attr(this.idAttrName))return!1;delete liger.managers[$(e).attr(this.idAttrName)]}},get:function(e,t){if(t=t||"ligeruiid","string"==typeof e||"number"==typeof e)return liger.managers[e];if("object"==typeof e){var i=e.length?e[0]:e,r=i[t]||$(i).attr(t);return r?liger.managers[r]:null}return null},find:function(e){var t=[];for(var i in this.managers){var r=this.managers[i];e instanceof Function?r instanceof e&&t.push(r):e instanceof Array?-1!=$.inArray(r.__getType(),e)&&t.push(r):r.__getType()==e&&t.push(r)}return t},run:function(e,t,i){if(e){if(i=$.extend({defaultsNamespace:"ligerDefaults",methodsNamespace:"ligerMethods",controlNamespace:"controls",idAttrName:"ligeruiid",isStatic:!1,hasElement:!0,propertyToElemnt:null},i||{}),e=e.replace(/^ligerGet/,""),e=e.replace(/^liger/,""),null==this||this==window||i.isStatic)return liger.plugins[e]||(liger.plugins[e]={fn:$[liger.pluginPrev+e],isStatic:!0}),new $.ligerui[i.controlNamespace][e]($.extend({},$[i.defaultsNamespace][e]||{},$[i.defaultsNamespace][e+"String"]||{},t.length>0?t[0]:{}));if(liger.plugins[e]||(liger.plugins[e]={fn:$.fn[liger.pluginPrev+e],isStatic:!1}),/Manager$/.test(e))return liger.get(this,i.idAttrName);if(this.each(function(){if(this[i.idAttrName]||$(this).attr(i.idAttrName)){var r=liger.get(this[i.idAttrName]||$(this).attr(i.idAttrName));return void(r&&t.length>0&&r.set(t[0]))}if(!(t.length>=1&&"string"==typeof t[0])){var n=t.length>0?t[0]:null,a=$.extend({},$[i.defaultsNamespace][e],$[i.defaultsNamespace][e+"String"],n);i.propertyToElemnt&&(a[i.propertyToElemnt]=this),i.hasElement?new $.ligerui[i.controlNamespace][e](this,a):new $.ligerui[i.controlNamespace][e](a)}}),0==this.length)return null;if(0==t.length)return liger.get(this,i.idAttrName);if("object"==typeof t[0])return liger.get(this,i.idAttrName);if("string"==typeof t[0]){var r=liger.get(this,i.idAttrName);if(null==r)return;if("option"!=t[0]){var n=t[0];if(!r[n])return;var a=Array.apply(null,t);return a.shift(),r[n].apply(r,a)}if(2==t.length)return r.get(t[1]);if(t.length>=3)return r.set(t[1],t[2])}return null}},defaults:{},methods:{},core:{},controls:{},plugins:{}},$.ligerDefaults={},$.ligerMethos={},liger.defaults=$.ligerDefaults,liger.methods=$.ligerMethos,$.fn.liger=function(e){return e?liger.run.call(this,e,arguments):liger.get(this)},liger.core.Component=function(e){this.events=this.events||{},this.options=e||{},this.children={}},$.extend(liger.core.Component.prototype,{__getType:function(){return"liger.core.Component"},__idPrev:function(){return"ligerui"},set:function(e,t,i){if(e)if("object"!=typeof e){var r=e;if(0==r.indexOf("on"))return void("function"==typeof t&&this.bind(r.substr(2),t));if(this.options||(this.options={}),0!=this.trigger("propertychange",[e,t])){this.options[r]=t;var n="_set"+r.substr(0,1).toUpperCase()+r.substr(1);this[n]&&this[n].call(this,t,i),this.trigger("propertychanged",[e,t])}}else{var a;if(this.options!=e?($.extend(this.options,e),a=e):a=$.extend({},e),void 0==t||1==t)for(var o in a)0==o.indexOf("on")&&this.set(o,a[o]);if(void 0==t||0==t)for(var o in a)0!=o.indexOf("on")&&this.set(o,a[o],i)}},get:function(e){var t="_get"+e.substr(0,1).toUpperCase()+e.substr(1);return this[t]?this[t].call(this,e):this.options[e]},hasBind:function(e){var t=e.toLowerCase(),i=this.events[t];return i&&i.length?!0:!1},trigger:function(e,t){if(e){var i=e.toLowerCase(),r=this.events[i];if(r){t=t||[],t instanceof Array==0&&(t=[t]);for(var n=0;n<r.length;n++){var a=r[n];if(0==a.handler.apply(a.context,t))return!1}}}},bind:function(e,t,i){if("object"!=typeof e){if("function"!=typeof t)return!1;var r=e.toLowerCase(),n=this.events[r]||[];i=i||this,n.push({handler:t,context:i}),this.events[r]=n}else for(var a in e)this.bind(a,e[a])},unbind:function(e,t){if(!e)return void(this.events={});var i=e.toLowerCase(),r=this.events[i];if(r&&r.length)if(t){for(var n=0,a=r.length;a>n;n++)if(r[n].handler==t){r.splice(n,1);break}}else delete this.events[i]},destroy:function(){liger.remove(this)}}),liger.core.UIComponent=function(e,t){liger.core.UIComponent.base.constructor.call(this,t);var i=this._extendMethods();i&&$.extend(this,i),this.element=e,this._init(),this._preRender(),this.trigger("render"),this._render(),this.trigger("rendered"),this._rendered()},liger.core.UIComponent.ligerExtend(liger.core.Component,{__getType:function(){return"liger.core.UIComponent"},_extendMethods:function(){},_init:function(){function loadDataOp(e,t){var i={};if(!e||-1!=e.indexOf("."))return i;var r=liger.defaults[e];if(!r)return i;for(var n in r)if(t.attr(liger.attrPrev+"-"+n)){var a=t.attr(liger.attrPrev+"-"+n);"boolean"==typeof r[n]?i[n]="true"==a||"1"==a:i[n]=a}return i}if(this.type=this.__getType(),this.element?this.id=this.options.id||this.element.id||liger.getId(this.__idPrev()):this.id=this.options.id||liger.getId(this.__idPrev()),liger.add(this),this.element){var attributes=this.attr();if(attributes&&attributes instanceof Array)for(var i=0;i<attributes.length;i++){var name=attributes[i];$(this.element).attr(name)&&(this.options[name]=$(this.element).attr(name))}var p=this.options;if($(this.element).attr("ligerui"))try{var attroptions=$(this.element).attr("ligerui");0!=attroptions.indexOf("{")&&(attroptions="{"+attroptions+"}"),eval("attroptions = "+attroptions+";"),attroptions&&$.extend(p,attroptions)}catch(e){}$.extend(p,loadDataOp(this.__getType(),$(this.element)))}},_preRender:function(){},_render:function(){},_rendered:function(){this.element&&$(this.element).attr("ligeruiid",this.id)},_setCls:function(e){this.element&&e&&$(this.element).addClass(e)},attr:function(){return[]},destroy:function(){this.element&&$(this.element).remove(),this.options=null,liger.remove(this)}}),liger.controls.Input=function(e,t){liger.controls.Input.base.constructor.call(this,e,t)},liger.controls.Input.ligerExtend(liger.core.UIComponent,{__getType:function(){return"liger.controls.Input"},attr:function(){return["nullText"]},setValue:function(e){return this.set("value",e)},getValue:function(){return this.get("value")},_setReadonly:function(e){var t=this.wrapper||this.text;if(t&&t.hasClass("l-text")){var i=this.inputText;e?(i&&i.attr("readonly","readonly"),t.addClass("l-text-readonly")):(i&&i.removeAttr("readonly"),t.removeClass("l-text-readonly"))}},setReadonly:function(e){return this.set("readonly",e)},setEnabled:function(){return this.set("disabled",!1)},setDisabled:function(){return this.set("disabled",!0)},updateStyle:function(){},resize:function(e,t){this.set({width:e,height:t+2})}}),liger.win={top:!1,mask:function(e){function t(){if(liger.win.windowMask){var e=$(window).height()+$(window).scrollTop();liger.win.windowMask.height(e)}}this.windowMask||(this.windowMask=$("<div class='l-window-mask' style='display: block;'></div>").appendTo("body"),$(window).bind("resize.ligeruiwin",t),$(window).bind("scroll",t)),this.windowMask.show(),t(),this.masking=!0},unmask:function(e){for(var t=$("body > .l-dialog:visible,body > .l-window:visible"),i=0,r=t.length;r>i;i++){var n=t.eq(i).attr("ligeruiid");if(!e||e.id!=n){var a=liger.get(n);if(a){var o=a.get("modal");if(o)return}}}this.windowMask&&this.windowMask.hide(),this.masking=!1},createTaskbar:function(){return this.taskbar||(this.taskbar=$('<div class="l-taskbar"><div class="l-taskbar-tasks"></div><div class="l-clear"></div></div>').appendTo("body"),this.top&&this.taskbar.addClass("l-taskbar-top"),this.taskbar.tasks=$(".l-taskbar-tasks:first",this.taskbar),this.tasks={}),this.taskbar.show(),this.taskbar.animate({bottom:0}),this.taskbar},removeTaskbar:function(){var e=this;e.taskbar.animate({bottom:-32},function(){e.taskbar.remove(),e.taskbar=null})},activeTask:function(e){for(var t in this.tasks){var i=this.tasks[t];t==e.id?i.addClass("l-taskbar-task-active"):i.removeClass("l-taskbar-task-active")}},getTask:function(e){var t=this;if(t.taskbar)return t.tasks[e.id]?t.tasks[e.id]:null},addTask:function(e){var t=this;if(t.taskbar||t.createTaskbar(),t.tasks[e.id])return t.tasks[e.id];var i=e.get("title"),r=t.tasks[e.id]=$('<div class="l-taskbar-task"><div class="l-taskbar-task-icon"></div><div class="l-taskbar-task-content">'+i+"</div></div>");return t.taskbar.tasks.append(r),t.activeTask(e),r.bind("click",function(){t.activeTask(e),e.actived?e.min():e.active()}).hover(function(){$(this).addClass("l-taskbar-task-over")},function(){$(this).removeClass("l-taskbar-task-over")}),r},hasTask:function(){for(var e in this.tasks)if(this.tasks[e])return!0;return!1},removeTask:function(e){var t=this;t.taskbar&&(t.tasks[e.id]&&(t.tasks[e.id].unbind(),t.tasks[e.id].remove(),delete t.tasks[e.id]),t.hasTask()||t.removeTaskbar())},setFront:function(e){var t=liger.find(liger.core.Win);for(var i in t){var r=t[i];r==e?($(r.element).css("z-index","9200"),this.activeTask(r)):$(r.element).css("z-index","9100")}}},liger.core.Win=function(e,t){liger.core.Win.base.constructor.call(this,e,t)},liger.core.Win.ligerExtend(liger.core.UIComponent,{__getType:function(){return"liger.controls.Win"},mask:function(){this.options.modal&&liger.win.mask(this)},unmask:function(){this.options.modal&&liger.win.unmask(this)},min:function(){},max:function(){},active:function(){}}),liger.draggable={dragging:!1},liger.resizable={reszing:!1},liger.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(e){var t=function(e){return 10>e?"0"+e:e},i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=function(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'};if(null===e)return"null";var n=typeof e;if("undefined"!==n){if("string"===n)return r(e);if("number"===n||"boolean"===n)return""+e;if("object"===n){if("function"==typeof e.toJSON)return liger.toJSON(e.toJSON());if(e.constructor===Date)return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null;var a=[];if(e.constructor===Array){for(var o=0,l=e.length;l>o;o++)a.push(liger.toJSON(e[o])||"null");return"["+a.join(",")+"]"}var s,d;for(var c in e){if(n=typeof c,"number"===n)s='"'+c+'"';else{if("string"!==n)continue;s=r(c)}n=typeof e[c],"function"!==n&&"undefined"!==n&&(d=liger.toJSON(e[c]),a.push(s+":"+d))}return"{"+a.join(",")+"}"}}},liger.getEditor=function(e){var t=e.type,i=e.control,r=e.master;if(!t)return null;var n=0;i&&(i=i.substr(0,1).toUpperCase()+i.substr(1));var a={create:function(a,o,l){var s=o.field||o.column,d=l||{},c=o.column?!0:!1,u=$.extend({},e.options),h="text";-1!=$.inArray(t,["password","file","checkbox","radio"])&&(h=t),e.password&&(h="password");var g=$("<input type='"+h+"'/>");if(e.body&&(g=e.body.clone()),g.appendTo(a),o.field){var p=s.name,f=$.isFunction(d.prefixID)?d.prefixID(r):d.prefixID||"";if(u.id=s.id||f+s.name,-1!=$.inArray(t,["select","combobox","autocomplete","popup"])&&(p=s.textField||s.comboboxName,s.comboboxName&&!s.id&&(u.id=(d.prefixID||"")+s.comboboxName)),-1!=$.inArray(t,["select","combobox","autocomplete","popup","radiolist","checkboxlist","listbox"])&&(u.valueFieldID=f+s.name),!e.body){var v=f+p,m=(new Date).getTime()+"_"+ ++n+"_"+s.name;g.attr($.extend({id:m,name:v},s.attr)),s.cssClass&&g.addClass(s.cssClass),s.validate&&!r.options.unSetValidateAttr&&g.attr("validate",liger.toJSON(s.validate))}$.extend(u,s.options)}if(s.dictionary&&(s.editor=s.editor||{},!s.editor.data)){var b=[],x=s.dictionary.split("|");$(x).each(function(e,t){var i=t.split(","),r=i[0],n=i.length>=2?i[1]:i[0];b.push({id:r,value:r,text:n})}),s.editor.data=b}if(s.editor){s.editor.options&&($.extend(u,s.editor.options),delete s.editor.options),s.editor.valueColumnName&&(u.valueField=s.editor.valueColumnName,delete s.editor.valueColumnName),s.editor.displayColumnName&&(u.textField=s.editor.displayColumnName,delete s.editor.displayColumnName);var y=s.editor.p||s.editor.ext;y&&(y="function"==typeof y?y(o):y,$.extend(u,y),delete s.editor.p,delete s.editor.ext),$.extend(u,s.editor)}c?(u.host_grid=this,u.host_grid_row=o.record,u.host_grid_column=o.column):(u.host_form=this,(s.readonly||u.host_form.get("readonly"))&&(u.readonly=!0));var w=g["liger"+i](u);return c&&setTimeout(function(){g.focus()},100),w},getValue:function(e,t){var i=t.field||t.column;if(e.getValue){var r=e.getValue(),n=t.column?t.column.editor.type:t.field.type;if(i&&i.editor&&i.editor.isArrayValue&&r&&(r=r.split(";")),i&&i.editor&&i.editor.isRef&&e.getText&&(r=[r,e.getText()]),i&&i.editor&&i.editor.isRefMul&&e.getText){var a=r.split(";"),o=e.getText().split(";");r=[];for(var l=0;l<a.length;l++)r.push([a[l],o[l]])}return"int"==n||"digits"==n?r=r?parseInt(r,10):0:("float"==n||"number"==n)&&(r=r?parseFloat(r):0),r}},setValue:function(e,t,i){var r=i.field||i.column;if(e.setValue){if(r&&r.editor&&r.editor.isArrayValue&&t&&(t=t.join(";")),r&&r.editor&&r.editor.isRef&&$.isArray(t)&&(t=t[0]),r&&r.editor&&r.editor.isRefMul&&$.isArray(t)){for(var n=[],a=0;a<t.length;a++)n.push(t[a].length>1?t[a][1]:t[a][0]);t=n.join(";")}e.setValue(t)}},getText:function(e,t){t.field||t.column;if(e.getText){var i=e.getText();if(i)return i}},setText:function(e,t,i){if(t&&e.setText)e.setText(t);else{var r=i.field||i.column;if(t=e.setValue()||i.value||"",r&&r.editor&&r.editor.isRef&&$.isArray(t)&&t.length>1&&(t=t[1]),r&&r.editor&&r.editor.isRefMul&&$.isArray(t)&&t.length>1){for(var n=[],a=0;a<t.length;a++)n.push(t[1]);t=n.join(";")}e.setText&&e.setText(t)}},getSelected:function(e,t){
return e.getSelected?e.getSelected():void 0},resize:function(e,t,i,r){r.field&&(t-=2),e.resize&&e.resize(t,i)},setEnabled:function(e,t){t?e.setEnabled&&e.setEnabled():e.setDisabled&&e.setDisabled()},destroy:function(e,t){e.destroy&&e.destroy()}};return $.extend({},a,liger.editorCreatorDefaults||{},e)},liger.editors={text:{control:"TextBox"},date:{control:"DateEditor",setValue:function(editor,value,editParm){"string"==typeof value&&/^\/Date/.test(value)&&(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)),editor.setValue(value)}},combobox:{control:"ComboBox"},spinner:{control:"Spinner"},checkbox:{control:"CheckBox"},checkboxlist:{control:"CheckBoxList",body:$("<div></div>"),resize:function(e,t,i,r){e.set("width",t-2)}},radiolist:{control:"RadioList",body:$("<div></div>"),resize:function(e,t,i,r){e.set("width",t-2)}},listbox:{control:"ListBox",body:$("<div></div>"),resize:function(e,t,i,r){e.set("width",t-2)}},popup:{control:"PopupEdit"},number:{control:"TextBox",options:{number:!0}},currency:{control:"TextBox",options:{currency:!0}},digits:{control:"TextBox",options:{digits:!0}},password:{control:"TextBox",password:!0}},liger.editors.string=liger.editors.text,liger.editors.select=liger.editors.combobox,liger.editors["int"]=liger.editors.digits,liger.editors["float"]=liger.editors.number,liger.editors.chk=liger.editors.checkbox,liger.editors.popupedit=liger.editors.popup,$.fn.live=$.fn.on?$.fn.on:$.fn.live,!$.browser){var userAgent=navigator.userAgent.toLowerCase();$.browser={version:(userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:/webkit/.test(userAgent),opera:/opera/.test(userAgent),msie:/msie/.test(userAgent)&&!/opera/.test(userAgent),mozilla:/mozilla/.test(userAgent)&&!/(compatible|webkit)/.test(userAgent)}}}(jQuery),define("ligerui.base",["jquery","ligerui.all"],function(){}),function(e){liger.inject={prev:"liger-",defaults:{Grid_detail:{height:null,onShowDetail:null},Grid_editor:"ComboBox,DateEditor,Spinner,TextBox,PopupEdit,CheckBoxList,RadioList,Grid_editor",Grid_popup:"PopupEdit",Grid_grid:"Grid",Grid_condition:"Form",Grid_toolbar:"Toolbar",Grid_fields:"Form_fields",Form_editor:"ComboBox,DateEditor,Spinner,TextBox,PopupEdit,CheckBoxList,RadioList,Form_editor",Form_grid:"Grid",Form_columns:"Grid_columns",Form_condition:"Form",Form_popup:"PopupEdit",Form_buttons:"Button",Portal_panel:"Panel"},config:{Grid:{dynamics:"data,isChecked,detail,rowDraggingRender,toolbar,columns",arrays:"columns",columns:{dynamics:"render,totalSummary,headerRender,columns,editor,columns",arrays:"columns",textProperty:"display",columns:"liger.inject.config.Grid.columns",editor:{dynamics:"data,columns,render,renderItem,grid,condition,ext",grid:"liger.inject.config.Grid",condition:"liger.inject.config.Form"}},toolbar:{arrays:"items"}},Form:{dynamics:"validate,fields,buttons",arrays:"fields,buttons",fields:{textProperty:"label",dynamics:"validate,editor",editor:{dynamics:"data,columns,render,renderItem,grid,condition,attr",grid:"liger.inject.config.Grid",condition:"liger.inject.config.Form"}},buttons:"liger.inject.config.Button"},PopupEdit:{dynamics:"grid,condition"},Button:{textProperty:"text",dynamics:"click"},ComboBox:{dynamics:"columns,data,tree,grid,condition,render,parms,renderItem"},ListBox:{dynamics:"columns,data,render,parms"},RadioList:{dynamics:"data,parms"},CheckBoxList:{dynamics:"data,parms"},Panel:{},Portal:{dynamics:"rows,columns",arrays:"rows,columns",columns:{dynamics:"panels",arrays:"panels"},rows:{dynamics:"panels",arrays:"panels"},toolbar:{arrays:"items"}}},parse:function(e){try{return null==e?null:new Function("return "+e+";")()}catch(t){return null}},parseDefault:function(t){var i=this;if(!t)return t;var r={};return e(t.split(",")).each(function(t,n){n&&(n=n.substr(0,1).toUpperCase()+n.substr(1),e.extend(r,i.parse("liger.defaults."+n)))}),r},fotmatValue:function(e,t){return"boolean"==t?"true"==e||"1"==e:"number"==t&&e?parseFloat(e.toString()):e},getOptions:function(t){var i=t.jelement,r=t.defaults,n=t.config;n=e.extend({ignores:"",dynamics:"",arrays:""},n);var a,o=this,l={};n.textProperty&&(l[n.textProperty]=i.text());for(var s in r){var d=s.toLowerCase(),c=e("> ."+d,i);if(-1==e.inArray(s,n.ignores.split(",")))if(c.length){var u=t.controlName+"_"+s,h=o.defaults[u]||liger.defaults[u],g=n[s];"string"==typeof h?h=o.parseDefault(h):"funcion"==typeof h&&(h=h()),"string"==typeof g?g=o.parse(g):"funcion"==typeof g&&(g=g()),h&&(-1!=e.inArray(s,n.arrays.split(","))?(a=[],e(">div,>li,>input",c).each(function(){a.push(o.getOptions({defaults:h,controlName:t.controlName,config:g,jelement:e(this)}))}),l[s]=a):l[s]=o.getOptions({defaults:h,controlName:t.controlName,config:g,jelement:c})),c.remove()}else-1!=e.inArray(s,n.dynamics.split(","))||0==s.indexOf("on")?(a=o.parse(i.attr("data-"+s)||i.attr(s)),a&&(l[s]=o.fotmatValue(a,typeof r[s]))):(a=i.attr("data-"+s)||i.attr(s),a&&(l[s]=o.fotmatValue(a,typeof r[s])))}var p=i.attr("data-options")||i.attr("data-property");return p&&(p=o.parse("{"+p+"}")),p&&e.extend(l,p),l},init:function(){var t=this,i=this.config;for(var r in t.defaults)"string"==typeof t.defaults[r]&&(t.defaults[r]=t.parseDefault(t.defaults[r]));for(var n in liger.controls){var a=i[n]||{},o=t.prev+n.toLowerCase();e("."+o).each(function(){var i=e(this),r=e.extend({onrender:null,onrendered:null},liger.defaults[n]),o=t.getOptions({defaults:r,controlName:n,config:a,jelement:i});i[liger.pluginPrev+n](o)})}}},e(function(){liger.inject.init()})}(jQuery),define("ligerui.inject",["jquery","ligerui.all","ligerui.base"],function(){}),function(e){e.fn.ligerResizable=function(t){return e.ligerui.run.call(this,"ligerResizable",arguments,{idAttrName:"ligeruiresizableid",hasElement:!1,propertyToElemnt:"target"})},e.fn.ligerGetResizableManager=function(){return e.ligerui.run.call(this,"ligerGetResizableManager",arguments,{idAttrName:"ligeruiresizableid",hasElement:!1,propertyToElemnt:"target"})},e.ligerDefaults.Resizable={handles:"n, e, s, w, ne, se, sw, nw",maxWidth:2e3,maxHeight:2e3,minWidth:20,minHeight:20,scope:3,animate:!1,onStartResize:function(e){},onResize:function(e){},onStopResize:function(e){},onEndResize:null},e.ligerui.controls.Resizable=function(t){e.ligerui.controls.Resizable.base.constructor.call(this,null,t)},e.ligerui.controls.Resizable.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Resizable"},__idPrev:function(){return"Resizable"},_render:function(){var t=this,i=this.options;t.target=e(i.target),t.set(i),t.target.mousemove(function(r){if(!i.disabled&&(t.dir=t._getDir(r),t.dir?t.target.css("cursor",t.dir+"-resize"):t.target.css("cursor").indexOf("-resize")>0&&t.target.css("cursor","default"),i.target.ligeruidragid)){var n=e.ligerui.get(i.target.ligeruidragid);n&&t.dir?n.set("disabled",!0):n&&n.set("disabled",!1)}}).mousedown(function(e){i.disabled||t.dir&&t._start(e)})},_rendered:function(){this.options.target.ligeruiresizableid=this.id},_getDir:function(t){var i=this,r=this.options,n="",a=i.target.offset(),o=i.target.width(),l=i.target.height(),s=r.scope,d=t.pageX||t.screenX,c=t.pageY||t.screenY;return c>=a.top&&c<a.top+s?n+="n":c<=a.top+l&&c>a.top+l-s&&(n+="s"),d>=a.left&&d<a.left+s?n+="w":d<=a.left+o&&d>a.left+o-s&&(n+="e"),"all"==r.handles||""==n?n:-1!=e.inArray(n,i.handles)?n:""},_setHandles:function(e){e&&(this.handles=e.replace(/(\s*)/g,"").split(","))},_createProxy:function(){var t=this;t.proxy=e('<div class="l-resizable"></div>'),t.proxy.width(t.target.width()).height(t.target.height()),t.proxy.attr("resizableid",t.id).appendTo("body")},_removeProxy:function(){var e=this;e.proxy&&(e.proxy.remove(),e.proxy=null)},_start:function(t){var i=this;this.options;i._createProxy(),i.proxy.css({left:i.target.offset().left,top:i.target.offset().top,position:"absolute"}),i.current={dir:i.dir,left:i.target.offset().left,top:i.target.offset().top,startX:t.pageX||t.screenX,startY:t.pageY||t.clientY,width:i.target.width(),height:i.target.height()},e(document).bind("selectstart.resizable",function(){return!1}),e(document).bind("mouseup.resizable",function(){i._stop.apply(i,arguments)}),e(document).bind("mousemove.resizable",function(){i._drag.apply(i,arguments)}),i.proxy.show(),i.trigger("startResize",[i.current,t])},changeBy:{t:["n","ne","nw"],l:["w","sw","nw"],w:["w","sw","nw","e","ne","se"],h:["n","ne","nw","s","se","sw"]},_drag:function(e){var t=this;this.options;if(t.current&&t.proxy){t.proxy.css("cursor",""==t.current.dir?"default":t.current.dir+"-resize");var i=e.pageX||e.screenX,r=e.pageY||e.screenY;t.current.diffX=i-t.current.startX,t.current.diffY=r-t.current.startY,t._applyResize(t.proxy),t.trigger("resize",[t.current,e])}},_stop:function(t){var i=this;this.options;i.hasBind("stopResize")?0!=i.trigger("stopResize",[i.current,t])&&i._applyResize():i._applyResize(),i._removeProxy(),i.trigger("endResize",[i.current,t]),e(document).unbind("selectstart.resizable"),e(document).unbind("mousemove.resizable"),e(document).unbind("mouseup.resizable")},_applyResize:function(t){var i=this,r=this.options,n={left:i.current.left,top:i.current.top,width:i.current.width,height:i.current.height},a=!1;t||(t=i.target,a=!0,isNaN(parseInt(i.target.css("top")))?n.top=0:n.top=parseInt(i.target.css("top")),isNaN(parseInt(i.target.css("left")))?n.left=0:n.left=parseInt(i.target.css("left"))),e.inArray(i.current.dir,i.changeBy.l)>-1?(n.left+=i.current.diffX,i.current.diffLeft=i.current.diffX):a&&delete n.left,e.inArray(i.current.dir,i.changeBy.t)>-1?(n.top+=i.current.diffY,i.current.diffTop=i.current.diffY):a&&delete n.top,e.inArray(i.current.dir,i.changeBy.w)>-1?(n.width+=(-1==i.current.dir.indexOf("w")?1:-1)*i.current.diffX,i.current.newWidth=n.width):a&&delete n.width,e.inArray(i.current.dir,i.changeBy.h)>-1?(n.height+=(-1==i.current.dir.indexOf("n")?1:-1)*i.current.diffY,i.current.newHeight=n.height):a&&delete n.height,a&&r.animate?t.animate(n):t.css(n)}})}(jQuery),define("ligerui.ligerResizable",["jquery","ligerui.all","ligerui.base","ligerui.inject"],function(){}),function(e){var t=e.ligerui;e.fn.ligerDrag=function(e){return t.run.call(this,"ligerDrag",arguments,{idAttrName:"ligeruidragid",hasElement:!1,propertyToElemnt:"target"})},e.fn.ligerGetDragManager=function(){return t.run.call(this,"ligerGetDragManager",arguments,{idAttrName:"ligeruidragid",hasElement:!1,propertyToElemnt:"target"})},e.ligerDefaults.Drag={onStartDrag:!1,onDrag:!1,onStopDrag:!1,handler:null,clickDelay:100,proxy:!0,revert:!1,animate:!0,onRevert:null,onEndRevert:null,receive:null,onDragEnter:null,onDragOver:null,onDragLeave:null,onDrop:null,disabled:!1,proxyX:null,proxyY:null},t.controls.Drag=function(e){t.controls.Drag.base.constructor.call(this,null,e)},t.controls.Drag.ligerExtend(t.core.UIComponent,{__getType:function(){return"Drag"},__idPrev:function(){return"Drag"},_render:function(){var t=this,i=this.options;this.set(i),t.cursor="move",t.handler.css("cursor",t.cursor),t.mouseDowned=!1,t.handler.bind("mousedown.drag",function(r){i.disabled||2!=r.button&&(t.mouseDowned=!0,e(document).bind("selectstart.drag",function(){return!1}),setTimeout(function(){t.mouseDowned&&t._start.call(t,r)},i.clickDelay||100))}).bind("mousemove.drag",function(){i.disabled||t.handler.css("cursor",t.cursor)}).bind("mouseup.drag",function(){e(document).unbind("selectstart.drag")}),e(document).bind("mouseup",function(){t.mouseDowned=!1})},_rendered:function(){this.options.target.ligeruidragid=this.id},_start:function(i){var r=this,n=this.options;if(!r.reverting&&!n.disabled){if(r.current={target:r.target,left:r.target.offset().left,top:r.target.offset().top,startX:i.pageX||i.screenX,startY:i.pageY||i.clientY},0==r.trigger("startDrag",[r.current,i]))return!1;if(r.cursor="move",r._createProxy(n.proxy,i),n.proxy&&!r.proxy)return!1;(r.proxy||r.handler).css("cursor",r.cursor),e(document).bind("mousemove.drag",function(){r._drag.apply(r,arguments)}),t.draggable.dragging=!0,e(document).bind("mouseup.drag",function(){t.draggable.dragging=!1,r._stop.apply(r,arguments)})}},_drag:function(t){var i=this;this.options;if(i.current){var r=t.pageX||t.screenX,n=t.pageY||t.screenY;i.current.diffX=r-i.current.startX,i.current.diffY=n-i.current.startY,(i.proxy||i.handler).css("cursor",i.cursor),i.receive&&i.receive.each(function(a,o){var l=e(o),s=l.offset();r>s.left&&r<s.left+l.width()&&n>s.top&&n<s.top+l.height()?i.receiveEntered[a]?i.trigger("dragOver",[o,i.proxy||i.target,t]):(i.receiveEntered[a]=!0,i.trigger("dragEnter",[o,i.proxy||i.target,t])):i.receiveEntered[a]&&(i.receiveEntered[a]=!1,i.trigger("dragLeave",[o,i.proxy||i.target,t]))}),i.hasBind("drag")?0!=i.trigger("drag",[i.current,t])?i._applyDrag():i.proxy?i._removeProxy():i._stop():i._applyDrag()}},_stop:function(t){var i=this,r=this.options;e(document).unbind("mousemove.drag"),e(document).unbind("mouseup.drag"),e(document).unbind("selectstart.drag"),i.receive&&i.receive.each(function(e,r){i.receiveEntered[e]&&i.trigger("drop",[r,i.proxy||i.target,t])}),i.proxy&&(r.revert?i.hasBind("revert")?0!=i.trigger("revert",[i.current,t])?i._revert(t):i._removeProxy():i._revert(t):(i._applyDrag(i.target),i._removeProxy())),i.cursor="move",i.trigger("stopDrag",[i.current,t]),i.current=null,i.handler.css("cursor",i.cursor)},_revert:function(e){var t=this;t.reverting=!0,t.proxy.animate({left:t.current.left,top:t.current.top},function(){t.reverting=!1,t._removeProxy(),t.trigger("endRevert",[t.current,e]),t.current=null})},_applyDrag:function(e){var t=this,i=this.options;e=e||t.proxy||t.target;var r={},n=!1,a=e==t.target;t.current.diffX&&(a||null==i.proxyX?r.left=t.current.left+t.current.diffX:r.left=t.current.startX+i.proxyX+t.current.diffX,n=!0),t.current.diffY&&(a||null==i.proxyY?r.top=t.current.top+t.current.diffY:r.top=t.current.startY+i.proxyY+t.current.diffY,n=!0),e==t.target&&t.proxy&&i.animate?(t.reverting=!0,e.animate(r,function(){t.reverting=!1})):e.css(r)},_setReceive:function(t){this.receiveEntered={},t&&("string"==typeof t?this.receive=e(t):this.receive=t)},_setHandler:function(t){var i=this,r=this.options;t?i.handler="string"==typeof t?e(t,r.target):t:i.handler=e(r.target)},_setTarget:function(t){this.target=e(t)},_setCursor:function(e){this.cursor=e,(this.proxy||this.handler).css("cursor",e)},_createProxy:function(t,i){if(t){var r=this,n=this.options;"function"==typeof t?r.proxy=t.call(this.options.target,r,i):"clone"==t?(r.proxy=r.target.clone().css("position","absolute"),r.proxy.appendTo("body")):(r.proxy=e("<div class='l-draggable'></div>"),r.proxy.width(r.target.width()).height(r.target.height()),r.proxy.attr("dragid",r.id).appendTo("body")),r.proxy.css({left:null==n.proxyX?r.current.left:r.current.startX+n.proxyX,top:null==n.proxyY?r.current.top:r.current.startY+n.proxyY}).show()}},_removeProxy:function(){var e=this;e.proxy&&(e.proxy.remove(),e.proxy=null)}})}(jQuery),define("ligerui.ligerDrag",["jquery","ligerui.all","ligerui.base","ligerui.inject"],function(){}),function(e){var t=e.ligerui;e(".l-dialog-btn").live("mouseover",function(){e(this).addClass("l-dialog-btn-over")}).live("mouseout",function(){e(this).removeClass("l-dialog-btn-over")}),e(".l-dialog-tc .l-dialog-close").live("mouseover",function(){e(this).addClass("l-dialog-close-over")}).live("mouseout",function(){e(this).removeClass("l-dialog-close-over")}),e.ligerDialog=function(){return t.run.call(null,"ligerDialog",arguments,{isStatic:!0})},e.ligerui.DialogImagePath="../../lib/ligerUI/skins/Aqua/images/win/",e.ligerDefaults.Dialog={cls:null,contentCls:null,id:null,buttons:null,isDrag:!0,width:280,height:null,content:"",target:null,url:null,urlParms:null,load:!1,type:"none",left:null,top:null,modal:!0,data:null,name:null,isResize:!1,allowClose:!0,opener:null,timeParmName:null,closeWhenEnter:null,isHidden:!0,show:!0,title:"æç¤º",showMax:!1,showToggle:!1,showMin:!1,slide:e.browser.msie?!1:!0,fixedType:null,showType:null,layoutMode:1,onLoaded:null,onExtend:null,onExtended:null,onCollapse:null,onCollapseed:null,onContentHeightChange:null,onClose:null,onClosed:null,onStopResize:null,minIsHide:!1},e.ligerDefaults.DialogString={titleMessage:"æç¤º",ok:"ç¡®å®",yes:"æ¯",no:"å¦",cancel:"åæ¶",waittingMessage:"æ­£å¨ç­å¾ä¸­,è¯·ç¨å..."},e.ligerMethos.Dialog=e.ligerMethos.Dialog||{},t.controls.Dialog=function(e){t.controls.Dialog.base.constructor.call(this,null,e)},t.controls.Dialog.ligerExtend(t.core.Win,{__getType:function(){return"Dialog"},__idPrev:function(){return"Dialog"},_extendMethods:function(){return e.ligerMethos.Dialog},_render:function(){function i(){var t=0,i=0,a=n.width||r.dialog.width();1==n.slide&&(n.slide="fast"),null!=n.left?t=n.left:n.left=t=.5*(e(window).width()-a),null!=n.top?i=n.top:n.top=i=.5*(e(window).height()-r.dialog.height())+e(window).scrollTop()-10,0>t&&(n.left=t=0),0>i&&(n.top=i=0),r.dialog.css({left:t,top:i})}var r=this,n=this.options,a="";r.set(n,!0);var o=e('<div class="l-dialog"><table class="l-dialog-table" cellpadding="0" cellspacing="0" border="0"><tbody><tr><td class="l-dialog-tl"></td><td class="l-dialog-tc"><div class="l-dialog-tc-inner"><div class="l-dialog-icon"></div><div class="l-dialog-title"></div><div class="l-dialog-winbtns"><div class="l-dialog-winbtn l-dialog-close"></div></div></div></td><td class="l-dialog-tr"></td></tr><tr><td class="l-dialog-cl"></td><td class="l-dialog-cc"><div class="l-dialog-body"><div class="l-dialog-image"></div> <div class="l-dialog-content"></div><div class="l-dialog-buttons"><div class="l-dialog-buttons-inner"></div></td><td class="l-dialog-cr"></td></tr><tr><td class="l-dialog-bl"></td><td class="l-dialog-bc"></td><td class="l-dialog-br"></td></tr></tbody></table></div>');if(e("body").append(o),r.dialog=o,2==n.layoutMode&&o.find("td.l-dialog-tl,td.l-dialog-cl,td.l-dialog-bl,td.l-dialog-tr,td.l-dialog-cr,td.l-dialog-br").remove(),r.element=o[0],r.dialog.body=e(".l-dialog-body:first",r.dialog),r.dialog.header=e(".l-dialog-tc-inner:first",r.dialog),r.dialog.winbtns=e(".l-dialog-winbtns:first",r.dialog.header),r.dialog.buttons=e(".l-dialog-buttons:first",r.dialog),r.dialog.content=e(".l-dialog-content:first",r.dialog),r.set(n,!1),0==n.allowClose&&e(".l-dialog-close",r.dialog).remove(),(n.target||n.url||"none"==n.type)&&(n.type=null,r.dialog.addClass("l-dialog-win")),n.cls&&r.dialog.addClass(n.cls),n.id&&r.dialog.attr("id",n.id),r.mask(),n.isDrag&&r._applyDrag(),n.isResize&&r._applyResize(),n.type?r._setImage():(e(".l-dialog-image",r.dialog).remove(),r.dialog.content.addClass("l-dialog-content-noimage")),n.contentCls&&r.dialog.content.addClass(n.contentCls),n.show||(r.unmask(),r.dialog.hide()),n.target)r.dialog.content.prepend(n.target),e(n.target).show();else if(n.url){var l=e.isFunction(n.url)?n.url.call(r):n.url,s=e.isFunction(n.urlParms)?n.urlParms.call(r):n.urlParms;if(n.timeParmName&&(s=s||{},s[n.timeParmName]=(new Date).getTime()),s)for(var d in s)l+=-1==l.indexOf("?")?"?":"&",l+=d+"="+s[d];if(n.load)r.dialog.body.load(l,function(){r._saveStatus(),r.trigger("loaded")});else{r.jiframe=e("<iframe frameborder='0'></iframe>");var c=n.name?n.name:"ligerwindow"+(new Date).getTime();r.jiframe.attr("name",c),r.jiframe.attr("id",c),r.dialog.content.prepend(r.jiframe),r.dialog.content.addClass("l-dialog-content-nopadding l-dialog-content-frame"),setTimeout(function(){0==r.dialog.body.find(".l-dialog-loading:first").length&&r.dialog.body.append("<div class='l-dialog-loading' style='display:block;'></div>");var t=e(".l-dialog-loading:first",r.dialog.body);r.jiframe[0].dialog=r,r.jiframe.attr("src",l).bind("load.dialog",function(){t.hide(),r.trigger("loaded")}),r.frame=window.frames[r.jiframe.attr("name")]},0),a="jquery_ligerui_"+(new Date).getTime(),r.tmpInput=e("<input></input>"),r.tmpInput.attr("id",a),r.dialog.content.prepend(r.tmpInput)}}n.opener&&(r.dialog.opener=n.opener),n.buttons?e(n.buttons).each(function(t,i){var n=e('<div class="l-dialog-btn"><div class="l-dialog-btn-l"></div><div class="l-dialog-btn-r"></div><div class="l-dialog-btn-inner"></div></div>');e(".l-dialog-btn-inner",n).html(i.text),e(".l-dialog-buttons-inner",r.dialog.buttons).prepend(n),i.width&&n.width(i.width),i.onclick&&n.click(function(){i.onclick(i,r,t)}),i.cls&&n.addClass(i.cls)}):r.dialog.buttons.remove(),e(".l-dialog-buttons-inner",r.dialog.buttons).append("<div class='l-clear'></div>"),e(".l-dialog-title",r.dialog).bind("selectstart",function(){return!1}),r.dialog.click(function(){t.win.setFront(r)}),e(".l-dialog-tc .l-dialog-close",r.dialog).click(function(){n.isHidden?r.hide():r.close()}),n.fixedType||("auto"==n.width?setTimeout(function(){i()},100):i()),r.show(),e("body").bind("keydown.dialog",function(e){var t=e.which;13==t?r.enter():27==t&&r.esc()}),r._updateBtnsWidth(),r._saveStatus(),r._onReisze(),""!=a&&(e("#"+a).focus(),e("#"+a).remove())},_borderX:12,_borderY:32,doMax:function(i){var r=this,n=this.options,a=e(window).width(),o=e(window).height(),l=0,s=0;t.win.taskbar&&(o-=t.win.taskbar.outerHeight(),t.win.top&&(s+=t.win.taskbar.outerHeight())),i?(r.dialog.body.animate({width:a-r._borderX},n.slide),r.dialog.animate({left:l,top:s},n.slide),r.dialog.content.animate({height:o-r._borderY-r.dialog.buttons.outerHeight()},n.slide,function(){r._onReisze()})):(r.set({width:a,height:o,left:l,top:s}),r._onReisze())},max:function(){var t=this,i=this.options;t.winmax&&(t.winmax.addClass("l-dialog-recover"),t.doMax(i.slide),t.wintoggle&&(t.wintoggle.hasClass("l-dialog-extend")?t.wintoggle.addClass("l-dialog-toggle-disabled l-dialog-extend-disabled"):t.wintoggle.addClass("l-dialog-toggle-disabled l-dialog-collapse-disabled")),t.resizable&&t.resizable.set({disabled:!0}),t.draggable&&t.draggable.set({disabled:!0}),t.maximum=!0,e(window).bind("resize.dialogmax",function(){t.doMax(!1)}))},recover:function(){var t=this,i=this.options;t.winmax&&(t.winmax.removeClass("l-dialog-recover"),i.slide?(t.dialog.body.animate({width:t._width-t._borderX},i.slide),t.dialog.animate({left:t._left,top:t._top},i.slide),t.dialog.content.animate({height:t._height-t._borderY-t.dialog.buttons.outerHeight()},i.slide,function(){t._onReisze()})):(t.set({width:t._width,height:t._height,left:t._left,top:t._top}),t._onReisze()),t.wintoggle&&t.wintoggle.removeClass("l-dialog-toggle-disabled l-dialog-extend-disabled l-dialog-collapse-disabled"),e(window).unbind("resize.dialogmax")),this.resizable&&this.resizable.set({disabled:!1}),t.draggable&&t.draggable.set({disabled:!1}),t.maximum=!1},min:function(){var e=this,i=this.options;if(i.minIsHide)e.dialog.hide();else{var r=t.win.getTask(this);i.slide?(e.dialog.body.animate({width:1},i.slide),r.y=r.offset().top+r.height(),r.x=r.offset().left+r.width()/2,e.dialog.animate({left:r.x,top:r.y},i.slide,function(){e.dialog.hide()})):e.dialog.hide()}e.unmask(),e.minimize=!0,e.actived=!1},active:function(){var i=this,r=this.options;if(i.minimize){var n=i._width,a=i._height,o=i._left,l=i._top;i.maximum&&(n=e(window).width(),a=e(window).height(),o=l=0,t.win.taskbar&&(a-=t.win.taskbar.outerHeight(),t.win.top&&(l+=t.win.taskbar.outerHeight()))),r.slide?(i.dialog.body.animate({width:n-i._borderX},r.slide),i.dialog.animate({left:o,top:l},r.slide)):i.set({width:n,height:a,left:o,top:l})}i.actived=!0,i.minimize=!1,t.win.setFront(i),i.show()},toggle:function(){var e=this;this.options;e.wintoggle&&(e.wintoggle.hasClass("l-dialog-extend")?e.extend():e.collapse())},collapse:function(e){var t=this,i=this.options;t.wintoggle&&(i.slide&&0!=e?t.dialog.content.animate({height:1},i.slide):t.dialog.content.height(1),this.resizable&&this.resizable.set({disabled:!0}),t.wintoggle.addClass("l-dialog-extend"))},extend:function(){var e=this,t=this.options;if(e.wintoggle){var i=e._height-e._borderY-e.dialog.buttons.outerHeight();t.slide?e.dialog.content.animate({height:i},t.slide):e.dialog.content.height(i),this.resizable&&this.resizable.set({disabled:!1}),e.wintoggle.removeClass("l-dialog-extend")}},_updateBtnsWidth:function(){var t=this,i=e(">div",t.dialog.winbtns).length;t.dialog.winbtns.width(22*i)},_setLeft:function(e){this.dialog&&null!=e&&this.dialog.css({left:e})},_setTop:function(e){this.dialog&&null!=e&&this.dialog.css({top:e})},_setWidth:function(e){this.dialog&&e>=this._borderX&&this.dialog.body.width(e-this._borderX)},_setHeight:function(e){var t=this,i=this.options;if(this.dialog)if("auto"==e)t.dialog.content.height("auto");else if(e>=this._borderY){var r=e-this._borderY-t.dialog.buttons.outerHeight();if(0==t.trigger("ContentHeightChange",[r]))return;i.load?t.dialog.body.height(r):t.dialog.content.height(r),t.trigger("ContentHeightChanged",[r])}},_setShowMax:function(t){var i=this;this.options;t?i.winmax||(i.winmax=e('<div class="l-dialog-winbtn l-dialog-max"></div>').appendTo(i.dialog.winbtns).hover(function(){e(this).hasClass("l-dialog-recover")?e(this).addClass("l-dialog-recover-over"):e(this).addClass("l-dialog-max-over")},function(){e(this).removeClass("l-dialog-max-over l-dialog-recover-over")}).click(function(){e(this).hasClass("l-dialog-recover")?i.recover():i.max()})):i.winmax&&(i.winmax.remove(),i.winmax=null),i._updateBtnsWidth()},_setShowMin:function(i){var r=this,n=this.options;i?r.winmin||(r.winmin=e('<div class="l-dialog-winbtn l-dialog-min"></div>').appendTo(r.dialog.winbtns).hover(function(){e(this).addClass("l-dialog-min-over")},function(){e(this).removeClass("l-dialog-min-over")}).click(function(){r.min()}),n.minIsHide||t.win.addTask(r)):r.winmin&&(r.winmin.remove(),r.winmin=null),r._updateBtnsWidth()},_setShowToggle:function(t){var i=this;this.options;t?i.wintoggle||(i.wintoggle=e('<div class="l-dialog-winbtn l-dialog-collapse"></div>').appendTo(i.dialog.winbtns).hover(function(){e(this).hasClass("l-dialog-toggle-disabled")||(e(this).hasClass("l-dialog-extend")?e(this).addClass("l-dialog-extend-over"):e(this).addClass("l-dialog-collapse-over"))},function(){e(this).removeClass("l-dialog-extend-over l-dialog-collapse-over")}).click(function(){if(!e(this).hasClass("l-dialog-toggle-disabled"))if(i.wintoggle.hasClass("l-dialog-extend")){if(0==i.trigger("extend"))return;i.wintoggle.removeClass("l-dialog-extend"),i.extend(),i.trigger("extended")}else{if(0==i.trigger("collapse"))return;i.wintoggle.addClass("l-dialog-extend"),i.collapse(),i.trigger("collapseed")}})):i.wintoggle&&(i.wintoggle.remove(),i.wintoggle=null)},enter:function(){var e,t=this,i=this.options;void 0!=i.closeWhenEnter?e=i.closeWhenEnter:("warn"==i.type||"error"==i.type||"success"==i.type||"question"==i.type)&&(e=!0),e&&t.close()},esc:function(){},_removeDialog:function(){function t(){var t=e("iframe",i.dialog);if(t.length){var r=t[0];if(r.src="about:blank",r.contentWindow&&r.contentWindow.document)try{r.contentWindow.document.write("")}catch(n){}e.browser.msie&&CollectGarbage(),t.remove()}i.dialog.remove()}var i=this,r=this.options;r.showType&&r.fixedType?i.dialog.animate({bottom:-1*r.height},function(){t()}):t()},close:function(){var e=this;this.options;0!=e.trigger("Close")&&(e.doClose(),0==e.trigger("Closed"))},doClose:function(){var i=this;t.win.removeTask(this),e.ligerui.remove(this),i.unmask(),i._removeDialog(),e("body").unbind("keydown.dialog")},_getVisible:function(){return this.dialog.is(":visible")},_setUrl:function(e){var t=this,i=this.options;i.url=e,i.load?t.dialog.body.html("").load(i.url,function(){t.trigger("loaded")}):t.jiframe&&t.jiframe.attr("src",i.url)},_setContent:function(e){this.dialog.content.html(e)},_setTitle:function(t){var i=this;this.options;t&&e(".l-dialog-title",i.dialog).html(t)},_hideDialog:function(){var e=this,t=this.options;t.showType&&t.fixedType?e.dialog.animate({bottom:-1*t.height},function(){e.dialog.hide()}):e.dialog.hide()},hidden:function(){var e=this;t.win.removeTask(e),e.dialog.hide(),e.unmask()},show:function(){var t=this,i=this.options;t.mask(),i.fixedType?i.showType?(t.dialog.css({bottom:-1*i.height}).addClass("l-dialog-fixed"),t.dialog.show().animate({bottom:0})):t.dialog.show().css({bottom:0}).addClass("l-dialog-fixed"):t.dialog.show(),e.ligerui.win.setFront.ligerDefer(e.ligerui.win,100,[t])},setUrl:function(e){this._setUrl(e)},_saveStatus:function(){var e=this;e._width=e.dialog.body.width(),e._height=e.dialog.body.height();var t=0,i=0;isNaN(parseInt(e.dialog.css("top")))||(t=parseInt(e.dialog.css("top"))),isNaN(parseInt(e.dialog.css("left")))||(i=parseInt(e.dialog.css("left"))),e._top=t,e._left=i},_applyDrag:function(){var i=this,r=this.options;e.fn.ligerDrag&&(i.draggable=i.dialog.ligerDrag({handler:".l-dialog-title",animate:!1,onStartDrag:function(){t.win.setFront(i);var r=e("<div class='l-dragging-mask' style='display:block'></div>").height(i.dialog.height());i.dialog.append(r),i.dialog.content.addClass("l-dialog-content-dragging")},onDrag:function(e,t){var i=t.pageY||t.screenY;return 0>i?!1:void 0},onStopDrag:function(){if(i.dialog.find("div.l-dragging-mask:first").remove(),i.dialog.content.removeClass("l-dialog-content-dragging"),r.target){var n=t.find(e.ligerui.controls.DateEditor),a=t.find(e.ligerui.controls.ComboBox);e(e.merge(n,a)).each(function(){this.updateSelectBoxPosition&&this.updateSelectBoxPosition()})}i._saveStatus()}}))},_onReisze:function(){var t=this,i=this.options;if(i.target||i.url){var r=e(i.target).liger();if(r||(r=e(i.target).find(":first").liger()),!r)return;var n=t.dialog.content.height(),a=t.dialog.content.width();r.trigger("resize",[{width:a,height:n}])}},_applyResize:function(){var t=this;this.options;e.fn.ligerResizable&&(t.resizable=t.dialog.ligerResizable({onStopResize:function(e,i){var r=0,n=0;return isNaN(parseInt(t.dialog.css("top")))||(r=parseInt(t.dialog.css("top"))),isNaN(parseInt(t.dialog.css("left")))||(n=parseInt(t.dialog.css("left"))),e.diffLeft&&t.set({left:n+e.diffLeft}),e.diffTop&&t.set({top:r+e.diffTop}),e.newWidth&&(t.set({width:e.newWidth}),t.dialog.body.css({width:e.newWidth-t._borderX})),e.newHeight&&t.set({height:e.newHeight}),t._onReisze(),t._saveStatus(),t.trigger("stopResize"),!1},animate:!1}))},_setImage:function(){var t=this,i=this.options;if(i.type){var r={paddingLeft:74,paddingRight:15,paddingBottom:30};"success"==i.type||"donne"==i.type||"ok"==i.type?(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-donne").show(),t.dialog.content.css(r)):"error"==i.type?(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-error").show(),t.dialog.content.css(r)):"warn"==i.type?(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-warn").show(),t.dialog.content.css(r)):"question"==i.type&&(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-question").show(),t.dialog.content.css(r))}}}),t.controls.Dialog.prototype.hide=t.controls.Dialog.prototype.hidden,e.ligerDialog.open=function(t){return e.ligerDialog(t)},e.ligerDialog.close=function(){var e=t.find(t.controls.Dialog.prototype.__getType());for(var i in e){var r=e[i];r.destroy.ligerDefer(r,5)}t.win.unmask()},e.ligerDialog.show=function(i){var r=t.find(t.controls.Dialog.prototype.__getType());if(r.length)for(var n in r)return void r[n].show();return e.ligerDialog(i)},e.ligerDialog.hide=function(){var e=t.find(t.controls.Dialog.prototype.__getType());for(var i in e){var r=e[i];r.hide()}},e.ligerDialog.tip=function(t){return t=e.extend({showType:"slide",width:240,modal:!1,height:100},t||{}),e.extend(t,{fixedType:"se",type:"none",isDrag:!1,isResize:!1,showMax:!1,showToggle:!1,showMin:!1}),e.ligerDialog.open(t)},e.ligerDialog.alert=function(t,i,r,n,a){t=t||"","function"==typeof i?(n=i,r=null):"function"==typeof r&&(n=r);var o=function(e,t,i){t.close(),n&&n(e,t,i)};return p={content:t,buttons:[{text:e.ligerDefaults.DialogString.ok,onclick:o}]},"string"==typeof i&&""!=i&&(p.title=i),"string"==typeof r&&""!=r&&(p.type=r),e.extend(p,{showMax:!1,showToggle:!1,showMin:!1},a||{}),e.ligerDialog(p)},e.ligerDialog.confirm=function(t,i,r){"function"==typeof i&&(r=i,type=null);var n=function(e,t){t.close(),r&&r("ok"==e.type)};return p={type:"question",content:t,buttons:[{text:e.ligerDefaults.DialogString.yes,onclick:n,type:"ok",cls:"l-dialog-btn-ok"},{text:e.ligerDefaults.DialogString.no,onclick:n,type:"no",cls:"l-dialog-btn-no"}]},"string"==typeof i&&""!=i&&(p.title=i),e.extend(p,{showMax:!1,showToggle:!1,showMin:!1}),e.ligerDialog(p)},e.ligerDialog.warning=function(t,i,r,n){
"function"==typeof i&&(r=i,type=null);var a=function(e,t){t.close(),r&&r(e.type)};return p={type:"question",content:t,buttons:[{text:e.ligerDefaults.DialogString.yes,onclick:a,type:"yes"},{text:e.ligerDefaults.DialogString.no,onclick:a,type:"no"},{text:e.ligerDefaults.DialogString.cancel,onclick:a,type:"cancel"}]},"string"==typeof i&&""!=i&&(p.title=i),e.extend(p,{showMax:!1,showToggle:!1,showMin:!1},n||{}),e.ligerDialog(p)},e.ligerDialog.waitting=function(t){return t=t||e.ligerDefaults.Dialog.waittingMessage,e.ligerDialog.open({cls:"l-dialog-waittingdialog",type:"none",content:'<div style="padding:4px">'+t+"</div>",allowClose:!1})},e.ligerDialog.closeWaitting=function(){var e=t.find(t.controls.Dialog);for(var i in e){var r=e[i];r.dialog.hasClass("l-dialog-waittingdialog")&&r.close()}},e.ligerDialog.success=function(t,i,r,n){return e.ligerDialog.alert(t,i,"success",r,n)},e.ligerDialog.error=function(t,i,r,n){return e.ligerDialog.alert(t,i,"error",r,n)},e.ligerDialog.warn=function(t,i,r,n){return e.ligerDialog.alert(t,i,"warn",r,n)},e.ligerDialog.question=function(t,i,r){return e.ligerDialog.alert(t,i,"question",null,r)},e.ligerDialog.prompt=function(t,i,r,n){var a=e('<input type="text" class="l-dialog-inputtext"/>');"function"==typeof r&&(n=r),"function"==typeof i?n=i:"boolean"==typeof i&&(r=i),"boolean"==typeof r&&r&&(a=e('<textarea class="l-dialog-textarea"></textarea>')),("string"==typeof i||"int"==typeof i)&&a.val(i);var o=function(e,t,i){t.close(),n&&n("yes"==e.type,a.val())};return p={title:t,target:a,width:320,buttons:[{text:e.ligerDefaults.DialogString.ok,onclick:o,type:"yes"},{text:e.ligerDefaults.DialogString.cancel,onclick:o,type:"cancel"}]},e.ligerDialog(p)}}(jQuery),define("ligerui.ligerDialog",["jquery","ligerui.all","ligerui.base","ligerui.inject","ligerui.ligerResizable","ligerui.ligerDrag"],function(){}),define("Common",["jquery","ligerui.ligerDialog"],function(e){var t=function(t,i,r){switch(t){case"success":e.ligerDialog.success(i);break;case"warn":e.ligerDialog.warn(i);break;case"question":e.ligerDialog.question(i);break;case"error":e.ligerDialog.error(i);break;case"confirm":e.ligerDialog.confirm(i,r);break;case"warning":e.ligerDialog.warning(i,r);break;case"prompt":e.ligerDialog.prompt(i,r);break;case"waitting":e.ligerDialog.waitting(i),setTimeout(function(){e.ligerDialog.closeWaitting()},2e3)}},i=function(e){t("error",e)},r=function(e){t("warn",e)},n=function(i){t("waitting",i),setTimeout(function(){e.ligerDialog.closeWaitting()},2e3)},a=function(t,r,n){e.ajax({type:"post",url:t,contentType:"application/json",dataType:"json",data:JSON.stringify(r),cache:!1,beforeSend:function(t){var i=e("meta[name='_csrf_header']").attr("content"),r=e("meta[name='_csrf']").attr("content");t.setRequestHeader(i,r)},success:function(e){e.result.hasOwnProperty("error")?i(e.result.message):n&&n(e)},error:function(e){i("è·åæå¡å¨æ°æ®å¼å¸¸!"+e.message)}}),e("#pageloading").hide()},o=function(e,t,i){a(e,t,i)},l=function(e,t,i){a(e,t,i)},s=function(e,t,i){a(e,t,i)},d={checkedCustomer:[],f_onCheckAllRow:function(e){for(var t in this.records)e?d.addCheckedCustomer(this.records[t].id):d.removeCheckedCustomer(this.records[t].id)},f_onCheckRow:function(e,t){e?d.addCheckedCustomer(t.id):d.removeCheckedCustomer(t.id)},findCheckedCustomer:function(e){for(var t=0;t<d.checkedCustomer.length;t++)if(d.checkedCustomer[t]==e)return t;return-1},addCheckedCustomer:function(e){-1==d.findCheckedCustomer(e)&&d.checkedCustomer.push(e)},removeCheckedCustomer:function(e){var t=d.findCheckedCustomer(e);-1!=t&&d.checkedCustomer.splice(t,1)}},c=function(e){return e||"undefined"==typeof e||0==e||""==e?!1:!0};return{showMsg:t,errorMsg:i,warnMsg:r,successMsg:n,queryList:o,saveData:l,queryById:s,gridCheck:d,isEmpty:c}}),define("Constant",[],function(){return{common:{loginPost:"/loginPost"},user:{list:"/ck/user/list",detail:"/ck/user/detail",queryAll:"/ck/user/queryAllUser",save:"/ck/user/saveUser",del:"/ck/user/deleteUser",queryById:"/ck/user/queryById",grant:"/ck/user/grant",grantRole:"/ck/user/grantRole"},role:{list:"/ck/role/list",detail:"/ck/role/detail",queryAll:"/ck/role/queryAll",save:"/ck/role/saveRole",del:"/ck/role/deleteRole",queryById:"/ck/role/queryById",grant:"/ck/role/grant",grantRole:"/ck/role/grantRole",queryByUserId:"/ck/role/queryByUserId"},menu:{list:"/ck/menu/list",detail:"/ck/menu/detail",queryAll:"/ck/menu/queryAll",save:"/ck/menu/saveMenu",del:"/ck/menu/deleteMenu",queryById:"/ck/menu/queryById",queryByRoleId:"/ck/menu/queryByRoleId"}}}),function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing"));var i=e.data(this[0],"validator");if(i)return i;if(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit){var r=this.find("input, button");r.filter(".cancel").click(function(){i.cancelSubmit=!0}),i.settings.submitHandler&&r.filter(":submit").click(function(){i.submitButton=this}),this.submit(function(t){function r(){if(i.settings.submitHandler){if(i.submitButton)var t=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(i.submitButton.value).appendTo(i.currentForm);return i.settings.submitHandler.call(i,i.currentForm),i.submitButton&&t.remove(),!1}return!0}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,r()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):r():(i.focusInvalid(),!1)})}return i},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,i=e(this[0].form).validate();return this.each(function(){t&=i.element(this)}),t},removeAttrs:function(t){var i={},r=this;return e.each(t.split(/\s/),function(e,t){i[t]=r.attr(t),r.removeAttr(t)}),i},rules:function(t,i){var r=this[0];if(t){var n=e.data(r.form,"validator").settings,a=n.rules,o=e.validator.staticRules(r);switch(t){case"add":e.extend(o,e.validator.normalizeRule(i)),a[r.name]=o,i.messages&&(n.messages[r.name]=e.extend(n.messages[r.name],i.messages));break;case"remove":if(!i)return delete a[r.name],o;var l={};return e.each(i.split(/\s/),function(e,t){l[t]=o[t],delete o[t]}),l}}var s=e.validator.normalizeRules(e.extend({},e.validator.metadataRules(r),e.validator.classRules(r),e.validator.attributeRules(r),e.validator.staticRules(r)),r);if(s.required){var d=s.required;delete s.required,s=e.extend({required:d},s)}return s}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+t.value)},filled:function(t){return!!e.trim(""+t.value)},unchecked:function(e){return!e.checked}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1==arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!=Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!=Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),i)}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e,t){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e,t){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){(e.name in this.submitted||e==this.lastElement)&&this.element(e)},onclick:function(e,t){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,r){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(r):e(t).addClass(i).removeClass(r)},unhighlight:function(t,i,r){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(r):e(t).removeClass(i).addClass(r)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this[0].form,"validator"),r="on"+t.type.replace(/^validate/,"");i.settings[r]&&i.settings[r].call(i,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};e.each(this.settings.groups,function(t,r){e.each(r.split(/\s/),function(e,r){i[r]=t})});var r=this.settings.rules;e.each(r,function(t,i){r[t]=e.validator.normalizeRule(i)}),e(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",t).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t)),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var i=this.check(t);return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var i in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1==e.grep(this.errorList,function(e){return e.element.name==t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!t.objectLength(e(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){return e(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},check:function(t){t=this.validationTargetFor(this.clean(t));var i=e(t).rules(),r=!1;for(var n in i){var a={method:n,parameters:i[n]};try{var o=e.validator.methods[n].call(this,t.value.replace(/\r/g,""),t,a.parameters);if("dependency-mismatch"==o){r=!0;continue}if(r=!1,"pending"==o)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!o)return this.formatAndAdd(t,a),!1}catch(l){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+a.method+"' method",l),l}}return r?void 0:(this.objectLength(i)&&this.successList.push(t),!0)},customMetaMessage:function(t,i){if(e.metadata){var r=this.settings.meta?e(t).metadata()[this.settings.meta]:e(t).metadata();return r&&r.messages&&r.messages[i]}},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor==String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customMetaMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(e,t){var i=this.defaultMessage(e,t.method),r=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,t.parameters,e):r.test(i)&&(i=jQuery.format(i.replace(r,"{$1}"),t.parameters)),this.errorList.push({message:i,element:e}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){for(var e=0;this.errorList[e];e++){var t=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(var e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(var e=0,i=this.validElements();i[e];e++)this.settings.unhighlight.call(this,i[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var r=this.errorsFor(t);r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.attr("generated")&&r.html(i)):(r=e("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(r=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(r).length||(this.settings.errorPlacement?this.settings.errorPlacement(r,e(t)):r.insertAfter(t))),!i&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r)),this.toShow=this.toShow.add(r)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")==i})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){var i=this.currentForm;return e(document.getElementsByName(t)).map(function(e,r){return r.form==i&&r.name==t&&r||null})},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e,t){return e},string:function(t,i){return!!e(t,i.form).length},"function":function(e,t){return e(t)}},optional:function(t){return!e.validator.methods.required.call(this,e.trim(t.value),t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],i&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0==this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor==String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},r=e(t).attr("class");return r&&e.each(r.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},attributeRules:function(t){var i={},r=e(t);for(var n in e.validator.methods){var a;a="required"===n&&"function"==typeof e.fn.prop?r.prop(n):r.attr(n),a?i[n]=a:r[0].getAttribute("type")===n&&(i[n]=!0)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},metadataRules:function(t){if(!e.metadata)return{};var i=e.data(t.form,"validator").settings.meta;return i?e(t).metadata()[i]:e(t).metadata()},staticRules:function(t){var i={},r=e.data(t.form,"validator");return r.settings.rules&&(i=e.validator.normalizeRule(r.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(r,n){if(n===!1)return void delete t[r];if(n.param||n.depends){var a=!0;switch(typeof n.depends){case"string":a=!!e(n.depends,i.form).length;break;case"function":a=n.depends.call(i,i)}a?t[r]=void 0!==n.param?n.param:!0:delete t[r]}}),e.each(t,function(r,n){t[r]=e.isFunction(n)?n(i):n}),e.each(["minlength","maxlength","min","max"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){t[this]&&(t[this]=[Number(t[this][0]),Number(t[this][1])])}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t.messages&&delete t.messages,t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,r){e.validator.methods[t]=i,e.validator.messages[t]=void 0!=r?r:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,r){if(!this.depend(r,i))return"dependency-mismatch";switch(i.nodeName.toLowerCase()){case"select":var n=e(i).val();return n&&n.length>0;case"input":if(this.checkable(i))return this.getLength(t,i)>0;default:return e.trim(t).length>0}},remote:function(t,i,r){if(this.optional(i))return"dependency-mismatch";var n=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),n.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=n.message,r="string"==typeof r&&{url:r}||r,this.pending[i.name])return"pending";if(n.old===t)return n.valid;n.old=t;var a=this;this.startRequest(i);var o={};return o[i.name]=t,e.ajax(e.extend(!0,{url:r,mode:"abort",port:"validate"+i.name,dataType:"json",data:o,success:function(r){a.settings.messages[i.name].remote=n.originalMessage;var o=r===!0;if(o){var l=a.formSubmitted;a.prepareElement(i),a.formSubmitted=l,a.successList.push(i),a.showErrors()}else{var s={},d=r||a.defaultMessage(i,"remote");s[i.name]=n.message=e.isFunction(d)?d(t):d,a.showErrors(s)}n.valid=o,a.stopRequest(i,o)}},r)),"pending"},minlength:function(t,i,r){return this.optional(i)||this.getLength(e.trim(t),i)>=r},maxlength:function(t,i,r){return this.optional(i)||this.getLength(e.trim(t),i)<=r},rangelength:function(t,i,r){var n=this.getLength(e.trim(t),i);return this.optional(i)||n>=r[0]&&n<=r[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||i>=e},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 -]+/.test(e))return!1;var i=0,r=0,n=!1;e=e.replace(/\D/g,"");for(var a=e.length-1;a>=0;a--){var o=e.charAt(a),r=parseInt(o,10);n&&(r*=2)>9&&(r-=9),i+=r,n=!n}return i%10==0},accept:function(e,t,i){return i="string"==typeof i?i.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||e.match(new RegExp(".("+i+")$","i"))},equalTo:function(t,i,r){var n=e(r).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(i).valid()});return t==n.val()}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,i,r){var n=e.port;"abort"==e.mode&&(t[n]&&t[n].abort(),t[n]=r)});else{var i=e.ajax;e.ajax=function(r){var n=("mode"in r?r:e.ajaxSettings).mode,a=("port"in r?r:e.ajaxSettings).port;return"abort"==n?(t[a]&&t[a].abort(),t[a]=i.apply(this,arguments)):i.apply(this,arguments)}}}(jQuery),function(e){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||e.each({focus:"focusin",blur:"focusout"},function(t,i){function r(t){return t=e.event.fix(t),t.type=i,e.event.handle.call(this,t)}e.event.special[i]={setup:function(){this.addEventListener(t,r,!0)},teardown:function(){this.removeEventListener(t,r,!0)},handler:function(t){return arguments[0]=e.event.fix(t),arguments[0].type=i,e.event.handle.apply(this,arguments)}}}),e.extend(e.fn,{validateDelegate:function(t,i,r){return this.bind(i,function(i){var n=e(i.target);return n.is(t)?r.apply(n,arguments):void 0})}})}(jQuery),define("jquery.validate",function(){}),jQuery.extend(jQuery.validator.messages,{required:"è¯¥å­æ®µä¸è½ä¸ºç©º",remote:"è¯·ä¿®æ­£è¯¥å­æ®µ",email:"è¯·è¾å¥æ­£ç¡®æ ¼å¼ççµå­é®ä»¶",url:"è¯·è¾å¥åæ³çç½å",date:"è¯·è¾å¥åæ³çæ¥æ",dateISO:"è¯·è¾å¥åæ³çæ¥æ (ISO).",number:"è¯·è¾å¥åæ³çæ°å­",digits:"åªè½è¾å¥æ´æ°",creditcard:"è¯·è¾å¥åæ³çä¿¡ç¨å¡å·",equalTo:"è¯·åæ¬¡è¾å¥ç¸åçå¼",accept:"è¯·è¾å¥æ¥æåæ³åç¼åçå­ç¬¦ä¸²",maxlength:jQuery.validator.format("è¯·è¾å¥ä¸ä¸ªé¿åº¦æå¤æ¯ {0} çå­ç¬¦ä¸²"),minlength:jQuery.validator.format("è¯·è¾å¥ä¸ä¸ªé¿åº¦æå°æ¯ {0} çå­ç¬¦ä¸²"),rangelength:jQuery.validator.format("è¯·è¾å¥ä¸ä¸ªé¿åº¦ä»äº {0} å {1} ä¹é´çå­ç¬¦ä¸²"),range:jQuery.validator.format("è¯·è¾å¥ä¸ä¸ªä»äº {0} å {1} ä¹é´çå¼"),max:jQuery.validator.format("è¯·è¾å¥ä¸ä¸ªæå¤§ä¸º {0} çå¼"),min:jQuery.validator.format("è¯·è¾å¥ä¸ä¸ªæå°ä¸º {0} çå¼"),notnull:"ä¸è½ä¸ºç©º"}),jQuery.validator.addMethod("isMobile",function(e,t){var i=e.length,r=/^(13[0-9]{9})|(18[0-9]{9})|(14[0-9]{9})|(17[0-9]{9})|(15[0-9]{9})$/;return this.optional(t)||11==i&&r.test(e)},"è¯·è¾å¥æ­£ç¡®çææºå·ç "),jQuery.validator.addMethod("isIdCardNo",function(e,t){return this.optional(t)||isIdCardNo(e)},"è¯·è¾å¥æ­£ç¡®çèº«ä»½è¯å·ç "),define("messages_cn",["jquery","jquery.validate"],function(){}),function(e){e.fn.ligerCheckBox=function(t){return e.ligerui.run.call(this,"ligerCheckBox",arguments)},e.fn.ligerGetCheckBoxManager=function(){return e.ligerui.run.call(this,"ligerGetCheckBoxManager",arguments)},e.ligerDefaults.CheckBox={disabled:!1,readonly:!1},e.ligerMethos.CheckBox={},e.ligerui.controls.CheckBox=function(t,i){e.ligerui.controls.CheckBox.base.constructor.call(this,t,i)},e.ligerui.controls.CheckBox.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"CheckBox"},__idPrev:function(){return"CheckBox"},_extendMethods:function(){return e.ligerMethos.CheckBox},_render:function(){var t=this,i=this.options;t.input=e(t.element),t.link=e('<a class="l-checkbox"></a>'),t.wrapper=t.input.addClass("l-hidden").wrap('<div class="l-checkbox-wrapper"></div>').parent(),t.wrapper.prepend(t.link),t.link.click(function(){return t.input.attr("disabled")||t.input.attr("readonly")?!1:i.disabled||i.readonly?!1:0==t.trigger("beforeClick",[t.element])?!1:(e(this).hasClass("l-checkbox-checked")?t._setValue(!1):t._setValue(!0),void t.input.trigger("change"))}),t.wrapper.hover(function(){i.disabled||e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),this.set(i),this.updateStyle()},_setCss:function(e){this.wrapper.css(e)},_setValue:function(e){var t=this;this.options;e?(t.input[0].checked=!0,t.link.addClass("l-checkbox-checked")):(t.input[0].checked=!1,t.link.removeClass("l-checkbox-checked"))},_setDisabled:function(e){e?(this.input.attr("disabled",!0),this.wrapper.addClass("l-disabled")):(this.input.attr("disabled",!1),this.wrapper.removeClass("l-disabled"))},_getValue:function(){return this.element.checked},updateStyle:function(){this.input.attr("disabled")&&(this.wrapper.addClass("l-disabled"),this.options.disabled=!0),this.input[0].checked?this.link.addClass("l-checkbox-checked"):this.link.removeClass("l-checkbox-checked")}})}(jQuery),define("ligerui.ligerCheckBox",["jquery","ligerui.all","ligerui.base","ligerui.inject"],function(){}),function($){function removeArrItem(e,t){for(var i=e.length-1;i>=0;i--)t(e[i])&&e.splice(i,1)}var l=$.ligerui;$.fn.ligerGrid=function(e){return $.ligerui.run.call(this,"ligerGrid",arguments)},$.fn.ligerGetGridManager=function(){return $.ligerui.run.call(this,"ligerGetGridManager",arguments)},$.ligerDefaults.Grid={title:null,width:"auto",height:"auto",columnWidth:null,resizable:!0,url:!1,urlParms:null,data:null,usePager:!0,hideLoadButton:!1,pagerRender:null,page:1,pageSize:10,pageSizeOptions:[10,20,30,40,50],parms:[],columns:[],minColToggle:1,dataType:"server",dataAction:"server",showTableToggleBtn:!1,switchPageSizeApplyComboBox:!1,allowAdjustColWidth:!0,checkbox:!1,isSingleCheck:!1,allowHideColumn:!0,enabledEdit:!1,isScroll:!0,dateFormat:"yyyy-MM-dd",inWindow:!0,statusName:"__status",method:"post",async:!0,fixedCellHeight:!0,heightDiff:0,cssClass:null,root:"Rows",record:"Total",pageParmName:"page",pagesizeParmName:"pagesize",sortnameParmName:"sortname",sortorderParmName:"sortorder",allowUnSelectRow:!1,alternatingRow:!0,mouseoverRowCssClass:"l-grid-row-over",enabledSort:!0,rowClsRender:null,rowAttrRender:null,groupColumnName:null,groupColumnDisplay:"åç»",groupRender:null,totalRender:null,delayLoad:!1,where:null,selectRowButtonOnly:!1,selectable:!0,whenRClickToSelect:!1,contentType:null,checkboxColWidth:27,detailColWidth:29,clickToEdit:!0,detailToEdit:!1,onEndEdit:null,minColumnWidth:80,tree:null,isChecked:null,isSelected:null,frozen:!0,frozenDetail:!1,frozenCheckbox:!0,detail:null,detailHeight:260,isShowDetailToggle:null,rownumbers:!1,frozenRownumbers:!0,rownumbersColWidth:26,colDraggable:!1,rowDraggable:!1,rowDraggingRender:null,autoCheckChildren:!0,onRowDragDrop:null,rowHeight:28,headerRowHeight:28,toolbar:null,toolbarShowInLeft:!0,headerImg:null,editorTopDiff:3,editorLeftDiff:1,editorHeightDiff:-1,unSetValidateAttr:!0,autoFilter:!1,rowSelectable:!0,scrollToPage:!1,scrollToAppend:!0,onDragCol:null,onToggleCol:null,onChangeSort:null,onSuccess:null,onDblClickRow:null,onSelectRow:null,onBeforeSelectRow:null,onUnSelectRow:null,onBeforeCheckRow:null,onCheckRow:null,onBeforeCheckAllRow:null,onCheckAllRow:null,onBeforeShowData:null,onAfterShowData:null,onError:null,onSubmit:null,onReload:null,onToFirst:null,onToPrev:null,onToNext:null,onToLast:null,onAfterAddRow:null,onBeforeEdit:null,onBeforeSubmitEdit:null,onAfterEdit:null,onLoading:null,onLoaded:null,onContextmenu:null,onBeforeCancelEdit:null,onAfterSubmitEdit:null,onRowDragDrop:null,onGroupExtend:null,onGroupCollapse:null,onTreeExpand:null,onTreeCollapse:null,onTreeExpanded:null,onTreeCollapsed:null,onLoadData:null,onHeaderCellBulid:null},$.ligerDefaults.GridString={errorMessage:"åçéè¯¯",pageStatMessage:"æ¾ç¤ºä»{from}å°{to}ï¼æ» {total} æ¡ ãæ¯é¡µæ¾ç¤ºï¼{pagesize}",pageTextMessage:"Page",loadingMessage:"å è½½ä¸­...",findTextMessage:"æ¥æ¾",noRecordMessage:"æ²¡æç¬¦åæ¡ä»¶çè®°å½å­å¨",isContinueByDataChanged:"æ°æ®å·²ç»æ¹å,å¦æç»§ç»­å°ä¸¢å¤±æ°æ®,æ¯å¦ç»§ç»­?",cancelMessage:"åæ¶",saveMessage:"ä¿å­",applyMessage:"åºç¨",draggingMessage:"{count}è¡"},$.ligerDefaults.Grid_columns={id:null,name:null,totalSummary:null,display:null,headerRender:null,isAllowHide:!0,isSort:!1,type:null,columns:null,width:120,minWidth:80,format:null,align:"left",hide:!1,editor:null,render:null,textField:null},$.ligerDefaults.Grid_editor={type:null,ext:null,onChange:null,onChanged:null},$.ligerMethos.Grid=$.ligerMethos.Grid||{},$.ligerDefaults.Grid.sorters=$.ligerDefaults.Grid.sorters||{},$.ligerDefaults.Grid.formatters=$.ligerDefaults.Grid.formatters||{},$.ligerDefaults.Grid.editors=$.ligerDefaults.Grid.editors||{},
$.ligerDefaults.Grid.sorters.date=function(e,t){return t>e?-1:e>t?1:0},$.ligerDefaults.Grid.sorters["int"]=function(e,t){return parseInt(e)<parseInt(t)?-1:parseInt(e)>parseInt(t)?1:0},$.ligerDefaults.Grid.sorters["float"]=function(e,t){return parseFloat(e)<parseFloat(t)?-1:parseFloat(e)>parseFloat(t)?1:0},$.ligerDefaults.Grid.sorters.string=function(e,t){return e?e.localeCompare(t):!1},$.ligerDefaults.Grid.formatters.date=function(value,column){function getFormatDate(e,t){this.options;if(isNaN(e))return null;var i=t,r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in r)new RegExp("("+n+")").test(i)&&(i=i.replace(RegExp.$1,1==RegExp.$1.length?r[n]:("00"+r[n]).substr((""+r[n]).length)));return i}if(!value)return"";if("string"==typeof value&&/^\/Date/.test(value)&&(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)),value instanceof Date){var format=column.format||this.options.dateFormat||"yyyy-MM-dd";return getFormatDate(value,format)}return value.toString()},$.ligerDefaults.Grid.formatters.ref=function(e){return $.isArray(e)?e.length>1?e[1]:e[0]:e},$.ligerui.controls.Grid=function(e,t){$.ligerui.controls.Grid.base.constructor.call(this,e,t)},$.ligerui.controls.Grid.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"$.ligerui.controls.Grid"},__idPrev:function(){return"grid"},_extendMethods:function(){return $.ligerMethos.Grid},_init:function(){$.ligerui.controls.Grid.base._init.call(this);var e=this,t=this.options;t.dataType=t.url?"server":"local","local"==t.dataType&&(t.data=t.data||[],t.dataAction="local"),0==t.isScroll&&(t.height="auto"),t.frozen||(t.frozenCheckbox=!1,t.frozenDetail=!1,t.frozenRownumbers=!1),t.detailToEdit&&(t.enabledEdit=!0,t.clickToEdit=!1,t.detail={height:"auto",onShowDetail:function(i,r,n){function a(){$(r).parent().parent().remove(),e.collapseDetail(i)}$(r).addClass("l-grid-detailpanel-edit"),e.beginEdit(i,function(e,i){var n=$("<div class='l-editbox'></div>");return n.width(120).height(t.rowHeight+1),n.appendTo(r),n}),$("<div class='l-clear'></div>").appendTo(r),$("<div class='l-button'>"+t.saveMessage+"</div>").appendTo(r).click(function(){e.endEdit(i),a()}),$("<div class='l-button'>"+t.applyMessage+"</div>").appendTo(r).click(function(){e.submitEdit(i)}),$("<div class='l-button'>"+t.cancelMessage+"</div>").appendTo(r).click(function(){e.cancelEdit(i),a()})}}),t.tree&&(t.tree.childrenName=t.tree.childrenName||"children",t.tree.isParent=t.tree.isParent||function(e){var i=t.tree.childrenName in e;return i},t.tree.isExtend=t.tree.isExtend||function(e){return"isextend"in e&&0==e.isextend?!1:!0});for(var i in liger.editors){var r=liger.editors[i];!r||i in t.editors||(t.editors[i]=liger.getEditor($.extend({type:i,master:e},r)))}},_render:function(){var e=this,t=this.options;e.grid=$(e.element),e.grid.addClass("l-panel");var i=[];if(i.push("        <div class='l-panel-header'><span class='l-panel-header-text'></span></div>"),i.push("                    <div class='l-grid-loading'></div>"),i.push("        <div class='l-panel-topbar' style='display:none'><div class='l-panel-topbarinner'></div></div><div class='l-clear'></div>"),i.push("        <div class='l-panel-bwarp'>"),i.push("            <div class='l-panel-body'>"),i.push("                <div class='l-grid'>"),i.push("                    <div class='l-grid-dragging-line'></div>"),i.push("                    <div class='l-grid-popup'><table cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                  <div class='l-grid1'>"),i.push("                      <div class='l-grid-header l-grid-header1'>"),i.push("                          <div class='l-grid-header-inner'><table class='l-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                      </div>"),i.push("                      <div class='l-grid-body l-grid-body1'>"),i.push("                      </div>"),i.push("                  </div>"),i.push("                  <div class='l-grid2'>"),i.push("                      <div class='l-grid-header l-grid-header2'>"),i.push("                          <div class='l-grid-header-inner'><table class='l-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                      </div>"),i.push("                      <div class='l-grid-body l-grid-body2 l-scroll'>"),i.push("                      </div>"),i.push("                  </div>"),i.push("                 </div>"),i.push("              </div>"),i.push("         </div>"),i.push("         <div class='l-panel-bar'>"),i.push("            <div class='l-panel-bbar-inner'>"),i.push("                <div class='l-bar-group  l-bar-message'><span class='l-bar-text'></span></div>"),i.push("            <div class='l-bar-group l-bar-selectpagesize'></div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'>"),i.push("                    <div class='l-bar-button l-bar-btnfirst'><span></span></div>"),i.push("                    <div class='l-bar-button l-bar-btnprev'><span></span></div>"),i.push("                </div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'><span class='pcontrol'> <input type='text' size='4' value='1' style='width:20px' maxlength='3' /> / <span></span></span></div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'>"),i.push("                     <div class='l-bar-button l-bar-btnnext'><span></span></div>"),i.push("                    <div class='l-bar-button l-bar-btnlast'><span></span></div>"),i.push("                </div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'>"),i.push("                     <div class='l-bar-button l-bar-btnload'><span></span></div>"),i.push("                </div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-clear'></div>"),i.push("            </div>"),i.push("         </div>"),e.grid.html(i.join("")),e.header=$(".l-panel-header:first",e.grid),e.body=$(".l-panel-body:first",e.grid),e.toolbar=$(".l-panel-bar:first",e.grid),e.popup=$(".l-grid-popup:first",e.grid),e.gridloading=$(".l-grid-loading:first",e.grid),e.draggingline=$(".l-grid-dragging-line",e.grid),e.topbar=$(".l-panel-topbarinner:first",e.grid),e.gridview=$(".l-grid:first",e.grid),e.gridview.attr("id",e.id+"grid"),e.gridview1=$(".l-grid1:first",e.gridview),e.gridview2=$(".l-grid2:first",e.gridview),e.gridheader=$(".l-grid-header:first",e.gridview2),e.gridbody=$(".l-grid-body:first",e.gridview2),t.autoFilter){var r={text:"é«çº§æ¥è¯¢",gridid:e.id,click:function(){e.showFilter()},icon:"search2"};t.toolbar&&t.toolbar.items?t.toolbar.items.push(r):t.toolbar={items:[r]}}e.f={},e.f.gridheader=$(".l-grid-header:first",e.gridview1),e.f.gridbody=$(".l-grid-body:first",e.gridview1),e.currentData=null,e.changedCells={},e.editors={},e.editor={editing:!1},e.cacheData={},"auto"==t.height&&e.bind("SysGridHeightChanged",function(){e.enabledFrozen()&&e.gridview.height(Math.max(e.gridview1.height(),e.gridview2.height()))});var n=$.extend({},t);this._bulid(),this._setColumns(t.columns),delete n.columns,delete n.data,delete n.url,e.set(n),t.delayLoad||(t.url?e.set({url:t.url}):t.data&&e.set({data:t.data}))},_setFrozen:function(e){e?this.grid.addClass("l-frozen"):this.grid.removeClass("l-frozen")},_setCssClass:function(e){this.grid.addClass(e)},_setLoadingMessage:function(e){this.gridloading.html(e)},_setToolbar:function(e){var t=this,i=this.options;if(e&&$.fn.ligerToolBar){if(t.topbar.parent().show(),t.toolbarManager=t.topbar.ligerToolBar(e),e.title){var r=$("<div class='l-panel-topbartitle'><span>"+e.title+"</span></div>");e.icon&&(r.append("<img class='l-panel-topbaricon' src='"+e.icon+"'></img>"),r.addClass("l-panel-topbartitle-hasicon")),t.topbar.parent().append(r)}i.toolbarShowInLeft&&t.topbar.addClass("l-panel-topbarinner-left")}else t.topbar.parent().remove()},isHorizontalScrollShowed:function(){var e=this,t=e.gridbody.find(".l-grid-body-inner:first");return t.length?e.gridbody.width()-20<t.width():!1},_setHeight:function(e){var t=this,i=this.options;if(t.unbind("SysGridHeightChanged"),"auto"==e)return void t.bind("SysGridHeightChanged",function(){t.enabledFrozen()&&t.gridview.height(Math.max(t.gridview1.height(),t.gridview2.height()))});if(e=t._calculateGridBodyHeight(e),e>0){if(t.gridbody.height(e),i.frozen){var r=t.gridbody.width(),n=$(":first-child",t.gridbody).width();n&&n+18>r?e>18&&t.f.gridbody.height(e-18):t.f.gridbody.height(e)}var a=i.headerRowHeight*(t._columnMaxLevel-1)+i.headerRowHeight-1;t.gridview.height(e+a)}t._updateHorizontalScrollStatus.ligerDefer(t,10)},_calculateGridBodyHeight:function(e){var t=this,i=this.options;"string"==typeof e&&e.indexOf("%")>0&&(e=i.inWindow?$(window).height()*parseInt(e)*.01:t.grid.parent().height()*parseInt(e)*.01),i.title&&(e-=24),(i.usePager&&i.pagerRender||!i.scrollToPage)&&(e-=t.toolbar.outerHeight()),i.totalRender&&(e-=25),i.toolbar&&(e-=t.topbar.outerHeight());var r=i.headerRowHeight*(t._columnMaxLevel-1)+i.headerRowHeight-1;return e-=r||0},_updateHorizontalScrollStatus:function(){var e=this;this.options;e.isHorizontalScrollShowed()?e.gridview.addClass("l-grid-hashorizontal"):e.gridview.removeClass("l-grid-hashorizontal")},_updateFrozenWidth:function(){var e=this;this.options;if(e.enabledFrozen()){e.gridview1.width(e.f.gridtablewidth);var t=e.gridview.width()-e.f.gridtablewidth;e.gridview2.css({left:e.f.gridtablewidth}),t>0&&e.gridview2.css({width:t})}},_setWidth:function(e){var t=this;this.options;t.enabledFrozen()&&t._onResize()},_setUrl:function(e){this.options.url=e,e?(this.options.dataType="server",this.loadData(!0)):this.options.dataType="local"},removeParm:function(e){var t=this,i=t.get("parms");i||(i={}),i instanceof Array?removeArrItem(i,function(t){return t.name==e}):delete i[e],t.set("parms",i)},setParm:function(e,t){var i=this,r=i.get("parms");r||(r={}),r instanceof Array?(removeArrItem(r,function(t){return t.name==e}),r.push({name:e,value:t})):r[e]=t,i.set("parms",r)},_setData:function(e){this.loadData(this.options.data),this.trigger("afterSetData")},loadData:function(e,t){var i=this,r=this.options;i.loading=!0,i.trigger("loadData");var n=null,a=!0;"function"==typeof e?(n=e,i.lastData?i.data=i.lastData:(i.data=i.currentData,i.data||(i.data={}),i.data[r.root]||(i.data[r.root]=[]),i.lastData=i.data),a=!1):"boolean"==typeof e?a=e:"object"==typeof e&&e?(a=!1,r.dataType="local",r.data=e):"number"==typeof e&&(r.newPage=e),r.newPage||(r.newPage=1),"server"==r.dataAction&&(r.sortOrder||(r.sortOrder="asc"));var o=[];if(r.parms){var l=$.isFunction(r.parms)?r.parms():r.parms;if(l.length){$(l).each(function(){o.push({name:this.name,value:this.value})});for(var s=l.length-1;s>=0;s--)l[s].temp&&l.splice(s,1)}else if("object"==typeof l)for(var d in l)o.push({name:d,value:l[d]})}"server"==r.dataAction&&(r.usePager&&(o.push({name:r.pageParmName,value:r.newPage}),o.push({name:r.pagesizeParmName,value:r.pageSize})),r.sortName&&(o.push({name:r.sortnameParmName,value:r.sortName}),o.push({name:r.sortorderParmName,value:r.sortOrder}))),$(".l-bar-btnload span",i.toolbar).addClass("l-disabled"),"local"==r.dataType?(i.filteredData=$.extend(!0,{},r.data||i.currentData),n&&(i.filteredData[r.root]=i._searchData(i.filteredData[r.root],n)),r.usePager?i.currentData=i._getCurrentPageData(i.filteredData):i.currentData=i.filteredData,i._convertTreeData(),i._showData()):"local"!=r.dataAction||a?i.loadServerData(o,n,t):i.data&&i.data[r.root]&&(i.filteredData=i.data,n&&(i.filteredData[r.root]=i._searchData(i.filteredData[r.root],n)),i.currentData=i._getCurrentPageData(i.filteredData),i._convertTreeData(),i._showData()),i.loading=!1},_convertTreeData:function(){var e=this,t=this.options;t.tree&&t.tree.idField&&t.tree.parentIDField&&(e.currentData[t.root]=e.arrayToTree(e.currentData[t.root],t.tree.idField,t.tree.parentIDField),e.currentData[t.record]=e.currentData[t.root].length)},loadServerData:function(e,t,i){function r(e){if(!e)return"null";var t=e,i={};if($.isArray(t))for(var r=0;r<t.length;r++)i[t[r].name]=t[r].value;else i=t;return liger.toJSON(i)}var n=this,a=this.options,o=a.url;$.isFunction(o)&&(o=o.call(n));var l=$.isFunction(a.urlParms)?a.urlParms.call(n):a.urlParms;if(l)for(name in l)o+=-1==o.indexOf("?")?"?":"&",o+=name+"="+l[name];var s={type:a.method,url:o,data:e,async:a.async,dataType:"json",beforeSend:function(e){n.hasBind("loading")?n.trigger("loading",[e]):n.toggleLoading(!0)},success:function(e){return e.result.hasOwnProperty("success")&&e.result.hasOwnProperty("data")&&(e=e.result.data.hasOwnProperty("data")?e.result.data:e.result),n.trigger("success",[e,n]),e&&e[a.root]&&e[a.root].length?(n.data=e,null!=n.data[a.record]&&(n.cacheData.records=n.data[a.record]),"server"==a.dataAction?(n.currentData=n.data,null==n.currentData[a.record]&&n.cacheData.records&&(n.currentData[a.record]=n.cacheData.records)):(n.filteredData=n.data,t&&(n.filteredData[a.root]=n._searchData(n.filteredData[a.root],t)),a.usePager?n.currentData=n._getCurrentPageData(n.filteredData):n.currentData=n.filteredData),n._convertTreeData(),void n._showData.ligerDefer(n,10,[i])):(n.currentData=n.data={},n.currentData[a.root]=n.data[a.root]=[],e&&e[a.record]?n.currentData[a.record]=n.data[a.record]=e[a.record]:n.currentData[a.record]=n.data[a.record]=0,n._convertTreeData(),void n._showData(i))},complete:function(){n.trigger("complete",[n]),n.hasBind("loaded")?n.trigger("loaded",[n]):n.toggleLoading.ligerDefer(n,10,[!1])},error:function(e,t,i){n.currentData=n.data={},n.currentData[a.root]=n.data[a.root]=[],n.currentData[a.record]=n.data[a.record]=0,n.toggleLoading.ligerDefer(n,10,[!1]),$(".l-bar-btnload span",n.toolbar).removeClass("l-disabled"),n.trigger("error",[e,t,i])}};a.contentType&&(s.contentType=a.contentType),"application/json"==a.contentType&&"string"!=typeof parms&&(s.data=r(e)),$.ajax(s)},toggleLoading:function(e){this.gridloading[e?"show":"hide"]()},_createEditor:function(e,t,i,r,n){var a=e.create.call(this,t,i);return e.setValue&&e.setValue.call(this,a,i.value,i),i.column.editor&&i.column.editor.initSelect&&(a.element&&$(a.element).is(":text")&&$(a.element).select(),a instanceof jQuery&&(a.is(":text")?a.select():a.find(":text").select())),e.setText&&i.column.textField&&e.setText.call(this,a,i.text,i),e.resize&&e.resize.call(this,a,r,n,i),a},beginEdit:function(e,t){var i=this,r=this.options;if(r.enabledEdit){var n=i.getRow(e);if(!n._editing&&0!=i.trigger("beginEdit",{record:n,rowindex:n.__index})){i.editors[n.__id]={},n._editing=!0,i.reRender({rowdata:n}),t=t||function(e,t){var r=i.getCellObj(e,t),n=$(r).html("");return i.setCellEditing(e,t,!0),n};for(var a=0,o=i.columns.length;o>a;a++){var l=i.columns[a];if(l.name&&l.editor&&l.editor.type&&r.editors[l.editor.type]){var s=r.editors[l.editor.type],d={record:n,value:i._getValueByName(n,l.name),column:l,rowindex:n.__index,grid:i},c=t(n,l),u=c.width(),h=c.height(),g=i._createEditor(s,c,d,u,h);i.editors[n.__id][l.__id]={editor:s,input:g,editParm:d,container:c}}}i.trigger("afterBeginEdit",{record:n,rowindex:n.__index})}}},cancelEdit:function(e){var t=this;if(void 0==e)for(var i in t.editors)t.cancelEdit(i);else{var r=t.getRow(e);if(!t.editors[r.__id])return;if(0==t.trigger("beforeCancelEdit",{record:r,rowindex:r.__index}))return;for(var n in t.editors[r.__id]){var a=t.editors[r.__id][n];a.editor.destroy&&a.editor.destroy(a.input,a.editParm)}delete t.editors[r.__id],delete r._editing,t.reRender({rowdata:r})}},addEditRow:function(e,t){this.submitEdit(),e=this.add(e),this.beginEdit(e,t)},submitEdit:function(e){var t=this;this.options;if(void 0==e)for(var i in t.editors)t.submitEdit(i);else{var r=t.getRow(e),n={};if(!r||!t.editors[r.__id])return;for(var a in t.editors[r.__id]){var o=t.editors[r.__id][a],l=o.editParm.column;l.name&&(n[l.name]=o.editor.getValue(o.input,o.editParm)),l.textField&&o.editor.getText&&(n[l.textField]=o.editor.getText(o.input,o.editParm))}if(0==t.trigger("beforeSubmitEdit",{record:r,rowindex:r.__index,newdata:n}))return!1;t.updateRow(r,n),t.trigger("afterSubmitEdit",{record:r,rowindex:r.__index,newdata:n})}},_enabledEditByCell:function(e){var t=this,i=(this.options,t.getColumn(e));return i?i.editor&&i.editor.type:!1},endEditToNext:function(){function e(){return n.parent("tr").next(".l-grid-row").find("td:first")}var t=this,i=(this.options,t.editor),r=null,n=null;if(i){var a=i.editParm,o=a.column,l=($.inArray(o,t.columns),t.getCellObj(a.record,a.column));if(n=$(l),r=n.next(),r.length||(r=e()),r.length)for(;!t._enabledEditByCell(r.get(0));)n=r,r=r.next(),r.length||(r=e())}t.endEdit(),r&&r.length&&t._applyEditor(r.get(0))},endEdit:function(e){var t=this;this.options;if(t.editor.editing){var i=t.editor;t.trigger("sysEndEdit",[t.editor.editParm]),t.trigger("endEdit",[t.editor.editParm]),i.editor.destroy&&i.editor.destroy(i.input,i.editParm),t.editor.container.remove(),t.reRender({rowdata:t.editor.editParm.record,column:t.editor.editParm.column}),t.trigger("afterEdit",[t.editor.editParm]),t.editor={editing:!1}}else if(void 0!=e){var r=t.getRow(e);if(!t.editors[r.__id])return;if(0==t.submitEdit(e))return!1;for(var n in t.editors[r.__id]){var i=t.editors[r.__id][n];i.editor.destroy&&i.editor.destroy(i.input,i.editParm)}delete t.editors[r.__id],delete r._editing,t.trigger("afterEdit",{record:r,rowindex:r.__index})}else for(var a in t.editors)t.endEdit(a);t._fixHeight.ligerDefer(t,10)},setWidth:function(e){return this._setWidth(e)},setHeight:function(e){return this._setHeight(e)},enabledCheckbox:function(){return this.options.checkbox?!0:!1},enabledFrozen:function(){var e=this,t=this.options;if(!t.frozen)return!1;var i=e.columns||[];if(e.enabledDetail()&&t.frozenDetail||e.enabledCheckbox()&&t.frozenCheckbox||t.frozenRownumbers&&t.rownumbers)return!0;for(var r=0,n=i.length;n>r;r++)if(i[r].frozen)return!0;return this._setFrozen(!1),!1},enabledDetailEdit:function(){return this.enabledDetail()&&this.options.detailToEdit?!0:!1},enabledDetail:function(){return this.options.detail&&this.options.detail.onShowDetail?!0:!1},enabledGroup:function(){return this.options.groupColumnName?!0:!1},deleteSelectedRow:function(){if(this.selected){for(var e in this.selected){var t=this.selected[e];t.__id in this.records&&this._deleteData.ligerDefer(this,10,[t])}this.reRender.ligerDefer(this,20)}},removeRange:function(e){var t=this;this.options;$.each(e,function(){t._removeData(this)}),t.reRender()},remove:function(e){var t=this;this.options,t.getRow(e);t._removeData(e),t.reRender()},deleteRange:function(e){var t=this;this.options;$.each(e,function(){t._deleteData(this)}),t.reRender()},deleteRow:function(e){var t=this,i=(this.options,t.getRow(e));i&&(t._deleteData(i),t.reRender(),t.isDataChanged=!0)},_deleteData:function(e){var t=this,i=this.options,r=t.getRow(e);if(r[i.statusName]="delete",i.tree){var n=t.getChildren(r,!0);if(n)for(var a=0,o=n.length;o>a;a++)n[a][i.statusName]="delete"}t.deletedRows=t.deletedRows||[],t.deletedRows.push(r),t._removeSelected(r)},updateCell:function(e,t,i){var r,n,a,o=this,l=this.options;if("string"!=typeof e){if("number"==typeof e)r=o.columns[e],a=o.getRow(i),n=o.getCellObj(a,r);else if("object"==typeof e&&e.__id)r=e,a=o.getRow(i),n=o.getCellObj(a,r);else{n=e;var s=n.id.split("|"),d=s[s.length-1];r=o._columns[d];var c=$(n).parent();a=a||o.getRow(c[0])}null!=t&&r.name&&(o._setValueByName(a,r.name,t),"add"!=a[l.statusName]&&(a[l.statusName]="update"),o.isDataChanged=!0),o.reRender({rowdata:a,column:r})}else for(var u=0,h=o.columns.length;h>u;u++)o.columns[u].name==e&&o.updateCell(u,t,i)},addRows:function(e,t,i,r){var n=this;this.options;$(e).each(function(){n.addRow(this,t,i,r)})},_createRowid:function(){return"r"+(1e3+this.recordNumber)},_isRowId:function(e){return e in this.records},_addNewRecord:function(e,t,i){var r=this,n=this.options;if(r.recordNumber++,e.__id=r._createRowid(),e.__previd=t,t&&-1!=t){var a=r.records[t];if(a.__nextid&&-1!=a.__nextid){var o=r.records[a.__nextid];o&&(o.__previd=e.__id)}a.__nextid=e.__id,e.__index=a.__index+1}else e.__index=0;if(n.tree){if(i&&-1!=i){var l=r.records[i];e.__pid=i,e.__level=l.__level+1}else e.__pid=-1,e.__level=1;e.__hasChildren=e[n.tree.childrenName]?!0:!1}return e[n.statusName]=e[n.statusName]||"nochanged",r.rows[e.__index]=e,r.records[e.__id]=e,e},_getRows:function(e){function t(e){if(e&&e.length)for(var n=0,a=e.length;a>n;n++){var o=e[n];r.push(o),o[i.tree.childrenName]&&t(o[i.tree.childrenName])}}var i=this.options,r=[];return t(e),r},_updateGridData:function(){function e(n,a){if(n&&n.length)for(var o=0,l=n.length;l>o;o++){var s=n[o];t.formatRecord(s),"delete"!=s[i.statusName]&&(t._addNewRecord(s,r,a),r=s.__id,s.__hasChildren&&e(s[i.tree.childrenName],s.__id))}}var t=this,i=this.options;t.recordNumber=0,t.rows=[],t.records={};var r=-1;return e(t.currentData[i.root],-1),t.rows},_moveData:function(e,t,i){var r,n,a=this,o=(this.options,a.getRow(e)),l=a.getRow(t),s=a._getParentChildren(o);r=$.inArray(o,s),s.splice(r,1),s=a._getParentChildren(l),n=$.inArray(l,s),s.splice(n+(i?1:0),0,o)},move:function(e,t,i){this._moveData(e,t,i),this.reRender()},moveRange:function(e,t,i){for(var r in e)this._moveData(e[r],t,i);this.reRender()},up:function(e){var t=this,i=(this.options,t.getRow(e)),r=t._getParentChildren(i),n=$.inArray(i,r);if(-1!=n&&0!=n){var a=t.getSelected();t.move(i,r[n-1],!1),t.select(a)}},down:function(e){var t=this,i=(this.options,t.getRow(e)),r=t._getParentChildren(i),n=$.inArray(i,r);if(-1!=n&&n!=r.length-1){var a=t.getSelected();t.move(i,r[n+1],!0),t.select(a)}},addRow:function(e,t,i,r){var n=this,a=this.options;if(e=e||{},n._addData(e,r,t,i),n.reRender(),e[a.statusName]="add",a.tree){var o=n.getChildren(e,!0);if(o)for(var l=0,s=o.length;s>l;l++)o[l][a.statusName]="add"}return n.isDataChanged=!0,a.total=a.total?a.total+1:1,a.pageCount=Math.ceil(a.total/a.pageSize),n._buildPager(),n.trigger("SysGridHeightChanged"),n.trigger("afterAddRow",[e]),e},updateRow:function(e,t){var i=this,r=this.options,n=i.getRow(e);return i.isDataChanged=!0,$.extend(n,t||{}),"add"!=n[r.statusName]&&(n[r.statusName]="update"),i.reRender.ligerDefer(i,10,[{rowdata:n}]),n},setCellEditing:function(e,t,i){var r=this,n=(this.options,r.getCellObj(e,t)),a=i?"addClass":"removeClass";if($(n)[a]("l-grid-row-cell-editing"),0!=e.__id){var o=$(r.getRowObj(e.__id)).prev();if(!o.length||o.length<=0||null==o[0].id||""==o[0].id)return;var l=r.getRow(o[0]),s=r.getCellObj(l,t);if(!s)return;$(s)[a]("l-grid-row-cell-editing-topcell")}if(-1!=t.__previd&&null!=t.__previd){var s=$(r.getCellObj(e,t)).prev();$(s)[a]("l-grid-row-cell-editing-leftcell")}},reRender:function(e){function t(e){if(e.totalSummary)for(var t=0;t<i.totalNumber;t++){var n=document.getElementById(i.id+"|total"+t+"|"+e.__id);$("div:first",n).html(i._getTotalCellContent(e,i.groups&&i.groups[t]?i.groups[t]:i.currentData[r.root]))}}var i=this,r=this.options;e=e||{};var n=e.rowdata,a=e.column,o=e.totalOnly;if(!(a&&(a.isdetail||a.ischeckbox)||n&&"delete"==n[r.statusName]))if(o)$(i.columns).each(function(){t(this)});else if(n&&a){var l=i.getCellObj(n,a);$(l).html(i._getCellHtml(n,a)),a.issystem||i.setCellEditing(n,a,!1)}else if(n)$(i.columns).each(function(){i.reRender({rowdata:n,column:this})});else if(a){for(var s in i.records)i.reRender({rowdata:i.records[s],column:a});t(a)}else i._showData()},getData:function(e,t){var i=this,r=this.options,n=[];void 0==t&&(t=!0);for(var a in i.records){var o=$.extend(!0,{},i.records[a]);(o[r.statusName]==e||void 0==e)&&n.push(i.formatRecord(o,t))}return n},formatRecord:function(e,t){return delete e.__id,delete e.__previd,delete e.__nextid,delete e.__index,this.options.tree&&(delete e.__pid,delete e.__level,delete e.__hasChildren),t&&delete e[this.options.statusName],e},getUpdated:function(){return this.getData("update",!0)},getDeleted:function(){return this.deletedRows},getAdded:function(){return this.getData("add",!0)},getChanges:function(){var e=this,t=(this.options,[]);return this.deletedRows&&$(this.deletedRows).each(function(){var i=$.extend(!0,{},this);t.push(e.formatRecord(i,!1))}),$.merge(t,e.getData("update",!1)),$.merge(t,e.getData("add",!1)),t},getColumn:function(e){var t=this;this.options;if("string"==typeof e)return t._isColumnId(e)?t._columns[e]:t.columns[parseInt(e)];if("number"==typeof e)return t.columns[e];if("object"==typeof e&&1==e.nodeType){var i=e.id.split("|"),r=i[i.length-1];return t._columns[r]}return e},getColumnByName:function(e){var t=this;this.options;for(i=0;i<t.columns.length;i++)if(t.columns[i].name==e)return t.columns[i];return null},getColumnType:function(e){var t=this;this.options;for(i=0;i<t.columns.length;i++)if(t.columns[i].name==e)return t.columns[i].type?t.columns[i].type:"string";return null},isTotalSummary:function(){for(var e=this,t=(this.options,0);t<e.columns.length;t++)if(e.columns[t].totalSummary)return!0;return!1},getColumns:function(e){var t=this,i=(this.options,[]);for(var r in t._columns){var n=t._columns[r];void 0!=e?n.__level==e&&i.push(n):n.__leaf&&i.push(n)}return i},changeSort:function(e,t){var i=this,r=this.options;if(i.loading)return!0;if("local"==r.dataAction){var n=i.getColumnType(e);if(i.sortedData||(i.sortedData=i.filteredData),!i.sortedData||!i.sortedData[r.root])return;r.sortName==e?i.sortedData[r.root].reverse():i.sortedData[r.root].sort(function(t,r){return i._compareData(t,r,e,n)}),r.usePager?i.currentData=i._getCurrentPageData(i.sortedData):i.currentData=i.sortedData,i._showData()}r.sortName=e,r.sortOrder=t,"server"==r.dataAction&&i.loadData(r.where)},changePage:function(e){var t=this,i=this.options;if(t.loading)return!0;if("local"!=i.dataAction&&t.isDataChanged&&!confirm(i.isContinueByDataChanged))return!1;switch(i.pageCount=parseInt($(".pcontrol span",t.toolbar).html()),e){case"first":if(1==i.page)return;i.newPage=1;break;case"prev":if(1==i.page)return;i.page>1&&(i.newPage=parseInt(i.page)-1);break;case"next":if(i.page>=i.pageCount)return;i.newPage=parseInt(i.page)+1;break;case"last":if(i.page>=i.pageCount)return;i.newPage=i.pageCount;break;case"input":var r=parseInt($(".pcontrol input",t.toolbar).val());isNaN(r)&&(r=1),1>r?r=1:r>i.pageCount&&(r=i.pageCount),$(".pcontrol input",t.toolbar).val(r),i.newPage=r}if(i.newPage==i.page)return!1;if(1==i.newPage?($(".l-bar-btnfirst span",t.toolbar).addClass("l-disabled"),$(".l-bar-btnprev span",t.toolbar).addClass("l-disabled")):($(".l-bar-btnfirst span",t.toolbar).removeClass("l-disabled"),$(".l-bar-btnprev span",t.toolbar).removeClass("l-disabled")),i.newPage==i.pageCount?($(".l-bar-btnlast span",t.toolbar).addClass("l-disabled"),$(".l-bar-btnnext span",t.toolbar).addClass("l-disabled")):($(".l-bar-btnlast span",t.toolbar).removeClass("l-disabled"),$(".l-bar-btnnext span",t.toolbar).removeClass("l-disabled")),t.trigger("changePage",[i.newPage]),"server"==i.dataAction)i.parms||(i.parms=[]),$.isArray(i.parms)?i.parms.push({name:"changepage",value:"1",temp:!0}):i.parms.changepage="1",t.loadData(i.where);else{if(t.currentData=t._getCurrentPageData(t.filteredData),i.tree){var n=i.tree.childrenName;$(t.filteredData[i.root]).each(function(e,t){t[n]&&(t[n]=[])}),t._convertTreeData()}t._showData()}},getSelectedRow:function(){for(var e in this.selected){var t=this.selected[e];if(t.__id in this.records)return t}return null},getSelectedRows:function(){var e=[];for(var t in this.selected){var i=this.selected[t];i.__id in this.records&&e.push(i)}return e},getSelectedRowObj:function(){for(var e in this.selected){var t=this.selected[e];if(t.__id in this.records)return this.getRowObj(t)}return null},getSelectedRowObjs:function(){var e=[];for(var t in this.selected){var i=this.selected[t];i.__id in this.records&&e.push(this.getRowObj(i))}return e},getCellObj:function(e,t){var i=this.getRow(e);return t=this.getColumn(t),document.getElementById(this._getCellDomId(i,t))},getRowObj:function(e,t){var i=this;this.options;return null==e?null:"string"==typeof e?i._isRowId(e)?document.getElementById(i.id+(t?"|1|":"|2|")+e):document.getElementById(i.id+(t?"|1|":"|2|")+i.rows[parseInt(e)].__id):"number"==typeof e?document.getElementById(i.id+(t?"|1|":"|2|")+i.rows[e].__id):"object"==typeof e&&e.__id?i.getRowObj(e.__id,t):e},getRow:function(e){var t=this;this.options;return null==e?null:"string"==typeof e?t._isRowId(e)?t.records[e]:t.rows[parseInt(e)]:"number"==typeof e?t.rows[parseInt(e)]:"object"!=typeof e||1!=e.nodeType||e.__id?e:t._getRowByDomId(e.id)},_setColumnVisible:function(e,t){var i=this;this.options;if(t){if(e._hide=!0,document.getElementById(e.__domid).style.display="none",-1!=e.__pid){for(var r=!0,n=this._columns[e.__pid],a=0;n&&a<n.columns.length;a++)if(!n.columns[a]._hide){r=!1;break}r&&(n._hide=!0,document.getElementById(n.__domid).style.display="none",this._setColumnVisible(n,t))}}else if(e._hide=!1,document.getElementById(e.__domid).style.display="",-1!=e.__pid){var n=i._columns[e.__pid];n._hide&&(document.getElementById(n.__domid).style.display="",this._setColumnVisible(n,t))}},toggleCol:function(e,t,i){var r,n=this;this.options;if("number"==typeof e)r=n.columns[e];else if("object"==typeof e&&e.__id)r=e;else if("string"==typeof e){if(!n._isColumnId(e))return void $(n.columns).each(function(){this.name==e&&n.toggleCol(this,t,i)});r=n._columns[e]}if(r){var a=r.__leafindex,o=document.getElementById(r.__domid);if(o){o=$(o);var l=[];for(var s in n.rows){var d=n.getCellObj(n.rows[s],r);d&&l.push(d)}for(var s=0;s<n.totalNumber;s++){var c=document.getElementById(n.id+"|total"+s+"|"+r.__id);c&&l.push(c)}var u=r._width;t&&r._hide?(r.frozen?n.f.gridtablewidth+=parseInt(u)+1:n.gridtablewidth+=parseInt(u)+1,n._setColumnVisible(r,!1),$(l).show()):t||r._hide||(r.frozen?n.f.gridtablewidth-=parseInt(u)+1:n.gridtablewidth-=parseInt(u)+1,n._setColumnVisible(r,!0),$(l).hide()),r.frozen?($("div:first",n.f.gridheader).width(n.f.gridtablewidth),$("div:first",n.f.gridbody).width(n.f.gridtablewidth)):($("div:first",n.gridheader).width(n.gridtablewidth+40),n.gridtablewidth?$("div:first",n.gridbody).width(n.gridtablewidth):$("div:first",n.gridbody).css("width","auto")),n._updateFrozenWidth(),i||$(":checkbox[columnindex="+a+"]",n.popup).each(function(){if(this.checked=t,$.fn.ligerCheckBox){var e=$(this).ligerGetCheckBoxManager();e&&e.updateStyle()}})}}},setColumnWidth:function(e,t){var i=this,r=this.options;if(t){t=parseInt(t,10);var n;if("number"==typeof e)n=i.columns[e];else if("object"==typeof e&&e.__id)n=e;else if("string"==typeof e){if(!i._isColumnId(e))return void $(i.columns).each(function(){this.name==e&&i.setColumnWidth(this,t)});n=i._columns[e]}if(n){var a=r.minColumnWidth;n.minWidth&&(a=n.minWidth),t=a>t?a:t;var o=t-n._width;if(0!=i.trigger("beforeChangeColumnWidth",[n,t])){n._width=t,n.frozen?(i.f.gridtablewidth+=o,$("div:first",i.f.gridheader).width(i.f.gridtablewidth),$("div:first",i.f.gridbody).width(i.f.gridtablewidth)):(i.gridtablewidth+=o,$("div:first",i.gridheader).width(i.gridtablewidth+40),$("div:first",i.gridbody).width(i.gridtablewidth)),$(document.getElementById(n.__domid)).css("width",t);var l=[];for(var s in i.records){var d=i.getCellObj(i.records[s],n);if(d&&l.push(d),!i.enabledDetailEdit()&&i.editors[s]&&i.editors[s][n.__id]){var c=i.editors[s][n.__id];c.editor.resize&&c.editor.resize(c.input,t,c.container.height(),c.editParm)}}for(var u=0;u<i.totalNumber;u++){var h=document.getElementById(i.id+"|total"+u+"|"+n.__id);h&&l.push(h)}$(l).css("width",t).find("> div.l-grid-row-cell-inner:first").css("width",t-8),i._updateFrozenWidth(),i._updateHorizontalScrollStatus.ligerDefer(i,10),i.trigger("afterChangeColumnWidth",[n,t])}}}},changeHeaderText:function(e,t){var i,r=this,n=this.options;if("number"==typeof e)i=r.columns[e];else if("object"==typeof e&&e.__id)i=e;else if("string"==typeof e){
if(!r._isColumnId(e))return void $(r.columns).each(function(){this.name==e&&r.changeHeaderText(this,t)});i=r._columns[e]}if(i){var a=i.__leafindex,o=document.getElementById(i.__domid);$(".l-grid-hd-cell-text",o).html(t),n.allowHideColumn&&$(":checkbox[columnindex="+a+"]",r.popup).parent().next().html(t)}},changeCol:function(e,t,i){var r=this,n=this.options;if(e&&t){var a=r.getColumn(e),o=r.getColumn(t);a.frozen=o.frozen;var l,s,d=-1==a.__pid?n.columns:r._columns[a.__pid].columns,c=-1==o.__pid?n.columns:r._columns[o.__pid].columns;l=$.inArray(a,d),s=$.inArray(o,c);var u=d==c;a.__level==o.__level;c.splice(s+(i?1:0),0,a),u?i?d.splice(l,1):d.splice(l+1,1):d.splice(l,1),r._setColumns(n.columns),r.reRender()}},collapseDetail:function(e){var t=this,i=(this.options,t.getRow(e));if(i)for(var r=0,n=t.columns.length;n>r;r++)if(t.columns[r].isdetail){var a=t.getRowObj(i),o=t.getCellObj(i,t.columns[r]);return $(a).next("tr.l-grid-detailpanel").hide(),$(".l-grid-row-cell-detailbtn:first",o).removeClass("l-open"),void t.trigger("SysGridHeightChanged")}},extendDetail:function(e){var t=this,i=(this.options,t.getRow(e));if(i)for(var r=0,n=t.columns.length;n>r;r++)if(t.columns[r].isdetail){var a=t.getRowObj(i),o=t.getCellObj(i,t.columns[r]);return $(a).next("tr.l-grid-detailpanel").show(),$(".l-grid-row-cell-detailbtn:first",o).addClass("l-open"),void t.trigger("SysGridHeightChanged")}},getParent:function(e){var t=this,i=this.options;if(!i.tree)return null;var r=t.getRow(e);return r&&r.__pid in t.records?t.records[r.__pid]:null},getChildren:function(e,t){function i(e){if(e[n.tree.childrenName])for(var r=0,a=e[n.tree.childrenName].length;a>r;r++){var l=e[n.tree.childrenName][r];"delete"!=l[n.statusName]&&(o.push(l),t&&i(l))}}var r=this,n=this.options;if(!n.tree)return null;var a=r.getRow(e);if(!a)return null;var o=[];return i(a),o},isLeaf:function(e){var t=this,i=(this.options,t.getRow(e));return i?i.__hasChildren?!1:!0:void 0},hasChildren:function(e){var t=this.options,i=this.getRow(e);return i?i[t.tree.childrenName]&&i[t.tree.childrenName].length?!0:!1:void 0},existRecord:function(e){for(var t in this.records)if(this.records[t]==e)return!0;return!1},_removeSelected:function(e){var t=this,i=this.options;if(i.tree){var r=t.getChildren(e,!0);if(r)for(var n=0,a=r.length;a>n;n++){var o=$.inArray(r[n],t.selected);-1!=o&&t.selected.splice(o,1)}}var l=$.inArray(e,t.selected);-1!=l&&t.selected.splice(l,1)},_getParentChildren:function(e){var t,i=this,r=this.options,n=i.getRow(e);return t=r.tree&&i.existRecord(n)&&n.__pid in i.records?i.records[n.__pid][r.tree.childrenName]:i.currentData[r.root]},_removeData:function(e){var t=this,i=(this.options,t._getParentChildren(e)),r=$.inArray(e,i);-1!=r&&i.splice(r,1),t._removeSelected(e)},_addData:function(e,t,i,r){var n=this,a=this.options;n.currentData||(n.currentData={}),n.currentData[a.root]||(n.currentData[a.root]=[]);var o=n.currentData[a.root];if(i){a.tree&&(t?o=t[a.tree.childrenName]:i.__pid in n.records&&(o=n.records[i.__pid][a.tree.childrenName]));var l=$.inArray(i,o);o.splice(-1==l?-1:l+(r?0:1),0,e)}else a.tree&&t&&(o=t[a.tree.childrenName]),o.push(e)},_appendData:function(e,t,i,r){var n=this,a=this.options;e[a.statusName]="update",n._removeData(e),n._addData(e,t,i,r)},appendRange:function(e,t,i,r){var n=this,a=(this.options,!1);$.each(e,function(e,o){o.__id&&n.existRecord(o)?(n.isLeaf(t)&&n.upgrade(t),n._appendData(o,t,i,r),a=!0):n.appendRow(o,t,i,r)}),a&&n.reRender()},appendRow:function(e,t,i,r){var n=this;this.options;return $.isArray(e)?void n.appendRange(e,t,i,r):e.__id&&n.existRecord(e)?(n._appendData(e,t,i,r),void n.reRender()):(t&&n.isLeaf(t)&&n.upgrade(t),void n.addRow(e,i,r?!0:!1,t))},upgrade:function(e){var t=this,i=this.options,r=t.getRow(e);if(r&&i.tree){r[i.tree.childrenName]=r[i.tree.childrenName]||[],r.__hasChildren=!0;var n=[t.getRowObj(r)];t.enabledFrozen()&&n.push(t.getRowObj(r,!0)),$("> td > div > .l-grid-tree-space:last",n).addClass("l-grid-tree-link l-grid-tree-link-open")}},demotion:function(e){var t=this,i=this.options,r=t.getRow(e);if(r&&i.tree){var n=[t.getRowObj(r)];if(t.enabledFrozen()&&n.push(t.getRowObj(r,!0)),$("> td > div > .l-grid-tree-space:last",n).removeClass("l-grid-tree-link l-grid-tree-link-open l-grid-tree-link-close"),t.hasChildren(r))for(var a=t.getChildren(r),o=0,l=a.length;l>o;o++)t.deleteRow(a[o]);r.__hasChildren=!1}},collapseAll:function(){var e=this;this.options;$(e.rows).each(function(t,i){var r=e.getRowObj(i),n=$(".l-grid-tree-link",r);n.hasClass("l-grid-tree-link-close")||e.toggle(i)})},expandAll:function(){var e=this;this.options;$(e.rows).each(function(t,i){var r=e.getRowObj(i),n=$(".l-grid-tree-link",r);n.hasClass("l-grid-tree-link-open")||e.toggle(i)})},collapse:function(e){var t=this,i=(this.options,t.getRowObj(e)),r=$(".l-grid-tree-link",i);r.hasClass("l-grid-tree-link-close")||t.toggle(e)},expand:function(e){var t=this,i=(this.options,t.getRowObj(e)),r=$(".l-grid-tree-link",i);r.hasClass("l-grid-tree-link-open")||t.toggle(e)},toggle:function(e){function t(e){for(var i=0,r=e.length;r>i;i++){var n=e[i],o=a.getChildren(n,!1),l=o&&o.length?!0:!1,s=$([a.getRowObj(n.__id)]);a.enabledFrozen()&&(s=s.add(a.getRowObj(n.__id,!0))),l?$(".l-grid-tree-link",s).hasClass("l-grid-tree-link-close")?s.show():(s.show(),t(o)):($(".l-grid-tree-link",s).removeClass("l-grid-tree-link-close").addClass("l-grid-tree-link-open"),s.show())}}function i(){var e=[];return c?(e=a.getChildren(o,!1),t(e),void a.trigger("treeExpanded",[o])):(e=a.getChildren(o,!0),$(e).each(function(){$(a.getRowObj(this)).hide(),a.enabledFrozen()&&$(a.getRowObj(this,!0)).hide()}),void a.trigger("treeCollapsed",[o]))}function r(){d.removeClass("l-grid-tree-link-close").addClass("l-grid-tree-link-open"),s=$.inArray(o,a.collapsedRows),-1!=s&&a.collapsedRows.splice(s,1)}function n(){d.addClass("l-grid-tree-link-close").removeClass("l-grid-tree-link-open"),s=$.inArray(o,a.collapsedRows),-1==s&&a.collapsedRows.push(o)}if(e){var a=this,o=(this.options,a.getRow(e)),l=[a.getRowObj(o)];a.enabledFrozen()&&l.push(a.getRowObj(o,!0));var s,d=(o.__level,$(".l-grid-tree-link:first",l)),c=!0;a.collapsedRows=a.collapsedRows||[];var u=d.hasClass("l-grid-tree-link-close");if(u){var h={update:function(){r(),i()}};if(a.hasBind("treeExpand")&&0==a.trigger("treeExpand",[o,h]))return!1;r()}else{var h={update:function(){n(),i()}};if(a.hasBind("treeCollapse")&&0==a.trigger("treeCollapse",[o,h]))return!1;c=!1,n()}i()}},_bulid:function(){var e=this;e._clearGrid(),e._initBuildHeader(),e._initHeight(),e._initFootbar(),e._buildPager(),e._setEvent()},_setColumns:function(e){var t=this;t._initColumns(),t._initBuildGridHeader(),t._initBuildPopup()},_initBuildHeader:function(){var e=this,t=this.options;t.title?($(".l-panel-header-text",e.header).html(t.title),t.headerImg&&e.header.append("<img src='"+t.headerImg+"' />").addClass("l-panel-header-hasicon")):e.header.hide(),t.toolbar?$.fn.ligerToolBar&&(e.toolbarManager=e.topbar.ligerToolBar(t.toolbar),0==e.topbar.height()?e.topbar.parent().height(25):e.topbar.parent().height(e.topbar.height())):e.topbar.parent().remove()},_createColumnId:function(e){return null!=e.id&&""!=e.id?e.id.toString():"c"+(100+this._columnCount)},_isColumnId:function(e){return e in this._columns},_initColumns:function(){function e(e,t){for(var i in t)t[i]in e&&delete e[t[i]]}function t(r,n,a,o){if(r.editorType&&(r.editor=r.editor||{},r.editor.type=r.editorType),e(r,["__id","__pid","__previd","__nextid","__domid","__leaf","__leafindex","__level","__colSpan","__rowSpan"]),n>i._columnMaxLevel&&(i._columnMaxLevel=n),i._columnCount++,r.__id=i._createColumnId(r),r.__domid=i.id+"|hcell|"+r.__id,i._columns[r.__id]=r,r.columns&&r.columns.length||(r.__leafindex=i._columnLeafCount++),r.__level=n,r.__pid=a,r.__previd=o,!r.columns||!r.columns.length)return r.__leaf=!0,1;for(var l=0,s=-1,d=0,c=r.columns.length;c>d;d++){var u=r.columns[d];l+=t(u,n+1,r.__id,s),s=u.__id}return r.__leafcount=l,l}var i=this,r=this.options;if(i._columns={},i._columnCount=0,i._columnLeafCount=0,i._columnMaxLevel=1,r.columns){var n=-1;if(r.rownumbers){var a=i.enabledGroup()?!1:r.frozen&&r.frozenRownumbers,o={isrownumber:!0,issystem:!0,width:r.rownumbersColWidth,frozen:a};t(o,1,-1,n),n=o.__id}if(i.enabledDetail()){var l=i.enabledGroup()?!1:r.frozen&&r.frozenDetail,o={isdetail:!0,issystem:!0,width:r.detailColWidth,frozen:l};t(o,1,-1,n),n=o.__id}if(i.enabledCheckbox()){var s=i.enabledGroup()?!1:r.frozen&&r.frozenCheckbox,o={ischeckbox:!0,issystem:!0,width:r.detailColWidth,frozen:s};t(o,1,-1,n),n=o.__id}for(var d=0,c=r.columns.length;c>d;d++){var o=r.columns[d];o&&(t(o,1,-1,n),n=o.__id)}for(var u in i._columns){var o=i._columns[u];o.__leafcount>1&&(o.__colSpan=o.__leafcount),o.__leaf&&o.__level!=i._columnMaxLevel&&(o.__rowSpan=i._columnMaxLevel-o.__level+1)}i.columns=i.getColumns(),$(i.columns).each(function(e,t){t.columnname=t.name,t.columnindex=e,t.type=t.type||"string",t.islast=e==i.columns.length-1,t.isSort=0==t.isSort?!1:!0,t.frozen=t.frozen?!0:!1,t._width=i._getColumnWidth(t),t._hide=t.hide?!0:!1})}},_getColumnWidth:function(e){var t=this,i=this.options;if(e._width)return e._width;var r=e.width||i.columnWidth;if(!r||"auto"==r){var n=0,a=0;$(t.columns).each(function(e,r){var o=r.width||i.columnWidth,l=o&&"auto"!=o?!1:!0;l?n++:a+=parseInt(t._getColumnWidth(r))+1}),r=parseInt((t.grid.width()-a)/n)-1}if("string"==typeof r&&r.indexOf("%")>0){var o=0;t.enabledDetail()&&(o+=i.detailColWidth),t.enabledCheckbox()&&(o+=i.checkboxColWidth),t.options.rownumbers&&(o+=t.options.rownumbersColWidth),e._width=r=parseInt(.01*parseInt(r)*(t.grid.width()-o-t.columns.length/2-1))}return e.minWidth&&r<e.minWidth&&(r=e.minWidth),e.maxWidth&&r>e.maxWidth&&(r=e.maxWidth),r},_createHeaderCell:function(e){var t=this,i=this.options,r=$("<td class='l-grid-hd-cell'><div class='l-grid-hd-cell-inner'><span class='l-grid-hd-cell-text'></span></div></td>");if(r.attr("id",e.__domid),e.__leaf||r.addClass("l-grid-hd-cell-mul"),e.columnindex==t.columns.length-1&&r.addClass("l-grid-hd-cell-last"),e.isrownumber&&(r.addClass("l-grid-hd-cell-rownumbers"),r.html("<div class='l-grid-hd-cell-inner'></div>")),e.ischeckbox&&(r.addClass("l-grid-hd-cell-checkbox"),r.html("<div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-text l-grid-hd-cell-btn-checkbox'></div></div>")),e.isdetail&&(r.addClass("l-grid-hd-cell-detail"),r.html("<div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-text l-grid-hd-cell-btn-detail'></div></div>")),e.heightAlign&&$(".l-grid-hd-cell-inner:first",r).css("textAlign",e.heightAlign),e.__colSpan&&r.attr("colSpan",e.__colSpan),e.__rowSpan){r.attr("rowSpan",e.__rowSpan),r.height(i.headerRowHeight*e.__rowSpan);var n=(i.headerRowHeight*e.__rowSpan-i.headerRowHeight)/2-5;$(".l-grid-hd-cell-inner:first",r).css("paddingTop",n)}else r.height(i.headerRowHeight);e.__leaf&&(r.width(e._width),r.attr("columnindex",e.__leafindex));var a=r.height();!e.__rowSpan&&a>10&&$(">div:first",r).height(a),e._hide&&r.hide(),e.name&&r.attr({columnname:e.name});var o="";return o=e.display&&""!=e.display?e.display:e.headerRender?e.headerRender(e):"&nbsp;",$(".l-grid-hd-cell-text:first",r).html(o),!e.issystem&&e.__leaf&&e.resizable!==!1&&$.fn.ligerResizable&&i.allowAdjustColWidth&&(t.colResizable[e.__id]=r.ligerResizable({handles:"e",onStartResize:function(e,i){this.proxy.hide(),t.draggingline.css({height:t.body.height(),top:0,left:i.pageX-t.grid.offset().left+parseInt(t.body[0].scrollLeft)}).show()},onResize:function(e,i){t.colresizing=!0,t.draggingline.css({left:i.pageX-t.grid.offset().left+parseInt(t.body[0].scrollLeft)}),$("body").add(r).css("cursor","e-resize")},onStopResize:function(i){return t.colresizing=!1,$("body").add(r).css("cursor","default"),t.draggingline.hide(),t.setColumnWidth(e,parseInt(e._width)+i.diffX),!1}})),t.trigger("headerCellBulid",[r,e]),r},_initBuildGridHeader:function(){var e=this,t=this.options;if(e.gridtablewidth=0,e.f.gridtablewidth=0,e.colResizable){for(var i in e.colResizable)e.colResizable[i].destroy();e.colResizable=null}e.colResizable={},$("tbody:first",e.gridheader).html(""),$("tbody:first",e.f.gridheader).html("");for(var r=1;r<=e._columnMaxLevel;r++){var n=e.getColumns(r),a=r==e._columnMaxLevel,o=$("<tr class='l-grid-hd-row'></tr>"),l=$("<tr class='l-grid-hd-row'></tr>");a||o.add(l).addClass("l-grid-hd-mul"),$("tbody:first",e.gridheader).append(o),$("tbody:first",e.f.gridheader).append(l),$(n).each(function(t,i){if((i.frozen?l:o).append(e._createHeaderCell(i)),i.__leaf){var r=i._width;i.frozen?e.f.gridtablewidth+=(parseInt(r)?parseInt(r):0)+1:e.gridtablewidth+=(parseInt(r)?parseInt(r):0)+1}})}if(e._columnMaxLevel>0){var s=t.headerRowHeight*e._columnMaxLevel;e.gridheader.add(e.f.gridheader).height(s),t.rownumbers&&t.frozenRownumbers&&e.f.gridheader.find("td:first").height(s)}e._updateFrozenWidth(),$("div:first",e.gridheader).width(e.gridtablewidth+40)},_initBuildPopup:function(){var e=this,t=this.options;if($(":checkbox",e.popup).unbind(),$("tbody tr",e.popup).remove(),$(e.columns).each(function(t,i){if(!i.issystem&&0!=i.isAllowHide){var r='checked="checked"';i._hide&&(r="");var n=i.display;$("tbody",e.popup).append('<tr><td class="l-column-left"><input type="checkbox" '+r+' class="l-checkbox" columnindex="'+t+'"/></td><td class="l-column-right">'+n+"</td></tr>")}}),$.fn.ligerCheckBox&&$("input:checkbox",e.popup).ligerCheckBox({onBeforeClick:function(i){return i.checked&&$("input:checked",e.popup).length<=t.minColToggle?!1:!0}}),t.allowHideColumn){$("tr",e.popup).hover(function(){$(this).addClass("l-popup-row-over")},function(){$(this).removeClass("l-popup-row-over")});var i=function(){return $("input:checked",e.popup).length+1<=t.minColToggle?!1:void e.toggleCol(parseInt($(this).attr("columnindex")),this.checked,!0)};$.fn.ligerCheckBox?$(":checkbox",e.popup).bind("change",i):$(":checkbox",e.popup).bind("click",i)}},_initHeight:function(){var e=this,t=this.options;"auto"==t.height&&(e.gridbody.height("auto"),e.f.gridbody.height("auto")),t.width&&e.grid.width(t.width),e._onResize.call(e)},_initFootbar:function(){var e=this,t=this.options;if(t.usePager){if(t.pagerRender)return void e.toolbar.html(t.pagerRender.call(e));if(t.scrollToPage)return void e.toolbar.hide();var i="",r=-1;$(t.pageSizeOptions).each(function(e,n){var a="";t.pageSize==n&&(r=e),i+="<option value='"+n+"' "+a+" >"+n+"</option>"}),$(".l-bar-selectpagesize",e.toolbar).append("<select name='rp'>"+i+"</select>"),-1!=r&&($(".l-bar-selectpagesize select",e.toolbar)[0].selectedIndex=r),t.switchPageSizeApplyComboBox&&$.fn.ligerComboBox&&$(".l-bar-selectpagesize select",e.toolbar).ligerComboBox({onBeforeSelect:function(){return t.url&&e.isDataChanged&&!confirm(t.isContinueByDataChanged)?!1:!0},width:45})}else e.toolbar.hide()},_searchData:function(e,t){for(var i=(this.options,new Array),r=0;r<e.length;r++)t(e[r],r)&&(i[i.length]=e[r]);return i},_clearGrid:function(){var e=this;this.options;e._fixRows();for(var t in e.rows){var i=$(e.getRowObj(e.rows[t]));e.enabledFrozen()&&(i=i.add(e.getRowObj(e.rows[t],!0))),i.unbind()}e.gridbody.html(""),e.f.gridbody.html(""),e.recordNumber=0,e.records={},e.rows=[],e._fixRows(),e.selected=[],e.totalNumber=0,e.editorcounter=0},_fixRows:function(){var e=this;this.options;if(e.rows)for(var t in e.rows)$.isFunction(e.rows[t])&&delete e.rows[t]},_fillGridBody:function(e,t,i){var r=this,n=this.options,a="scrollappend"==i?[]:['<div class="l-grid-body-inner"><table class="l-grid-body-table" cellpadding=0 cellspacing=0><tbody>'];if(r.enabledGroup()){var o=[],l=[];r.groups=l;for(var s in e){var d=e[s],c=d[n.groupColumnName],u=$.inArray(c,o);-1==u&&(o.push(c),u=o.length-1,l.push([])),l[u].push(d)}$(l).each(function(e,i){1==l.length&&a.push('<tr class="l-grid-grouprow l-grid-grouprow-last l-grid-grouprow-first"'),e==l.length-1?a.push('<tr class="l-grid-grouprow l-grid-grouprow-last"'):0==e?a.push('<tr class="l-grid-grouprow l-grid-grouprow-first"'):a.push('<tr class="l-grid-grouprow"'),a.push(' groupindex"='+e+'" >'),a.push('<td colSpan="'+r.columns.length+'" class="l-grid-grouprow-cell">'),a.push('<span class="l-grid-group-togglebtn">&nbsp;&nbsp;&nbsp;&nbsp;</span>'),n.groupRender?a.push(n.groupRender(o[e],i,n.groupColumnDisplay)):a.push(n.groupColumnDisplay+":"+o[e]),a.push("</td>"),a.push("</tr>"),a.push(r._getHtmlFromData(i,t)),r.isTotalSummary()&&a.push(r._getTotalSummaryHtml(i,"l-grid-totalsummary-group",t))})}else a.push(r._getHtmlFromData(e,t));if("scrollappend"==!i&&a.push("</tbody></table></div>"),"scrollappend"==i?(t?r.f.gridbody:r.gridbody).find("tbody:first").append(a.join("")):(t?r.f.gridbody:r.gridbody).html(a.join("")),t&&(r.f.gridbody.find(">l-jplace").remove(),r.f.gridbody.append('<div class="l-jplace"></div>')),n.usePager&&n.scrollToPage&&!n.scrollToAppend){var h=t?r.f.gridbody.find("> .l-grid-body-inner"):r.gridbody.find("> .l-grid-body-inner"),g=h.find("> .l-scrollreplacetop");g=g.length?g:$('<div class="l-scrollreplacetop"></div>').prependTo(h),g.css("width","80%").height(r.lastScrollTop),g=h.find("> .l-scrollreplacebottom"),g=g.length?g:$('<div class="l-scrollreplacebottom"></div>').appendTo(h),g.css("width","80%").height((n.pageCount-n.newPage)*r._getOnePageHeight())}r.enabledGroup()||r._bulidTotalSummary(t),$("> div:first",r.gridbody).width(r.gridtablewidth),r._onResize()},_showData:function(e){var t=this,i=this.options;t.changedCells={};var r=t.currentData[i.root];if(i.usePager&&("server"==i.dataAction&&t.data&&t.data[i.record]?i.total=t.data[i.record]:t.filteredData&&t.filteredData[i.root]?i.total=t.filteredData[i.root].length:t.data&&t.data[i.root]?i.total=t.data[i.root].length:r&&(i.total=r.length),i.page=i.newPage,i.total||(i.total=0),i.page||(i.page=1),i.pageCount=Math.ceil(i.total/i.pageSize),i.pageCount||(i.pageCount=1),i.scrollToPage||t._buildPager()),$(".l-bar-btnloading:first",t.toolbar).removeClass("l-bar-btnloading"),0!=t.trigger("beforeShowData",[t.currentData])){if("scrollappend"!=e&&t._clearGrid(),t.isDataChanged=!1,!r||!r.length)return t.gridview.addClass("l-grid-empty"),$(t.element).addClass("l-empty"),$("<div></div>").addClass("l-grid-body-inner").appendTo(t.gridbody).css({width:t.gridheader.find(">div:first").width(),height:t.gridbody.height()}),i.pagerRender?void t.toolbar.html(i.pagerRender.call(t)):void t._onResize.ligerDefer(t,50);if(t.gridview.removeClass("l-grid-empty"),$(t.element).removeClass("l-empty"),$(".l-bar-btnload:first span",t.toolbar).removeClass("l-disabled"),t._updateGridData(),t.enabledFrozen()&&t._fillGridBody(t.rows,!0,e),t._fillGridBody(t.rows,!1,e),t.trigger("SysGridHeightChanged"),"scroll"==e&&t.trigger("sysScrollLoaded"),i.totalRender&&($(".l-panel-bar-total",t.element).remove(),$(".l-panel-bar",t.element).before('<div class="l-panel-bar-total">'+i.totalRender(t.data,t.filteredData)+"</div>")),i.mouseoverRowCssClass)for(var n in t.rows){var a=$(t.getRowObj(t.rows[n]));t.enabledFrozen()&&(a=a.add(t.getRowObj(t.rows[n],!0))),a.bind("mouseover.gridrow",function(){t._onRowOver(this,!0)}).bind("mouseout.gridrow",function(){t._onRowOver(this,!1)})}if(t._fixHeight(),i.pagerRender)return void t.toolbar.html(i.pagerRender.call(t));t.gridbody.trigger("scroll.grid"),t.trigger("afterShowData",[t.currentData])}},_fixHeight:function(){var e=this,t=this.options;if(!t.fixedCellHeight&&t.frozen){var i,r;for(var n in e.columns){var a=e.columns[n];if(i&&r)break;!a.frozen||i?a.frozen||r||(r=a):i=a}if(i&&r)for(var o in e.records){var l=e.getCellObj(o,i),s=e.getCellObj(o,r),d=Math.max($(l).height(),$(s).height());$(l).add(s).height(d)}}},_getRowDomId:function(e,t){return this.id+"|"+(t?"1":"2")+"|"+e.__id},_getCellDomId:function(e,t){return this._getRowDomId(e,t.frozen)+"|"+t.__id},_getHtmlFromData:function(e,t){if(!e)return"";for(var i=this,r=this.options,n=[],a=0,o=e.length;o>a;a++){var l=e[a],s=l.__id;if(l){if(n.push("<tr"),n.push(' id="'+i._getRowDomId(l,t)+'"'),n.push(' class="l-grid-row'),!t&&i.enabledCheckbox()&&r.isChecked&&r.isChecked(l)?(i.select(l),n.push(" l-selected")):i.isSelected(l)?n.push(" l-selected"):r.isSelected&&r.isSelected(l)&&(i.select(l),n.push(" l-selected")),l.__index%2==1&&r.alternatingRow&&n.push(" l-grid-row-alt"),r.rowClsRender){var d=r.rowClsRender(l,s);d&&n.push(" "+d)}if(n.push('" '),r.rowAttrRender&&n.push(r.rowAttrRender(l,s)),r.tree&&i.collapsedRows&&i.collapsedRows.length){var c=function(){for(var e=i.getParent(l);e;){if(-1!=$.inArray(e,i.collapsedRows))return!0;e=i.getParent(e)}return!1};c()&&n.push(' style="display:none;" ')}else if(r.tree&&r.tree.isExtend){var c=function(){for(var e=i.getParent(l);e;){if(0==r.tree.isExtend(e))return!0;e=i.getParent(e)}return!1};c()&&n.push(' style="display:none;" ')}n.push(">"),$(i.columns).each(function(e,a){if(t==a.frozen){if(n.push("<td"),n.push(' id="'+i._getCellDomId(l,this)+'"'),this.isrownumber)return n.push(' class="l-grid-row-cell l-grid-row-cell-rownumbers" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"'),r.fixedCellHeight?n.push(' style = "height:'+r.rowHeight+'px;" '):n.push(' style = "min-height:'+r.rowHeight+'px;" '),void n.push(">"+(parseInt(l.__index)+1)+"</div></td>");if(this.ischeckbox)return n.push(' class="l-grid-row-cell l-grid-row-cell-checkbox" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"'),r.fixedCellHeight?n.push(' style = "height:'+r.rowHeight+'px;" '):n.push(' style = "min-height:'+r.rowHeight+'px;" '),n.push(">"),n.push('<span class="l-grid-row-cell-btn-checkbox"></span>'),void n.push("</div></td>");if(this.isdetail)return n.push(' class="l-grid-row-cell l-grid-row-cell-detail" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"'),r.fixedCellHeight?n.push(' style = "height:'+r.rowHeight+'px;" '):n.push(' style = "min-height:'+r.rowHeight+'px;" '),n.push(">"),(!r.isShowDetailToggle||r.isShowDetailToggle(l))&&n.push('<span class="l-grid-row-cell-detailbtn"></span>'),void n.push("</div></td>");var o=this._width;n.push(' class="l-grid-row-cell '),i.changedCells[s+"_"+this.__id]&&n.push("l-grid-row-cell-edited "),this.islast&&n.push("l-grid-row-cell-last "),n.push('"'),n.push(' style = "'),n.push("width:"+o+"px; "),a._hide&&n.push("display:none;"),n.push(' ">'),n.push(i._getCellHtml(l,a)),n.push("</td>")}}),n.push("</tr>")}}return n.join("")},_getCellHtml:function(e,t){var i=this,r=this.options;if(t.isrownumber)return'<div class="l-grid-row-cell-inner">'+(parseInt(e.__index)+1)+"</div>";var n=[];n.push('<div class="l-grid-row-cell-inner"'),n.push(' style = "width:'+parseInt(t._width-8)+"px;"),r.fixedCellHeight&&n.push("height:"+r.rowHeight+"px;"),n.push("min-height:"+r.rowHeight+"px; "),t.align&&n.push("text-align:"+t.align+";");var a=i._getCellContent(e,t);return n.push('">'+a+"</div>"),n.join("")},_setValueByName:function(e,t,i){if(!e||!t)return null;if(-1==t.indexOf("."))e[t]=i;else try{new Function("data,value","data."+t+"=value;")(e,i)}catch(r){}},_getValueByName:function(e,t){if(!e||!t)return null;if(-1==t.indexOf("."))return e[t];try{return new Function("data","return data."+t+";")(e)}catch(i){return null}},_getCellContent:function(e,t){var i=this,r=this.options;if(!e||!t)return"";if(t.isrownumber)return parseInt(e.__index)+1;var n=(e.__id,e.__index),a=i._getValueByName(e,t.name),o=i._getValueByName(e,t.textField),l="";return t.render?l=t.render.call(i,e,n,a,t):r.formatters[t.type]?l=r.formatters[t.type].call(i,a,t):null!=o?l=o.toString():null!=a&&(l=a.toString()),r.tree&&(null!=r.tree.columnName&&r.tree.columnName==t.name||null!=r.tree.columnId&&r.tree.columnId==t.id)&&(l=i._getTreeCellHtml(l,e)),l||""},_getTreeCellHtml:function(e,t){var i=t.__level,r=this,n=this.options,a=null==r.collapsedRows?n.tree.isExtend(t):-1==$.inArray(t,r.collapsedRows||[]),o=n.tree.isParent(t),l="";i=parseInt(i)||1;for(var s=1;i>s;s++)l+="<div class='l-grid-tree-space'></div>";return l+=a&&o?"<div class='l-grid-tree-space l-grid-tree-link l-grid-tree-link-open'></div>":o?"<div class='l-grid-tree-space l-grid-tree-link l-grid-tree-link-close'></div>":"<div class='l-grid-tree-space'></div>",l+="<span class='l-grid-tree-content'>"+e+"</span>"},_applyEditor:function(e){var t=this,i=this.options,r=e,n=r.id.split("|"),a=n[n.length-1],o=t._columns[a],l=$(r).parent(),s=t.getRow(l[0]),d=s.__id,c=s.__index;if(o&&o.editor){var u=o.name;o.columnindex;if(o.editor.type&&i.editors[o.editor.type]){var h=t._getValueByName(s,u),g={record:s,value:h,column:o,rowindex:c};if(o.textField&&(g.text=t._getValueByName(s,o.textField)),0==t.trigger("beforeEdit",[g]))return!1;t.lastEditRow=s,liger.lastEditGrid=t;var p=i.editors[o.editor.type],f=$(r),v=($(r).offset(),$(r).width()),m=$(r).height(),b=$("<div class='l-grid-editor'></div>").appendTo(t.grid),x=0,y=0,w=f.position(),C=t.gridbody.position(),_=t.gridview2.position(),D=(i.toolbar?t.topbar.parent().outerHeight():0)+(i.title?t.header.outerHeight():0),x=w.left+C.left+_.left,y=w.top+C.top+_.top+D;f.html(""),t.setCellEditing(s,o,!0);var k=window.ActiveXObject||"ActiveXObject"in window?!0:!1,T=0==$.browser.version.indexOf("8");k?(m-=T?1:2,y-=1,x-=1):$.browser.mozilla?(m-=1,y-=1,x-=1):$.browser.safari?y-=1:m-=1,x+=i.editorLeftDiff||0,y+=i.editorTopDiff||0,m+=i.editorHeightDiff||0,b.css({left:x,top:y}).show(),o.textField&&(g.text=t._getValueByName(s,o.textField));var B=t._createEditor(p,b,g,v,m-1);t.editor={editing:!0,editor:p,input:B,editParm:g,container:b},t.unbind("sysEndEdit"),t.bind("sysEndEdit",function(){var e=p.getValue(B,g);o.textField&&p.getText&&(g.text=p.getText(B,g)),p.getSelected&&(g.selected=p.getSelected(B,g)),e!=h&&($(r).addClass("l-grid-row-cell-edited"),t.changedCells[d+"_"+o.__id]=!0,g.value=e),o.editor.onChange&&o.editor.onChange.call(B,g),t._checkEditAndUpdateCell(g)&&o.editor.onChanged&&o.editor.onChanged.call(B,g)})}}},_checkEditAndUpdateCell:function(e){var t=this;this.options;if(0==t.trigger("beforeSubmitEdit",[e]))return!1;var i=e.column;return e.text&&i.textField&&t._setValueByName(e.record,i.textField,e.text),t.updateCell(i,e.value,e.record),(i.render||t.enabledTotal())&&t.reRender({column:i}),t.reRender({rowdata:e.record}),!0},_getCurrentPageData:function(e){var t=this.options,r={};if(r[t.root]=[],!e||!e[t.root]||!e[t.root].length)return r[t.record]=0,r;for(r[t.record]=e[t.root].length,t.newPage||(t.newPage=1),i=(t.newPage-1)*t.pageSize;i<e[t.root].length&&i<t.newPage*t.pageSize;i++)r[t.root].push(e[t.root][i]);return r},_compareData:function(e,t,i,r){var n=this,a=this.options,o=e[i],l=t[i];return null==o&&null!=l?1:null==o&&null==l?0:null!=o&&null==l?-1:a.sorters[r]?a.sorters[r].call(n,o,l):l>o?-1:o>l?1:0},_getTotalInfo:function(e,t){var i=this.options;try{if(!e.totalSummary)return null;var r=0,n=0,a=0,o=0,l=0;if(t&&t.length){l=parseFloat(t[0][e.name]),o=parseFloat(t[0][e.name]);for(var s=0;s<t.length;s++)if("delete"!=t[s][i.statusName]){n+=1;var d=t[s][e.name];"string"==typeof d&&(d=d.replace(/\$|\,/g,"")),d=parseFloat(d),d&&(r+=d,d>l&&(l=d),o>d&&(o=d))}a=1*r/t.length}return{sum:r,count:n,avg:a,min:o,max:l}}catch(c){return{}}},_getTotalCellContent:function(e,t){var i=this,r=(this.options,[]);if(e.totalSummary){var n=function(e){for(var t=0;t<l.length;t++)if(l[t].toLowerCase()==e.toLowerCase())return!0;return!1},a=i._getTotalInfo(e,t);if(e.totalSummary.render){var o=e.totalSummary.render(a,e,i.data);r.push(o)}else if(e.totalSummary.type&&a){var l=e.totalSummary.type.split(",");n("sum")&&r.push("<div>Sum="+a.sum.toFixed(2)+"</div>"),n("tsum")&&r.push("<div>"+sum.toFixed(0)+"</div>"),n("count")&&r.push("<div>Count="+a.count+"</div>"),n("max")&&r.push("<div>Max="+a.max.toFixed(2)+"</div>"),n("min")&&r.push("<div>Min="+a.min.toFixed(2)+"</div>"),n("avg")&&r.push("<div>Avg="+a.avg.toFixed(2)+"</div>")}}return r.join("")},_getTotalSummaryHtml:function(e,t,i){var r=this,n=(this.options,[]);return t?n.push('<tr class="l-grid-totalsummary '+t+'">'):n.push('<tr class="l-grid-totalsummary">'),$(r.columns).each(function(t,a){if(this.frozen==i){if(this.isrownumber)return void n.push('<td class="l-grid-totalsummary-cell l-grid-totalsummary-cell-rownumbers" style="width:'+this.width+'px"><div>&nbsp;</div></td>');if(this.ischeckbox)return void n.push('<td class="l-grid-totalsummary-cell l-grid-totalsummary-cell-checkbox" style="width:'+this.width+'px"><div>&nbsp;</div></td>');if(this.isdetail)return void n.push('<td class="l-grid-totalsummary-cell l-grid-totalsummary-cell-detail" style="width:'+this.width+'px"><div>&nbsp;</div></td>');n.push('<td class="l-grid-totalsummary-cell'),this.islast&&n.push(" l-grid-totalsummary-cell-last"),n.push('" '),n.push('id="'+r.id+"|total"+r.totalNumber+"|"+a.__id+'" '),n.push('width="'+this._width+'" '),columnname=this.columnname,columnname&&n.push('columnname="'+columnname+'" '),n.push('columnindex="'+t+'" '),n.push('><div class="l-grid-totalsummary-cell-inner"'),a.align&&n.push(' style="text-Align:'+a.align+';"'),n.push(">"),n.push(r._getTotalCellContent(a,e)),n.push("</div></td>")}}),n.push("</tr>"),i||r.totalNumber++,n.join("")},_bulidTotalSummary:function(e){var t=this,i=this.options;if(!t.isTotalSummary())return!1;if(!t.currentData||0==t.currentData[i.root].length)return!1;var r=$(t._getTotalSummaryHtml(t.currentData[i.root],null,e));$("tbody:first",e?t.f.gridbody:t.gridbody).append(r),e?t.totalRow1=r:t.totalRow2=r},updateTotalSummary:function(){var e=this;this.options;e.reRender({totalOnly:!0})},_buildPager:function(){var e=this,t=this.options;if(!t.pagerRender){$(".pcontrol input",e.toolbar).val(t.page),t.pageCount||(t.pageCount=1),$(".pcontrol span",e.toolbar).html(t.pageCount);var i=parseInt((t.page-1)*t.pageSize)+1,r=parseInt(i)+parseInt(t.pageSize)-1;t.total||(t.total=0),t.total<r&&(r=t.total),t.total||(i=r=0),0>i&&(i=0),0>r&&(r=0);var n=t.pageStatMessage;n=n.replace(/{from}/,i),n=n.replace(/{to}/,r),n=n.replace(/{total}/,t.total),n=n.replace(/{pagesize}/,t.pageSize),$(".l-bar-text",e.toolbar).html(n),t.total||$(".l-bar-btnfirst span,.l-bar-btnprev span,.l-bar-btnnext span,.l-bar-btnlast span",e.toolbar).addClass("l-disabled"),t.hideLoadButton&&($(".l-bar-btnload:first",e.toolbar).parent().hide(),$(".l-bar-btnload:first",e.toolbar).parent().next().hide()),1==t.page?($(".l-bar-btnfirst span",e.toolbar).addClass("l-disabled"),$(".l-bar-btnprev span",e.toolbar).addClass("l-disabled")):t.page>t.pageCount&&t.pageCount>0&&($(".l-bar-btnfirst span",e.toolbar).removeClass("l-disabled"),$(".l-bar-btnprev span",e.toolbar).removeClass("l-disabled")),t.page==t.pageCount?($(".l-bar-btnlast span",e.toolbar).addClass("l-disabled"),$(".l-bar-btnnext span",e.toolbar).addClass("l-disabled")):t.page<t.pageCount&&t.pageCount>0&&($(".l-bar-btnlast span",e.toolbar).removeClass("l-disabled"),$(".l-bar-btnnext span",e.toolbar).removeClass("l-disabled"))}},_getRowIdByDomId:function(e){var t=e.split("|"),i=t[2];return i},_getRowByDomId:function(e){return this.records[this._getRowIdByDomId(e)]},_isEditing:function(e){var t=this;if(e.hasClass("l-box-dateeditor")||e.hasClass("l-box-select"))return!0;if(e.hasClass("l-dialog")){var i=[];if(e.find(".l-dialog").each(function(){var e=$(this).attr("ligeruiid");e&&i.push(e)}),t._editorIncludeCotrols(i))return!0}return!1},_getSrcElementByEvent:function(e){var t=this,i=e.target||e.srcElement,r=$(i).parents().add(i),n=function(e){for(var t=0,i=r.length;i>t;t++)if("string"==typeof e){if($(r[t]).hasClass(e))return r[t]}else if("object"==typeof e&&r[t]==e)return r[t];return null};if(n("l-grid-editor"))return{editing:!0,editor:n("l-grid-editor")};if(-1==r.index(this.element))return t._isEditing(r)?{editing:!0}:{out:!0};var a=!1;if(r.hasClass("l-grid-detailpanel")&&t.detailrows)for(var o=0,l=t.detailrows.length;l>o;o++)if(-1!=r.index(t.detailrows[o])){a=!0;break}var s={grid:n("l-panel"),indetail:a,frozen:n(t.gridview1[0])?!0:!1,header:n("l-panel-header"),gridheader:n("l-grid-header"),gridbody:n("l-grid-body"),total:n("l-panel-bar-total"),popup:n("l-grid-popup"),toolbar:n("l-panel-bar")};if(s.gridheader&&(s.hrow=n("l-grid-hd-row"),s.hcell=n("l-grid-hd-cell"),s.hcelltext=n("l-grid-hd-cell-text"),s.checkboxall=n("l-grid-hd-cell-checkbox"),s.hcell)){var d=s.hcell.id.split("|")[2];
s.column=t._columns[d]}return s.gridbody&&(s.row=n("l-grid-row"),s.cell=n("l-grid-row-cell"),s.checkbox=n("l-grid-row-cell-btn-checkbox"),s.groupbtn=n("l-grid-group-togglebtn"),s.grouprow=n("l-grid-grouprow"),s.detailbtn=n("l-grid-row-cell-detailbtn"),s.detailrow=n("l-grid-detailpanel"),s.totalrow=n("l-grid-totalsummary"),s.totalcell=n("l-grid-totalsummary-cell"),s.rownumberscell=$(s.cell).hasClass("l-grid-row-cell-rownumbers")?s.cell:null,s.detailcell=$(s.cell).hasClass("l-grid-row-cell-detail")?s.cell:null,s.checkboxcell=$(s.cell).hasClass("l-grid-row-cell-checkbox")?s.cell:null,s.treelink=n("l-grid-tree-link"),s.editor=n("l-grid-editor"),s.row&&(s.data=this._getRowByDomId(s.row.id)),s.cell&&(s.editing=$(s.cell).hasClass("l-grid-row-cell-editing")),s.editor&&(s.editing=!0),s.editing&&(s.out=!1)),s.toolbar&&(s.first=n("l-bar-btnfirst"),s.last=n("l-bar-btnlast"),s.next=n("l-bar-btnnext"),s.prev=n("l-bar-btnprev"),s.load=n("l-bar-btnload"),s.button=n("l-bar-button")),s},_editorIncludeCotrols:function(e){var t=this;this.options;if(!e||!e.length)return!1;if(t.editor&&t.editor.input){if(t._controlIncludeCotrols(t.editor.input,e))return!0}else if(t.editors)for(var i in t.editors)if(t.editors[i])for(var r in t.editors[i]){var n=t.editors[i][r];if(n&&n.input&&t._controlIncludeCotrols(n.input,e))return!0}return!1},_controlIncludeCotrols:function(e,t){this.options;if(!e||!e.includeControls||!e.includeControls.length)return!1;for(var i=0;i<e.includeControls.length;i++){var r=e.includeControls[i];if(-1!=$.inArray(r.id,t))return!0}return!1},_getOnePageHeight:function(){var e=this.options;return(parseFloat(e.rowHeight||24)+1)*parseInt(e.pageSize)},_setEvent:function(){var e=this,t=this.options;e.grid.bind("mousedown.grid",function(t){e._onMouseDown.call(e,t)}),e.grid.bind("dblclick.grid",function(t){e._onDblClick.call(e,t)}),e.grid.bind("contextmenu.grid",function(t){return e._onContextmenu.call(e,t)}),$(document).bind("mouseup.grid",function(t){e._onMouseUp.call(e,t)}),$(document).bind("click.grid",function(t){e._onClick.call(e,t)}),$(window).bind("resize.grid",function(t){e._onResize.call(e)}),$(document).bind("keydown.grid",function(t){t.ctrlKey&&(e.ctrlKey=!0)}),$(document).bind("keyup.grid",function(t){delete e.ctrlKey}),e.gridbody.bind("scroll.grid",function(){var i=e.gridbody.scrollLeft(),r=e.gridbody.scrollTop();if(null!=i&&(e.gridheader[0].scrollLeft=i),null!=r&&(e.f.gridbody[0].scrollTop=r),t.scrollToPage&&t.usePager&&!e.loading){var n=e.gridbody.find(".l-grid-body-inner:first").height(),a=r+e.gridbody.height();if(t.scrollToAppend)t.newPage!=t.pageCount&&a>=n&&e.reload(t.newPage+1,"scrollappend");else{var o=a>=n?t.pageCount:Math.ceil(a/e._getOnePageHeight());e.scrollLoading||(e.scrollLoading=!0,e.lastScrollTop=r,e.unbind("sysScrollLoaded"),e.bind("sysScrollLoaded",function(){e.gridbody.scrollTop(r),setTimeout(function(){e.scrollLoading=!1},500)}),e.scrollLoading=!0,e.reload(o,"scroll"))}}e.trigger("SysGridHeightChanged")}),$("select",e.toolbar).change(function(){return e.isDataChanged&&"local"!=t.dataAction&&!confirm(t.isContinueByDataChanged)?!1:(t.newPage=1,t.pageSize=this.value,void e.loadData("local"!=t.dataAction?t.where:!1))}),$("span.pcontrol :text",e.toolbar).blur(function(t){e.changePage("input")}),$("div.l-bar-button",e.toolbar).hover(function(){$(this).addClass("l-bar-button-over")},function(){$(this).removeClass("l-bar-button-over")}),$.fn.ligerDrag&&t.colDraggable&&(e.colDroptip=$("<div class='l-drag-coldroptip' style='display:none'><div class='l-drop-move-up'></div><div class='l-drop-move-down'></div></div>").appendTo("body"),e.gridheader.add(e.f.gridheader).ligerDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(t,i){var r=e._getSrcElementByEvent(i);if(r.hcell&&r.column){var n=$(".l-grid-hd-cell-text:first",r.hcell).html(),a=$("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div></div>").appendTo("body");return a.append(n),a}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),e.children[this.id]=this},onStartDrag:function(t,i){if(2==i.button)return!1;if(e.colresizing)return!1;this.set("cursor","default");var r=e._getSrcElementByEvent(i);if(!r.hcell||!r.column||r.column.issystem||r.hcelltext)return!1;if(-1!=$(r.hcell).css("cursor").indexOf("resize"))return!1;this.draggingColumn=r.column,e.coldragging=!0;var n=e.grid.offset();this.validRange={top:n.top,bottom:n.top+e.gridheader.height(),left:n.left-10,right:n.left+e.grid.width()+10}},onDrag:function(i,r){this.set("cursor","default");var n=this.draggingColumn;if(!n)return!1;if(e.colresizing)return!1;null==e.colDropIn&&(e.colDropIn=-1);var a=r.pageX,o=r.pageY,l=!1,s=(e.grid.offset(),this.validRange);if(a<s.left||a>s.right||o>s.bottom||o<s.top)return e.colDropIn=-1,e.colDroptip.hide(),void this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no");for(var d in e._columns){var c=e._columns[d];if(n!=c){if(!c.issystem){var u=c.__level==n.__level,h=u&&l?!0:!1;if(n.frozen!=c.frozen&&(h=c.frozen?!1:!0),-1==e.colDropIn||e.colDropIn==d){var g=document.getElementById(c.__domid),p=$(g).offset(),f={top:p.top,bottom:p.top+$(g).height(),left:p.left-10,right:p.left+10};if(h){var v=$(g).width();f.left+=v,f.right+=v}if(a>f.left&&a<f.right&&o>f.top&&o<f.bottom){var m=t.headerRowHeight;c.__rowSpan&&(m*=c.__rowSpan),e.colDroptip.css({left:f.left+5,top:f.top-9,height:m+18}).show(),e.colDropIn=d,e.colDropDir=h?"right":"left",this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no").addClass("l-drop-yes");break}-1!=e.colDropIn&&(e.colDropIn=-1,e.colDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no"))}}}else l=!0}},onStopDrag:function(t,i){var r=this.draggingColumn;e.coldragging=!1,-1!=e.colDropIn&&(e.changeCol.ligerDefer(e,0,[r,e.colDropIn,"right"==e.colDropDir]),e.colDropIn=-1),e.colDroptip.hide(),this.set("cursor","default")}})),$.fn.ligerDrag&&t.rowDraggable&&(e.rowDroptip=$("<div class='l-drag-rowdroptip' style='display:none'></div>").appendTo("body"),e.gridbody.add(e.f.gridbody).ligerDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(i,r){var n=e._getSrcElementByEvent(r);if(n.row){var a=t.draggingMessage.replace(/{count}/,i.draggingRows?i.draggingRows.length:1);t.rowDraggingRender&&(a=t.rowDraggingRender(i.draggingRows,i,e));var o=$("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div>"+a+"</div>").appendTo("body");return o}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),e.children[this.id]=this},onStartDrag:function(t,i){if(2==i.button)return!1;if(e.colresizing)return!1;if(!e.columns.length)return!1;this.set("cursor","default");var r=e._getSrcElementByEvent(i);if(!r.cell||!r.data||r.checkbox)return!1;var n=r.cell.id.split("|"),a=e._columns[n[n.length-1]];if(!(r.rownumberscell||r.detailcell||r.checkboxcell||a==e.columns[0]))return!1;if(e.enabledCheckbox()){if(this.draggingRows=e.getSelecteds(),!this.draggingRows||!this.draggingRows.length)return!1}else this.draggingRows=[r.data];this.draggingRow=r.data,this.set("cursor","move"),e.rowdragging=!0,this.validRange={top:e.gridbody.offset().top,bottom:e.gridbody.offset().top+e.gridbody.height(),left:e.grid.offset().left-10,right:e.grid.offset().left+e.grid.width()+10}},onDrag:function(i,r){var n=this.draggingRow;if(!n)return!1;var a=this.draggingRows?this.draggingRows:[n];if(e.colresizing)return!1;null==e.rowDropIn&&(e.rowDropIn=-1);var o=r.pageX,l=r.pageY,s=!1,d=this.validRange;if(o<d.left||o>d.right||l>d.bottom||l<d.top)return e.rowDropIn=-1,e.rowDroptip.hide(),void this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes l-drop-add").addClass("l-drop-no");for(var c in e.rows){var u=e.rows[c],h=u.__id;if(n==u&&(s=!0),-1==$.inArray(u,a)){var g=s?!0:!1;if(-1==e.rowDropIn||e.rowDropIn==h){var p=e.getRowObj(h),f=$(p).offset(),v={top:f.top-4,bottom:f.top+$(p).height()+4,left:e.grid.offset().left,right:e.grid.offset().left+e.grid.width()};if(o>v.left&&o<v.right&&l>v.top&&l<v.bottom){var m=f.top;g&&(m+=$(p).height()),e.rowDroptip.css({left:v.left,top:m,width:v.right-v.left}).show(),e.rowDropIn=h,e.rowDropDir=g?"bottom":"top",t.tree&&l>v.top+5&&l<v.bottom-5?(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-yes").addClass("l-drop-add"),e.rowDroptip.hide(),e.rowDropInParent=!0):(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-add").addClass("l-drop-yes"),e.rowDroptip.show(),e.rowDropInParent=!1);break}-1!=e.rowDropIn&&(e.rowDropIn=-1,e.rowDropInParent=!1,e.rowDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes  l-drop-add").addClass("l-drop-no"))}}}},onStopDrag:function(i,r){var n=this.draggingRows;e.rowdragging=!1;for(var a=0;a<n.length;a++){var o=n[a].children;o&&(n=$.grep(n,function(e,t){var i=-1==$.inArray(e,o);return i}))}if(-1!=e.rowDropIn){if(t.tree){var l,s;e.rowDropInParent?s=e.getRow(e.rowDropIn):(l=e.getRow(e.rowDropIn),s=e.getParent(l)),e.appendRange(n,s,l,"bottom"!=e.rowDropDir),e.trigger("rowDragDrop",{rows:n,parent:s,near:l,after:"bottom"==e.rowDropDir})}else e.moveRange(n,e.rowDropIn,"bottom"==e.rowDropDir),e.trigger("rowDragDrop",{rows:n,parent:s,near:e.getRow(e.rowDropIn),after:"bottom"==e.rowDropDir});e.rowDropIn=-1}e.rowDroptip.hide(),this.set("cursor","default")}}))},_onRowOver:function(e,t){if(!l.draggable.dragging){var i=this,r=this.options,n=i.getRow(e),a=t?"addClass":"removeClass";t&&i.editor.editing&&$("tr."+r.mouseoverRowCssClass,i.gridview).removeClass(r.mouseoverRowCssClass),i.enabledFrozen()&&$(i.getRowObj(n,!0))[a](r.mouseoverRowCssClass),$(i.getRowObj(n,!1))[a](r.mouseoverRowCssClass)}},_onMouseUp:function(e){var t=this;this.options;if(l.draggable.dragging){var i=t._getSrcElementByEvent(e);i.hcell&&i.column?t.trigger("dragdrop",[{type:"header",column:i.column,cell:i.hcell},e]):i.row&&t.trigger("dragdrop",[{type:"row",record:i.data,row:i.row},e])}},_onMouseDown:function(e){this.options},_onContextmenu:function(e){var t=this,i=this.options,r=t._getSrcElementByEvent(e);if(r.row){if(i.whenRClickToSelect&&t.select(r.data),t.hasBind("contextmenu"))return t.trigger("contextmenu",[{data:r.data,rowindex:r.data.__index,row:r.row},e])}else if(r.hcell){if(!i.allowHideColumn)return!0;var n=$(r.hcell).attr("columnindex");if(void 0==n)return!0;var a=e.pageX-t.body.offset().left+parseInt(t.body[0].scrollLeft);return n==t.columns.length-1&&(a-=50),t.popup.css({left:a,top:t.gridheader.height()+1}),t.popup.toggle(),!1}},_onDblClick:function(e){var t=this,i=(this.options,t._getSrcElementByEvent(e));i.row&&t.trigger("dblClickRow",[i.data,i.data.__id,i.row])},_onClick:function(e){var t=e.target||e.srcElement,i=this,r=this.options,n=i._getSrcElementByEvent(e);if(n.out)return i.editor.editing&&!$.ligerui.win.masking&&i.endEdit(),void(r.allowHideColumn&&i.popup.hide());if(!n.indetail&&!n.editing)if(i.editor.editing&&i.endEdit(),r.allowHideColumn&&(n.popup||i.popup.hide()),n.checkboxall){var a=$(n.hrow),o=a.hasClass("l-checked");if(0==i.trigger("beforeCheckAllRow",[!o,i.element]))return!1;o?a.removeClass("l-checked"):a.addClass("l-checked"),i.selected=[];for(var l in i.records)o?i.unselect(i.records[l]):i.select(i.records[l]);i.trigger("checkAllRow",[!o,i.element])}else if(n.hcelltext){var s=$(n.hcelltext).parent().parent();if(!r.enabledSort||!n.column)return;if(0==n.column.isSort)return;if(r.url&&"local"!=r.dataAction&&i.isDataChanged&&!confirm(r.isContinueByDataChanged))return;var d=$(".l-grid-hd-cell-sort:first",s),c=n.column.name;if(!c)return;d.length>0?d.hasClass("l-grid-hd-cell-sort-asc")?(d.removeClass("l-grid-hd-cell-sort-asc").addClass("l-grid-hd-cell-sort-desc"),s.removeClass("l-grid-hd-cell-asc").addClass("l-grid-hd-cell-desc"),i.trigger("ChangeSort",[c,"desc"]),i.changeSort(c,"desc")):d.hasClass("l-grid-hd-cell-sort-desc")&&(d.removeClass("l-grid-hd-cell-sort-desc").addClass("l-grid-hd-cell-sort-asc"),s.removeClass("l-grid-hd-cell-desc").addClass("l-grid-hd-cell-asc"),i.trigger("ChangeSort",[c,"asc"]),i.changeSort(c,"asc")):(s.removeClass("l-grid-hd-cell-desc").addClass("l-grid-hd-cell-asc"),$(n.hcelltext).after("<span class='l-grid-hd-cell-sort l-grid-hd-cell-sort-asc'>&nbsp;&nbsp;</span>"),i.trigger("ChangeSort",[c,"asc"]),i.changeSort(c,"asc")),$(".l-grid-hd-cell-sort",i.gridheader).add($(".l-grid-hd-cell-sort",i.f.gridheader)).not($(".l-grid-hd-cell-sort:first",s)).remove()}else if(n.detailbtn&&r.detail){var u=n.data,a=$([i.getRowObj(u,!1)]);i.enabledFrozen()&&(a=a.add(i.getRowObj(u,!0)));var l=u.__id;if($(n.detailbtn).hasClass("l-open"))r.detail.onCollapse&&r.detail.onCollapse(u,$(".l-grid-detailpanel-inner:first",h)[0]),a.next("tr.l-grid-detailpanel").hide(),$(n.detailbtn).removeClass("l-open");else{var h=a.next("tr.l-grid-detailpanel");if(h.length>0)return h.show(),r.detail.onExtend&&r.detail.onExtend(u,$(".l-grid-detailpanel-inner:first",h)[0]),$(n.detailbtn).addClass("l-open"),void i.trigger("SysGridHeightChanged");$(n.detailbtn).addClass("l-open");for(var g=0,p=0;p<i.columns.length;p++)i.columns[p].frozen&&g++;var f=$("<tr class='l-grid-detailpanel'><td><div class='l-grid-detailpanel-inner' style='display:none'></div></td></tr>"),v=$("<tr class='l-grid-detailpanel'><td><div class='l-grid-detailpanel-inner' style='display:none'></div></td></tr>");f.find("div:first").width(i.gridheader.find("div:first").width()-50),f.attr("id",i.id+"|detail|"+l),i.detailrows=i.detailrows||[],i.detailrows.push(f[0]),i.detailrows.push(v[0]);var m=$("div:first",f);m.parent().attr("colSpan",i.columns.length-g),a.eq(0).after(f),g>0&&(v.find("td:first").attr("colSpan",g),a.eq(1).after(v)),r.detail.onShowDetail?(r.detail.onShowDetail(u,m[0],function(){i.trigger("SysGridHeightChanged")}),$("div:first",v).add(m).show().height(r.detail.height||r.detailHeight)):r.detail.render&&(m.append(r.detail.render()),m.show()),i.trigger("SysGridHeightChanged")}}else if(n.groupbtn){var b=$(n.grouprow),x=!0;$(n.groupbtn).hasClass("l-grid-group-togglebtn-close")?($(n.groupbtn).removeClass("l-grid-group-togglebtn-close"),b.hasClass("l-grid-grouprow-last")&&$("td:first",b).width("auto")):(x=!1,$(n.groupbtn).addClass("l-grid-group-togglebtn-close"),b.hasClass("l-grid-grouprow-last")&&$("td:first",b).width(i.gridtablewidth));for(var y=b.next(".l-grid-row,.l-grid-totalsummary-group,.l-grid-detailpanel");;){if(0==y.length)break;x?(y.show(),y.hasClass("l-grid-detailpanel")&&!y.prev().find("td.l-grid-row-cell-detail:first span.l-grid-row-cell-detailbtn:first").hasClass("l-open")&&y.hide()):y.hide(),y=y.next(".l-grid-row,.l-grid-totalsummary-group,.l-grid-detailpanel")}i.trigger(x?"groupExtend":"groupCollapse"),i.trigger("SysGridHeightChanged")}else if(n.treelink)i.toggle(n.data);else if(n.row&&i.enabledCheckbox()){var w=r.selectRowButtonOnly?!0:!1;if(r.enabledEdit&&(w=!0),"a"==t.tagName.toLowerCase())return;if((n.checkbox||!w)&&0!=r.selectable){var a=$(n.row),o=a.hasClass("l-selected");if(0==i.trigger("beforeCheckRow",[!o,n.data,n.data.__id,n.row]))return!1;var C=o?"unselect":"select";if(i[C](n.data),r.tree&&r.autoCheckChildren)for(var _=i.getChildren(n.data,!0),p=0,D=_.length;D>p;p++)i[C](_[p]);i.trigger("checkRow",[!o,n.data,n.data.__id,n.row])}!n.checkbox&&n.cell&&r.enabledEdit&&r.clickToEdit&&i._applyEditor(n.cell)}else if(n.row&&!i.enabledCheckbox()&&0!=r.selectable)if(n.cell&&r.enabledEdit&&r.clickToEdit&&i._applyEditor(n.cell),$(n.row).hasClass("l-selected")){if(!r.allowUnSelectRow)return void $(n.row).addClass("l-selected-again");i.unselect(n.data)}else i.select(n.data);else if(n.toolbar)if(n.first){if(0==i.trigger("toFirst",[i.element]))return!1;i.changePage("first")}else if(n.prev){if(0==i.trigger("toPrev",[i.element]))return!1;i.changePage("prev")}else if(n.next){if(0==i.trigger("toNext",[i.element]))return!1;i.changePage("next")}else if(n.last){if(0==i.trigger("toLast",[i.element]))return!1;i.changePage("last")}else if(n.load){if($("span",n.load).hasClass("l-disabled"))return!1;if(0==i.trigger("reload",[i.element]))return!1;if(r.url&&i.isDataChanged&&!confirm(r.isContinueByDataChanged))return!1;i.loadData(r.where)}},select:function(e){var t=this,i=this.options,r=t.getRow(e),n=r.__id,a=t.getRowObj(n);if(i.rowSelectable&&0!=t.trigger("beforeSelectRow",[r,n,a])){var o=t.getRowObj(n,!0);if(!t.enabledCheckbox()&&!t.ctrlKey||i.isSingleCheck){for(var l in t.selected){var s=t.selected[l];s.__id in t.records&&($(t.getRowObj(s)).removeClass("l-selected l-selected-again"),t.enabledFrozen()&&$(t.getRowObj(s,!0)).removeClass("l-selected l-selected-again"))}t.selected=[]}a&&$(a).addClass("l-selected"),o&&$(o).addClass("l-selected"),t.selected[t.selected.length]=r,t.trigger("selectRow",[r,n,a])}},unselect:function(e){var t=this,i=(this.options,t.getRow(e)),r=i.__id,n=t.getRowObj(r),a=t.getRowObj(r,!0);$(n).removeClass("l-selected l-selected-again"),t.enabledFrozen()&&$(a).removeClass("l-selected l-selected-again"),t._removeSelected(i),t.trigger("unSelectRow",[i,r,n])},isSelected:function(e){var t=this,i=(this.options,t.getRow(e));for(var r in t.selected)if(t.selected[r]==i)return!0;return!1},arrayToTree:function(e,t,i){function r(e){return"string"==typeof e&&(e=e.replace(/[.]/g,"").toLowerCase()),e}var n=this.options,a="children";if(n.tree&&(a=n.tree.childrenName),!e||!e.length)return[];for(var o=[],l={},s=e.length,d=0;s>d;d++){var c=e[d],u=r(c[t]);l[u]=c}for(var d=0;s>d;d++){var h=e[d],u=r(h[i]),g=l[u];g?(g[a]=g[a]||[],g[a].push(h)):o.push(h)}return o},_onResize:function(){var e=this,t=this.options;if(t.height&&"auto"!=t.height){var i=$(window).height(),r=0,n=null;if("string"==typeof t.height&&t.height.indexOf("%")>0){var a=e.grid.parent();t.inWindow?(n=i,n-=parseInt($("body").css("paddingTop")),n-=parseInt($("body").css("paddingBottom"))):n=a.height(),r=n*parseInt(t.height)*.01,(t.inWindow||"body"==a[0].tagName.toLowerCase())&&(r-=e.grid.offset().top-parseInt($("body").css("paddingTop")))}else r=parseInt(t.height);r+=t.heightDiff,e.windowHeight=i,e._setHeight(r)}else e._updateHorizontalScrollStatus.ligerDefer(e,10);if(e.enabledFrozen()){var o=e.gridview1.width(),l=e.gridview.width();0>=l-o?e.gridview2.css({width:"auto"}):e.gridview2.css({width:l-o})}e.trigger("SysGridHeightChanged")},showFilter:function(){function e(){var e=[];return $(n.columns).each(function(){var t={name:this.name,display:this.display},i="int"==this.type||"number"==this.type||"float"==this.type,r="date"==this.type;i&&(t.type="number"),r&&(t.type="date"),this.editor&&(t.editor=this.editor),e.push(t)}),e}function t(){var e=o.getData();"server"==n.options.dataType?i(e):r(e)}function i(e){e&&e.rules&&e.rules.length?n.setParm("where",JSON.stringify(e)):n.removeParm("where"),n.loadData()}function r(e){n.loadData($.ligerFilter.getFilterFunction(e))}var n=this;this.options;if(n.winfilter)return void n.winfilter.show();var a=$('<div id="'+n.id+'_filtercontainer"></div>').width(380).height(120).hide(),o=a.ligerFilter({fields:e()});return o.addRule($(o.element.firstChild)),n.winfilter=$.ligerDialog.open({width:420,height:208,target:a,isResize:!0,top:50,buttons:[{text:"ç¡®å®",onclick:function(e,i){t(),i.hide()}},{text:"åæ¶",onclick:function(e,t){t.hide()}}]})}}),$.ligerui.controls.Grid.prototype.enabledTotal=$.ligerui.controls.Grid.prototype.isTotalSummary,$.ligerui.controls.Grid.prototype.add=$.ligerui.controls.Grid.prototype.addRow,$.ligerui.controls.Grid.prototype.update=$.ligerui.controls.Grid.prototype.updateRow,$.ligerui.controls.Grid.prototype.append=$.ligerui.controls.Grid.prototype.appendRow,$.ligerui.controls.Grid.prototype.getSelected=$.ligerui.controls.Grid.prototype.getSelectedRow,$.ligerui.controls.Grid.prototype.getSelecteds=$.ligerui.controls.Grid.prototype.getSelectedRows,$.ligerui.controls.Grid.prototype.getCheckedRows=$.ligerui.controls.Grid.prototype.getSelectedRows,$.ligerui.controls.Grid.prototype.getCheckedRowObjs=$.ligerui.controls.Grid.prototype.getSelectedRowObjs,$.ligerui.controls.Grid.prototype.setOptions=$.ligerui.controls.Grid.prototype.set,$.ligerui.controls.Grid.prototype.reload=$.ligerui.controls.Grid.prototype.loadData,$.ligerui.controls.Grid.prototype.refreshSize=$.ligerui.controls.Grid.prototype._onResize,$.ligerui.controls.Grid.prototype.append=$.ligerui.controls.Grid.prototype.appendRange}(jQuery),define("ligerui.ligerGrid",["jquery","ligerui.all","ligerui.base","ligerui.inject","ligerui.ligerResizable","ligerui.ligerCheckBox"],function(){}),function(e){function t(e){return e?e.replace(/(^\s*)|(\s*$)/g,""):e}e.fn.ligerTree=function(t){return e.ligerui.run.call(this,"ligerTree",arguments)},e.fn.ligerGetTreeManager=function(){return e.ligerui.run.call(this,"ligerGetTreeManager",arguments)},e.ligerDefaults.Tree={url:null,urlParms:null,data:null,checkbox:!0,autoCheckboxEven:!0,enabledCompleteCheckbox:!0,parentIcon:"folder",childIcon:"leaf",textFieldName:"text",attribute:["id","url"],treeLine:!0,nodeWidth:90,statusName:"__status",isLeaf:null,single:!1,needCancel:!0,onBeforeExpand:function(){},onContextmenu:function(){},onExpand:function(){},onBeforeCollapse:function(){},onCollapse:function(){},onBeforeSelect:function(){},onSelect:function(){},onBeforeCancelSelect:function(){},onCancelselect:function(){},onCheck:function(){},onSuccess:function(){},onError:function(){},onClick:function(){},idFieldName:"id",parentIDFieldName:null,topParentIDValue:0,onBeforeAppend:function(){},onAppend:function(){},onAfterAppend:function(){},slide:!0,iconFieldName:"icon",nodeDraggable:!1,nodeDraggingRender:null,btnClickToToggleOnly:!0,ajaxType:"post",ajaxContentType:null,ajaxBeforeSend:null,render:null,selectable:null,isExpand:null,delay:null,idField:null,parentIDField:null,iconClsFieldName:null},e.ligerui.controls.Tree=function(t,i){e.ligerui.controls.Tree.base.constructor.call(this,t,i)},e.ligerui.controls.Tree.ligerExtend(e.ligerui.core.UIComponent,{_init:function(){e.ligerui.controls.Tree.base._init.call(this);var t=this.options;t.single&&(t.autoCheckboxEven=!1)},_render:function(){var t=this,i=this.options;t.set(i,!0),t.tree=e(t.element),t.tree.addClass("l-tree"),t.toggleNodeCallbacks=[],t.sysAttribute=["isexpand","ischecked","href","style","delay"],t.loading=e("<div class='l-tree-loading'></div>"),t.tree.after(t.loading),t.data=[],t.maxOutlineLevel=1,t.treedataindex=0,t._applyTree(),t._setTreeEven(),t.set(i,!1)},_setTreeLine:function(e){e?this.tree.removeClass("l-tree-noline"):this.tree.addClass("l-tree-noline")},_setParms:function(){var t=this.options;e.isFunction(t.parms)&&(t.parms=t.parms())},reload:function(e){var t=this,i=this.options;t.clear(),t.loadData(null,i.url,null,{success:e})},reloadNode:function(e,t,i){var r=this,n=this.options;if(r.clear(e),"string"==typeof t)r.loadData(e,t,null,{success:i});else{if(!t)return;n.idField&&n.parentIDField&&(t=r.arrayToTree(t,n.idField,n.parentIDField)),r.append(e,t)}},_setUrl:function(e){var t=this;this.options;e&&(t.clear(),t.loadData(null,e))},_setData:function(e){e&&(this.clear(),this.append(null,e))},setData:function(e){this.set("data",e)},getData:function(){return this.data},hasChildren:function(e){return this.options.isLeaf?!this.options.isLeaf(e):e.children?!0:!1},getParent:function(t,i){var r=this;t=r.getNodeDom(t);var n=r.getParentTreeItem(t,i);if(!n)return null;var a=e(n).attr("treedataindex");return r._getDataNodeByTreeDataIndex(r.data,a)},getParentTreeItem:function(t,i){var r=this;t=r.getNodeDom(t);var n=e(t);if(n.parent().hasClass("l-tree"))return null;if(void 0==i)return 0==n.parent().parent("li").length?null:n.parent().parent("li")[0];for(var a=parseInt(n.attr("outlinelevel")),o=n,l=a-1;l>=i;l--)o=o.parent().parent("li");return o[0]},getChecked:function(){var t=this;this.options;if(!this.options.checkbox)return null;var i=[];return e(".l-checkbox-checked",t.tree).parent().parent("li").each(function(){var r=parseInt(e(this).attr("treedataindex"));i.push({target:this,data:t._getDataNodeByTreeDataIndex(t.data,r)})}),i},getCheckedData:function(){var t=this;this.options;if(!this.options.checkbox)return null;var i=[];return e(".l-checkbox-checked",t.tree).parent().parent("li").each(function(){var r=parseInt(e(this).attr("treedataindex"));i.push(t._getDataNodeByTreeDataIndex(t.data,r))}),i},refreshTree:function(){var t=this;this.options;e.each(this.getChecked(),function(i,r){t._setParentCheckboxStatus(e(r.target))})},getSelected:function(){var t=this,i=(this.options,{});if(i.target=e(".l-selected",t.tree).parent("li")[0],i.target){var r=parseInt(e(i.target).attr("treedataindex"));return i.data=t._getDataNodeByTreeDataIndex(t.data,r),i}return null},upgrade:function(t){var i=this;this.options;e(".l-note",t).each(function(){e(this).removeClass("l-note").addClass("l-expandable-open")}),e(".l-note-last",t).each(function(){e(this).removeClass("l-note-last").addClass("l-expandable-open")}),e("."+i._getChildNodeClassName(),t).each(function(){e(this).removeClass(i._getChildNodeClassName()).addClass(i._getParentNodeClassName(!0))})},demotion:function(t){var i=this;this.options;if(t||"li"==t[0].tagName.toLowerCase()){var r=e(t).hasClass("l-last");e(".l-expandable-open",t).each(function(){e(this).removeClass("l-expandable-open").addClass(r?"l-note-last":"l-note")}),e(".l-expandable-close",t).each(function(){e(this).removeClass("l-expandable-close").addClass(r?"l-note-last":"l-note")}),e("."+i._getParentNodeClassName(!0),t).each(function(){e(this).removeClass(i._getParentNodeClassName(!0)).addClass(i._getChildNodeClassName())})}},collapseAll:function(){var t=this;this.options;e(".l-expandable-open",t.tree).click()},expandAll:function(){var t=this;this.options;e(".l-expandable-close",t.tree).click()},arrayToTree:function(e,t,i){function r(e){return"string"==typeof e&&(e=e.replace(/[.]/g,"").toLowerCase()),e}var n=(this.options,"children");if(!e||!e.length)return[];for(var a=[],o={},l=e.length,s=0;l>s;s++){var d=e[s],c=r(d[t]);o[c]=d}for(var s=0;l>s;s++){var u=e[s],c=r(u[i]),h=o[c];h?(h[n]=h[n]||[],h[n].push(u)):a.push(u)}return a},loadData:function(t,i,r,n){var a=this,o=this.options;n=e.extend({showLoading:function(){a.loading.show()},success:function(){},error:function(){},hideLoading:function(){a.loading.hide()}},n||{});var l=o.ajaxType;r=e.extend(e.isFunction(o.parms)?o.parms():o.parms,r),"application/json"==o.ajaxContentType&&"string"!=typeof r&&(r=liger.toJSON(r));var s=e.isFunction(o.urlParms)?o.urlParms.call(a):o.urlParms;if(s)for(name in s)i+=-1==i.indexOf("?")?"?":"&",i+=name+"="+s[name];var d={type:l,url:i,data:r,dataType:"json",beforeSend:function(e){o.ajaxBeforeSend&&o.ajaxBeforeSend(e),n.showLoading()},success:function(e){e&&(e.result.hasOwnProperty("success")&&e.result.hasOwnProperty("data")&&(e=e.result.data.hasOwnProperty("data")?e.result.data.data:e.result.data),o.idField&&o.parentIDField&&(e=a.arrayToTree(e,o.idField,o.parentIDField)),n.hideLoading(),a.append(t,e),a.trigger("success",[e]),n.success(e))},error:function(e,t,i){try{r.hideLoading(),a.trigger("error",[e,t,i]),r.error(e,t,i)}catch(r){}}};o.ajaxContentType&&(d.contentType=o.ajaxContentType),e.ajax(d)},clear:function(t){var i=this;this.options;if(t){var r=i.getNodeDom(t),n=i._getDataNodeByTreeDataIndex(i.data,e(r).attr("treedataindex"));e(r).find("ul.l-children").remove(),n&&(n.children=[])}else i.toggleNodeCallbacks=[],i.data=null,i.data=[],i.nodes=null,i.tree.html("")},getNodeDom:function(t){var i=this;this.options;return null==t?t:"string"==typeof t||"number"==typeof t?e("li[treedataindex="+t+"]",i.tree).get(0):"object"==typeof t&&"treedataindex"in t?i.getNodeDom(t.treedataindex):t.target&&t.data?t.target:t},hide:function(t){var i=this;this.options;t=i.getNodeDom(t),t&&e(t).hide()},show:function(t){var i=this;this.options;t=i.getNodeDom(t),t&&e(t).show()},remove:function(t){var i=this,r=this.options;t=i.getNodeDom(t);var n=parseInt(e(t).attr("treedataindex")),a=i._getDataNodeByTreeDataIndex(i.data,n);a&&i._setTreeDataStatus([a],"delete");var o=i.getParentTreeItem(t);r.checkbox&&i._setParentCheckboxStatus(e(t)),e(t).remove(),i._updateStyle(o?e("ul:first",o):i.tree)},_updateStyle:function(t){var i=this,r=(this.options,e(" > li",t)),n=r.length;n&&r.each(function(t,r){0!=t||e(this).hasClass("l-first")||e(this).addClass("l-first"),t!=n-1||e(this).hasClass("l-last")||e(this).addClass("l-last"),0==t&&t==n-1&&e(this).addClass("l-onlychild"),e("> div .l-note,> div .l-note-last",this).removeClass("l-note l-note-last").addClass(t==n-1?"l-note-last":"l-note"),i._setTreeItem(this,{isLast:t==n-1})})},update:function(t,i){var r=this,n=this.options;t=r.getNodeDom(t);var a=parseInt(e(t).attr("treedataindex"));nodedata=r._getDataNodeByTreeDataIndex(r.data,a);for(var o in i)nodedata[o]=i[o],o==n.textFieldName&&e("> .l-body > span",t).text(i[o])},append:function(t,i,r,n){var a=this,o=this.options;if(t=a.getNodeDom(t),0==a.trigger("beforeAppend",[t,i]))return!1;if(!i||!i.length)return!1;if(o.idFieldName&&o.parentIDFieldName&&(i=a.arrayToTree(i,o.idFieldName,o.parentIDFieldName)),a._addTreeDataIndexToData(i),a._setTreeDataStatus(i,"add"),null!=r&&(r=a.getNodeDom(r)),a.trigger("append",[t,i]),a._appendData(t,i),null==t){var l=a._getTreeHTMLByData(i,1,[],!0);return l[l.length-1]=l[0]="",null!=r?(e(r)[n?"after":"before"](l.join("")),a._updateStyle(t?e("ul:first",t):a.tree)):(e("> li:last",a.tree).length>0&&a._setTreeItem(e("> li:last",a.tree)[0],{isLast:!1}),a.tree.append(l.join(""))),e(".l-body",a.tree).hover(function(){e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),a._upadteTreeWidth(),void a.trigger("afterAppend",[t,i])}var s=e(t),d=parseInt(s.attr("outlinelevel")),c=e("> ul",s).length>0;c||(s.append("<ul class='l-children'></ul>"),a.upgrade(t));for(var u=[],h=1;d-1>=h;h++){var g=e(a.getParentTreeItem(t,h));u.push(g.hasClass("l-last"))}u.push(s.hasClass("l-last"));var l=a._getTreeHTMLByData(i,d+1,u,!0);l[l.length-1]=l[0]="",null!=r?(e(r)[n?"after":"before"](l.join("")),a._updateStyle(t?e("ul:first",t):a.tree)):(e("> .l-children > li:last",s).length>0&&a._setTreeItem(e("> .l-children > li:last",s)[0],{isLast:!1}),e(">.l-children",t).append(l.join(""))),a._upadteTreeWidth(),e(">.l-children .l-body",t).hover(function(){e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),a.trigger("afterAppend",[t,i])},cancelSelect:function(t,i){var r=this,n=this.options,a=r.getNodeDom(t),o=e(a),l=parseInt(o.attr("treedataindex")),s=r._getDataNodeByTreeDataIndex(r.data,l),d=e(">div:first",o);n.checkbox?e(".l-checkbox",d).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"):d.removeClass("l-selected"),0!=i&&r.trigger("cancelSelect",[{data:s,target:o[0]}])},selectNode:function(i,r){var n=this,a=this.options,o=null;if("function"==typeof i)o=i;else{if("object"==typeof i){var l=e(i),s=parseInt(l.attr("treedataindex")),d=n._getDataNodeByTreeDataIndex(n.data,s),c=e(">div:first",l);return c.length||(c=e("li[treedataindex="+s+"] >div:first",n.tree)),a.checkbox?e(".l-checkbox",c).removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked"):(e("div.l-selected",n.tree).removeClass("l-selected"),c.addClass("l-selected")),void(0!=r&&n.trigger("select",[{data:d,target:c.parent().get(0)}]))}o=function(e){return e[a.idFieldName]||0==e[a.idFieldName]?t(e[a.idFieldName].toString())==t(i.toString()):!1}}e("li",n.tree).each(function(){var t=e(this),i=parseInt(t.attr("treedataindex")),a=n._getDataNodeByTreeDataIndex(n.data,i);o(a,i)?n.selectNode(this,r):n.options.checkbox||n.cancelSelect(this,r)})},getTextByID:function(e){var t=this,i=this.options,r=t.getDataByID(e);return r?r[i.textFieldName]:null},getDataByID:function(t){function i(e){for(var r=0;r<e.length;r++){var a=e[r];if(a[n.idFieldName]==t)return a;if(a.children&&a.children.length){var o=i(a.children);if(o)return o}}return null}var r=this,n=this.options,a=null;return r.data&&r.data.length?i(r.data):(e("li",r.tree).each(function(){if(!a){var i=e(this),o=parseInt(i.attr("treedataindex")),l=r._getDataNodeByTreeDataIndex(r.data,o);l[n.idFieldName].toString()==t.toString()&&(a=l)}}),a)},arrayToTree:function(e,t,i){if(!e||!e.length)return[];for(var r=[],n={},a=e.length,o=0;a>o;o++){var l=e[o];
n[l[t]]=l}for(var o=0;a>o;o++){var s=e[o],d=n[s[i]];d?(d.children=d.children||[],d.children.push(s)):r.push(s)}return r},_getDataNodeByTreeDataIndex:function(e,t){for(var i=this,r=(this.options,0);r<e.length;r++){if(e[r].treedataindex==t)return e[r];if(e[r].children){var n=i._getDataNodeByTreeDataIndex(e[r].children,t);if(n)return n}}return null},_setTreeDataStatus:function(t,i){var r=this,n=this.options;e(t).each(function(){this[n.statusName]=i,this.children&&r._setTreeDataStatus(this.children,i)})},_addTreeDataIndexToData:function(t){var i=this;this.options;e(t).each(function(){void 0==this.treedataindex&&(this.treedataindex=i.treedataindex++,this.children&&i._addTreeDataIndexToData(this.children))})},_addToNodes:function(t){var i=this;this.options;i.nodes=i.nodes||[],i.nodes.push(t),t.children&&e(t.children).each(function(e,t){i._addToNodes(t)})},_appendData:function(t,i){var r=this,n=(this.options,parseInt(e(t).attr("treedataindex"))),a=r._getDataNodeByTreeDataIndex(r.data,n);void 0==r.treedataindex&&(r.treedataindex=0),a&&void 0==a.children&&(a.children=[]),e(i).each(function(e,t){a?a.children[a.children.length]=t:r.data[r.data.length]=t,r._addToNodes(t)})},_setTreeItem:function(t,i){var r=this;this.options;if(i){t=r.getNodeDom(t);var n=e(t),a=parseInt(n.attr("outlinelevel"));void 0!=i.isLast&&(1==i.isLast?(n.removeClass("l-last").addClass("l-last"),e("> div .l-note",n).removeClass("l-note").addClass("l-note-last"),e(".l-children li",n).find(".l-box:eq("+(a-1)+")").removeClass("l-line")):0==i.isLast&&(n.removeClass("l-last"),e("> div .l-note-last",n).removeClass("l-note-last").addClass("l-note"),e(".l-children li",n).find(".l-box:eq("+(a-1)+")").removeClass("l-line").addClass("l-line")))}},_upadteTreeWidth:function(){var e=this,t=this.options,i=22*e.maxOutlineLevel;t.checkbox&&(i+=22),(t.parentIcon||t.childIcon)&&(i+=22),i+=t.nodeWidth,e.tree.width(i)},_getChildNodeClassName:function(){var e=this.options;return"l-tree-icon-"+e.childIcon},_getParentNodeClassName:function(e){var t=this.options,i="l-tree-icon-"+t.parentIcon;return e&&(i+="-open"),i},_isExpand:function(e,t){var i=this.options,r=null!=e.isExpand?e.isExpand:null!=e.isexpand?e.isexpand:i.isExpand;return null==r?!0:("function"==typeof r&&(r=i.isExpand({data:e,level:t})),"boolean"==typeof r?r:"string"==typeof r?"true"==r:"number"==typeof r?r>t:!0)},_getDelay:function(t,i){var r=this.options,n=null!=t.delay?t.delay:r.delay;return null==n?!1:("function"==typeof n&&(n=n({data:t,level:i})),"boolean"==typeof n?n:"string"==typeof n?{url:n}:("number"==typeof n&&(n=[n]),e.isArray(n)?-1!=e.inArray(i,n):"object"==typeof n&&n.url?n:!1))},_getTreeHTMLByData:function(t,i,r,n){var a=this,o=this.options;a.maxOutlineLevel<i&&(a.maxOutlineLevel=i),r=r||[],i=i||1;var l=[];n?l.push("<ul class='l-children'>"):l.push('<ul class="l-children" style="display:none">');for(var s=0;s<t.length;s++){var d=t[s],c=0==s,u=s==t.length-1,h=a._getDelay(d,i),g=h?!1:a._isExpand(d,i);l.push("<li "),void 0!=d.treedataindex&&l.push('treedataindex="'+d.treedataindex+'" '),g&&l.push("isexpand="+d.isexpand+" "),l.push("outlinelevel="+i+" ");for(var p=0;p<a.sysAttribute.length;p++)e(this).attr(a.sysAttribute[p])&&(t[dataindex][a.sysAttribute[p]]=e(this).attr(a.sysAttribute[p]));for(var p=0;p<o.attribute.length;p++)d[o.attribute[p]]&&l.push(o.attribute[p]+'="'+d[o.attribute[p]]+'" ');l.push('class="'),c&&l.push("l-first "),u&&l.push("l-last "),c&&u&&l.push("l-onlychild "),l.push('"'),l.push(">"),l.push('<div class="l-body'),o.selectable&&0==o.selectable(d)&&l.push(" l-unselectable"),l.push('">');for(var f=0;i-2>=f;f++)r[f]?l.push('<div class="l-box"></div>'):l.push('<div class="l-box l-line"></div>');if(a.hasChildren(d)?(g?l.push('<div class="l-box l-expandable-open"></div>'):l.push('<div class="l-box l-expandable-close"></div>'),o.checkbox&&(d.ischecked?l.push('<div class="l-box l-checkbox l-checkbox-checked"></div>'):l.push('<div class="l-box l-checkbox l-checkbox-unchecked"></div>')),o.parentIcon&&(l.push('<div class="l-box l-tree-icon '),l.push(a._getParentNodeClassName(g?!0:!1)+" "),o.iconFieldName&&d[o.iconFieldName]?l.push("l-tree-icon-none"):o.iconClsFieldName&&d[o.iconClsFieldName]&&l.push("l-tree-icon-"+d[o.iconClsFieldName]+" "),l.push('">'),o.iconFieldName&&d[o.iconFieldName]&&l.push('<img src="'+d[o.iconFieldName]+'" />'),l.push("</div>"))):(u?l.push('<div class="l-box l-note-last"></div>'):l.push('<div class="l-box l-note"></div>'),o.checkbox&&(d.ischecked?l.push('<div class="l-box l-checkbox l-checkbox-checked"></div>'):l.push('<div class="l-box l-checkbox l-checkbox-unchecked"></div>')),o.childIcon&&(l.push('<div class="l-box l-tree-icon '),l.push(a._getChildNodeClassName()+" "),o.iconFieldName&&d[o.iconFieldName]?l.push("l-tree-icon-none"):o.iconClsFieldName&&d[o.iconClsFieldName]&&l.push("l-tree-icon-"+d[o.iconClsFieldName]+" "),l.push('">'),o.iconFieldName&&d[o.iconFieldName]&&l.push('<img src="'+d[o.iconFieldName]+'" />'),l.push("</div>"))),o.render?l.push("<span>"+o.render(d,d[o.textFieldName])+"</span>"):l.push("<span>"+d[o.textFieldName]+"</span>"),l.push("</div>"),a.hasChildren(d)){for(var v=[],f=0;f<r.length;f++)v.push(r[f]);v.push(u),h?1==h?a.toggleNodeCallbacks.push({data:d,callback:function(t,r){var n=a._getTreeHTMLByData(r.children,i+1,v,g).join("");e(t).append(n),e(">.l-children .l-body",t).hover(function(){e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),a._removeToggleNodeCallback(r)}}):h.url&&!function(t,i,r){a.toggleNodeCallbacks.push({data:t,callback:function(t,n){a.loadData(t,i,r,{showLoading:function(){e("div.l-expandable-close:first",t).addClass("l-box-loading")},hideLoading:function(){e("div.l-box-loading:first",t).removeClass("l-box-loading")}}),a._removeToggleNodeCallback(n)}})}(d,h.url,h.parms):l.push(a._getTreeHTMLByData(d.children,i+1,v,g).join(""))}l.push("</li>")}return l.push("</ul>"),l},_removeToggleNodeCallback:function(e){for(var t=this,i=(this.options,0);i<=t.toggleNodeCallbacks.length;i++)if(t.toggleNodeCallbacks[i]&&t.toggleNodeCallbacks[i].data==e){t.toggleNodeCallbacks.splice(i,1);break}},_getDataByTreeHTML:function(t){var i=this,r=this.options,n=[];return e("> li",t).each(function(t,a){var o=n.length;n[o]={treedataindex:i.treedataindex++},n[o][r.textFieldName]=e("> span,> a",this).html();for(var l=0;l<i.sysAttribute.length;l++)e(this).attr(i.sysAttribute[l])&&(n[o][i.sysAttribute[l]]=e(this).attr(i.sysAttribute[l]));for(var l=0;l<r.attribute.length;l++)e(this).attr(r.attribute[l])&&(n[o][r.attribute[l]]=e(this).attr(r.attribute[l]));e("> ul",this).length>0&&(n[o].children=i._getDataByTreeHTML(e("> ul",this)))}),n},_applyTree:function(){var t=this;this.options;t.data=t._getDataByTreeHTML(t.tree);var i=t._getTreeHTMLByData(t.data,1,[],!0);i[i.length-1]=i[0]="",t.tree.html(i.join("")),t._upadteTreeWidth(),e(".l-body",t.tree).hover(function(){e(this).addClass("l-over")},function(){e(this).removeClass("l-over")})},_getSrcElementByEvent:function(t){var i=this,r=t.target||t.srcElement,n=r.tagName.toLowerCase(),a=e(r).parents().add(r),o=function(t){for(var i=a.length-1;i>=0;i--)if(e(a[i]).hasClass(t))return a[i];return null};if(-1==a.index(this.element))return{out:!0};var l={tree:o("l-tree"),node:o("l-body"),checkbox:o("l-checkbox"),icon:o("l-tree-icon"),text:"span"==n};if(l.node){var s=parseInt(e(l.node).parent().attr("treedataindex"));l.data=i._getDataNodeByTreeDataIndex(i.data,s)}return l},_setTreeEven:function(){var t=this,i=this.options;t.hasBind("contextmenu")&&t.tree.bind("contextmenu",function(i){var r=i.target||i.srcElement,n=null;if("a"==r.tagName.toLowerCase()||"span"==r.tagName.toLowerCase()||e(r).hasClass("l-box")?n=e(r).parent().parent():e(r).hasClass("l-body")?n=e(r).parent():"li"==r.tagName.toLowerCase()&&(n=e(r)),n){var a=parseInt(n.attr("treedataindex")),o=t._getDataNodeByTreeDataIndex(t.data,a);return t.trigger("contextmenu",[{data:o,target:n[0]},i])}}),t.tree.click(function(r){var n=r.target||r.srcElement,a=null;if(a="a"==n.tagName.toLowerCase()||"span"==n.tagName.toLowerCase()||e(n).hasClass("l-box")?e(n).parent().parent():e(n).hasClass("l-body")?e(n).parent():e(n)){var o=parseInt(a.attr("treedataindex")),l=t._getDataNodeByTreeDataIndex(t.data,o),s=e("div.l-body:first",a).find("div.l-expandable-open:first,div.l-expandable-close:first"),d=e(n).hasClass("l-expandable-open")||e(n).hasClass("l-expandable-close");if(!e(n).hasClass("l-checkbox")&&!d&&!a.hasClass("l-unselectable"))if(e(">div:first",a).hasClass("l-selected")&&i.needCancel){if(0==t.trigger("beforeCancelSelect",[{data:l,target:a[0]}]))return!1;e(">div:first",a).removeClass("l-selected"),t.trigger("cancelSelect",[{data:l,target:a[0]}])}else{if(0==t.trigger("beforeSelect",[{data:l,target:a[0]}]))return!1;e(".l-body",t.tree).removeClass("l-selected"),e(">div:first",a).addClass("l-selected"),t.trigger("select",[{data:l,target:a[0]}])}if(e(n).hasClass("l-checkbox"))i.autoCheckboxEven?(e(n).hasClass("l-checkbox-unchecked")?(e(n).removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked"),e(".l-children .l-checkbox",a).removeClass("l-checkbox-incomplete l-checkbox-unchecked").addClass("l-checkbox-checked"),t.trigger("check",[{data:l,target:a[0]},!0])):e(n).hasClass("l-checkbox-checked")?(e(n).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"),e(".l-children .l-checkbox",a).removeClass("l-checkbox-incomplete l-checkbox-checked").addClass("l-checkbox-unchecked"),t.trigger("check",[{data:l,target:a[0]},!1])):e(n).hasClass("l-checkbox-incomplete")&&(e(n).removeClass("l-checkbox-incomplete").addClass("l-checkbox-checked"),e(".l-children .l-checkbox",a).removeClass("l-checkbox-incomplete l-checkbox-unchecked").addClass("l-checkbox-checked"),t.trigger("check",[{data:l,target:a[0]},!0])),t._setParentCheckboxStatus(a)):e(n).hasClass("l-checkbox-unchecked")?(e(n).removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked"),i.single&&e(".l-checkbox",t.tree).not(n).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"),t.trigger("check",[{data:l,target:a[0]},!0])):e(n).hasClass("l-checkbox-checked")&&(e(n).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"),t.trigger("check",[{data:l,target:a[0]},!1]));else if(!s.hasClass("l-expandable-open")||i.btnClickToToggleOnly&&!d){if(s.hasClass("l-expandable-close")&&(!i.btnClickToToggleOnly||d)){if(0==t.trigger("beforeExpand",[{data:l,target:a[0]}]))return!1;e(t.toggleNodeCallbacks).each(function(){this.data==l&&this.callback(a[0],l)}),s.removeClass("l-expandable-close").addClass("l-expandable-open");var c=function(){t.trigger("expand",[{data:l,target:a[0]}])};i.slide?e("> .l-children",a).slideToggle("fast",c):(e("> .l-children",a).show(),c()),e("> div ."+t._getParentNodeClassName(),a).removeClass(t._getParentNodeClassName()).addClass(t._getParentNodeClassName(!0))}}else{if(0==t.trigger("beforeCollapse",[{data:l,target:a[0]}]))return!1;s.removeClass("l-expandable-open").addClass("l-expandable-close"),i.slide?e("> .l-children",a).slideToggle("fast"):e("> .l-children",a).hide(),e("> div ."+t._getParentNodeClassName(!0),a).removeClass(t._getParentNodeClassName(!0)).addClass(t._getParentNodeClassName()),t.trigger("collapse",[{data:l,target:a[0]}])}t.trigger("click",[{data:l,target:a[0]}])}}),e.fn.ligerDrag&&i.nodeDraggable&&(t.nodeDroptip=e("<div class='l-drag-nodedroptip' style='display:none'></div>").appendTo("body"),t.tree.ligerDrag({revert:!0,animate:!1,proxyX:20,proxyY:20,proxy:function(r,n){var a=t._getSrcElementByEvent(n);if(a.node){var o="dragging";if(i.nodeDraggingRender)o=i.nodeDraggingRender(r.draggingNodes,r,t);else{o="";var l=!1;for(var s in r.draggingNodes){var d=r.draggingNodes[s];l&&(o+=","),o+=d.text,l=!0}}var c=e("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div>"+o+"</div>").appendTo("body");return c}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),t.children[this.id]=this},onStartDrag:function(e,r){if(2==r.button)return!1;this.set("cursor","default");var n=t._getSrcElementByEvent(r);if(n.checkbox)return!1;if(i.checkbox){var a=t.getChecked();this.draggingNodes=[];for(var o in a)this.draggingNodes.push(a[o].data);if(!this.draggingNodes||!this.draggingNodes.length)return!1}else this.draggingNodes=[n.data];this.draggingNode=n.data,this.set("cursor","move"),t.nodedragging=!0,this.validRange={top:t.tree.offset().top,bottom:t.tree.offset().top+t.tree.height(),left:t.tree.offset().left,right:t.tree.offset().left+t.tree.width()}},onDrag:function(i,r){var n=this.draggingNode;if(!n)return!1;var a=this.draggingNodes?this.draggingNodes:[n];null==t.nodeDropIn&&(t.nodeDropIn=-1);var o=r.pageX,l=r.pageY,s=!1,d=this.validRange;if(o<d.left||o>d.right||l>d.bottom||l<d.top)return t.nodeDropIn=-1,t.nodeDroptip.hide(),void this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes l-drop-add").addClass("l-drop-no");for(var c=0,u=t.nodes.length;u>c;c++){var h=t.nodes[c],g=h.treedataindex;if(n.treedataindex==g&&(s=!0),-1==e.inArray(h,a)){var p=s?!0:!1;if(-1==t.nodeDropIn||t.nodeDropIn==g){var f=e("li[treedataindex="+g+"] div:first",t.tree),v=f.offset(),m={top:v.top,bottom:v.top+f.height(),left:t.tree.offset().left,right:t.tree.offset().left+t.tree.width()};if(o>m.left&&o<m.right&&l>m.top&&l<m.bottom){var b=v.top;p&&(b+=f.height()),t.nodeDroptip.css({left:m.left,top:b,width:m.right-m.left}).show(),t.nodeDropIn=g,t.nodeDropDir=p?"bottom":"top",l>m.top+7&&l<m.bottom-7?(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-yes").addClass("l-drop-add"),t.nodeDroptip.hide(),t.nodeDropInParent=!0):(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-add").addClass("l-drop-yes"),t.nodeDroptip.show(),t.nodeDropInParent=!1);break}-1!=t.nodeDropIn&&(t.nodeDropIn=-1,t.nodeDropInParent=!1,t.nodeDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes  l-drop-add").addClass("l-drop-no"))}}}},onStopDrag:function(i,r){var n=this.draggingNodes;if(t.nodedragging=!1,-1!=t.nodeDropIn){for(var a=0;a<n.length;a++){var o=n[a].children;o&&(n=e.grep(n,function(t,i){var r=-1==e.inArray(t,o);return r}))}for(var a in n){var l=n[a];t.nodeDropInParent?(t.remove(l),t.append(t.nodeDropIn,[l])):(t.remove(l),t.append(t.getParent(t.nodeDropIn),[l],t.nodeDropIn,"bottom"==t.nodeDropDir))}t.nodeDropIn=-1}t.nodeDroptip.hide(),this.set("cursor","default")}}))},_setParentCheckboxStatus:function(t){var i=this,r=this.options,n=0==e(".l-checkbox-unchecked",t.parent()).length,a=0==e(".l-checkbox-checked",t.parent()).length;a?t.parent().prev().find("> .l-checkbox").removeClass("l-checkbox-checked l-checkbox-incomplete").addClass("l-checkbox-unchecked"):n||!r.enabledCompleteCheckbox?t.parent().prev().find(".l-checkbox").removeClass("l-checkbox-unchecked l-checkbox-incomplete").addClass("l-checkbox-checked"):t.parent().prev().find("> .l-checkbox").removeClass("l-checkbox-unchecked l-checkbox-checked").addClass("l-checkbox-incomplete"),t.parent().parent("li").length>0&&i._setParentCheckboxStatus(t.parent().parent("li"))}})}(jQuery),define("ligerui.ligerTree",["jquery","ligerui.all","ligerui.base","ligerui.inject","ligerui.ligerResizable"],function(){}),function(e){e.fn.ligerComboBox=function(t){return e.ligerui.run.call(this,"ligerComboBox",arguments)},e.fn.ligerGetComboBoxManager=function(){return e.ligerui.run.call(this,"ligerGetComboBoxManager",arguments)},e.ligerDefaults.ComboBox={resize:!0,isMultiSelect:!1,isShowCheckBox:!1,columns:null,width:null,selectBoxWidth:null,selectBoxHeight:120,selectBoxPosYDiff:-3,onBeforeSelect:!1,onAfterShowData:null,onSelected:null,initValue:null,value:null,initText:null,valueField:"id",textField:"text",dataParmName:null,valueFieldID:null,ajaxComplete:null,ajaxBeforeSend:null,ajaxContentType:null,slide:!1,split:";",data:null,dataGetter:null,tree:null,treeLeafOnly:!0,condition:null,grid:null,onStartResize:null,onEndResize:null,hideOnLoseFocus:!0,hideGridOnLoseFocus:!1,url:null,urlParms:null,selectBoxRender:null,selectBoxRenderUpdate:null,detailEnabled:!0,detailUrl:null,detailPostIdField:null,detailDataParmName:null,detailParms:null,detailDataGetter:null,delayLoad:!1,triggerToLoad:!1,emptyText:null,addRowButton:"æ°å¢",addRowButtonClick:null,triggerIcon:null,onSuccess:null,onBeforeSetData:null,onError:null,onBeforeOpen:null,onButtonClick:null,onTextBoxKeyDown:null,onTextBoxKeyEnter:null,render:null,absolute:!0,cancelable:!0,css:null,parms:null,renderItem:null,autocomplete:!1,autocompleteAllowEmpty:!0,isTextBoxMode:!1,highLight:!1,readonly:!1,ajaxType:"post",alwayShowInTop:!1,alwayShowInDown:!1,valueFieldCssClass:null,isRowReadOnly:null,rowClsRender:null,keySupport:!1,initIsTriggerEvent:!1,conditionSearchClick:null,onChangeValue:null,delayLoadGrid:!0,setTextBySource:!0},e.ligerDefaults.ComboBoxString={Search:"æç´¢"},e.ligerMethos.ComboBox=e.ligerMethos.ComboBox||{},e.ligerui.controls.ComboBox=function(t,i){e.ligerui.controls.ComboBox.base.constructor.call(this,t,i)},e.ligerui.controls.ComboBox.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"ComboBox"},_extendMethods:function(){return e.ligerMethos.ComboBox},_init:function(){e.ligerui.controls.ComboBox.base._init.call(this);var t=this.options;t.columns&&(t.isShowCheckBox=!0),t.isMultiSelect&&(t.isShowCheckBox=!0),t.triggerToLoad&&(t.delayLoad=!0)},_render:function(){var t=this,i=this.options;t.data=i.data,t.inputText=null,t.select=null,t.textFieldID="",t.valueFieldID="",t.valueField=null,e(this.element).is(":hidden")?(t.valueField=e(this.element),t.textFieldID=i.textFieldID||this.element.id+"_txt",t.inputText=e('<input type="text" readonly="true"/>'),t.inputText.attr("id",t.textFieldID).insertAfter(e(this.element)),t.valueField.attr("validate")&&(t.inputText.attr("validate",t.valueField.attr("validate")),t.valueField.removeAttr("validate")),t.valueField.attr("validateMessage")&&(t.inputText.attr("validateMessage",t.valueField.attr("validateMessage")),t.valueField.removeAttr("validateMessage"))):"input"==this.element.tagName.toLowerCase()?(this.element.readOnly=!0,t.inputText=e(this.element),t.textFieldID=this.element.id):"select"==this.element.tagName.toLowerCase()&&(e(this.element).hide(),t.select=e(this.element),i.isMultiSelect=!1,i.isShowCheckBox=!1,i.cancelable=!1,t.textFieldID=i.textFieldID||this.element.id+"_txt",t.inputText=e('<input type="text" readonly="true"/>'),t.inputText.attr("id",t.textFieldID).insertAfter(e(this.element)),t.select.attr("validate")&&(t.inputText.attr("validate",t.select.attr("validate")),t.select.removeAttr("validate")),t.select.attr("validateMessage")&&(t.inputText.attr("validateMessage",t.select.attr("validateMessage")),t.select.removeAttr("validateMessage")),!i.value&&this.element.value&&(i.value=this.element.value)),void 0==t.inputText[0].name&&(t.inputText[0].name=t.textFieldID),t.inputText.attr("data-comboboxid",t.id),null==t.valueField&&(i.valueFieldID?(t.valueField=e("#"+i.valueFieldID+":input,[name="+i.valueFieldID+"]:input").filter("input:hidden"),0==t.valueField.length&&(t.valueField=e('<input type="hidden"/>')),t.valueField[0].id=t.valueField[0].name=i.valueFieldID):(t.valueField=e('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.textFieldID+"_val")),i.valueFieldCssClass&&t.valueField.addClass(i.valueFieldCssClass),void 0==t.valueField[0].name&&(t.valueField[0].name=t.valueField[0].id),null!=i.initValue&&(t.valueField[0].value=i.initValue),t.valueField.attr("data-ligerid",t.id),t.link=e('<div class="l-trigger"><div class="l-trigger-icon"></div></div>'),i.triggerIcon&&t.link.find("div:first").addClass(i.triggerIcon),t.selectBox=e('<div class="l-box-select" style="display:none"><div class="l-box-select-inner"><table cellpadding="0" cellspacing="0" border="0" class="l-box-select-table"></table></div></div>'),t.selectBox.table=e("table:first",t.selectBox),t.selectBoxInner=t.selectBox.find(".l-box-select-inner:first"),t.wrapper=t.inputText.wrap('<div class="l-text l-text-combobox"></div>').parent(),t.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),t.wrapper.append(t.link),t.textwrapper=t.wrapper.wrap('<div class="l-text-wrapper"></div>').parent(),i.absolute?t.selectBox.appendTo("body").addClass("l-box-select-absolute"):t.textwrapper.append(t.selectBox),t.textwrapper.append(t.valueField),t.inputText.addClass("l-text-field"),i.isShowCheckBox&&!t.select?e("table",t.selectBox).addClass("l-table-checkbox"):(i.isShowCheckBox=!1,e("table",t.selectBox).addClass("l-table-nocheckbox")),t.link.hover(function(){i.disabled||i.readonly||(this.className="l-trigger-hover")},function(){i.disabled||i.readonly||(this.className="l-trigger")}).mousedown(function(){i.disabled||i.readonly||(this.className="l-trigger-pressed")}).mouseup(function(){i.disabled||i.readonly||(this.className="l-trigger-hover")}).click(function(){return i.disabled||i.readonly?void 0:0==t.trigger("buttonClick")?!1:0==t.trigger("beforeOpen")?!1:void(i.triggerToLoad&&!t.triggerLoaded?(t.triggerLoaded=!0,t._setUrl(i.url,function(){t._toggleSelectBox(t.selectBox.is(":visible"))})):t._toggleSelectBox(t.selectBox.is(":visible")))}),t.inputText.click(function(){return i.disabled||i.readonly?void 0:0==t.trigger("beforeOpen")?!1:void(i.autocomplete?t.updateSelectBoxPosition():i.triggerToLoad&&!t.triggerLoaded?(t.triggerLoaded=!0,t._setUrl(i.url,function(){t._toggleSelectBox(t.selectBox.is(":visible"))})):t._toggleSelectBox(t.selectBox.is(":visible")))}).blur(function(){i.disabled||t.wrapper.removeClass("l-text-focus")}).focus(function(){i.disabled||i.readonly||t.wrapper.addClass("l-text-focus")}).change(function(){t.trigger("changeValue",[this.value])}),t.wrapper.hover(function(){i.disabled||i.readonly||t.wrapper.addClass("l-text-over")},function(){i.disabled||i.readonly||t.wrapper.removeClass("l-text-over")}),t.resizing=!1,t.selectBox.hover(null,function(e){i.hideOnLoseFocus&&t.selectBox.is(":visible")&&!t.boxToggling&&!t.resizing&&t._toggleSelectBox(!0)}),t.bulidContent(),t.set(i,null,"init"),i.selectBoxWidth?t.selectBox.width(i.selectBoxWidth):t.selectBox.css("width",t.wrapper.css("width")),i.grid&&(i.delayLoadGrid?t.bind("show",function(){t.grid||(t.setGrid(i.grid),t.set("SelectBoxHeight",i.selectBoxHeight))}):t.grid||(t.setGrid(i.grid),t.set("SelectBoxHeight",i.selectBoxHeight))),t.updateSelectBoxPosition(),e(document).bind("click.combobox",function(i){t.selectBox.is(":visible")&&0==e(i.target||i.srcElement).closest(".l-box-select, .l-text-combobox").length&&t._toggleSelectBox(!0)})},destroy:function(){this.wrapper&&this.wrapper.remove(),this.selectBox&&this.selectBox.remove(),this.options=null,e.ligerui.remove(this)},clear:function(){this._changeValue("",""),e("a.l-checkbox-checked",this.selectBox).removeClass("l-checkbox-checked"),e("td.l-selected",this.selectBox).removeClass("l-selected"),e(":checkbox",this.selectBox).each(function(){this.checked=!1}),this.trigger("clear")},_setSelectBoxHeight:function(t){if(t){var i=this,r=this.options;if(r.grid)i.grid&&i.grid.set("height",i.getGridHeight(t));else if(r.tree)i.selectBoxInner.height(r.selectBoxHeight);else{var n=e("tr",i.selectBox.table).length;!r.selectBoxHeight&&8>n&&(r.selectBoxHeight=30*n),r.selectBoxHeight&&(8>n?i.selectBoxInner.height("auto"):i.selectBoxInner.height(r.selectBoxHeight))}}},_setCss:function(e){e&&this.wrapper.addClass(e)},_setCancelable:function(t){var i=this,r=this.options;!t&&i.unselect&&(i.unselect.remove(),i.unselect=null),(t||i.unselect)&&(i.unselect=e('<div class="l-trigger l-trigger-cancel"><div class="l-trigger-icon"></div></div>').hide(),i.wrapper.hover(function(){i.unselect.show()},function(){i.unselect.hide()}),r.disabled||r.readonly||!r.cancelable||i.wrapper.append(i.unselect),i.unselect.hover(function(){this.className="l-trigger-hover l-trigger-cancel"},function(){this.className="l-trigger l-trigger-cancel"}).click(function(){i.clear()}))},_setDisabled:function(e){e?this.wrapper.addClass("l-text-disabled"):this.wrapper.removeClass("l-text-disabled")},_setReadonly:function(e){e?this.wrapper.addClass("l-text-readonly"):this.wrapper.removeClass("l-text-readonly")},_setLable:function(t){var i=this,r=this.options;t&&(i.labelwrapper?i.labelwrapper.find(".l-text-label:first").html(t+":&nbsp"):(i.labelwrapper=i.textwrapper.wrap('<div class="l-labeltext"></div>').parent(),i.labelwrapper.prepend('<div class="l-text-label" style="float:left;display:inline;">'+t+":&nbsp</div>"),i.textwrapper.css("float","left")),r.labelWidth?e(".l-text-label",i.labelwrapper).outerWidth(r.labelWidth):r.labelWidth=e(".l-text-label",i.labelwrapper).outerWidth(),e(".l-text-label",i.labelwrapper).width(r.labelWidth),e(".l-text-label",i.labelwrapper).height(i.wrapper.height()),i.labelwrapper.append('<br style="clear:both;" />'),r.labelAlign&&e(".l-text-label",i.labelwrapper).css("text-align",r.labelAlign),i.textwrapper.css({display:"inline"}),i.labelwrapper.width(i.wrapper.outerWidth()+r.labelWidth+2))},_setWidth:function(e){var t=this,i=this.options;e>20&&(t.wrapper.css({width:e}),t.inputText.css({width:e-14}),i.selectBoxWidth||t.selectBox.css({width:e}))},_setHeight:function(e){var t=this;e>10&&(t.wrapper.height(e),t.inputText.height(e-2))},_setResize:function(t){var i=this,r=this.options;if(!r.columns&&t&&e.fn.ligerResizable){var n=r.selectBoxHeight?"e":"se,s,e";i.selectBox.ligerResizable({handles:n,onStartResize:function(){i.resizing=!0,i.trigger("startResize")},onEndResize:function(){return i.resizing=!1,0==i.trigger("endResize")?!1:void 0},onStopResize:function(e,t){return i.grid?(e.newWidth&&i.selectBox.width(e.newWidth),e.newHeight&&i.set({selectBoxHeight:e.newHeight}),i.grid.refreshSize(),i.trigger("endResize"),!1):!0}}),i.selectBox.append("<div class='l-btn-nw-drop'></div>")}},findTextByValue:function(t){var i=this,r=this.options;if(null==t)return"";var n,a="",o=function(e){for(var i=t.toString().split(r.split),n=0;n<i.length;n++)if(i[n]==e&&""!=i[n])return!0;return!1};return n=i.options.grid&&i.options.grid.data?i.options.grid.data.Rows:i.data,e(n).each(function(e,t){var i=t[r.valueField],n=t[r.textField];o(i)&&(a+=n+r.split)}),a.length>0&&(a=a.substr(0,a.length-1)),a},findValueByText:function(t){var i=this,r=this.options;if(!t&&""==t)return"";var n=function(e){for(var i=t.toString().split(r.split),n=0;n<i.length;n++)if(i[n]==e)return!0;return!1},a="";return e(i.data).each(function(e,t){var i=t[r.valueField],o=t[r.textField];n(o)&&(a+=i+r.split)}),a.length>0&&(a=a.substr(0,a.length-1)),a},insertItem:function(e,t){var i=this;this.options;i.data=i.data||[],i.data.splice(t,0,e),i.setData(i.data)},addItem:function(e){var t=this;this.options;t.insertItem(e,(t.data||[]).length)},_setIsTextBoxMode:function(e){var t=this;this.options;e&&t.inputText.removeAttr("readonly")},_setValue:function(t,i){var r=this,n=this.options,a=!1,o=!0;if("init"==i&&(i=null,a=!0,o=n.initIsTriggerEvent?!0:!1),i=n.isTextBoxMode?t:i||r.findTextByValue(t),n.tree)setTimeout(function(){n.setTextBySource?r.selectValueByTree(t):r.treeSelectInit(t)},100);else if(n.isMultiSelect){if(r._changeValue(t,i,o),null!=t){var l=t.toString().split(n.split);e("table.l-table-checkbox :checkbox",r.selectBox).each(function(){this.checked=!1});for(var s=0;s<l.length;s++)e("table.l-table-checkbox tr[value="+l[s]+"] :checkbox",r.selectBox).each(function(){this.checked=!0,e("table.l-table-checkbox tr[value="+l[s]+"] a").addClass("l-checkbox-checked")})}}else r._changeValue(t,i,o),e("tr[value='"+t+"'] td",r.selectBox).addClass("l-selected"),e("tr[value!='"+t+"'] td",r.selectBox).removeClass("l-selected");n.selectBoxRenderUpdate&&n.selectBoxRenderUpdate.call(r,{selectBox:r.selectBox,value:t,text:i})},selectValue:function(e){this._setValue(e)},bulidContent:function(){var e=this,t=this.options;this.clearContent(),e.select?e.setSelect():t.tree&&e.setTree(t.tree)},reload:function(){var e=this,t=this.options;t.url?e.set("url",t.url):e.grid&&e.grid.reload()},_setUrl:function(t,i){if(t){var r=this,n=this.options;if(!n.readonly){if(n.delayLoad&&!r.isAccessDelay&&!r.triggerLoaded)return void(r.isAccessDelay=!0);t=e.isFunction(t)?t.call(r):t;var a=e.isFunction(n.urlParms)?n.urlParms.call(r):n.urlParms;if(a)for(name in a)t+=-1==t.indexOf("?")?"?":"&",t+=name+"="+a[name];var o=e.isFunction(n.parms)?n.parms.call(r):n.parms;"application/json"==n.ajaxContentType&&"string"!=typeof o&&(o=liger.toJSON(o));var l={type:n.ajaxType,url:t,data:o,cache:!1,dataType:"json",beforeSend:n.ajaxBeforeSend,complete:n.ajaxComplete,success:function(t){t.result.hasOwnProperty("success")&&t.result.hasOwnProperty("data")&&(t=t.result.data.hasOwnProperty("data")?t.result.data.data:t.result);var a=e.isFunction(n.dataGetter)?a=n.dataGetter.call(r,t):t;a=n.dataParmName&&a?a[n.dataParmName]:a,0!=r.trigger("beforeSetData",[a])&&(r.setData(a),r.trigger("success",[a]),e.isFunction(i)&&i(a))},error:function(e,t){r.trigger("error",[e,t])}};n.ajaxContentType&&(l.contentType=n.ajaxContentType),e.ajax(l)}}},setUrl:function(e,t){return this._setUrl(e,t)},setParm:function(e,t){if(e){var i=this,r=i.get("parms");r||(r={}),r[e]=t,i.set("parms",r)}},clearContent:function(){var t=this,i=this.options;t&&(e("table",t.selectBox).html(""),t&&t._setSelectBoxHeight(i.selectBoxHeight))},setSelect:function(){var t=this,i=this.options;this.clearContent(),t.data=[],e("option",t.select).each(function(i){var r=e(this).val(),n=e(this).html();t.data.push({text:n,id:r});var a=e("<tr><td index='"+i+"' value='"+r+"' text='"+n+"'>"+n+"</td>");e("table.l-table-nocheckbox",t.selectBox).append(a),e("td",a).hover(function(){e(this).addClass("l-over").siblings("td").removeClass("l-over")},function(){e(this).removeClass("l-over")})}),e("td:eq("+t.select[0].selectedIndex+")",t.selectBox).each(function(){if(e(this).hasClass("l-selected"))return void t.selectBox.hide();e(".l-selected",t.selectBox).removeClass("l-selected"),e(this).addClass("l-selected"),t.select[0].selectedIndex!=e(this).attr("index")&&t.select[0].onchange&&(t.select[0].selectedIndex=e(this).attr("index"),t.select[0].onchange());var r=parseInt(e(this).attr("index"));t.select[0].selectedIndex=r,t.select.trigger("change"),t.selectBox.hide();var n=e(this).attr("value"),a=e(this).html();i.render?t.inputText.val(i.render(n,a)):t.inputText.val(a)}),t._addClickEven()},_setData:function(e){this.setData(e)},getRowIndex:function(e){var t=this,i=this.options;if(!e)return-1;if(!t.data||!t.data.length)return-1;for(var r=0;r<t.data.length;r++)if(null!=t.data[r]){var n=t.data[r][i.valueField];if(n==e)return r}return-1},getRow:function(e){var t=this,i=this.options;if(!e)return null;if(!t.data||!t.data.length)return null;for(var r=0;r<t.data.length;r++)if(null!=t.data[r]){var n=t.data[r][i.valueField];if(n==e)return t.data[r]}return null},setData:function(t){var i=this,r=this.options;if(!i.select){if(r.selectBoxRender)return void r.selectBoxRender.call(i,{selectBox:i.selectBox,data:t});if(t&&t.length||(t=[]),i.data!=t&&(i.data=t),i.data=e.isFunction(i.data)?i.data():i.data,this.clearContent(),r.columns){i.selectBox.table.headrow=e("<tr class='l-table-headerow'><td width='18px'></td></tr>"),i.selectBox.table.append(i.selectBox.table.headrow),i.selectBox.table.addClass("l-box-select-grid");for(var n=0;n<r.columns.length;n++){var a=e("<td columnindex='"+n+"' columnname='"+r.columns[n].name+"'>"+r.columns[n].header+"</td>");r.columns[n].width&&a.width(r.columns[n].width),i.selectBox.table.headrow.append(a)}}var o=[];r.emptyText&&(i.emptyRow={},i.emptyRow[r.textField]=r.emptyText,i.emptyRow[r.valueField]=void 0!=r.emptyValue?r.emptyValue:"",t.splice(0,0,i.emptyRow));for(var l=0;l<t.length;l++){var s=t[l][r.valueField],d=t[l][r.textField],c=e.isFunction(r.isRowReadOnly)?r.isRowReadOnly(t[l]):!1;if(r.columns){o.push("<tr value='"+s+"'"),c&&o.push(" class='rowreadonly'"),o.push(">"),o.push("<td style='width:18px;'  index='"+l+"' value='"+s+"' text='"+d+"' ><input type='checkbox' /></td>");for(var n=0;n<r.columns.length;n++){var u=r.columns[n].name;o.push("<td>"+t[l][u]+"</td>")}o.push("</tr>")}else{o.push("<tr value='"+s+"'");var h=[];c&&h.push(" rowreadonly "),e.isFunction(r.rowClsRender)&&h.push(r.rowClsRender(t[l])),
h.length&&(o.push(" class='"),o.push(h.join("")),o.push("'")),o.push(">"),r.isShowCheckBox&&o.push("<td style='width:18px;'  index='"+l+"' value='"+s+"' text='"+d+"' ><input type='checkbox' /></td>");var g=d;g=r.renderItem?r.renderItem.call(i,{data:t[l],value:s,text:d,key:i.inputText.val()}):r.autocomplete&&r.highLight?i._highLight(d,i.inputText.val()):"<span>"+g+"</span>",o.push("<td index='"+l+"' value='"+s+"' text='"+d+"' align='left'>"+g+"</td></tr>")}}r.columns?i.selectBox.table.append(o.join("")):r.isShowCheckBox?e("table.l-table-checkbox",i.selectBox).append(o.join("")):e("table.l-table-nocheckbox",i.selectBox).append(o.join("")),r.addRowButton&&r.addRowButtonClick&&!i.addRowButton&&(i.addRowButton=e('<div class="l-box-select-add"><a href="javascript:void(0)" class="link"><div class="icon"></div></a></div>'),i.addRowButton.find(".link").append(r.addRowButton).click(r.addRowButtonClick),i.selectBoxInner.after(i.addRowButton)),i.set("selectBoxHeight",r.selectBoxHeight),r.isShowCheckBox&&e.fn.ligerCheckBox&&e("table input:checkbox",i.selectBox).ligerCheckBox(),e(".l-table-checkbox input:checkbox",i.selectBox).change(function(){if(this.checked&&i.hasBind("beforeSelect")){var t=null;if(t="div"==e(this).parent().get(0).tagName.toLowerCase()?e(this).parent().parent():e(this).parent(),null!=t&&0==i.trigger("beforeSelect",[t.attr("value"),t.attr("text")]))return i.selectBox.slideToggle("fast"),!1}r.isMultiSelect||this.checked&&(e("input:checked",i.selectBox).not(this).each(function(){this.checked=!1,e(".l-checkbox-checked",e(this).parent()).removeClass("l-checkbox-checked")}),i.selectBox.slideToggle("fast")),i._checkboxUpdateValue()}),e("table.l-table-nocheckbox td",i.selectBox).hover(function(){e(this).parent().hasClass("rowreadonly")||e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),i._addClickEven(),r.autocomplete||i.updateStyle(),i.trigger("afterShowData",[t])}},setTree:function(t){var i=this,r=this.options;this.clearContent(),i.selectBox.table.remove(),0!=t.checkbox?t.onCheck=function(){var t=i.treeManager.getChecked(),n=[],a=[];e(t).each(function(e,t){r.treeLeafOnly&&t.data.children||(n.push(t.data[r.valueField]),a.push(t.data[r.textField]))}),i._changeValue(n.join(r.split),a.join(r.split),!0)}:(t.onSelect=function(e){if(!(0==i.trigger("BeforeSelect",[e])||r.treeLeafOnly&&e.data.children)){var t=e.data[r.valueField],n=e.data[r.textField];i._changeValue(t,n,!0),i.selectBox.hide()}},t.onCancelSelect=function(e){i._changeValue("","",!0)}),t.onAfterAppend=function(e,t){if(i.treeManager){var n=null;r.initValue?n=r.initValue:""!=i.valueField.val()&&(n=i.valueField.val()),i.selectValueByTree(n)}},i.tree=e("<ul></ul>"),e("div:first",i.selectBox).append(i.tree),i.innerTree=i.tree.ligerTree(t),i.treeManager=i.tree.ligerGetTreeManager()},getTree:function(){return this.innerTree},selectValueByTree:function(e){var t=this,i=this.options;if(null!=e){var r=t.treeSelectInit(e);t._changeValue(e,r,i.initIsTriggerEvent)}},treeSelectInit:function(t){var i=this,r=this.options;if(null!=t){var n="",a=t.toString().split(r.split);return e(a).each(function(e,t){i.treeManager.selectNode(t.toString(),!1),n+=i.treeManager.getTextByID(t),e<a.length-1&&(n+=r.split)}),n}},setGrid:function(t){var i=this,r=this.options;if(!i.grid){r.hideOnLoseFocus=r.hideGridOnLoseFocus?!0:!1,this.clearContent(),i.selectBox.addClass("l-box-select-lookup"),i.selectBox.table.remove();var n=e("div:first",i.selectBox),a=e("<div></div>").appendTo(n),o=e("<div></div>").appendTo(n);if(i.conditionPanel=a,r.condition){var l=e.extend({labelWidth:60,space:20,width:r.selectBoxWidth},r.condition);i.condition=a.ligerForm(l)}else a.remove();t=e.extend({columnWidth:120,alternatingRow:!1,frozen:!0,rownumbers:!0,allowUnSelectRow:!0},t,{width:"100%",height:i.getGridHeight(),inWindow:!1,parms:r.parms,isChecked:function(t){var n=i.getValue();return n&&r.valueField&&t[r.valueField]?-1!=e.inArray(t[r.valueField].toString(),n.split(r.split)):!1}}),i.grid=i.gridManager=o.ligerGrid(t),i.grid.bind("afterShowData",function(){i.updateSelectBoxPosition()});var s=[],d=function(){var n=[],a=[];e(s).each(function(e,t){n.push(t[r.valueField]),a.push(t[r.textField])}),t.checkbox?i.selected=s:s.length?i.selected=s[0]:i.selected=null,i._changeValue(n.join(r.split),a.join(r.split),!0),i.trigger("gridSelect",{value:n.join(r.split),text:a.join(r.split),data:s})},c=function(e){for(var t=s.length-1;t>=0;t--)s[t][r.valueField]==e[r.valueField]&&s.splice(t,1)},u=function(e){for(var t=s.length-1;t>=0;t--)if(s[t][r.valueField]==e[r.valueField])return;s.push(e)};if(t.checkbox){var h=function(e,t){e&&u(t),!e&&c(t)};i.grid.bind("CheckAllRow",function(t){e(i.grid.rows).each(function(e,i){h(t,i)}),d()}),i.grid.bind("CheckRow",function(e,t){h(e,t),d()})}else i.grid.bind("SelectRow",function(e){s=[e],d(),i._toggleSelectBox(!0)}),i.grid.bind("UnSelectRow",function(){s=[],d()});if(i.bind("show",function(){i.grid.refreshSize()}),i.bind("clear",function(){s=[],i.grid.selecteds=[],i.grid._showData()}),r.condition){var g=e('<li style="margin-right:9px"><div></div></li>'),p=e('<li style="margin-right:9px;float:right"><div></div></li>');e("ul:first",a).append(g).append(p).after('<div class="l-clear"></div>'),e("div",g).ligerButton({text:r.Search,width:40,click:function(){var n=i.condition.toConditions();r.conditionSearchClick?r.conditionSearchClick({grid:i.grid,rules:n}):i.grid.get("url")?(i.grid.setParm(t.conditionParmName||"condition",e.ligerui.toJSON(n)),i.grid.reload()):i.grid.loadData(e.ligerFilter.getFilterFunction(n))}}),e("div",p).ligerButton({text:"å³é­",width:40,click:function(){i.selectBox.hide()}})}i.grid.refreshSize()}},getGridHeight:function(e){var t=this;this.options;return e=e||t.selectBox.height(),e-=t.conditionPanel.height()},_getValue:function(){var t=this,i=this.options;return i.isTextBoxMode?t.inputText.val():e(this.valueField).val()},getValue:function(){return this._getValue()},getSelected:function(){return this.selected},upFocus:function(){var t=this;this.options;if(t.grid){if(!t.grid.rows||!t.grid.rows.length)return;var i=t.grid.getSelected();if(i){var r=e.inArray(i,t.grid.rows);r-1<t.grid.rows.length&&(t.grid.unselect(i),t.grid.select(t.grid.rows[r-1]))}else t.grid.select(t.grid.rows[0])}else{var n=t.selectBox.table.find("td.l-over").attr("index");if(void 0==n||"0"==n)return;n=parseInt(n)-1,t.selectBox.table.find("td.l-over").removeClass("l-over"),t.selectBox.table.find("td[index="+n+"]").addClass("l-over"),t._scrollAdjust(n)}},downFocus:function(){var t=this;this.options;if(t.grid){if(!t.grid.rows||!t.grid.rows.length)return;var i=t.grid.getSelected();if(i){var r=e.inArray(i,t.grid.rows);r+1<t.grid.rows.length&&(t.grid.unselect(i),t.grid.select(t.grid.rows[r+1]))}else t.grid.select(t.grid.rows[0])}else{var n=t.selectBox.table.find("td.l-over").attr("index");if(n==t.data.length-1)return;n=void 0==n?0:parseInt(n)+1,t.selectBox.table.find("td.l-over").removeClass("l-over"),t.selectBox.table.find("td[index="+n+"]").addClass("l-over"),t._scrollAdjust(n)}},_scrollAdjust:function(t){var i=this,r=(this.options,e(".l-box-select-inner",i.selectBox).height()),n=e(".l-box-select-inner table",i.selectBox).height();if(!(r>=n)){var a=(parseInt(n/r)+(n%r?1:0),n/i.data.length),o=parseInt((t+1)*a/r)+((t+1)*a%r?1:0);e(".l-box-select-inner",i.selectBox).scrollTop((o-1)*r)}},getText:function(){return this.inputText.val()},setText:function(e){var t=this,i=this.options;i.isTextBoxMode||t.inputText.val(e)},updateStyle:function(){var e=this,t=this.options;t.initValue=e._getValue(),e._dataInit()},_dataInit:function(){var t=this,i=this.options,r=null;if(null!=i.initValue&&null!=i.initText&&t._changeValue(i.initValue,i.initText),null!=i.initValue){if(r=i.initValue,i.tree)r&&t.selectValueByTree(r);else if(t.data){var n=t.findTextByValue(r);t._changeValue(r,n)}}else if(""!=t.valueField.val())if(r=t.valueField.val(),i.tree)r&&t.selectValueByTree(r);else if(t.data){var n=t.findTextByValue(r);t._changeValue(r,n)}i.isShowCheckBox?e(":checkbox",t.selectBox).each(function(){var t=null,n=e(this);if(t="div"==n.parent().get(0).tagName.toLowerCase()?n.parent().parent():n.parent(),null!=t){e(".l-checkbox",t).removeClass("l-checkbox-checked"),n[0].checked=!1;var a=(r||"").toString().split(i.split);e(a).each(function(i,a){null!=r&&a==t.attr("value")&&(e(".l-checkbox",t).addClass("l-checkbox-checked"),n[0].checked=!0)})}}):e("table tr",t.selectBox).find("td:first").each(function(){null!=r&&r==e(this).attr("value")?e(this).addClass("l-selected"):e(this).removeClass("l-selected")})},_changeValue:function(t,i,r){var n=this,a=this.options;n.valueField.val(t),a&&a.render?n.inputText.val(a.render(t,i)):n.inputText.val(i),n.select&&e("option",n.select).each(function(){e(this).attr("selected",e(this).attr("value")==t)}),n.selectedValue=t,n.selectedText=i,n.inputText.trigger("change"),r&&i&&n.inputText.focus();var o=null;if(t&&"string"==typeof t&&t.indexOf(a.split)>-1){o=[];var l=t.split(a.split);e(l).each(function(e,t){o.push(n.getRow(t))})}else t&&(o=n.getRow(t));r&&n.trigger("selected",[t,i,o])},_checkboxUpdateValue:function(){var t=this,i=this.options,r="",n="";e("input:checked",t.selectBox).each(function(){var t=null;t="div"==e(this).parent().get(0).tagName.toLowerCase()?e(this).parent().parent():e(this).parent(),t&&(r+=t.attr("value")+i.split,n+=t.attr("text")+i.split)}),r.length>0&&(r=r.substr(0,r.length-1)),n.length>0&&(n=n.substr(0,n.length-1)),t._changeValue(r,n)},loadDetail:function(t,i){var r=this,n=this.options,a=e.isFunction(n.detailParms)?n.detailParms.call(r):n.detailParms;a[n.detailPostIdField||"id"]=t,"application/json"==n.ajaxContentType&&(a=liger.toJSON(a));var o={type:n.ajaxType,url:n.detailUrl,data:a,cache:!0,dataType:"json",beforeSend:n.ajaxBeforeSend,complete:n.ajaxComplete,success:function(t){var r=e.isFunction(n.detailDataGetter)?n.detailDataGetter(t):t;r=n.detailDataParmName?r[n.detailDataParmName]:r,i&&i(r)}};n.ajaxContentType&&(o.contentType=n.ajaxContentType),e.ajax(o)},enabledLoadDetail:function(){var e=this.options;return e.detailUrl&&e.detailEnabled?!0:!1},_addClickEven:function(){var t=this,i=this.options;e(".l-table-nocheckbox td",t.selectBox).click(function(){function r(){return t.hasBind("beforeSelect")&&0==t.trigger("beforeSelect",[a,s,l])?(i.slide?t.selectBox.slideToggle("fast"):t.selectBox.hide(),!1):(t.selected=l,e(this).hasClass("l-selected")?void(i.slide?t.selectBox.slideToggle("fast"):t.selectBox.hide()):(e(".l-selected",t.selectBox).removeClass("l-selected"),n.addClass("l-selected"),t.select&&t.select[0].selectedIndex!=o&&(t.select[0].selectedIndex=o,t.select.trigger("change")),i.slide?(t.boxToggling=!0,t.selectBox.hide("fast",function(){t.boxToggling=!1})):t.selectBox.hide(),t.lastInputText=s,void t._changeValue(a,s,!0)))}var n=e(this),a=n.attr("value"),o=parseInt(e(this).attr("index")),l=t.data[o],s=n.attr("text"),d=n.parent().hasClass("rowreadonly");d||(t.enabledLoadDetail()?t.loadDetail(a,function(e){t.data[o]=l=e,r()}):r())})},updateSelectBoxPosition:function(){var t=this,i=this.options;if(i&&i.absolute){var r=e(document).height();i.alwayShowInTop||Number(t.wrapper.offset().top+1+t.wrapper.outerHeight()+t.selectBox.height())>r&&r>Number(t.selectBox.height()+1)?t.selectBox.css({left:t.wrapper.offset().left,top:t.wrapper.offset().top-1-t.selectBox.height()+(i.selectBoxPosYDiff||0)}):t.selectBox.css({left:t.wrapper.offset().left,top:t.wrapper.offset().top+1+t.wrapper.outerHeight()+(i.selectBoxPosYDiff||0)}),i.alwayShowInDown&&t.selectBox.css({left:t.wrapper.offset().left,top:t.wrapper.offset().top+1+t.wrapper.outerHeight()})}else{var n=t.wrapper.offset().top-e(window).scrollTop(),a=t.selectBox.height()+textHeight+4;n+a>e(window).height()&&n>a&&t.selectBox.css("marginTop",-1*(t.selectBox.height()+textHeight+5)+(i.selectBoxPosYDiff||0))}},_toggleSelectBox:function(t){var i=this,r=this.options;if(i&&r){for(var n=e.ligerui.find(e.ligerui.controls.ComboBox),a=0,o=n.length;o>a;a++){var l=n[a];l.id!=i.id&&null!=l.selectBox.is(":visible")&&l.selectBox.is(":visible")&&l.selectBox.hide()}n=e.ligerui.find(e.ligerui.controls.DateEditor);for(var a=0,o=n.length;o>a;a++){var l=n[a];l.id!=i.id&&null!=l.dateeditor.is(":visible")&&l.dateeditor.is(":visible")&&l.dateeditor.hide()}i.wrapper.height();if(i.boxToggling=!0,t)r.slide?i.selectBox.slideToggle("fast",function(){i.boxToggling=!1}):(i.selectBox.hide(),i.boxToggling=!1);else if(i.updateSelectBoxPosition(),r.slide)i.selectBox.slideToggle("fast",function(){if(i.boxToggling=!1,!r.isShowCheckBox&&e("td.l-selected",i.selectBox).length>0){var t=e("td.l-selected",i.selectBox).offset().top-i.selectBox.offset().top;e(".l-box-select-inner",i.selectBox).animate({scrollTop:t})}});else if(i._selectBoxShow(),i.boxToggling=!1,!i.tree&&!i.grid&&!r.isShowCheckBox&&e("td.l-selected",i.selectBox).length>0){var s=e("td.l-selected",i.selectBox).offset().top-i.selectBox.offset().top;e(".l-box-select-inner",i.selectBox).animate({scrollTop:s})}i.isShowed=i.selectBox.is(":visible"),i.trigger("toggle",[t]),i.trigger(t?"hide":"show")}},_selectBoxShow:function(){var e=this,t=this.options;if(!t.readonly)return t.grid||t.tree?void e.selectBox.show():void(e.selectBox.table.find("tr").length||t.selectBoxRender&&e.selectBoxInner.html()?e.selectBox.show():e.selectBox.hide())},_highLight:function(e,t){if(!e)return e;var i=e.indexOf(t);return-1==i?e:e.substring(0,i)+"<span class='l-highLight'>"+t+"</span>"+e.substring(t.length+i)},_setAutocomplete:function(t){var i=this,r=this.options;t&&(r.readonly||(i.inputText.removeAttr("readonly"),i.lastInputText=i.inputText.val(),i.inputText.keyup(function(n){38!=n.keyCode&&40!=n.keyCode&&13!=n.keyCode&&(this._acto&&clearTimeout(this._acto),this._acto=setTimeout(function(){if(i.lastInputText!=i.inputText.val()){var n=i.inputText.val();if(n?n=n.replace(/(^\s*)|(\s*$)/g,""):(r.initValue="",i.valueField.val("")),i.lastInputText=i.inputText.val(),e.isFunction(t))return void t.call(i,{key:n,show:function(){i._selectBoxShow()}});if(!r.autocompleteAllowEmpty&&!n)return i.clear(),void i.selectBox.hide();r.url?(i.setParm("key",n),i.setUrl(r.url,function(){i._selectBoxShow()})):r.grid&&(i.grid.setParm("key",n),i.grid.reload()),this._acto=null}},300))})))}}),e.ligerui.controls.ComboBox.prototype.setValue=e.ligerui.controls.ComboBox.prototype.selectValue,e.ligerui.controls.ComboBox.prototype.setInputValue=e.ligerui.controls.ComboBox.prototype._changeValue,function(){e(document).unbind("keydown.ligercombobox"),e(document).bind("keydown.ligercombobox",function(t){function i(){a.selectBox.is(":visible")||a.selectBox.show(),a.downFocus()}function r(){l?(a._changeValue(l[o.valueField],l[o.textField],!0),a.selectBox.hide(),a.trigger("textBoxKeyEnter",[{rowdata:l}])):(a._changeValue(d,s.attr("text"),!0),a.selectBox.hide(),a.trigger("textBoxKeyEnter",[{element:s.get(0)}]))}var n=e("input:focus");if(n.length&&n.attr("data-comboboxid")){var a=liger.get(n.attr("data-comboboxid"));if(!a)return;var o=a.options;if(!a.get("keySupport"))return;if(38==t.keyCode)a.upFocus();else if(40==t.keyCode)a.hasBind("textBoxKeyDown")?a.trigger("textBoxKeyDown",[{callback:function(){i()}}]):i();else if(13==t.keyCode){if(!a.selectBox.is(":visible"))return;var l=null;a.grid&&(l=a.grid.getSelected());var s=a.selectBox.table.find("td.l-over");if(l||s.length){var d=s.attr("value");l&&l.ID&&(d=l.ID),a.enabledLoadDetail()?a.loadDetail(d,function(e){if(!l){var t=a.getRowIndex(d);if(-1==t)return;a.data=a.data||[],a.data[t]=a.selected=e}r()}):r()}}}})}()}(jQuery),define("ligerui.ligerComboBox",["jquery","ligerui.all","ligerui.base","ligerui.inject","ligerui.ligerResizable","ligerui.ligerTree"],function(){}),define("page/user/userGrant",["jquery","Common","Constant","jquery.validate","messages_cn","ligerui.ligerGrid","ligerui.ligerComboBox"],function(e,t,i){var r=frameElement.dialog,n=null,a=function(){n=e("#role").ligerComboBox({width:e(".widget-box").width(),selectBoxWidth:e(".widget-box").width(),selectBoxHeight:120,isShowCheckBox:!0,isMultiSelect:!0,url:i.role.queryAll,parms:{user:"1",start:1,length:1e3},ajaxContentType:"application/json",valueField:"id",textField:"roleName",valueFieldID:"roleId",ajaxBeforeSend:function(t){var i=e("meta[name='_csrf_header']").attr("content"),r=e("meta[name='_csrf']").attr("content");t.setRequestHeader(i,r)},onSuccess:function(e){t.queryById(i.role.queryByUserId,{userId:r.get("data").id},function(e){for(var t=e.result.data,i=[],r=0;r<t.length;r++)i.push(t[r].id);n.selectValue(i.join(";"))})}})};return e("#form-wizard").validate({rules:{},errorClass:"help-inline",errorElement:"span",highlight:function(t,i,r){e(t).parents(".control-group").addClass("error")},unhighlight:function(t,i,r){e(t).parents(".control-group").removeClass("error"),e(t).parents(".control-group").addClass("success")},submitHandler:function(n){var a=e("#roleId").val();return t.isEmpty(a)?void t.warnMsg("å¿é¡»éæ©è³å°ä¸ä¸ªè§è²"):void t.saveData(i.user.grantRole,{id:r.get("data").id,roleIds:a.split(";")},function(e){t.successMsg("ä¿å­æå"),r.close()})}}),e("#bntCanel").click(function(){r.close()}),{init:a}});